(function(){var b=YAHOOAmp.util.Dom,a=YAHOOAmp.util.Event;YAHOOAmp.widget.MenuManager=function(){var n=false,f={},q={},j={},e={click:"clickEvent",mousedown:"mouseDownEvent",mouseup:"mouseUpEvent",mouseover:"mouseOverEvent",mouseout:"mouseOutEvent",keydown:"keyDownEvent",keyup:"keyUpEvent",keypress:"keyPressEvent"},k=null;function d(s){var r;if(s&&s.tagName){switch(s.tagName.toUpperCase()){case"DIV":r=s.parentNode;if((b.hasClass(s,"hd")||b.hasClass(s,"bd")||b.hasClass(s,"ft"))&&r&&r.tagName&&r.tagName.toUpperCase()=="DIV"){return r}else{return s}break;case"LI":return s;default:r=s.parentNode;if(r){return d(r)}break}}}function g(v){var r=a.getTarget(v),s=d(r),x,t,u,z,y;if(s){t=s.tagName.toUpperCase();if(t=="LI"){u=s.id;if(u&&j[u]){z=j[u];y=z.parent}}else{if(t=="DIV"){if(s.id){y=f[s.id]}}}}if(y){x=e[v.type];if(z&&!z.cfg.getProperty("disabled")){z[x].fire(v);if(v.type=="keyup"||v.type=="mousedown"){if(k!=z){if(k){k.blurEvent.fire()}z.focusEvent.fire()}}}y[x].fire(v,z)}else{if(v.type=="mousedown"){if(k){k.blurEvent.fire();k=null}for(var w in q){if(YAHOOAmp.lang.hasOwnProperty(q,w)){y=q[w];if(y.cfg.getProperty("clicktohide")&&!(y instanceof YAHOOAmp.widget.MenuBar)&&y.cfg.getProperty("position")=="dynamic"){y.hide()}else{if(y.cfg.getProperty("showdelay")>0){y._cancelShowDelay()}if(y.activeItem){y.activeItem.blur();y.activeItem.cfg.setProperty("selected",false);y.activeItem=null}}}}}else{if(v.type=="keyup"){if(k){k.blurEvent.fire();k=null}}}}}function p(s,r,t){if(f[t.id]){this.removeMenu(t)}}function m(s,r){var t=r[0];if(t){k=t}}function h(s,r){k=null}function c(t,s){var r=s[0],u=this.id;if(r){q[u]=this}else{if(q[u]){delete q[u]}}}function l(s,r){o(this)}function o(s){var r=s.id;if(r&&j[r]){if(k==s){k=null}delete j[r];s.destroyEvent.unsubscribe(l)}}function i(s,r){var u=r[0],t;if(u instanceof YAHOOAmp.widget.MenuItem){t=u.id;if(!j[t]){j[t]=u;u.destroyEvent.subscribe(l)}}}return{addMenu:function(s){var r;if(s instanceof YAHOOAmp.widget.Menu&&s.id&&!f[s.id]){f[s.id]=s;if(!n){r=document;a.on(r,"mouseover",g,this,true);a.on(r,"mouseout",g,this,true);a.on(r,"mousedown",g,this,true);a.on(r,"mouseup",g,this,true);a.on(r,"click",g,this,true);a.on(r,"keydown",g,this,true);a.on(r,"keyup",g,this,true);a.on(r,"keypress",g,this,true);n=true}s.cfg.subscribeToConfigEvent("visible",c);s.destroyEvent.subscribe(p,s,this);s.itemAddedEvent.subscribe(i);s.focusEvent.subscribe(m);s.blurEvent.subscribe(h)}},removeMenu:function(u){var s,r,t;if(u){s=u.id;if(f[s]==u){r=u.getItems();if(r&&r.length>0){t=r.length-1;do{o(r[t])}while(t--)}delete f[s];if(q[s]==u){delete q[s]}if(u.cfg){u.cfg.unsubscribeFromConfigEvent("visible",c)}u.destroyEvent.unsubscribe(p,u);u.itemAddedEvent.unsubscribe(i);u.focusEvent.unsubscribe(m);u.blurEvent.unsubscribe(h)}}},hideVisible:function(){var r;for(var s in q){if(YAHOOAmp.lang.hasOwnProperty(q,s)){r=q[s];if(!(r instanceof YAHOOAmp.widget.MenuBar)&&r.cfg.getProperty("position")=="dynamic"){r.hide()}}}},getVisible:function(){return q},getMenus:function(){return f},getMenu:function(s){var r=f[s];if(r){return r}},getMenuItem:function(r){var s=j[r];if(s){return s}},getMenuItemGroup:function(u){var s=b.get(u),r,w,v,t;if(s&&s.tagName&&s.tagName.toUpperCase()=="UL"){w=s.firstChild;if(w){r=[];do{t=w.id;if(t){v=this.getMenuItem(t);if(v){r[r.length]=v}}}while((w=w.nextSibling));if(r.length>0){return r}}}},getFocusedMenuItem:function(){return k},getFocusedMenu:function(){if(k){return(k.parent.getRoot())}},toString:function(){return"MenuManager"}}}()})();(function(){YAHOOAmp.widget.Menu=function(o,n){if(n){this.parent=n.parent;this.lazyLoad=n.lazyLoad||n.lazyload;this.itemData=n.itemData||n.itemdata}YAHOOAmp.widget.Menu.superclass.constructor.call(this,o,n)};function i(n){if(typeof n=="string"){return("dynamic,static".indexOf((n.toLowerCase()))!=-1)}}var c=YAHOOAmp.util.Dom,m=YAHOOAmp.util.Event,d=YAHOOAmp.widget.Module,b=YAHOOAmp.widget.Overlay,f=YAHOOAmp.widget.Menu,k=YAHOOAmp.widget.MenuManager,l=YAHOOAmp.util.CustomEvent,e=YAHOOAmp.lang,h=YAHOOAmp.env.ua,g,a={MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",CLICK:"click",KEY_PRESS:"keypress",KEY_DOWN:"keydown",KEY_UP:"keyup",FOCUS:"focus",BLUR:"blur",ITEM_ADDED:"itemAdded",ITEM_REMOVED:"itemRemoved"},j={VISIBLE:{key:"visible",value:false,validator:e.isBoolean},CONSTRAIN_TO_VIEWPORT:{key:"constraintoviewport",value:true,validator:e.isBoolean,supercedes:["iframe","x","y","xy"]},POSITION:{key:"position",value:"dynamic",validator:i,supercedes:["visible","iframe"]},SUBMENU_ALIGNMENT:{key:"submenualignment",value:["tl","tr"],suppressEvent:true},AUTO_SUBMENU_DISPLAY:{key:"autosubmenudisplay",value:true,validator:e.isBoolean,suppressEvent:true},SHOW_DELAY:{key:"showdelay",value:250,validator:e.isNumber,suppressEvent:true},HIDE_DELAY:{key:"hidedelay",value:0,validator:e.isNumber,suppressEvent:true},SUBMENU_HIDE_DELAY:{key:"submenuhidedelay",value:250,validator:e.isNumber,suppressEvent:true},CLICK_TO_HIDE:{key:"clicktohide",value:true,validator:e.isBoolean,suppressEvent:true},CONTAINER:{key:"container",suppressEvent:true},SCROLL_INCREMENT:{key:"scrollincrement",value:1,validator:e.isNumber,supercedes:["maxheight"],suppressEvent:true},MIN_SCROLL_HEIGHT:{key:"minscrollheight",value:90,validator:e.isNumber,supercedes:["maxheight"],suppressEvent:true},MAX_HEIGHT:{key:"maxheight",value:0,validator:e.isNumber,supercedes:["iframe"],suppressEvent:true},CLASS_NAME:{key:"classname",value:null,validator:e.isString,suppressEvent:true},DISABLED:{key:"disabled",value:false,validator:e.isBoolean,suppressEvent:true}};YAHOOAmp.lang.extend(f,b,{CSS_CLASS_NAME:"yuiampmenu",ITEM_TYPE:null,GROUP_TITLE_TAG_NAME:"h6",OFF_SCREEN_POSITION:[-10000,-10000],_nHideDelayId:null,_nShowDelayId:null,_nSubmenuHideDelayId:null,_nBodyScrollId:null,_bHideDelayEventHandlersAssigned:false,_bHandledMouseOverEvent:false,_bHandledMouseOutEvent:false,_aGroupTitleElements:null,_aItemGroups:null,_aListElements:null,_nCurrentMouseX:0,_bStopMouseEventHandlers:false,_sClassName:null,lazyLoad:false,itemData:null,activeItem:null,parent:null,srcElement:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,itemAddedEvent:null,itemRemovedEvent:null,init:function(p,o){this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOOAmp.widget.MenuItem}var n;if(typeof p=="string"){n=document.getElementById(p)}else{if(p.tagName){n=p}}if(n&&n.tagName){switch(n.tagName.toUpperCase()){case"DIV":this.srcElement=n;if(!n.id){n.setAttribute("id",c.generateId())}f.superclass.init.call(this,n);this.beforeInitEvent.fire(f);break;case"SELECT":this.srcElement=n;f.superclass.init.call(this,c.generateId());this.beforeInitEvent.fire(f);break}}else{f.superclass.init.call(this,p);this.beforeInitEvent.fire(f)}if(this.element){c.addClass(this.element,this.CSS_CLASS_NAME);this.initEvent.subscribe(this._onInit);this.beforeRenderEvent.subscribe(this._onBeforeRender);this.renderEvent.subscribe(this._onRender);this.renderEvent.subscribe(this.onRender);this.beforeShowEvent.subscribe(this._onBeforeShow);this.hideEvent.subscribe(this.positionOffScreen);this.showEvent.subscribe(this._onShow);this.beforeHideEvent.subscribe(this._onBeforeHide);this.mouseOverEvent.subscribe(this._onMouseOver);this.mouseOutEvent.subscribe(this._onMouseOut);this.clickEvent.subscribe(this._onClick);this.keyDownEvent.subscribe(this._onKeyDown);this.keyPressEvent.subscribe(this._onKeyPress);if(h.gecko||h.webkit){this.cfg.subscribeToConfigEvent("y",this._onYChange)}if(o){this.cfg.applyConfig(o,true)}k.addMenu(this);this.initEvent.fire(f)}},_initSubTree:function(){var o=this.srcElement,n,q,t,u,s,r,p;if(o){n=(o.tagName&&o.tagName.toUpperCase());if(n=="DIV"){u=this.body.firstChild;if(u){q=0;t=this.GROUP_TITLE_TAG_NAME.toUpperCase();do{if(u&&u.tagName){switch(u.tagName.toUpperCase()){case t:this._aGroupTitleElements[q]=u;break;case"UL":this._aListElements[q]=u;this._aItemGroups[q]=[];q++;break}}}while((u=u.nextSibling));if(this._aListElements[0]){c.addClass(this._aListElements[0],"first-of-type")}}}u=null;if(n){switch(n){case"DIV":s=this._aListElements;r=s.length;if(r>0){p=r-1;do{u=s[p].firstChild;if(u){do{if(u&&u.tagName&&u.tagName.toUpperCase()=="LI"){this.addItem(new this.ITEM_TYPE(u,{parent:this}),p)}}while((u=u.nextSibling))}}while(p--)}break;case"SELECT":u=o.firstChild;do{if(u&&u.tagName){switch(u.tagName.toUpperCase()){case"OPTGROUP":case"OPTION":this.addItem(new this.ITEM_TYPE(u,{parent:this}));break}}}while((u=u.nextSibling));break}}}},_getFirstEnabledItem:function(){var n=this.getItems(),q=n.length,p;for(var o=0;o<q;o++){p=n[o];if(p&&!p.cfg.getProperty("disabled")&&p.element.style.display!="none"){return p}}},_addItemToGroup:function(s,t,w){var u,x,q,v,r,o,p;function n(y,z){return(y[z]||n(y,(z+1)))}if(t instanceof this.ITEM_TYPE){u=t;u.parent=this}else{if(typeof t=="string"){u=new this.ITEM_TYPE(t,{parent:this})}else{if(typeof t=="object"){t.parent=this;u=new this.ITEM_TYPE(t.text,t)}}}if(u){if(u.cfg.getProperty("selected")){this.activeItem=u}x=typeof s=="number"?s:0;q=this._getItemGroup(x);if(!q){q=this._createItemGroup(x)}if(typeof w=="number"){r=(w>=q.length);if(q[w]){q.splice(w,0,u)}else{q[w]=u}v=q[w];if(v){if(r&&(!v.element.parentNode||v.element.parentNode.nodeType==11)){this._aListElements[x].appendChild(v.element)}else{o=n(q,(w+1));if(o&&(!v.element.parentNode||v.element.parentNode.nodeType==11)){this._aListElements[x].insertBefore(v.element,o.element)}}v.parent=this;this._subscribeToItemEvents(v);this._configureSubmenu(v);this._updateItemProperties(x);this.itemAddedEvent.fire(v);this.changeContentEvent.fire();return v}}else{p=q.length;q[p]=u;v=q[p];if(v){if(!c.isAncestor(this._aListElements[x],v.element)){this._aListElements[x].appendChild(v.element)}v.element.setAttribute("groupindex",x);v.element.setAttribute("index",p);v.parent=this;v.index=p;v.groupIndex=x;this._subscribeToItemEvents(v);this._configureSubmenu(v);if(p===0){c.addClass(v.element,"first-of-type")}this.itemAddedEvent.fire(v);this.changeContentEvent.fire();return v}}}},_removeItemFromGroupByIndex:function(q,o){var p=typeof q=="number"?q:0,r=this._getItemGroup(p),t,s,n;if(r){t=r.splice(o,1);s=t[0];if(s){this._updateItemProperties(p);if(r.length===0){n=this._aListElements[p];if(this.body&&n){this.body.removeChild(n)}this._aItemGroups.splice(p,1);this._aListElements.splice(p,1);n=this._aListElements[0];if(n){c.addClass(n,"first-of-type")}}this.itemRemovedEvent.fire(s);this.changeContentEvent.fire();return s}}},_removeItemFromGroupByValue:function(p,n){var r=this._getItemGroup(p),s,q,o;if(r){s=r.length;q=-1;if(s>0){o=s-1;do{if(r[o]==n){q=o;break}}while(o--);if(q>-1){return(this._removeItemFromGroupByIndex(p,q))}}}},_updateItemProperties:function(o){var p=this._getItemGroup(o),s=p.length,r,q,n;if(s>0){n=s-1;do{r=p[n];if(r){q=r.element;r.index=n;r.groupIndex=o;q.setAttribute("groupindex",o);q.setAttribute("index",n);c.removeClass(q,"first-of-type")}}while(n--);if(q){c.addClass(q,"first-of-type")}}},_createItemGroup:function(o){var n;if(!this._aItemGroups[o]){this._aItemGroups[o]=[];n=document.createElement("ul");this._aListElements[o]=n;return this._aItemGroups[o]}},_getItemGroup:function(o){var n=((typeof o=="number")?o:0);return this._aItemGroups[n]},_configureSubmenu:function(n){var o=n.cfg.getProperty("submenu");if(o){this.cfg.configChangedEvent.subscribe(this._onParentMenuConfigChange,o,true);this.renderEvent.subscribe(this._onParentMenuRender,o,true);o.beforeShowEvent.subscribe(this._onSubmenuBeforeShow)}},_subscribeToItemEvents:function(n){n.focusEvent.subscribe(this._onMenuItemFocus);n.blurEvent.subscribe(this._onMenuItemBlur);n.destroyEvent.subscribe(this._onMenuItemDestroy,n,this);n.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,n,this)},_onVisibleChange:function(p,o){var n=o[0];if(n){c.addClass(this.element,"visible")}else{c.removeClass(this.element,"visible")}},_cancelHideDelay:function(){var n=this.getRoot();if(n._nHideDelayId){window.clearTimeout(n._nHideDelayId)}},_execHideDelay:function(){this._cancelHideDelay();var o=this.getRoot(),p=this;function n(){if(o.activeItem){o.clearActiveItem()}if(o==p&&!(p instanceof YAHOOAmp.widget.MenuBar)&&p.cfg.getProperty("position")=="dynamic"){p.hide()}}o._nHideDelayId=window.setTimeout(n,o.cfg.getProperty("hidedelay"))},_cancelShowDelay:function(){var n=this.getRoot();if(n._nShowDelayId){window.clearTimeout(n._nShowDelayId)}},_execShowDelay:function(p){var o=this.getRoot();function n(){if(p.parent.cfg.getProperty("selected")){p.show()}}o._nShowDelayId=window.setTimeout(n,o.cfg.getProperty("showdelay"))},_execSubmenuHideDelay:function(q,o,n){var p=this;q._nSubmenuHideDelayId=window.setTimeout(function(){if(p._nCurrentMouseX>(o+10)){q._nSubmenuHideDelayId=window.setTimeout(function(){q.hide()},n)}else{q.hide()}},50)},_disableScrollHeader:function(){if(!this._bHeaderDisabled){c.addClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=true}},_disableScrollFooter:function(){if(!this._bFooterDisabled){c.addClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=true}},_enableScrollHeader:function(){if(this._bHeaderDisabled){c.removeClass(this.header,"topscrollbar_disabled");this._bHeaderDisabled=false}},_enableScrollFooter:function(){if(this._bFooterDisabled){c.removeClass(this.footer,"bottomscrollbar_disabled");this._bFooterDisabled=false}},_onMouseOver:function(w,r){if(this._bStopMouseEventHandlers){return false}var x=r[0],v=r[1],n=m.getTarget(x),o,q,u,p,t,s;if(!this._bHandledMouseOverEvent&&(n==this.element||c.isAncestor(this.element,n))){this._nCurrentMouseX=0;m.on(this.element,"mousemove",this._onMouseMove,this,true);this.clearActiveItem();if(this.parent&&this._nSubmenuHideDelayId){window.clearTimeout(this._nSubmenuHideDelayId);this.parent.cfg.setProperty("selected",true);o=this.parent.parent;o._bHandledMouseOutEvent=true;o._bHandledMouseOverEvent=false}this._bHandledMouseOverEvent=true;this._bHandledMouseOutEvent=false}if(v&&!v.handledMouseOverEvent&&!v.cfg.getProperty("disabled")&&(n==v.element||c.isAncestor(v.element,n))){q=this.cfg.getProperty("showdelay");u=(q>0);if(u){this._cancelShowDelay()}p=this.activeItem;if(p){p.cfg.setProperty("selected",false)}t=v.cfg;t.setProperty("selected",true);if(this.hasFocus()){v.focus()}if(this.cfg.getProperty("autosubmenudisplay")){s=t.getProperty("submenu");if(s){if(u){this._execShowDelay(s)}else{s.show()}}}v.handledMouseOverEvent=true;v.handledMouseOutEvent=false}},_onMouseOut:function(v,p){if(this._bStopMouseEventHandlers){return false}var w=p[0],t=p[1],q=m.getRelatedTarget(w),u=false,s,r,n,o;if(t&&!t.cfg.getProperty("disabled")){s=t.cfg;r=s.getProperty("submenu");if(r&&(q==r.element||c.isAncestor(r.element,q))){u=true}if(!t.handledMouseOutEvent&&((q!=t.element&&!c.isAncestor(t.element,q))||u)){if(!u){t.cfg.setProperty("selected",false);if(r){n=this.cfg.getProperty("submenuhidedelay");o=this.cfg.getProperty("showdelay");if(!(this instanceof YAHOOAmp.widget.MenuBar)&&n>0&&o>=n){this._execSubmenuHideDelay(r,m.getPageX(w),n)}else{r.hide()}}}t.handledMouseOutEvent=true;t.handledMouseOverEvent=false}}if(!this._bHandledMouseOutEvent&&((q!=this.element&&!c.isAncestor(this.element,q))||u)){m.removeListener(this.element,"mousemove",this._onMouseMove);this._nCurrentMouseX=m.getPageX(w);this._bHandledMouseOutEvent=true;this._bHandledMouseOverEvent=false}},_onMouseMove:function(o,n){if(this._bStopMouseEventHandlers){return false}this._nCurrentMouseX=m.getPageX(o)},_onClick:function(w,p){var x=p[0],s=p[1],u=false,q,o,n,r,t,v;if(s){if(s.cfg.getProperty("disabled")){m.preventDefault(x)}else{q=s.cfg.getProperty("submenu");r=s.cfg.getProperty("url");if(r){t=r.indexOf("#");v=r.length;if(t!=-1){r=r.substr(t,v);v=r.length;if(v>1){n=r.substr(1,v);u=c.isAncestor(this.element,n)}else{if(v===1){u=true}}}}if(u&&!s.cfg.getProperty("target")){m.preventDefault(x);if(h.webkit){s.focus()}else{s.focusEvent.fire()}}if(!q){if((h.gecko&&this.platform=="windows")&&x.button>0){return}o=this.getRoot();if(o instanceof YAHOOAmp.widget.MenuBar||o.cfg.getProperty("position")=="static"){o.clearActiveItem()}else{o.hide()}}}}},_onKeyDown:function(B,v){var y=v[0],x=v[1],F=this,u,z,o,s,C,n,E,r,A,q,w,D,t;function p(){F._bStopMouseEventHandlers=true;window.setTimeout(function(){F._bStopMouseEventHandlers=false},10)}if(x&&!x.cfg.getProperty("disabled")){z=x.cfg;o=this.parent;switch(y.keyCode){case 38:case 40:C=(y.keyCode==38)?x.getPreviousEnabledSibling():x.getNextEnabledSibling();if(C){this.clearActiveItem();C.cfg.setProperty("selected",true);C.focus();if(this.cfg.getProperty("maxheight")>0){n=this.body;E=n.scrollTop;r=n.offsetHeight;A=this.getItems();q=A.length-1;w=C.element.offsetTop;if(y.keyCode==40){if(w>=(r+E)){n.scrollTop=w-r}else{if(w<=E){n.scrollTop=0}}if(C==A[q]){n.scrollTop=C.element.offsetTop}}else{if(w<=E){n.scrollTop=w-C.element.offsetHeight}else{if(w>=(E+r)){n.scrollTop=w}}if(C==A[0]){n.scrollTop=0}}E=n.scrollTop;D=n.scrollHeight-n.offsetHeight;if(E===0){this._disableScrollHeader();this._enableScrollFooter()}else{if(E==D){this._enableScrollHeader();this._disableScrollFooter()}else{this._enableScrollHeader();this._enableScrollFooter()}}}}m.preventDefault(y);p();break;case 39:u=z.getProperty("submenu");if(u){if(!z.getProperty("selected")){z.setProperty("selected",true)}u.show();u.setInitialFocus();u.setInitialSelection()}else{s=this.getRoot();if(s instanceof YAHOOAmp.widget.MenuBar){C=s.activeItem.getNextEnabledSibling();if(C){s.clearActiveItem();C.cfg.setProperty("selected",true);u=C.cfg.getProperty("submenu");if(u){u.show()}C.focus()}}}m.preventDefault(y);p();break;case 37:if(o){t=o.parent;if(t instanceof YAHOOAmp.widget.MenuBar){C=t.activeItem.getPreviousEnabledSibling();if(C){t.clearActiveItem();C.cfg.setProperty("selected",true);u=C.cfg.getProperty("submenu");if(u){u.show()}C.focus()}}else{this.hide();o.focus()}}m.preventDefault(y);p();break}}if(y.keyCode==27){if(this.cfg.getProperty("position")=="dynamic"){this.hide();if(this.parent){this.parent.focus()}}else{if(this.activeItem){u=this.activeItem.cfg.getProperty("submenu");if(u&&u.cfg.getProperty("visible")){u.hide();this.activeItem.focus()}else{this.activeItem.blur();this.activeItem.cfg.setProperty("selected",false)}}}m.preventDefault(y)}},_onKeyPress:function(p,o){var n=o[0];if(n.keyCode==40||n.keyCode==38){m.preventDefault(n)}},_onYChange:function(o,n){var q=this.parent,s,p,r;if(q){s=q.parent.body.scrollTop;if(s>0){r=(this.cfg.getProperty("y")-s);c.setY(this.element,r);p=this.iframe;if(p){c.setY(p,r)}this.cfg.setProperty("y",r,true)}}},_onScrollTargetMouseOver:function(t,w){this._cancelHideDelay();var p=m.getTarget(t),r=this.body,v=this,q=this.cfg.getProperty("scrollincrement"),n,o;function u(){var x=r.scrollTop;if(x<n){r.scrollTop=(x+q);v._enableScrollHeader()}else{r.scrollTop=n;window.clearInterval(v._nBodyScrollId);v._disableScrollFooter()}}function s(){var x=r.scrollTop;if(x>0){r.scrollTop=(x-q);v._enableScrollFooter()}else{r.scrollTop=0;window.clearInterval(v._nBodyScrollId);v._disableScrollHeader()}}if(c.hasClass(p,"hd")){o=s}else{n=r.scrollHeight-r.offsetHeight;o=u}this._nBodyScrollId=window.setInterval(o,10)},_onScrollTargetMouseOut:function(o,n){window.clearInterval(this._nBodyScrollId);this._cancelHideDelay()},_onInit:function(o,n){this.cfg.subscribeToConfigEvent("visible",this._onVisibleChange);var p=!this.parent,q=this.lazyLoad;if(((p&&!q)||(p&&(this.cfg.getProperty("visible")||this.cfg.getProperty("position")=="static"))||(!p&&!q))&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree()}if(this.itemData){this.addItems(this.itemData)}}else{if(q){this.cfg.fireQueue()}}},_onBeforeRender:function(q,p){var r=this.element,u=this._aListElements.length,o=true,t=0,n,s;if(u>0){do{n=this._aListElements[t];if(n){if(o){c.addClass(n,"first-of-type");o=false}if(!c.isAncestor(r,n)){this.appendToBody(n)}s=this._aGroupTitleElements[t];if(s){if(!c.isAncestor(r,s)){n.parentNode.insertBefore(s,n)}c.addClass(n,"hastitle")}}t++}while(t<u)}},_onRender:function(o,n){if(this.cfg.getProperty("position")=="dynamic"){if(!this.cfg.getProperty("visible")){this.positionOffScreen()}}},_onBeforeShow:function(x,s){var w,p,t,r,u;if(this.lazyLoad&&this.getItemGroups().length===0){if(this.srcElement){this._initSubTree()}if(this.itemData){if(this.parent&&this.parent.parent&&this.parent.parent.srcElement&&this.parent.parent.srcElement.tagName.toUpperCase()=="SELECT"){w=this.itemData.length;for(p=0;p<w;p++){if(this.itemData[p].tagName){this.addItem((new this.ITEM_TYPE(this.itemData[p])))}}}else{this.addItems(this.itemData)}}u=this.srcElement;if(u){if(u.tagName.toUpperCase()=="SELECT"){if(c.inDocument(u)){this.render(u.parentNode)}else{this.render(this.cfg.getProperty("container"))}}else{this.render()}}else{if(this.parent){this.render(this.parent.element)}else{this.render(this.cfg.getProperty("container"))}}}var q=this.cfg.getProperty("maxheight"),o=this.cfg.getProperty("minscrollheight"),v=this.cfg.getProperty("position")=="dynamic";if(!this.parent&&v){this.cfg.refireEvent("xy")}function y(){this.cfg.setProperty("maxheight",0);this.hideEvent.unsubscribe(y)}if(!(this instanceof YAHOOAmp.widget.MenuBar)&&v){if(q===0){t=c.getViewportHeight();if(this.parent&&this.parent.parent instanceof YAHOOAmp.widget.MenuBar){r=YAHOOAmp.util.Region.getRegion(this.parent.element);t=(t-r.bottom)}if(this.element.offsetHeight>=t){q=(t-(b.VIEWPORT_OFFSET*2));if(q<o){q=o}this.cfg.setProperty("maxheight",q);this.hideEvent.subscribe(y)}}}},_onShow:function(q,p){var t=this.parent,s,n,o;function r(v){var u;if(v.type=="mousedown"||(v.type=="keydown"&&v.keyCode==27)){u=m.getTarget(v);if(u!=s.element||!c.isAncestor(s.element,u)){s.cfg.setProperty("autosubmenudisplay",false);m.removeListener(document,"mousedown",r);m.removeListener(document,"keydown",r)}}}if(t){s=t.parent;n=s.cfg.getProperty("submenualignment");o=this.cfg.getProperty("submenualignment");if((n[0]!=o[0])&&(n[1]!=o[1])){this.cfg.setProperty("submenualignment",[n[0],n[1]])}if(!s.cfg.getProperty("autosubmenudisplay")&&(s instanceof YAHOOAmp.widget.MenuBar||s.cfg.getProperty("position")=="static")){s.cfg.setProperty("autosubmenudisplay",true);m.on(document,"mousedown",r);m.on(document,"keydown",r)}}},_onBeforeHide:function(p,o){var n=this.activeItem,r,q;if(n){r=n.cfg;r.setProperty("selected",false);q=r.getProperty("submenu");if(q){q.hide()}}if(this.getRoot()==this){this.blur()}},_onParentMenuConfigChange:function(o,n,r){var p=n[0][0],q=n[0][1];switch(p){case"iframe":case"constraintoviewport":case"hidedelay":case"showdelay":case"submenuhidedelay":case"clicktohide":case"effect":case"classname":case"scrollincrement":case"minscrollheight":r.cfg.setProperty(p,q);break}},_onParentMenuRender:function(o,n,s){var p=s.parent.parent.cfg,q={constraintoviewport:p.getProperty("constraintoviewport"),xy:[0,0],clicktohide:p.getProperty("clicktohide"),effect:p.getProperty("effect"),showdelay:p.getProperty("showdelay"),hidedelay:p.getProperty("hidedelay"),submenuhidedelay:p.getProperty("submenuhidedelay"),classname:p.getProperty("classname"),scrollincrement:p.getProperty("scrollincrement"),minscrollheight:p.getProperty("minscrollheight"),iframe:p.getProperty("iframe")},r;s.cfg.applyConfig(q);if(!this.lazyLoad){r=this.parent.element;if(this.element.parentNode==r){this.render()}else{this.render(r)}}},_onSubmenuBeforeShow:function(p,o){var q=this.parent,n=q.parent.cfg.getProperty("submenualignment");if(!this.cfg.getProperty("context")){this.cfg.setProperty("context",[q.element,n[0],n[1]])}else{this.align()}},_onMenuItemFocus:function(o,n){this.parent.focusEvent.fire(this)},_onMenuItemBlur:function(o,n){this.parent.blurEvent.fire(this)},_onMenuItemDestroy:function(p,o,n){this._removeItemFromGroupByValue(n.groupIndex,n)},_onMenuItemConfigChange:function(p,o,n){var r=o[0][0],s=o[0][1],q;switch(r){case"selected":if(s===true){this.activeItem=n}break;case"submenu":q=o[0][1];if(q){this._configureSubmenu(n)}break}},enforceConstraints:function(p,n,t){YAHOOAmp.widget.Menu.superclass.enforceConstraints.apply(this,arguments);var s=this.parent,o,r,q,u;if(s){o=s.parent;if(!(o instanceof YAHOOAmp.widget.MenuBar)){r=o.cfg.getProperty("x");u=this.cfg.getProperty("x");if(u<(r+s.element.offsetWidth)){q=(r-this.element.offsetWidth);this.cfg.setProperty("x",q,true);this.cfg.setProperty("xy",[q,(this.cfg.getProperty("y"))],true)}}}},configVisible:function(p,o,q){var n,r;if(this.cfg.getProperty("position")=="dynamic"){f.superclass.configVisible.call(this,p,o,q)}else{n=o[0];r=c.getStyle(this.element,"display");c.setStyle(this.element,"visibility","visible");if(n){if(r!="block"){this.beforeShowEvent.fire();c.setStyle(this.element,"display","block");this.showEvent.fire()}}else{if(r=="block"){this.beforeHideEvent.fire();c.setStyle(this.element,"display","none");this.hideEvent.fire()}}}},configPosition:function(p,o,s){var r=this.element,q=o[0]=="static"?"static":"absolute",t=this.cfg,n;c.setStyle(r,"position",q);if(q=="static"){c.setStyle(r,"display","block");t.setProperty("visible",true)}else{c.setStyle(r,"visibility","hidden")}if(q=="absolute"){n=t.getProperty("zindex");if(!n||n===0){n=this.parent?(this.parent.parent.cfg.getProperty("zindex")+1):1;t.setProperty("zindex",n)}}},configIframe:function(o,n,p){if(this.cfg.getProperty("position")=="dynamic"){f.superclass.configIframe.call(this,o,n,p)}},configHideDelay:function(o,n,r){var t=n[0],s=this.mouseOutEvent,p=this.mouseOverEvent,q=this.keyDownEvent;if(t>0){if(!this._bHideDelayEventHandlersAssigned){s.subscribe(this._execHideDelay);p.subscribe(this._cancelHideDelay);q.subscribe(this._cancelHideDelay);this._bHideDelayEventHandlersAssigned=true}}else{s.unsubscribe(this._execHideDelay);p.unsubscribe(this._cancelHideDelay);q.unsubscribe(this._cancelHideDelay);this._bHideDelayEventHandlersAssigned=false}},configContainer:function(o,n,q){var p=n[0];if(typeof p=="string"){this.cfg.setProperty("container",document.getElementById(p),true)}},_setMaxHeight:function(o,n,p){this.cfg.setProperty("maxheight",p);this.renderEvent.unsubscribe(this._setMaxHeight)},configMaxHeight:function(A,u,x){var t=u[0],q=this.element,r=this.body,y=this.header,o=this.footer,w=this._onScrollTargetMouseOver,B=this._onScrollTargetMouseOut,n=this.cfg.getProperty("minscrollheight"),v,s,p;if(t!==0&&t<n){t=n}if(this.lazyLoad&&!r){this.renderEvent.unsubscribe(this._setMaxHeight);if(t>0){this.renderEvent.subscribe(this._setMaxHeight,t,this)}return}c.setStyle(r,"height","");c.removeClass(r,"yuiamp-menu-body-scrolled");var z=((h.gecko&&this.parent&&this.parent.parent&&this.parent.parent.cfg.getProperty("position")=="dynamic")||h.ie);if(z){if(!this.cfg.getProperty("width")){s=q.offsetWidth;q.style.width=s+"px";p=(s-(q.offsetWidth-s))+"px";this.cfg.setProperty("width",p)}}if(!y&&!o){this.setHeader("&#32;");this.setFooter("&#32;");y=this.header;o=this.footer;c.addClass(y,"topscrollbar");c.addClass(o,"bottomscrollbar");q.insertBefore(y,r);q.appendChild(o)}v=(t-(y.offsetHeight+y.offsetHeight));if(v>0&&(r.offsetHeight>t)){c.addClass(r,"yuiamp-menu-body-scrolled");c.setStyle(r,"height",((v-100)+"px"));m.on(y,"mouseover",w,this,true);m.on(y,"mouseout",B,this,true);m.on(o,"mouseover",w,this,true);m.on(o,"mouseout",B,this,true);this._disableScrollHeader();this._enableScrollFooter()}else{if(y&&o){if(z){this.cfg.setProperty("width","")}this._enableScrollHeader();this._enableScrollFooter();m.removeListener(y,"mouseover",w);m.removeListener(y,"mouseout",B);m.removeListener(o,"mouseover",w);m.removeListener(o,"mouseout",B);q.removeChild(y);q.removeChild(o);this.header=null;this.footer=null}}this.cfg.refireEvent("iframe")},configClassName:function(p,o,q){var n=o[0];if(this._sClassName){c.removeClass(this.element,this._sClassName)}c.addClass(this.element,n);this._sClassName=n},_onItemAdded:function(o,n){var p=n[0];if(p){p.cfg.setProperty("disabled",true)}},configDisabled:function(p,o,s){var r=o[0],n=this.getItems(),t,q;if(e.isArray(n)){t=n.length;if(t>0){q=t-1;do{n[q].cfg.setProperty("disabled",r)}while(q--)}if(r){this.clearActiveItem(true);c.addClass(this.element,"disabled");this.itemAddedEvent.subscribe(this._onItemAdded)}else{c.removeClass(this.element,"disabled");this.itemAddedEvent.unsubscribe(this._onItemAdded)}}},onRender:function(r,q){function s(){var w=this.element,v=this._shadow;if(v&&w){if(v.style.width&&v.style.height){v.style.width="";v.style.height=""}v.style.width=(w.offsetWidth+6)+"px";v.style.height=(w.offsetHeight+1)+"px"}}function u(){this.element.appendChild(this._shadow)}function o(){c.addClass(this._shadow,"yuiamp-menu-shadow-visible")}function n(){c.removeClass(this._shadow,"yuiamp-menu-shadow-visible")}function t(){var w=this._shadow,v,x;if(!w){v=this.element;x=this;if(!g){g=document.createElement("div");g.className="yuiamp-menu-shadow yui-menu-shadow-visible"}w=g.cloneNode(false);v.appendChild(w);this._shadow=w;this.beforeShowEvent.subscribe(o);this.beforeHideEvent.subscribe(n);if(h.ie){window.setTimeout(function(){s.call(x);x.syncIframe()},0);this.cfg.subscribeToConfigEvent("width",s);this.cfg.subscribeToConfigEvent("height",s);this.cfg.subscribeToConfigEvent("maxheight",s);this.changeContentEvent.subscribe(s);d.textResizeEvent.subscribe(s,x,true);this.destroyEvent.subscribe(function(){d.textResizeEvent.unsubscribe(s,x)})}this.cfg.subscribeToConfigEvent("maxheight",u)}}function p(){t.call(this);this.beforeShowEvent.unsubscribe(p)}if(this.cfg.getProperty("position")=="dynamic"){if(this.cfg.getProperty("visible")){t.call(this)}else{this.beforeShowEvent.subscribe(p)}}},initEvents:function(){f.superclass.initEvents.call(this);var n=l.LIST;this.mouseOverEvent=this.createEvent(a.MOUSE_OVER);this.mouseOverEvent.signature=n;this.mouseOutEvent=this.createEvent(a.MOUSE_OUT);this.mouseOutEvent.signature=n;this.mouseDownEvent=this.createEvent(a.MOUSE_DOWN);this.mouseDownEvent.signature=n;this.mouseUpEvent=this.createEvent(a.MOUSE_UP);this.mouseUpEvent.signature=n;this.clickEvent=this.createEvent(a.CLICK);this.clickEvent.signature=n;this.keyPressEvent=this.createEvent(a.KEY_PRESS);this.keyPressEvent.signature=n;this.keyDownEvent=this.createEvent(a.KEY_DOWN);this.keyDownEvent.signature=n;this.keyUpEvent=this.createEvent(a.KEY_UP);this.keyUpEvent.signature=n;this.focusEvent=this.createEvent(a.FOCUS);this.focusEvent.signature=n;this.blurEvent=this.createEvent(a.BLUR);this.blurEvent.signature=n;this.itemAddedEvent=this.createEvent(a.ITEM_ADDED);this.itemAddedEvent.signature=n;this.itemRemovedEvent=this.createEvent(a.ITEM_REMOVED);this.itemRemovedEvent.signature=n},positionOffScreen:function(){var o=this.iframe,n=this.OFF_SCREEN_POSITION;c.setXY(this.element,n);if(o){c.setXY(o,n)}},getRoot:function(){var o=this.parent,n;if(o){n=o.parent;return n?n.getRoot():this}else{return this}},toString:function(){var o="Menu",n=this.id;if(n){o+=(" "+n)}return o},setItemGroupTitle:function(s,r){var q,p,o,n;if(typeof s=="string"&&s.length>0){q=typeof r=="number"?r:0;p=this._aGroupTitleElements[q];if(p){p.innerHTML=s}else{p=document.createElement(this.GROUP_TITLE_TAG_NAME);p.innerHTML=s;this._aGroupTitleElements[q]=p}o=this._aGroupTitleElements.length-1;do{if(this._aGroupTitleElements[o]){c.removeClass(this._aGroupTitleElements[o],"first-of-type");n=o}}while(o--);if(n!==null){c.addClass(this._aGroupTitleElements[n],"first-of-type")}this.changeContentEvent.fire()}},addItem:function(n,o){if(n){return this._addItemToGroup(o,n)}},addItems:function(q,p){var s,n,r,o;if(e.isArray(q)){s=q.length;n=[];for(o=0;o<s;o++){r=q[o];if(r){if(e.isArray(r)){n[n.length]=this.addItems(r,o)}else{n[n.length]=this._addItemToGroup(p,r)}}}if(n.length){return n}}},insertItem:function(n,o,p){if(n){return this._addItemToGroup(p,n,o)}},removeItem:function(n,o){var p;if(typeof n!="undefined"){if(n instanceof YAHOOAmp.widget.MenuItem){p=this._removeItemFromGroupByValue(o,n)}else{if(typeof n=="number"){p=this._removeItemFromGroupByIndex(o,n)}}if(p){p.destroy();return p}}},getItems:function(){var p=this._aItemGroups,o,n=[];if(e.isArray(p)){o=p.length;return((o==1)?p[0]:(Array.prototype.concat.apply(n,p)))}},getItemGroups:function(){return this._aItemGroups},getItem:function(n,o){var p;if(typeof n=="number"){p=this._getItemGroup(o);if(p){return p[n]}}},getSubmenus:function(){var o=this.getItems(),s=o.length,n,p,r,q;if(s>0){n=[];for(q=0;q<s;q++){r=o[q];if(r){p=r.cfg.getProperty("submenu");if(p){n[n.length]=p}}}}return n},clearContent:function(){var r=this.getItems(),o=r.length,p=this.element,q=this.body,v=this.header,n=this.footer,u,t,s;if(o>0){s=o-1;do{u=r[s];if(u){t=u.cfg.getProperty("submenu");if(t){this.cfg.configChangedEvent.unsubscribe(this._onParentMenuConfigChange,t);this.renderEvent.unsubscribe(this._onParentMenuRender,t)}this.removeItem(u)}}while(s--)}if(v){m.purgeElement(v);p.removeChild(v)}if(n){m.purgeElement(n);p.removeChild(n)}if(q){m.purgeElement(q);q.innerHTML=""}this.activeItem=null;this._aItemGroups=[];this._aListElements=[];this._aGroupTitleElements=[];this.cfg.setProperty("width",null)},destroy:function(){this.clearContent();this._aItemGroups=null;this._aListElements=null;this._aGroupTitleElements=null;f.superclass.destroy.call(this)},setInitialFocus:function(){var n=this._getFirstEnabledItem();if(n){n.focus()}},setInitialSelection:function(){var n=this._getFirstEnabledItem();if(n){n.cfg.setProperty("selected",true)}},clearActiveItem:function(p){if(this.cfg.getProperty("showdelay")>0){this._cancelShowDelay()}var n=this.activeItem,q,o;if(n){q=n.cfg;if(p){n.blur()}q.setProperty("selected",false);o=q.getProperty("submenu");if(o){o.hide()}this.activeItem=null}},focus:function(){if(!this.hasFocus()){this.setInitialFocus()}},blur:function(){var n;if(this.hasFocus()){n=k.getFocusedMenuItem();if(n){n.blur()}}},hasFocus:function(){return(k.getFocusedMenu()==this.getRoot())},subscribe:function(){function q(v,u,x){var y=u[0],w=y.cfg.getProperty("submenu");if(w){w.subscribe.apply(w,x)}}function t(v,u,x){var w=this.cfg.getProperty("submenu");if(w){w.subscribe.apply(w,x)}}f.superclass.subscribe.apply(this,arguments);f.superclass.subscribe.call(this,"itemAdded",q,arguments);var n=this.getItems(),s,r,o,p;if(n){s=n.length;if(s>0){p=s-1;do{r=n[p];o=r.cfg.getProperty("submenu");if(o){o.subscribe.apply(o,arguments)}else{r.cfg.subscribeToConfigEvent("submenu",t,arguments)}}while(p--)}}},initDefaultConfig:function(){f.superclass.initDefaultConfig.call(this);var n=this.cfg;n.addProperty(j.VISIBLE.key,{handler:this.configVisible,value:j.VISIBLE.value,validator:j.VISIBLE.validator});n.addProperty(j.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:j.CONSTRAIN_TO_VIEWPORT.value,validator:j.CONSTRAIN_TO_VIEWPORT.validator,supercedes:j.CONSTRAIN_TO_VIEWPORT.supercedes});n.addProperty(j.POSITION.key,{handler:this.configPosition,value:j.POSITION.value,validator:j.POSITION.validator,supercedes:j.POSITION.supercedes});n.addProperty(j.SUBMENU_ALIGNMENT.key,{value:j.SUBMENU_ALIGNMENT.value,suppressEvent:j.SUBMENU_ALIGNMENT.suppressEvent});n.addProperty(j.AUTO_SUBMENU_DISPLAY.key,{value:j.AUTO_SUBMENU_DISPLAY.value,validator:j.AUTO_SUBMENU_DISPLAY.validator,suppressEvent:j.AUTO_SUBMENU_DISPLAY.suppressEvent});n.addProperty(j.SHOW_DELAY.key,{value:j.SHOW_DELAY.value,validator:j.SHOW_DELAY.validator,suppressEvent:j.SHOW_DELAY.suppressEvent});n.addProperty(j.HIDE_DELAY.key,{handler:this.configHideDelay,value:j.HIDE_DELAY.value,validator:j.HIDE_DELAY.validator,suppressEvent:j.HIDE_DELAY.suppressEvent});n.addProperty(j.SUBMENU_HIDE_DELAY.key,{value:j.SUBMENU_HIDE_DELAY.value,validator:j.SUBMENU_HIDE_DELAY.validator,suppressEvent:j.SUBMENU_HIDE_DELAY.suppressEvent});n.addProperty(j.CLICK_TO_HIDE.key,{value:j.CLICK_TO_HIDE.value,validator:j.CLICK_TO_HIDE.validator,suppressEvent:j.CLICK_TO_HIDE.suppressEvent});n.addProperty(j.CONTAINER.key,{handler:this.configContainer,value:document.body,suppressEvent:j.CONTAINER.suppressEvent});n.addProperty(j.SCROLL_INCREMENT.key,{value:j.SCROLL_INCREMENT.value,validator:j.SCROLL_INCREMENT.validator,supercedes:j.SCROLL_INCREMENT.supercedes,suppressEvent:j.SCROLL_INCREMENT.suppressEvent});n.addProperty(j.MIN_SCROLL_HEIGHT.key,{value:j.MIN_SCROLL_HEIGHT.value,validator:j.MIN_SCROLL_HEIGHT.validator,supercedes:j.MIN_SCROLL_HEIGHT.supercedes,suppressEvent:j.MIN_SCROLL_HEIGHT.suppressEvent});n.addProperty(j.MAX_HEIGHT.key,{handler:this.configMaxHeight,value:j.MAX_HEIGHT.value,validator:j.MAX_HEIGHT.validator,suppressEvent:j.MAX_HEIGHT.suppressEvent,supercedes:j.MAX_HEIGHT.supercedes});n.addProperty(j.CLASS_NAME.key,{handler:this.configClassName,value:j.CLASS_NAME.value,validator:j.CLASS_NAME.validator,supercedes:j.CLASS_NAME.supercedes});n.addProperty(j.DISABLED.key,{handler:this.configDisabled,value:j.DISABLED.value,validator:j.DISABLED.validator,suppressEvent:j.DISABLED.suppressEvent})}})})();(function(){YAHOOAmp.widget.MenuItem=function(k,j){if(k){if(j){this.parent=j.parent;this.value=j.value;this.id=j.id}this.init(k,j)}};var b=YAHOOAmp.util.Dom,c=YAHOOAmp.widget.Module,e=YAHOOAmp.widget.Menu,h=YAHOOAmp.widget.MenuItem,i=YAHOOAmp.util.CustomEvent,f=YAHOOAmp.lang,d,a={MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",CLICK:"click",KEY_PRESS:"keypress",KEY_DOWN:"keydown",KEY_UP:"keyup",ITEM_ADDED:"itemAdded",ITEM_REMOVED:"itemRemoved",FOCUS:"focus",BLUR:"blur",DESTROY:"destroy"},g={TEXT:{key:"text",value:"",validator:f.isString,suppressEvent:true},HELP_TEXT:{key:"helptext",supercedes:["text"],suppressEvent:true},URL:{key:"url",value:"#",suppressEvent:true},TARGET:{key:"target",suppressEvent:true},EMPHASIS:{key:"emphasis",value:false,validator:f.isBoolean,suppressEvent:true,supercedes:["text"]},STRONG_EMPHASIS:{key:"strongemphasis",value:false,validator:f.isBoolean,suppressEvent:true,supercedes:["text"]},CHECKED:{key:"checked",value:false,validator:f.isBoolean,suppressEvent:true,supercedes:["disabled","selected"]},SUBMENU:{key:"submenu",suppressEvent:true,supercedes:["disabled","selected"]},DISABLED:{key:"disabled",value:false,validator:f.isBoolean,suppressEvent:true,supercedes:["text","selected"]},SELECTED:{key:"selected",value:false,validator:f.isBoolean,suppressEvent:true},ONCLICK:{key:"onclick",suppressEvent:true},CLASS_NAME:{key:"classname",value:null,validator:f.isString,suppressEvent:true}};h.prototype={CSS_CLASS_NAME:"yuiampmenuitem",CSS_LABEL_CLASS_NAME:"yuiampmenuitemlabel",SUBMENU_TYPE:null,_oAnchor:null,_oHelpTextEM:null,_oSubmenu:null,_oOnclickAttributeValue:null,_sClassName:null,constructor:h,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,browser:c.prototype.browser,id:null,destroyEvent:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,focusEvent:null,blurEvent:null,init:function(j,r){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=e}this.cfg=new YAHOOAmp.util.Config(this);this.initDefaultConfig();var o=i.LIST,n=this.cfg,p="#",q,k,m,l;if(f.isString(j)){this._createRootNodeStructure();n.queueProperty("text",j)}else{if(j&&j.tagName){switch(j.tagName.toUpperCase()){case"OPTION":this._createRootNodeStructure();n.queueProperty("text",j.text);n.queueProperty("disabled",j.disabled);this.value=j.value;this.srcElement=j;break;case"OPTGROUP":this._createRootNodeStructure();n.queueProperty("text",j.label);n.queueProperty("disabled",j.disabled);this.srcElement=j;this._initSubTree();break;case"LI":q=b.getFirstChild(j);if(q){p=q.getAttribute("href",2);k=q.getAttribute("target");m=q.innerHTML}this.srcElement=j;this.element=j;this._oAnchor=q;n.setProperty("text",m,true);n.setProperty("url",p,true);n.setProperty("target",k,true);this._initSubTree();break}}}if(this.element){l=(this.srcElement||this.element).id;if(!l){l=this.id||b.generateId();this.element.id=l}this.id=l;b.addClass(this.element,this.CSS_CLASS_NAME);b.addClass(this._oAnchor,this.CSS_LABEL_CLASS_NAME);this.mouseOverEvent=this.createEvent(a.MOUSE_OVER);this.mouseOverEvent.signature=o;this.mouseOutEvent=this.createEvent(a.MOUSE_OUT);this.mouseOutEvent.signature=o;this.mouseDownEvent=this.createEvent(a.MOUSE_DOWN);this.mouseDownEvent.signature=o;this.mouseUpEvent=this.createEvent(a.MOUSE_UP);this.mouseUpEvent.signature=o;this.clickEvent=this.createEvent(a.CLICK);this.clickEvent.signature=o;this.keyPressEvent=this.createEvent(a.KEY_PRESS);this.keyPressEvent.signature=o;this.keyDownEvent=this.createEvent(a.KEY_DOWN);this.keyDownEvent.signature=o;this.keyUpEvent=this.createEvent(a.KEY_UP);this.keyUpEvent.signature=o;this.focusEvent=this.createEvent(a.FOCUS);this.focusEvent.signature=o;this.blurEvent=this.createEvent(a.BLUR);this.blurEvent.signature=o;this.destroyEvent=this.createEvent(a.DESTROY);this.destroyEvent.signature=o;if(r){n.applyConfig(r)}n.fireQueue()}},_createRootNodeStructure:function(){var j,k;if(!d){d=document.createElement("li");d.innerHTML='<a href="#"></a>'}j=d.cloneNode(true);j.className=this.CSS_CLASS_NAME;k=j.firstChild;k.className=this.CSS_LABEL_CLASS_NAME;this.element=j;this._oAnchor=k},_initSubTree:function(){var q=this.srcElement,l=this.cfg,o,m,k,j,p;if(q.childNodes.length>0){if(this.parent.lazyLoad&&this.parent.srcElement&&this.parent.srcElement.tagName.toUpperCase()=="SELECT"){l.setProperty("submenu",{id:b.generateId(),itemdata:q.childNodes})}else{o=q.firstChild;m=[];do{if(o&&o.tagName){switch(o.tagName.toUpperCase()){case"DIV":l.setProperty("submenu",o);break;case"OPTION":m[m.length]=o;break}}}while((o=o.nextSibling));k=m.length;if(k>0){j=new this.SUBMENU_TYPE(b.generateId());l.setProperty("submenu",j);for(p=0;p<k;p++){j.addItem((new j.ITEM_TYPE(m[p])))}}}}},configText:function(s,l,n){var k=l[0],m=this.cfg,q=this._oAnchor,j=m.getProperty("helptext"),r="",o="",p="";if(k){if(j){r='<em class="helptext">'+j+"</em>"}if(m.getProperty("emphasis")){o="<em>";p="</em>"}if(m.getProperty("strongemphasis")){o="<strong>";p="</strong>"}q.innerHTML=(o+k+p+r)}},configHelpText:function(l,k,j){this.cfg.refireEvent("text")},configURL:function(l,k,j){var n=k[0];if(!n){n="#"}var m=this._oAnchor;if(YAHOOAmp.env.ua.opera){m.removeAttribute("href")}m.setAttribute("href",n)},configTarget:function(m,l,k){var j=l[0],n=this._oAnchor;if(j&&j.length>0){n.setAttribute("target",j)}else{n.removeAttribute("target")}},configEmphasis:function(l,k,j){var n=k[0],m=this.cfg;if(n&&m.getProperty("strongemphasis")){m.setProperty("strongemphasis",false)}m.refireEvent("text")},configStrongEmphasis:function(m,l,k){var j=l[0],n=this.cfg;if(j&&n.getProperty("emphasis")){n.setProperty("emphasis",false)}n.refireEvent("text")},configChecked:function(s,m,o){var r=m[0],k=this.element,q=this._oAnchor,n=this.cfg,j="-checked",l=this.CSS_CLASS_NAME+j,p=this.CSS_LABEL_CLASS_NAME+j;if(r){b.addClass(k,l);b.addClass(q,p)}else{b.removeClass(k,l);b.removeClass(q,p)}n.refireEvent("text");if(n.getProperty("disabled")){n.refireEvent("disabled")}if(n.getProperty("selected")){n.refireEvent("selected")}},configDisabled:function(x,r,A){var z=r[0],l=this.cfg,p=l.getProperty("submenu"),o=l.getProperty("checked"),s=this.element,v=this._oAnchor,u="-disabled",w="-checked"+u,y="-hassubmenu"+u,m=this.CSS_CLASS_NAME+u,n=this.CSS_LABEL_CLASS_NAME+u,t=this.CSS_CLASS_NAME+w,q=this.CSS_LABEL_CLASS_NAME+w,k=this.CSS_CLASS_NAME+y,j=this.CSS_LABEL_CLASS_NAME+y;if(z){if(l.getProperty("selected")){l.setProperty("selected",false)}b.addClass(s,m);b.addClass(v,n);if(p){b.addClass(s,k);b.addClass(v,j)}if(o){b.addClass(s,t);b.addClass(v,q)}}else{b.removeClass(s,m);b.removeClass(v,n);if(p){b.removeClass(s,k);b.removeClass(v,j)}if(o){b.removeClass(s,t);b.removeClass(v,q)}}},configSelected:function(x,r,A){var l=this.cfg,y=r[0],s=this.element,v=this._oAnchor,o=l.getProperty("checked"),p=l.getProperty("submenu"),u="-selected",w="-checked"+u,z="-hassubmenu"+u,m=this.CSS_CLASS_NAME+u,n=this.CSS_LABEL_CLASS_NAME+u,t=this.CSS_CLASS_NAME+w,q=this.CSS_LABEL_CLASS_NAME+w,k=this.CSS_CLASS_NAME+z,j=this.CSS_LABEL_CLASS_NAME+z;if(YAHOOAmp.env.ua.opera){v.blur()}if(y&&!l.getProperty("disabled")){b.addClass(s,m);b.addClass(v,n);if(p){b.addClass(s,k);b.addClass(v,j)}if(o){b.addClass(s,t);b.addClass(v,q)}}else{b.removeClass(s,m);b.removeClass(v,n);if(p){b.removeClass(s,k);b.removeClass(v,j)}if(o){b.removeClass(s,t);b.removeClass(v,q)}}if(this.hasFocus()&&YAHOOAmp.env.ua.opera){v.focus()}},_onSubmenuBeforeHide:function(m,l){var n=this.parent,j;function k(){n._oAnchor.blur();j.beforeHideEvent.unsubscribe(k)}if(n.hasFocus()){j=n.parent;j.beforeHideEvent.subscribe(k)}},configSubmenu:function(v,o,r){var q=o[0],p=this.cfg,k=this.element,t=this._oAnchor,n=this.parent&&this.parent.lazyLoad,j="-hassubmenu",l=this.CSS_CLASS_NAME+j,s=this.CSS_LABEL_CLASS_NAME+j,u,w,m;if(q){if(q instanceof e){u=q;u.parent=this;u.lazyLoad=n}else{if(typeof q=="object"&&q.id&&!q.nodeType){w=q.id;m=q;m.lazyload=n;m.parent=this;u=new this.SUBMENU_TYPE(w,m);p.setProperty("submenu",u,true)}else{u=new this.SUBMENU_TYPE(q,{lazyload:n,parent:this});p.setProperty("submenu",u,true)}}if(u){b.addClass(k,l);b.addClass(t,s);this._oSubmenu=u;if(YAHOOAmp.env.ua.opera){u.beforeHideEvent.subscribe(this._onSubmenuBeforeHide)}}}else{b.removeClass(k,l);b.removeClass(t,s);if(this._oSubmenu){this._oSubmenu.destroy()}}if(p.getProperty("disabled")){p.refireEvent("disabled")}if(p.getProperty("selected")){p.refireEvent("selected")}},configOnClick:function(l,k,j){var m=k[0];if(this._oOnclickAttributeValue&&(this._oOnclickAttributeValue!=m)){this.clickEvent.unsubscribe(this._oOnclickAttributeValue.fn,this._oOnclickAttributeValue.obj);this._oOnclickAttributeValue=null}if(!this._oOnclickAttributeValue&&typeof m=="object"&&typeof m.fn=="function"){this.clickEvent.subscribe(m.fn,((!YAHOOAmp.lang.isUndefined(m.obj))?m.obj:this),m.scope);this._oOnclickAttributeValue=m}},configClassName:function(m,l,k){var j=l[0];if(this._sClassName){b.removeClass(this.element,this._sClassName)}b.addClass(this.element,j);this._sClassName=j},initDefaultConfig:function(){var j=this.cfg;j.addProperty(g.TEXT.key,{handler:this.configText,value:g.TEXT.value,validator:g.TEXT.validator,suppressEvent:g.TEXT.suppressEvent});j.addProperty(g.HELP_TEXT.key,{handler:this.configHelpText,supercedes:g.HELP_TEXT.supercedes,suppressEvent:g.HELP_TEXT.suppressEvent});j.addProperty(g.URL.key,{handler:this.configURL,value:g.URL.value,suppressEvent:g.URL.suppressEvent});j.addProperty(g.TARGET.key,{handler:this.configTarget,suppressEvent:g.TARGET.suppressEvent});j.addProperty(g.EMPHASIS.key,{handler:this.configEmphasis,value:g.EMPHASIS.value,validator:g.EMPHASIS.validator,suppressEvent:g.EMPHASIS.suppressEvent,supercedes:g.EMPHASIS.supercedes});j.addProperty(g.STRONG_EMPHASIS.key,{handler:this.configStrongEmphasis,value:g.STRONG_EMPHASIS.value,validator:g.STRONG_EMPHASIS.validator,suppressEvent:g.STRONG_EMPHASIS.suppressEvent,supercedes:g.STRONG_EMPHASIS.supercedes});j.addProperty(g.CHECKED.key,{handler:this.configChecked,value:g.CHECKED.value,validator:g.CHECKED.validator,suppressEvent:g.CHECKED.suppressEvent,supercedes:g.CHECKED.supercedes});j.addProperty(g.DISABLED.key,{handler:this.configDisabled,value:g.DISABLED.value,validator:g.DISABLED.validator,suppressEvent:g.DISABLED.suppressEvent});j.addProperty(g.SELECTED.key,{handler:this.configSelected,value:g.SELECTED.value,validator:g.SELECTED.validator,suppressEvent:g.SELECTED.suppressEvent});j.addProperty(g.SUBMENU.key,{handler:this.configSubmenu,supercedes:g.SUBMENU.supercedes,suppressEvent:g.SUBMENU.suppressEvent});j.addProperty(g.ONCLICK.key,{handler:this.configOnClick,suppressEvent:g.ONCLICK.suppressEvent});j.addProperty(g.CLASS_NAME.key,{handler:this.configClassName,value:g.CLASS_NAME.value,validator:g.CLASS_NAME.validator,suppressEvent:g.CLASS_NAME.suppressEvent})},getNextEnabledSibling:function(){var l,o,j,n,m;function k(p,q){return p[q]||k(p,(q+1))}if(this.parent instanceof e){l=this.groupIndex;o=this.parent.getItemGroups();if(this.index<(o[l].length-1)){j=k(o[l],(this.index+1))}else{if(l<(o.length-1)){n=l+1}else{n=0}m=k(o,n);j=k(m,0)}return(j.cfg.getProperty("disabled")||j.element.style.display=="none")?j.getNextEnabledSibling():j}},getPreviousEnabledSibling:function(){var n,p,k,j,m;function o(q,r){return q[r]||o(q,(r-1))}function l(q,r){return q[r]?r:l(q,(r+1))}if(this.parent instanceof e){n=this.groupIndex;p=this.parent.getItemGroups();if(this.index>l(p[n],0)){k=o(p[n],(this.index-1))}else{if(n>l(p,0)){j=n-1}else{j=p.length-1}m=o(p,j);k=o(m,(m.length-1))}return(k.cfg.getProperty("disabled")||k.element.style.display=="none")?k.getPreviousEnabledSibling():k}},focus:function(){var n=this.parent,m=this._oAnchor,j=n.activeItem,l=this;function k(){try{if(YAHOOAmp.env.ua.ie&&!document.hasFocus()){return}if(j){j.blurEvent.fire()}m.focus();l.focusEvent.fire()}catch(o){}}if(!this.cfg.getProperty("disabled")&&n&&n.cfg.getProperty("visible")&&this.element.style.display!="none"){window.setTimeout(k,0)}},blur:function(){var k=this.parent;if(!this.cfg.getProperty("disabled")&&k&&k.cfg.getProperty("visible")){var j=this;window.setTimeout(function(){try{j._oAnchor.blur();j.blurEvent.fire()}catch(l){}},0)}},hasFocus:function(){return(YAHOOAmp.widget.MenuManager.getFocusedMenuItem()==this)},destroy:function(){var l=this.element,k,j;if(l){k=this.cfg.getProperty("submenu");if(k){k.destroy()}this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.focusEvent.unsubscribeAll();this.blurEvent.unsubscribeAll();this.cfg.configChangedEvent.unsubscribeAll();j=l.parentNode;if(j){j.removeChild(l);this.destroyEvent.fire()}this.destroyEvent.unsubscribeAll()}},toString:function(){var k="MenuItem",j=this.id;if(j){k+=(" "+j)}return k}};f.augmentProto(h,YAHOOAmp.util.EventProvider)})();(function(){YAHOOAmp.widget.ContextMenu=function(g,f){YAHOOAmp.widget.ContextMenu.superclass.constructor.call(this,g,f)};var b=YAHOOAmp.util.Event,e=YAHOOAmp.widget.ContextMenu,d={TRIGGER_CONTEXT_MENU:"triggerContextMenu",CONTEXT_MENU:(YAHOOAmp.env.ua.opera?"mousedown":"contextmenu"),CLICK:"click"},c={TRIGGER:{key:"trigger",suppressEvent:true}};function a(g,f,h){this.cfg.setProperty("xy",h);this.beforeShowEvent.unsubscribe(a,h)}YAHOOAmp.lang.extend(e,YAHOOAmp.widget.Menu,{_oTrigger:null,_bCancelled:false,contextEventTarget:null,triggerContextMenuEvent:null,init:function(g,f){e.superclass.init.call(this,g);this.beforeInitEvent.fire(e);if(f){this.cfg.applyConfig(f,true)}this.initEvent.fire(e)},initEvents:function(){e.superclass.initEvents.call(this);this.triggerContextMenuEvent=this.createEvent(d.TRIGGER_CONTEXT_MENU);this.triggerContextMenuEvent.signature=YAHOOAmp.util.CustomEvent.LIST},cancel:function(){this._bCancelled=true},_removeEventHandlers:function(){var f=this._oTrigger;if(f){b.removeListener(f,d.CONTEXT_MENU,this._onTriggerContextMenu);if(YAHOOAmp.env.ua.opera){b.removeListener(f,d.CLICK,this._onTriggerClick)}}},_onTriggerClick:function(g,f){if(g.ctrlKey){b.stopEvent(g)}},_onTriggerContextMenu:function(h,f){if(h.type=="mousedown"&&!h.ctrlKey){return}var g;b.stopEvent(h);this.contextEventTarget=b.getTarget(h);this.triggerContextMenuEvent.fire(h);YAHOOAmp.widget.MenuManager.hideVisible();if(!this._bCancelled){g=b.getXY(h);if(!YAHOOAmp.util.Dom.inDocument(this.element)){this.beforeShowEvent.subscribe(a,g)}else{this.cfg.setProperty("xy",g)}this.show()}this._bCancelled=false},toString:function(){var g="ContextMenu",f=this.id;if(f){g+=(" "+f)}return g},initDefaultConfig:function(){e.superclass.initDefaultConfig.call(this);this.cfg.addProperty(c.TRIGGER.key,{handler:this.configTrigger,suppressEvent:c.TRIGGER.suppressEvent})},destroy:function(){this._removeEventHandlers();e.superclass.destroy.call(this)},configTrigger:function(g,f,i){var h=f[0];if(h){if(this._oTrigger){this._removeEventHandlers()}this._oTrigger=h;b.on(h,d.CONTEXT_MENU,this._onTriggerContextMenu,this,true);if(YAHOOAmp.env.ua.opera){b.on(h,d.CLICK,this._onTriggerClick,this,true)}}else{this._removeEventHandlers()}}})}());YAHOOAmp.widget.ContextMenuItem=YAHOOAmp.widget.MenuItem;(function(){YAHOOAmp.widget.MenuBar=function(f,e){YAHOOAmp.widget.MenuBar.superclass.constructor.call(this,f,e)};function d(e){if(typeof e=="string"){return("dynamic,static".indexOf((e.toLowerCase()))!=-1)}}var b=YAHOOAmp.util.Event,a=YAHOOAmp.widget.MenuBar,c={POSITION:{key:"position",value:"static",validator:d,supercedes:["visible"]},SUBMENU_ALIGNMENT:{key:"submenualignment",value:["tl","bl"],suppressEvent:true},AUTO_SUBMENU_DISPLAY:{key:"autosubmenudisplay",value:false,validator:YAHOOAmp.lang.isBoolean,suppressEvent:true}};YAHOOAmp.lang.extend(a,YAHOOAmp.widget.Menu,{init:function(f,e){if(!this.ITEM_TYPE){this.ITEM_TYPE=YAHOOAmp.widget.MenuBarItem}a.superclass.init.call(this,f);this.beforeInitEvent.fire(a);if(e){this.cfg.applyConfig(e,true)}this.initEvent.fire(a)},CSS_CLASS_NAME:"yuiampmenubar",_onKeyDown:function(g,f,k){var e=f[0],l=f[1],i,j,h;if(l&&!l.cfg.getProperty("disabled")){j=l.cfg;switch(e.keyCode){case 37:case 39:if(l==this.activeItem&&!j.getProperty("selected")){j.setProperty("selected",true)}else{h=(e.keyCode==37)?l.getPreviousEnabledSibling():l.getNextEnabledSibling();if(h){this.clearActiveItem();h.cfg.setProperty("selected",true);if(this.cfg.getProperty("autosubmenudisplay")){i=h.cfg.getProperty("submenu");if(i){i.show()}}h.focus()}}b.preventDefault(e);break;case 40:if(this.activeItem!=l){this.clearActiveItem();j.setProperty("selected",true);l.focus()}i=j.getProperty("submenu");if(i){if(i.cfg.getProperty("visible")){i.setInitialSelection();i.setInitialFocus()}else{i.show()}}b.preventDefault(e);break}}if(e.keyCode==27&&this.activeItem){i=this.activeItem.cfg.getProperty("submenu");if(i&&i.cfg.getProperty("visible")){i.hide();this.activeItem.focus()}else{this.activeItem.cfg.setProperty("selected",false);this.activeItem.blur()}b.preventDefault(e)}},_onClick:function(f,e,g){a.superclass._onClick.call(this,f,e,g)},toString:function(){var f="MenuBar",e=this.id;if(e){f+=(" "+e)}return f},initDefaultConfig:function(){a.superclass.initDefaultConfig.call(this);var e=this.cfg;e.addProperty(c.POSITION.key,{handler:this.configPosition,value:c.POSITION.value,validator:c.POSITION.validator,supercedes:c.POSITION.supercedes});e.addProperty(c.SUBMENU_ALIGNMENT.key,{value:c.SUBMENU_ALIGNMENT.value,suppressEvent:c.SUBMENU_ALIGNMENT.suppressEvent});e.addProperty(c.AUTO_SUBMENU_DISPLAY.key,{value:c.AUTO_SUBMENU_DISPLAY.value,validator:c.AUTO_SUBMENU_DISPLAY.validator,suppressEvent:c.AUTO_SUBMENU_DISPLAY.suppressEvent})}})}());YAHOOAmp.widget.MenuBarItem=function(b,a){YAHOOAmp.widget.MenuBarItem.superclass.constructor.call(this,b,a)};YAHOOAmp.lang.extend(YAHOOAmp.widget.MenuBarItem,YAHOOAmp.widget.MenuItem,{init:function(b,a){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOOAmp.widget.Menu}YAHOOAmp.widget.MenuBarItem.superclass.init.call(this,b);var c=this.cfg;if(a){c.applyConfig(a,true)}c.fireQueue()},CSS_CLASS_NAME:"yuiampmenubaritem",CSS_LABEL_CLASS_NAME:"yuiampmenubaritemlabel",toString:function(){var a="MenuBarItem";if(this.cfg&&this.cfg.getProperty("text")){a+=(": "+this.cfg.getProperty("text"))}return a}});YAHOOAmp.register("menu",YAHOOAmp.widget.Menu,{version:"2.5.2",build:"1076"});