<?xml version="1.0" encoding="UTF-8"?>
<tns:patch closeOnSuccess="true" retryOnFail="true" xmlns:tns="http://docs.ampdev.net/schemas/xmlpatcher" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://docs.ampdev.net/schemas/xmlpatcher ../doc/xmlpatcher.xsd ">
    <jira>AMP-10948</jira>
    <keyword>Workspace Manager</keyword>
    <keyword>Approver</keyword>
    <author>Medea Gugushvili</author>
    <description>add approver</description>
    <trigger type="all">
      <condition  type="entryInTableMissing" tablename="amp_team_member_roles" columnname="role" columnvalue="Workspace Approver" />
    </trigger> 
       <apply>
        <script>
            <lang  delimiter=";" type="postgres">
            	update amp_team_member_roles set approver=false;
                ALTER TABLE amp_team_member_roles ALTER COLUMN amp_team_mem_role_id SET DEFAULT nextval('"amp_team_member_roles_seq"'); 
                Insert into amp_team_member_roles (role, description, read_permission, write_permission, delete_permission,team_head,approver) values ('Workspace Approver','Workspace Approver',true,true,true,false,true);
            </lang>
        </script>
    </apply>
</tns:patch>
