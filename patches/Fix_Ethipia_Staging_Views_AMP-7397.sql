CREATE OR REPLACE VIEW `v_primaryprogram` AS select `a`.`amp_activity_id` AS `amp_activity_id`,`t`.`name` AS `name`,`ap`.`amp_program_id` AS `amp_program_id`,`ap`.`program_percentage` AS `program_percentage` from ((`amp_activity` `a` join `amp_activity_program` `ap` on (((`a`.`amp_activity_id` = `ap`.`amp_activity_id`) and (`ap`.`program_setting` = 2)))) join `amp_theme` `t` on ((`t`.`amp_theme_id` = `ap`.`amp_program_id`))) order by `a`.`amp_activity_id`, `t`.`name`;
CREATE OR REPLACE VIEW `v_secondaryprogram` AS select `a`.`amp_activity_id` AS `amp_activity_id`,`t`.`name` AS `name`,`ap`.`amp_program_id` AS `amp_program_id`,`ap`.`program_percentage` AS `program_percentage` from ((`amp_activity` `a` join `amp_activity_program` `ap` on (((`a`.`amp_activity_id` = `ap`.`amp_activity_id`) and (`ap`.`program_setting` = 3)))) join `amp_theme` `t` on ((`t`.`amp_theme_id` = `ap`.`amp_program_id`))) order by `a`.`amp_activity_id`,`t`.`name`;
CREATE OR REPLACE VIEW `v_sub_sectors` AS select `sa`.`amp_activity_id` AS `amp_activity_id`,`getSectorName`(`getParentSubSectorId`(`s`.`amp_sector_id`)) AS `sectorname`,`getParentSubSectorId`(`s`.`amp_sector_id`) AS `amp_sector_id`,sum(`sa`.`sector_percentage`) AS `sector_percentage`,`s`.`amp_sec_scheme_id` AS `amp_sec_scheme_id`,`ss`.`sec_scheme_name` AS `sec_scheme_name` from (((`amp_sector_scheme` `ss` join `amp_classification_config` `cc` on (((`cc`.`name` = _utf8'Primary') and (`cc`.`classification_id` = `ss`.`amp_sec_scheme_id`)))) join `amp_sector` `s` on (((`s`.`amp_sec_scheme_id` = `ss`.`amp_sec_scheme_id`) and (`getSectorDepth`(`s`.`amp_sector_id`) >= 1))))join `amp_activity_sector` `sa` on (((`sa`.`amp_sector_id` = `s`.`amp_sector_id`) and (`sa`.`classification_config_id` = `cc`.`id`)))) group by `sa`.`amp_activity_id`,`getParentSubSectorId`(`s`.`amp_sector_id`) order by `sa`.`amp_activity_id`,`getSectorName`(`getParentSubSectorId`(`s`.`amp_sector_id`));
