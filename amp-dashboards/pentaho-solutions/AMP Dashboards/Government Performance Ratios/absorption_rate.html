<!-- The dashboard layout -->
<div id="dashboard" style="width:100%;">
    <div id="first_section" style="float:left;margin:10px 10x 10px 10px;">
      <div id="firstChartTypeSelect_object">
        <span class="#format" id="firstChartTypeSelector">
            <input type="radio" id="first_bar" name="first_chart_type" CHECKED value="bar"/><label for="first_bar">CDF.i18n("msg_bar1")</label>
            <input type="radio" id="first_line" name="first_chart_type" value="line"/><label for="first_line">CDF.i18n("msg_line1")</label>
            <input type="radio" id="first_data" name="first_chart_type" value="data"/><label for="first_data">CDF.i18n("msg_data1")</label>
        </span>
      </div>
      <div id="first_chart_bar" style="width:100%;"></div>
      <div id="first_chart_line" style="width:100%;"></div>
      <div id="first_chart_data" style="width:800px;overflow:auto"></div>
    </div>
</div>
<div id="dashboard" style="width:100%;">
    <div id="second_section" style="float:left;width:65%;">
      <div id="secondChartTypeSelect_object">
        <span class="#format" id="secondChartTypeSelector">
            <input type="radio" id="second_bar" name="second_chart_type" CHECKED value="bar"/><label for="second_bar">CDF.i18n("msg_bar2")</label>
            <input type="radio" id="second_data" name="second_chart_type" value="data"/><label for="second_data">CDF.i18n("msg_data2")</label>
        </span>
      </div>
      <div id="second_chart_bar"></div>
      <div id="second_chart_data" style="overflow:auto;"></div>
    </div>
	<div id="third_section" style="float:left;width:35%;">
      <div id="thirdChartTypeSelect_object">
        <span class="#format" id="thirdChartTypeSelector">
            <input type="radio" id="third_bar" name="third_chart_type" CHECKED value="bar"/><label for="third_bar">CDF.i18n("msg_bar3")</label>
			<input type="radio" id="third_line" name="third_chart_type" value="line"/><label for="third_line">CDF.i18n("msg_line3")</label>
            <input type="radio" id="third_data" name="third_chart_type" value="data"/><label for="third_data">CDF.i18n("msg_data3")</label>
        </span>
      </div>
      <div id="third_chart_bar"></div>
      <div id="third_chart_line"></div>
      <div id="third_chart_data" style="overflow:auto"></div>
    </div>
	
</div>
<script language="javascript" type="text/javascript">

//Filter criteria
var currency = Dashboards.getQueryParameter("currency");
var dateRangeInitialized = false;
var pieYear = "2009";
var ministryNameParameter = "";

var processParameters = function(){
	console.log("Processing parameters.");
    
    first_data_table.chartDefinition.colTypes = [];
    first_data_table.chartDefinition.colFormats = [];
    first_data_table.chartDefinition.colHeaders = [];
  };

  
var multiSelectConfig;
$(window).ready(function() {
  multiSelectConfig = {
        noneSelectedText: Dashboards.i18nSupport.prop("msg_select_options"),
        checkAllText: Dashboards.i18nSupport.prop("msg_check_all"),
        uncheckAllText: Dashboards.i18nSupport.prop("msg_uncheck_all"),
        selectedText: Dashboards.i18nSupport.prop("msg_selected_option")
     }
});  


var getParameters = function() {
  return ministryNameParameter;
}

var formatLabel2 = function(arraytext) {
	arraytext= "/"+arraytext+"/";
  //alert("array1: "+arraytext.split("/")[1]);
	var formattedLabel = arraytext.split("/")[1];
  arraytext = formattedLabel;
  if(formattedLabel.length > 20) 
	formattedLabel = formattedLabel.substring(0,17) + "...";
  arraytext = formattedLabel;
		return arraytext;
	}


var listeners_third = ["ministryNameParameter"];
var parameters_third = [["ministryNameParameter","ministryNameParameter"]];

</script>

<script language="javascript" type="text/javascript">
var first_bar_chart = jQuery.extend(true, {}, seminal_chart);
first_bar_chart.name = "first_bar_chart";
first_bar_chart.type = "cccBarChart";
first_bar_chart.htmlObject = "first_chart_bar";
first_bar_chart.chartDefinition.dataAccessId = "first_bar_sql";
first_bar_chart.chartDefinition.legendSize = 320;
first_bar_chart.chartDefinition.height = 500;
first_bar_chart.chartDefinition.width = 1500;
first_bar_chart.chartDefinition.crosstabMode = false;
first_bar_chart.chartDefinition.seriesInRows = false;
first_bar_chart.chartDefinition.orientation = "vertical";
first_bar_chart.chartDefinition.valueFormat = function f(value){return (value);};
first_bar_chart.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
first_bar_chart.chartDefinition.stacked = false;
first_bar_chart.chartDefinition.title = function() { return Dashboards.i18nSupport.prop("msg_absorption_rate")};
first_bar_chart.chartDefinition.xAxisSize = 100;
first_bar_chart.chartDefinition.yAxisSize = 80;
first_bar_chart.chartDefinition.extensionPoints = [["xAxisLabel_textAngle","-.9"],["xAxisLabel_font","10px sans-serif"],["xAxisLabel_textAlign","right"],["yAxisLabel_font","10px sans-serif"], ["xAxisLabel_text", function(d){return formatLabel2(d)}]];
first_bar_chart.chartDefinition.clickable = true;// 
//first_bar_chart.chartDefinition.clickAction = function(s,c,v){ ministryName = formatLabel(c);processParameters();Dashboards.fireChange('ministryNameParameter',formatLabel(c)) };
first_bar_chart.chartDefinition.tooltipFormat = function f(series, name, value){return name + ", " + formatLabel(series) + ", "+ formatCurrencyValue(currency, value)};

var first_line_chart = jQuery.extend(true, {}, seminal_chart);
first_line_chart.chartDefinition.title = function() { return Dashboards.i18nSupport.prop("msg_absorption_rate")};
//first_line_chart.type = "cccLineChart";
first_line_chart.htmlObject = "first_chart_line";
first_line_chart.chartDefinition.dataAccessId = "first_line_sql";
first_line_chart.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
first_line_chart.chartDefinition.yAxisSize = 80;
first_line_chart.chartDefinition.width = 1500;
first_line_chart.chartDefinition.height = 800;
first_line_chart.type = "cccLineChart";
first_line_chart.chartDefinition.crosstabMode = false;
first_line_chart.chartDefinition.seriesInRows = false;
first_line_chart.chartDefinition.extensionPoints = [["xAxisLabel_textAngle","-.5"],["xAxisLabel_font","10px sans-serif"],["xAxisLabel_textAlign","right"],["yAxisLabel_font","10px sans-serif"], ["legendLabel_text", function(d){return formatLabel(d)}]];
first_line_chart.chartDefinition.tooltipFormat = function f(series, name, value){return name + ", " + formatLabel(series) + ", "+ formatCurrencyValue(currency, value)};
first_line_chart.chartDefinition.showDots = true;

var first_data_table = jQuery.extend(true, {}, seminal_data_table);
first_data_table.chartDefinition.dataAccessId = "first_data_sql";
first_data_table.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
first_data_table.htmlObject = "first_chart_data";
first_data_table.name = "first_data_table";
first_data_table.chartDefinition.colTypes = [];
first_data_table.chartDefinition.colFormats = [];

var ministryName = "";
var second_bar_chart = jQuery.extend(true, {}, seminal_chart);
second_bar_chart.name = "second_bar_chart";
second_bar_chart.type = "cccBarChart";
second_bar_chart.htmlObject = "second_chart_bar";
second_bar_chart.chartDefinition.dataAccessId = "second_bar_sql";
second_bar_chart.chartDefinition.legendSize = 250;
second_bar_chart.chartDefinition.height = 550;
second_bar_chart.chartDefinition.width = 1000;
second_bar_chart.chartDefinition.crosstabMode = false;
second_bar_chart.chartDefinition.seriesInRows = false;
second_bar_chart.chartDefinition.orientation = "vertical";
second_bar_chart.chartDefinition.valueFormat = function f(value){return (value);};
second_bar_chart.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
second_bar_chart.chartDefinition.stacked = false;
second_bar_chart.chartDefinition.title = function() { return Dashboards.i18nSupport.prop("msg_expenditures_vs_actual_disbursements")};
second_bar_chart.chartDefinition.xAxisSize = 230;
second_bar_chart.chartDefinition.yAxisSize = 80;
second_bar_chart.chartDefinition.extensionPoints = [["xAxisLabel_textAngle","-.9"],["xAxisLabel_font","10px sans-serif"],["xAxisLabel_textAlign","right"],["yAxisLabel_font","10px sans-serif"], ["xAxisLabel_text", function(d){return formatLabel2(d)}]];
second_bar_chart.chartDefinition.clickable = true;// 
second_bar_chart.chartDefinition.clickAction = function(s,c,v){ ministryName = formatLabel(c);processParameters();Dashboards.fireChange('ministryNameParameter',formatLabel(c)) };
second_bar_chart.chartDefinition.tooltipFormat = function f(series, name, value){return name + ", " + formatLabel(series) + ", "+ formatCurrencyValue(currency, value)};

var second_data_table = jQuery.extend(true, {}, seminal_data_table);
second_data_table.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
second_data_table.chartDefinition.dataAccessId = "second_data_sql";
second_data_table.htmlObject = "second_chart_data";
second_data_table.name = "second_data_table";
second_data_table.chartDefinition.colTypes = [];
second_data_table.chartDefinition.colFormats = [];
second_data_table.chartDefinition.colHeaders = [];

var third_line_chart = jQuery.extend(true, {}, seminal_chart);
third_line_chart.chartDefinition.title = function(){return (ministryName+ " (by Year)")};
third_line_chart.type = "cccLineChart";
third_line_chart.htmlObject = "third_chart_line";
third_line_chart.chartDefinition.dataAccessId = "third_chart_sql";
third_line_chart.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
third_line_chart.chartDefinition.yAxisSize = 80;
third_line_chart.listeners = listeners_third;
third_line_chart.parameters = parameters_third;
third_line_chart.type = "cccStackedLineChart";
third_line_chart.chartDefinition.crosstabMode = false;
third_line_chart.chartDefinition.seriesInRows = false;
third_line_chart.chartDefinition.extensionPoints = [["xAxisLabel_textAngle","-.5"],["xAxisLabel_font","10px sans-serif"],["xAxisLabel_textAlign","right"],["yAxisLabel_font","10px sans-serif"], ["legendLabel_text", function(d){return formatLabel(d)}]];
third_line_chart.chartDefinition.tooltipFormat = function f(series, name, value){return name + ", " + formatLabel(series) + ", "+ formatCurrencyValue(currency, value)};
third_line_chart.chartDefinition.showDots = true;
third_line_chart.preExecution = processParameters;

var third_bar_chart = jQuery.extend(true, {}, seminal_chart);
third_bar_chart.type = "cccBarChart";
third_bar_chart.name = "thirdChart";
third_bar_chart.listeners = listeners_third;
third_bar_chart.parameters = parameters_third;
third_bar_chart.htmlObject = "third_chart_bar";
third_bar_chart.chartDefinition.dataAccessId = "third_chart_sql";
third_bar_chart.chartDefinition.crosstabMode = false;
third_bar_chart.chartDefinition.seriesInRows = false;
third_bar_chart.chartDefinition.orientation = "vertical";
third_bar_chart.chartDefinition.valueFormat = function f(value){return (value);};
third_bar_chart.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
third_bar_chart.chartDefinition.stacked = false;
third_bar_chart.chartDefinition.xAxisSize = 80;
third_bar_chart.chartDefinition.yAxisSize = 80;
third_bar_chart.chartDefinition.title =  function(){return (ministryName+ " (by Year)")};
third_bar_chart.chartDefinition.extensionPoints = [["xAxisLabel_textAngle","0"],["xAxisLabel_font","10px sans-serif"],["xAxisLabel_textAlign","right"],["yAxisLabel_font","10px sans-serif"]];
third_bar_chart.chartDefinition.tooltipFormat = function f(series, name, value){return name + ", " + formatLabel(series) + ", "+ formatCurrencyValue(currency, value)};
third_bar_chart.preExecution = processParameters;

var third_data_table = jQuery.extend(true, {}, first_data_table);
third_data_table.chartDefinition.dataAccessId = "third_data_sql";
third_data_table.chartDefinition.path = "/AMP Dashboards Phase 2/Government Performance Ratios/absorption_rate.cda";
third_data_table.htmlObject = "third_chart_data";
third_data_table.name = "third_data_table";
third_data_table.chartDefinition.colTypes = [];
third_data_table.chartDefinition.colFormats = [];
third_data_table.listeners = listeners_third;
third_data_table.parameters = parameters_third;





</script>

<script language="javascript">
    var cType1 = "bar";
    var cType2 = "bar";
    var cType3 = "bar";
		$("#firstChartTypeSelector").buttonset();
		$("#first_chart_data").hide();
		$("#first_chart_line").hide();
		$("#firstChartTypeSelector").click(function (){
        var oldCType = cType1;
        cType1 = $("#firstChartTypeSelector :radio:checked").val();
        $("#first_chart_" + oldCType).fadeOut('fast', function(){$("#first_chart_" + cType1).fadeIn();});
			});
			
		$("#secondChartTypeSelector").buttonset();
		$("#second_chart_data").hide();
		$("#secondChartTypeSelector").click(function (){
        var oldCType = cType2;
        cType2 = $("#secondChartTypeSelector :radio:checked").val();
        $("#second_chart_" + oldCType).fadeOut('fast', function(){$("#second_chart_" + cType2).fadeIn();});
			});
		
		$("#thirdChartTypeSelector").buttonset();
		$("#third_chart_line").hide();
		$("#third_chart_data").hide();
		$("#thirdChartTypeSelector").click(function (){
        var oldCType = cType3;
        cType3 = $("#thirdChartTypeSelector :radio:checked").val();
        $("#third_chart_" + oldCType).fadeOut('fast', function(){$("#third_chart_" + cType3).fadeIn();});
			});
		

  var resizeLayout = function() {
		$("#dashboard").height($(window).height()-30);
		$("#dashboard").width($(document.body).width()-5);
//		$("#first_section").height($("#dashboard").height());
		$("#first_section").width($("#dashboard").width()*1);

    }
	var initialized = false;
$(window).resize(resizeLayout);
$(window).ready(function() {
  var components = [first_bar_chart, first_line_chart, first_data_table, second_bar_chart, second_data_table, third_line_chart, third_bar_chart, third_data_table];
  Dashboards.init(components);
  resizeLayout();
  initialized = true;
  
});	

$("#apply").click(function () {
  regionParameter = "";
  sectorParameter = "";
  programParameter = "";
  aidTypeParameter = "";
  startYear = startYearConfig;
  endYear = endYearConfig;    
  first_data_table.chartDefinition.colTypes = [];
  first_data_table.chartDefinition.colFormats = [];
  first_data_table.chartDefinition.colHeaders = [];
  Dashboards.resetAll();
  setTimeout(applyDateRange, 500);
});
  
</script>
	<style>
    .ui-button-text { font-size:8pt;}
    .ui-state-active { font-weight:bold;}
    .ui-widget { font-size:8pt;}
    </style>

