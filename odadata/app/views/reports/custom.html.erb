<% js_behavior 'checkboxes' %>

<% form_tag({:action => 'custom'}, 
	:id => 'custom_report_conditions', 
	:target => "Results", 
	:onsubmit => "window.open('',this.target,'resizable=1,scrollbars=1,height=600,width=800');return true;") do 
%>

    <div class="horizontalBox">
	    <div>
            <span id="project_count"></span>
            <INPUT id="submit_button" type="submit" name="query_button" value="<%= lc(:query_database) %>" class="bt" style="margin: 5px; width: 100px">
            <!-- <INPUT type="submit" name="totals_button" value="<%= lc(:totals) %>" class="bt" style="margin: 5px; width: 100px"> -->
	    </div>
	    <div>
        	<p style="padding-top:6px;">
            <%= lc(:action) %>
            </p>
	    </div>
    </div>
	<div id="output_options" class="container">
		<h2><%= lc(:output) %></h2>
		
		<ul class="checkbox_container">
			<h3><%= lc(:output_format) %></h3>
			<li><%= radio_button "output", "format", "web", :checked => true %><%= lc(:web) %></li>
			<li><%= radio_button "output", "format", "excel" %><%= lc(:excel) %></li>
			<!--<li><%= check_box "output", "map", :disabled => true %><%= lc(:map) %></li>-->
			<li>
				<%= lc(:output_in) %>: 
					<%= select_tag "currency", options_from_collection_for_select(ExchangeRate.available_currencies, :to_s, :to_s, Prefs.default_currency) %>
			</li>
		</ul>
		
		<ul class="checkbox_container">
			<h3><span style="float:left"><%= lc(:fields) %></span><span class="link" onclick="toggleAll('query_options', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="query_options_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<input type="hidden" value="1" name="query_options[factsheet_link]" />
            
			<%= render :partial => "reports/query_options/query_option", :collection => Report.query_options %>
		</ul>
	</div>
	
	<div id="filter_criteria" class="container">
		<h2><%= lc(:main_filter) %></h2>
		
		<div id="donor_province" class="container">
			<ul class="checkbox_container">
				<h3><span style="float:left"><%= ll(:terms, :donor) %></span><span class="link" onclick="toggleAll('donors', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="donors_toggle" selected="false"><%= lc(:select_all) %></span></h3>
				<li class="all"><%= check_box "donors", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
			  <%= render :partial => "reports/query_options/donor", :collection => Donor.main.ordered.all %>
			</ul>
			
			<ul class="checkbox_container">
				<h3><span style="float:left"><%= ll(:terms, :region) %></span><span class="link" onclick="toggleAll('provinces', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="provinces_toggle" selected="false"><%= lc(:select_all) %></span></h3>
				<li class="all"><%= check_box "provinces", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
			  <%= render :partial => "reports/query_options/province", :collection => Province.ordered.all %>
			</ul>		
			
			<ul class="checkbox_container">
				<h3><span style="float:left"><%= ll(:terms, :markers) %></span><span class="link" onclick="toggleAll('markers', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="markers_toggle" selected="false"><%= lc(:select_all) %></span></h3>
				<li class="all"><%= check_box "markers", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
				<%= render :partial => "reports/query_options/marker", :collection => translate_options(Project::AVAILABLE_MARKERS) %>
				<li class="annotation"><%= lc(:markers_annotation) %></li>
			</ul>	
		</div>
	
		<div id="mdg_sector" class="container">
			<ul class="checkbox_container">
				<h3><span style="float:left"><%= ll(:terms, :mdg) %></span><span class="link" onclick="toggleAll('targets', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="targets_toggle" selected="false"><%= lc(:select_all) %></span></h3>
				<li class="all"><%= check_box "targets", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
			  <%= render :partial => "reports/query_options/mdg", :collection => Mdg.ordered.all %>
			</ul>
			
			<ul class="checkbox_container">
				<h3><span style="float:left"><%= ll(:terms, :dac_sector) %></span><span class="link" onclick="toggleAll('sectors', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="sectors_toggle" selected="false"><%= lc(:select_all) %></span></h3>
				<li class="all"><%= check_box "sectors", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
			  <%= render :partial => "reports/query_options/sector", :collection => DacSector.ordered.all, :locals => { :shorten_to => 40 } %>
			</ul>
		</div>
	</div>
	
	<div id="other_criteria" class="container">
		<h2><%= lc(:other) %></h2>
		
		<ul class="checkbox_container">
			<h3><span style="float:left"><%= ll(:reports, :grant_loan) %></span><span class="link" onclick="toggleAll('grant_loan', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="grant_loan_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<li class="all"><%= check_box "grant_loan", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>	
			<%= render :partial => "reports/query_options/grant_loan", :collection => translate_options(Project::GRANT_LOAN_OPTIONS) %>
		</ul>
		
		<ul class="checkbox_container">
			<h3><span style="float:left"><%= ll(:reports, :of_budget) %></span><span class="link" onclick="toggleAll('on_off_budget', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="on_off_budget_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<li class="all"><%= check_box "on_off_budget", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>	
			<%= render :partial => "reports/query_options/on_off_budget", :collection => translate_options(Project::ON_OFF_BUDGET_OPTIONS) %>
		</ul>
		
		<ul class="checkbox_container">
			<h3 style="height:30px"><span style="float:left"><%= ll(:reports, :of_treasury) %></span><span class="link" onclick="toggleAll('on_off_treasury', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="on_off_treasury_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<li class="all"><%= check_box "on_off_treasury", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>	
			<%= render :partial => "reports/query_options/on_off_treasury", :collection => translate_options(Project::ON_OFF_TREASURY_OPTIONS) %>
		</ul>
		
		<ul class="checkbox_container">
			<h3><span style="float:left"><%= ll(:reports, :toa) %></span><span class="link" onclick="toggleAll('type_of_aid_id', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="type_of_aid_id_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<li class="all"><%= check_box "type_of_aid_id", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
      		<%= render :partial => "reports/query_options/type_of_aid", :collection => TypeOfAid.all %>
		</ul>
		
		<ul class="checkbox_container">
			<h3 style="height:30px"><span style="float:left"><%= ll(:reports, :cod) %></span><span class="link" onclick="toggleAll('type_of_implementation', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="type_of_implementation_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<li class="all"><%= check_box "type_of_implementation", "all", :checked => 'checked' %><%= ll(:options, :all) %></a>
			<%= render :partial => "reports/query_options/type_of_implementation", :collection => translate_options(Project::IMPLEMENTATION_TYPES) %>
		</ul>
		
		<ul class="checkbox_container">
			<h3><span style="float:left"><%= ll(:reports, :status) %></span><span class="link" onclick="toggleAll('prj_status', '<%= lc(:select_all) %>', '<%= lc(:deselect_all) %>')" id="prj_status_toggle" selected="false"><%= lc(:select_all) %></span></h3>
			<%= render :partial => "reports/query_options/status", :collection => translate_options(Project::STATUS_OPTIONS) %>
		</ul>
		
	</div>	
<% end %>