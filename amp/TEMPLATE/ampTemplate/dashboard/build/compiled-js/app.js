!function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t){t("./ugly/lib-load-hacks");var e=t("./app/app-class"),n=new e({el:"#amp-dashboard"});window.app=n,n.render()},{"./app/app-class":2,"./ugly/lib-load-hacks":17}],2:[function(t,e){function n(){if(!(this instanceof n))throw new Error("App needs to be instantiated with the `new` keyword.");this.initialize.apply(this,arguments)}var i=t("underscore"),r=t("./backbone-dash"),a=t("amp-url/index"),s=t("amp-state/index"),o=t("amp-filter/src/main"),l=t("./views/main"),u=t("./views/fail");i.extend(n.prototype,r.Events,{initialize:function(t){try{this.url=new a,this.state=new s({url:this.url}),this.filter=new o({draggable:!0,sync:t.sync||r.sync}),this.view=new l({app:this,el:t.el})}catch(e){i.defer(function(){throw e}),this.view=new u({app:this,el:t.el,err:e}),this.err=e}},render:function(){this.tryTo(this.view.render,this.view)},viewFail:function(t,e){t.$el.html(new u({app:this,err:e}).render().el)},tryTo:function(t,e){try{return t.call(e)}catch(n){i.defer(function(){throw n}),this.viewFail(e,n)}},tryAfter:function(t,e,n){t.done(i(function(){this.tryTo(e,n)}).bind(this)).fail(i(function(){this.viewFail(n,"failed to load")}).bind(this))},report:function(t,e){this.view.report(t,e)}}),e.exports=n},{"./backbone-dash":3,"./views/fail":12,"./views/main":15,"amp-filter/src/main":30,"amp-state/index":42,"amp-url/index":43,underscore:"underscore"}],3:[function(t,e){function n(t){this.instance=t,this.toString=function(){return"Module initialization error"}}function i(t,e,n){var i=a.has(n,"url")?n.url:a.result(e,"url");return a.some(l,function(t){return 0===i.indexOf(t)})&&console.log("cache",i),a(n).extend({url:(o?"http://66.207.103.134":"")+i,headers:{Accept:"application/json","Content-Type":"application/json"}}),u.call(this,t,e,n)}function r(t){return t.extend({constructor:function(){var e=t.apply(this,arguments);if(!this.app)throw new n(this);return e},sync:i})}var a=t("underscore"),s=t("backbone"),o=window&&"localhost:3000"===window.location.host,l=["/rest/dashboards"],u=s.sync;e.exports=a({}).extend(s,{InitError:n,Model:r(s.Model),Collection:r(s.Collection),View:r(s.View),sync:i})},{backbone:"backbone",underscore:"underscore"}],4:[function(t,e){var n=t("../backbone-dash");e.exports=n.Collection.extend({initialize:function(t,e){this.app=e.app}})},{"../backbone-dash":3}],5:[function(t,e){var n=t("underscore"),i=t("../backbone-dash");e.exports=i.Model.extend({defaults:{typed:!0,limit:3},initialize:function(t,e){this.app=e.app,this.url=e.url},parse:function(t){var e=n(t.values).chain().filter(function(t){return parseInt(t.Year,10)>=2009&&parseInt(t.Year,10)<=2014}).sortBy("Year").value();if(t.processed=n(e).chain().reduce(function(t,e){return t.push.apply(t,n(e.values).pluck("type")),t},[]).uniq().map(function(t){return{key:t,values:n(e).map(function(e){var i=n(e.values).findWhere({type:t});return{x:parseInt(e.Year,10),y:i&&i.amount||0}})}}).value(),this.get("limit")<t.processed.length){var i=n(t.processed).chain().map(function(t){return{key:t.key,total:n(t.values).reduce(function(t,e){return t+e.y},0)}}).sortBy("total").reverse().rest(this.get("limit")-2).pluck("key").value(),r={key:"Others",color:"#777",values:n(t.processed).chain().filter(function(t){return n(i).contains(t.key)}).map(function(t){return t.values}).transpose().map(function(t){return{x:t[0].x,y:n(t).reduce(function(t,e){return t+e.y},0)}}).value()};t.processed=t.processed.slice(0,this.get("limit")),t.processed.push(r)}return t}})},{"../backbone-dash":3,underscore:"underscore"}],6:[function(t,e){var n=t("underscore"),i=t("../backbone-dash");e.exports=i.Model.extend({initialize:function(t,e){this.app=e.app,this.url=e.url},parse:function(t){function e(t){return function(e){return{x:parseInt(e.year,10),y:e[t]}}}var i=-2,r=-(6-i);return t.processed=[{key:"Planned",values:n(t.years).map(e("planned")).slice(r,i)},{key:"Actual",values:n(t.years).map(e("actual")).slice(r,i)}],t}})},{"../backbone-dash":3,underscore:"underscore"}],7:[function(t,e){var n=t("jquery").param,i=t("underscore"),r=t("../backbone-dash");e.exports=r.Model.extend({defaults:{adjtype:"ac",limit:5},initialize:function(t,e){this.app=e.app,this.url=e.url},parse:function(t){var e=i(t.values.slice()).map(function(t){return{x:t.name,y:t.amount}});return i(i(e).pluck("x")).uniq().length<e.length&&this.app.report("Data Error",["The data for "+this.get("name")+" was inconsistent due to duplicate keys","The chart will be shown, but it may have errors or other issues as a result."]),t.maxLimit>e.length&&e.push({x:"Others",y:t.total-i.chain(e).pluck("y").reduce(function(t,e){return t+e},0).value(),color:"#777"}),t.processed=[{values:e}],t},fetch:function(t){return t=i.defaults(t||{},{url:this.url+"?"+n(this.pick("adjtype","limit"))}),r.Model.prototype.fetch.call(this,t)}})},{"../backbone-dash":3,jquery:"jquery",underscore:"underscore"}],8:[function(t,e){function n(t){for(;t.hasChildNodes();)t.removeChild(t.lastChild)}var i=t("underscore"),r=window.nv,a=t("d3-browserify"),s=t("../../ugly/util"),o=i.template('<div class="panel panel-primary panel-popover">\n  <div class="panel-heading"><%= label %></div>\n  <div class="panel-body">\n    <span class="dollaz">\n      <b><%= value %></b> <%= currency %>\n    </span>\n  </div>\n  <div class="panel-footer">\n    <b><%= percent %></b> of total\n  </div>\n</div>\n'),l=i.template('<div class="panel panel-primary panel-popover">\n  <div class="panel-heading"><%= year %> <%= seriesName %></div>\n  <div class="panel-body">\n    <span class="dollaz">\n      <b><%= value %></b> <%= currency %>\n    </span>\n  </div>\n  <div class="panel-footer">\n    <b><%= percent %></b> of <%= year %> <%= otherSeriesName %>\n  </div>\n</div>\n'),u=i.template('<div class="table-responsive">\n  <table class="table table-striped table-condensed">\n\n    <% if (_(keys).some()) { %>\n      <thead>\n        <tr>\n          <td></td>\n          <% _(keys).each(function(key) { %>\n            <th><%= key %></th>\n          <% }); %>\n        </tr>\n      </thead>\n    <% } %>\n\n    <tbody>\n      <% _(values).each(function(row) { %>\n        <tr>\n          <th>\n            <%= row[0].x %>\n          </th>\n          <% _(row).each(function(datum) { %>\n            <td><%= moneyFormat(datum.y) %></td>\n          <% }) %>\n        </tr>\n      <% }) %>\n    </tbody>\n\n  </table>\n</div>\n'),c={top:5,right:10,bottom:10,left:10},d=function(t,e,i,o,l){t.color(s.categoryColours(i));var u=o.querySelector(".dash-chart");u||(n(o),u=document.createElement("svg"),u.classList.add("dash-chart"),o.appendChild(u)),a.select(u).datum(e).call(t),r.utils.windowResize(t.update),r.addGraph(function(){return t},l)};e.exports={bar:function(){var t=r.models.discreteBarChart().valueFormat(s.formatKMB(3)).showValues(!0).showYAxis(!1).showXAxis(!1).transitionDuration(150).margin(c);return function(e,n){e||console.error("missing container");var i=n.get("processed"),r=i[0].values.length-1;t.tooltipContent(function(t,e,i,r){return o({label:r.point.x,value:a.format(",")(Math.round(r.value)),currency:n.get("currency"),percent:a.format("%")(r.value/n.get("total"))})}),d(t,i,r,e,function(){a.selectAll(e.querySelectorAll("g:last-child > .nv-bar")).on("click",function(t){"#777"===t.color&&n.set("limit",n.get("limit")+5)})})}},pie:function(){var t=r.models.pieChart().valueFormat(s.formatKMB(3)).labelType("percent").donut(!0).donutRatio(.35);return function(e,n){var i=n.get("processed")[0].values,r=i.length;t.tooltipContent(function(t,e,i){return o({label:i.point.x,value:a.format(",")(Math.round(i.value)),currency:n.get("currency"),percent:a.format("%")(i.value/n.get("total"))})}),d(t,i,r,e)}},multibar:function(){var t=r.models.multiBarChart().reduceXTicks(!1).margin(i(c).extend({left:40,bottom:20})).transitionDuration(150);return t.yAxis.tickFormat(s.formatKMB(3)).showMaxMin(!1),function(e,n){var r=n.get("processed"),s=r.length;n.get("typed")||t.showControls(!1),t.tooltipContent(function(t,e,r,s){var o;if(n.get("typed"))o={name:"total",total:i(n.get("processed")).reduce(function(t,e){return t+e.values[s.pointIndex].y},0)};else{var u=n.get("processed")[1-s.seriesIndex];o={name:u.key,total:u.values[s.pointIndex].y}}return l({year:e,seriesName:t,value:a.format(",")(Math.round(s.value)),otherSeriesName:o.name,percent:a.format("%")(s.value/o.total),currency:n.get("currency")})}),d(t,r,s,e,function(){a.selectAll(e.querySelectorAll(".nv-bar")).on("click",function(t){n.get("processed").length-1===t.series&&"#777"===n.get("processed")[t.series].color&&n.set("limit",n.get("limit")+1)})})}},table:function(){return function(t,e){n(t);var r=e.get("processed"),a=i(r).pluck("key"),o=i(r).chain().map(function(t){return t.values}).transpose().value();t.innerHTML=u({keys:a,values:o,moneyFormat:s.formatKMB(3)})}}}},{"../../ugly/util":21,"d3-browserify":"d3-browserify",underscore:"underscore"}],9:[function(t,e){var n=t("underscore"),i=t("../../ugly/lib-load-hacks").canvg,r=t("../backbone-dash"),a=t("../../ugly/util"),s=t("./chart-types"),o=t("../models/tops-chart"),l=t("../models/predictability-chart"),u=t("../models/ftype-chart"),c=n.template('<div class="col-xs-12 <% if (!model.get(\'big\')) { %>col-md-6<% } else { %> big-chart<% } %>">\n\n  <div class="panel panel-chart">\n    <div class="panel-heading">\n      <span class="pull-right big-number">\n        <b class="chart-total"></b>\n        <span class="chart-currency"></span>\n      </span>\n      <h2><%= model.get(\'name\') %></h2>\n    </div>\n\n    <div class="panel-body">\n      <div class="chart-container">\n        <h3 class="dash-chart-diagnostic text-center"></h3>\n        <div class="dash-chart-wrap">\n          <svg class="dash-chart"></svg>\n        </div>\n      </div>\n    </div>\n\n    <div class="panel-footer clearfix">\n\n      <div class="pull-right">\n\n        <div class="btn-group">\n          <button\n            type="button"\n            class="btn btn-sm\n                   btn-<%= model.get(\'view\') === (model.get(\'adjtype\') ? \'bar\' : \'multibar\') ? \'primary\' : \'default\' %>\n                   chart-view" data-view="<%= (model.get(\'adjtype\') ? \'bar\' : \'multibar\') %>">\n            <span class="glyphicon glyphicon-signal"></span>\n          </button>\n          <button\n            type="button"\n            class="<% if (!model.get(\'adjtype\')) { %>hidden<% } %>\n                   btn btn-sm\n                   btn-<%= model.get(\'view\') === \'pie\' ? \'primary\' : \'default\' %>\n                   chart-view" data-view="pie">\n            <span class="glyphicon glyphicon-adjust"></span>\n          </button>\n          <button type="button" class="btn btn-sm btn-<%= model.get(\'view\') === \'table\' ? \'primary\' : \'default\' %> chart-view" data-view="table">\n            <span class="glyphicon glyphicon-th-list"></span>\n          </button>\n        </div>\n\n        <div class="btn-group">\n          <a\n            class="btn btn-sm btn-default download"\n            download="AMP <%= model.get(\'name\') %> - <%= (new Date()).toISOString().split(\'T\')[0] %>.png"\n            target="_blank">\n            <span class="glyphicon glyphicon-cloud-download"></span>\n          </a>\n          <button type="button" class="btn btn-sm btn-<%= model.get(\'big\') ? \'primary\' : \'default\' %> expand hidden-xs hidden-sm">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n          </button>\n        </div>\n\n      </div><!-- buttons in .pull-right -->\n\n      <% if (model.get(\'adjtype\')) { %>\n        <form class="form-inline dash-form dash-adj-type" role="form">\n          <span class="cheat-lineheight"></span>\n          <div class="radio">\n            <label>\n              <input type="radio"\n                name="actual-planned"\n                id="ac-<%= model.cid %>"\n                data-acad="ac"\n                <% if (model.get(\'adjtype\') === \'ac\') { %>checked="checked"<% } %>>\n              <span class="radio-ui"></span>\n              Commitments\n            </label>\n          </div>\n          <div class="radio">\n            <label>\n              <input type="radio"\n                name="actual-planned"\n                id="ad-<%= model.cid %>"\n                data-acad="ad"\n                <% if (model.get(\'adjtype\') === \'ad\') { %>checked="checked"<% } %>>\n              <span class="radio-ui"></span>\n              Disbursements\n            </label>\n          </div>\n        </form>\n      <% } %>\n\n    </div>\n  </div>\n\n</div>\n');e.exports=r.View.extend({uiDefaults:function(){var t={big:this.model instanceof u,view:this.model instanceof o?"bar":this.model instanceof l?"multibar":this.model instanceof u?"multibar":null};return t.view||console.error("unknown chart type for model",this.model),t},events:{"change .dash-adj-type input":"changeAdjType","click .chart-view":"changeChartView","click .download":"download","click .expand":"big","click .retry":"render"},initialize:function(t){this.app=t.app,this.model.set(this.uiDefaults()),this.rendered=!1,this.listenTo(this.model,"change:adjtype",this.updateData),this.listenTo(this.model,"change:limit",this.updateData),this.listenTo(this.model,"change:view",this.render),this.app.state.register(this,"chart:"+this.model.url,{get:this._getState,set:n(this.model.set).bind(this.model),empty:null}),this.chart=s[this.model.get("view")]()},_getState:function(){return this.model.pick("limit","adjtype","view","big")},render:function(){this.rendered=!0;var t={model:this.model,chart:this.chartEl,util:a};return this.$el.html(c(t)),this.updateData(),this},updateData:function(){if(this.rendered){var t=this.$(".dash-chart-diagnostic");t.html("Loading...").fadeIn(100);var e={type:"POST",data:JSON.stringify(this.app.filter.serialize())};this.model.fetch(e).done(n(function(){this.chart(this.el.querySelector(".dash-chart-wrap"),this.model),this.renderNumbers(),t.stop().fadeOut(200)}).bind(this)).fail(n(function(){t.html("Failed to load data <small>"+arguments[2]+' <button type="button" class="retry btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Retry</button></small>').show(),console.error("failed loading chart :(",arguments),this.$("svg").hide()}).bind(this))}},renderNumbers:function(){this.model.get("total")&&(this.$(".chart-total").html(a.formatKMB()(this.model.get("total"))),this.$(".chart-currency").html(this.model.get("currency")))},changeAdjType:function(t){var e=t.currentTarget.dataset.acad;this.model.set("adjtype",e)},changeChartView:function(t){var e=t.currentTarget.dataset.view;this.chart=s[e](),this.model.set("view",e)},download:function(t){var e=this.el.querySelector("svg.dash-chart");if(!e)return void this.app.report("Chart export was unsuccessful",["Could not find chart svg to render."]);var n=document.createElement("canvas");n.setAttribute("width",this.$(e).width()+"px"),n.setAttribute("height",this.$(e).height()+"px"),i(n,e.outerHTML,{log:!0,ignoreMouse:!0,ignoreAnimation:!0}),t.currentTarget.href=n.toDataURL("image/png")},big:function(){this.model.set("big",!this.model.get("big"))},setClear:function(t){this.$el[t?"addClass":"removeClass"]("clearfix")}})},{"../../ugly/lib-load-hacks":17,"../../ugly/util":21,"../backbone-dash":3,"../models/ftype-chart":5,"../models/predictability-chart":6,"../models/tops-chart":7,"./chart-types":8,underscore:"underscore"}],10:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=t("./chart");e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app,this.chartViews=n(this.collection.map(function(t){return new r({model:t,app:this.app})},this)),this.listenTo(this.app.filter,"apply",this.applyFilter),this.listenTo(this.collection,"change:big",this.injectBreaks)},render:function(){return"pending"===this.app.filter.loaded.state()&&this.$el.html('<h3 class="text-center">Loading...</h3>'),this.app.filter.loaded.fail(n(this.applyFilter).bind(this)),this},applyFilter:function(){this.$el.html(this.chartViews.map(n(function(t){return t.render().el}).bind(this))),this.injectBreaks()},injectBreaks:function(t){if(this.chartViews.reduce(function(t,e){return e.setClear(t),t?!1:e.model.get("big")?!1:!0},!1),t){var e=this.chartViews.find(function(e){return e.model===t});e&&e.render()}}})},{"../backbone-dash":3,"./chart":9,underscore:"underscore"}],11:[function(t,e){var n=t("../backbone-dash"),i=t("./filters"),r=t("./share");e.exports=n.View.extend({className:"row",initialize:function(t){this.app=t.app,this.filters=new i({app:this.app}),this.share=new r({app:this.app})},render:function(){return this.$el.html([this.filters.render().el,this.share.render().el]),this}})},{"../backbone-dash":3,"./filters":13,"./share":16}],12:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=n.template('<div class="container">\n  <header class="spaced text-center">\n    <h2>\n      The application encountered an\n      <span class="text-danger">error</span>\n      <small>:(</small>\n    </h2>\n    <p><%= err %></p>\n  </header>\n</div>\n');e.exports=i.View.extend({initialize:function(t){this.app=t.app,this.err=t.err},render:function(){return this.$el.html(r({err:this.err})),this}})},{"../backbone-dash":3,underscore:"underscore"}],13:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=n.template('<div class="col-xs-12 col-sm-7 col-md-8">\n  <div class="panel">\n    <div class="panel-body">\n      <button type="button" class="btn btn-sm btn-default pull-right show-filters">\n        <span class="glyphicon glyphicon-edit"></span>\n        edit filters\n      </button>\n      <h3 class="inline-heading">Filters</h3>\n      <div class="applied-filters">\n        <em>Loading...</em>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="filter-popup"></div>\n'),a=n.template("<% if (!applied.length) { %>\n  <em>No filters applied</em>\n<% } else { %>\n  <%= applied %>\n<% } %>\n");e.exports=i.View.extend({events:{"click .show-filters":"showFilter"},initialize:function(t){this.app=t.app,this.listenTo(this.app.filter,"cancel",this.hideFilter),this.listenTo(this.app.filter,"apply",this.applyFilter),this.app.filter.loaded.then(n(function(){this.app.state.register(this,"filters",{get:n(this.app.filter.serialize).bind(this.app.filter),set:n(this.app.filter.deserialize).bind(this.app.filter),empty:{}})}).bind(this))},render:function(){return this.$el.html(r()),this.app.filter.setElement(this.el.querySelector("#filter-popup")),this.hideFilter(),this.app.filter.loaded.done(n(this.renderApplied).bind(this)).fail(n(function(){this.$(".applied-filters").html('<strong class="text-danger filters-err">Failed to load filters</strong> <a href="" class="btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a>'),this.$("button").addClass("disabled")}).bind(this)),this},renderApplied:function(){var t=this.app.filter.serializeToModels(),e=n(t.columnFilters).keys();t.otherFilters&&e.push("Date range"),e=e.join(", "),this.$(".applied-filters").html(a({applied:e}))},showFilter:function(){this.app.filter.showFilters(),this.$("#filter-popup").show()},hideFilter:function(){this.$("#filter-popup").hide()},applyFilter:function(){this.hideFilter(),this.renderApplied()}})},{"../backbone-dash":3,underscore:"underscore"}],14:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=n.template('<div class="col-xs-12">\n  <div class="panel dash-row">\n    <h2>Footer</h2>\n    <p>Blah blah blah</p>\n  </div>\n</div>\n');e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app},render:function(){return this.$el.html(r()),this}})},{"../backbone-dash":3,underscore:"underscore"}],15:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=t("./controls"),a=t("./charts"),s=t("../models/charts-collection"),o=t("./footer"),l=t("../models/tops-chart"),u=t("../models/predictability-chart"),c=t("../models/ftype-chart"),d=n.template('<div class="container">\n</div>\n'),h=n.template('<div class="modal fade" id="<%= details.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n        <h4 class="modal-title text-warning"><%= details.title %></h4>\n      </div>\n      <div class="modal-body">\n        <% if (details.messages) { %>\n          <% _(details.messages).each(function(message) { %>\n            <p><%= message %></p>\n          <% }) %>\n        <% } else { %>\n          <p>Sorry for any inconvenience</p>\n        <% } %>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({initialize:function(t){this.app=t.app,this.controls=new r({app:this.app}),this.charts=new a({app:this.app,collection:new s([new l({name:"Top Donor Agencies"},{app:this.app,url:"/rest/dashboard/tops/do"}),new l({name:"Top Regions"},{app:this.app,url:"/rest/dashboard/tops/re"}),new l({name:"Top Sectors"},{app:this.app,url:"/rest/dashboard/tops/ps"}),new u({name:"Aid Predictability"},{app:this.app,url:"/rest/dashboard/aidPredictability"}),new c({name:"Funding Type"},{app:this.app,url:"/rest/dashboard/ftype"})],{app:this.app})}),this.footer=new o({app:this.app})},render:function(){return this.$el.html(d()),this.$(".container").html([this.controls.render().el,this.charts.render().el,this.footer.render().el]),this},report:function(t,e){console.warn(t+":",e);var i={title:t,messages:e,id:n.uniqueId("report")};this.$el.append(h({details:i})),this.$("#"+i.id).modal()}})},{"../backbone-dash":3,"../models/charts-collection":4,"../models/ftype-chart":5,"../models/predictability-chart":6,"../models/tops-chart":7,"./charts":10,"./controls":11,"./footer":14,underscore:"underscore"}],16:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),r=n.template('<div class="col-xs-12 col-sm-5 col-md-4">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 class="inline-heading">Share dashboard</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-share-button">\n        <span class="glyphicon glyphicon-link"></span>\n        link\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="dash-share-modal modal fade" id="<%= details.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n        Share this dashboard view\n      </div>\n      <div class="panel-body">\n        <form role="form">\n          <label for="dash-share-url">Link</label>\n          <input type="url" class="form-control" id="dash-share-url" />\n        </form>\n      </div>\n      <div class="panel-footer">\n        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({events:{"click .dash-share-button":"share"},initialize:function(t){this.app=t.app},render:function(){return this.$el.html(r({details:{}})),this},share:function(){this.app.state.freeze({toURL:!0}),this.$("#dash-share-url").val(this.app.url.full()),this.$(".dash-share-modal").modal()}})},{"../backbone-dash":3,underscore:"underscore"}],17:[function(t,e){t("nvd3"),t("./underscore-transpose"),window.RGBColor=t("./lib-src/rgbcolor"),t("./lib-src/canvg"),e.exports={canvg:window.canvg}},{"./lib-src/canvg":18,"./lib-src/rgbcolor":19,"./underscore-transpose":20,nvd3:22}],18:[function(){!function(){function t(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return n++,"canvg"+n},e.Definitions={},e.Styles={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(window.DOMParser){var i=new DOMParser;return i.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(e.ctx,t,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(){return 96},e.Property.prototype.getEM=function(t){var n=12,i=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(t)),n},e.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var r=this.numValue();return n&&1>r?r*e.ViewPort.ComputeSize(t):r},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,i,r,a,s){var o=null!=s?this.Parse(s):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:a||o.fontFamily,fontSize:r||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:i||o.fontWeight,fontVariant:n||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var i={},r=e.trim(e.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",o=0;o<r.length;o++)a.fontStyle||-1==t.Styles.indexOf(r[o])?a.fontVariant||-1==t.Variants.indexOf(r[o])?a.fontWeight||-1==t.Weights.indexOf(r[o])?a.fontSize?"inherit"!=r[o]&&(s+=r[o]):("inherit"!=r[o]&&(i.fontSize=r[o].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=r[o]&&(i.fontWeight=r[o]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=r[o]&&(i.fontVariant=r[o]),a.fontStyle=a.fontVariant=!0):("inherit"!=r[o]&&(i.fontStyle=r[o]),a.fontStyle=!0);return""!=s&&(i.fontFamily=s),i}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),i=[],r=0;r<n.length;r+=2)i.push(new e.Point(n[r],n[r+1]));return i},e.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,r,a){var s=t+2/3*(n-t),o=e+2/3*(i-e),l=s+1/3*(r-t),u=o+1/3*(a-e);this.addBezierCurve(t,e,s,l,o,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,s,o,l){var u=[t,e],c=[n,r],d=[a,s],h=[o,l];for(this.addPoint(u[0],u[1]),this.addPoint(h[0],h[1]),i=0;1>=i;i++){var p=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*d[i]+Math.pow(t,3)*h[i]
},f=6*u[i]-12*c[i]+6*d[i],g=-3*u[i]+9*c[i]-9*d[i]+3*h[i],m=3*c[i]-3*u[i];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(0>v)){var y=(-f+Math.sqrt(v))/(2*g);y>0&&1>y&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var b=(-f-Math.sqrt(v))/(2*g);b>0&&1>b&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)))}}else{if(0==f)continue;var x=-m/f;x>0&&1>x&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],r=this.m[1],a=this.m[3],s=this.m[5],o=0,l=0,u=1,c=1/(e*(a*u-s*l)-n*(r*u-s*o)+i*(r*l-a*o));t.transform(c*(a*u-s*l),c*(s*o-r*u),c*(i*l-n*u),c*(e*u-i*o),c*(n*s-i*a),c*(i*r-e*s))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var a=e.trim(i[r].split("(")[0]),s=i[r].split("(")[1].replace(")",""),o=new this.Type[a](s);o.type=a,this.transforms.push(o)}},e.AspectRatio=function(t,n,i,r,a,s,o,l,u,c){n=e.compressSpaces(n),n=n.replace(/^defer\s/,"");var d=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",p=i/r,f=a/s,g=Math.min(p,f),m=Math.max(p,f);"meet"==h&&(r*=g,s*=g),"slice"==h&&(r*=m,s*=m),u=new e.Property("refX",u),c=new e.Property("refY",c),u.hasValue()&&c.hasValue()?t.translate(-g*u.toPixels("x"),-g*c.toPixels("y")):(d.match(/^xMid/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i/2-r/2,0),d.match(/YMid$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,a/2-s/2),d.match(/^xMax/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i-r,0),d.match(/YMax$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,a-s)),"none"==d?t.scale(p,f):"meet"==h?t.scale(g,g):"slice"==h&&t.scale(m,m),t.translate(null==o?0:-o,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,n){var i=this.attributes[t];return null!=i?i:(1==n&&(i=new e.Property(t,""),this.attributes[t]=i),i||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,i){var r=this.styles[t];if(null!=r)return r;var a=this.attribute(t);if(null!=a&&a.hasValue())return this.styles[t]=a,a;if(1!=i){var s=this.parent;if(null!=s){var o=s.style(t);if(null!=o&&o.hasValue())return o}}return 1==n&&(r=new e.Property(t,""),this.styles[t]=r),r||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var i=t;n&&(i=e.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];this.attributes[i.nodeName]=new e.Property(i.nodeName,i.nodeValue)}var r=e.Styles[t.nodeName];if(null!=r)for(var a in r)this.styles[a]=r[a];if(this.attribute("class").hasValue())for(var s=e.compressSpaces(this.attribute("class").value).split(" "),o=0;o<s.length;o++){if(r=e.Styles["."+s[o]],null!=r)for(var a in r)this.styles[a]=r[a];if(r=e.Styles[t.nodeName+"."+s[o]],null!=r)for(var a in r)this.styles[a]=r[a]}if(this.attribute("id").hasValue()){var r=e.Styles["#"+this.attribute("id").value];if(null!=r)for(var a in r)this.styles[a]=r[a]}if(this.attribute("style").hasValue())for(var r=this.attribute("style").value.split(";"),n=0;n<r.length;n++)if(""!=e.trim(r[n])){var l=r[n].split(":"),a=e.trim(l[0]),u=e.trim(l[1]);this.styles[a]=new e.Property(a,u)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var c=t.childNodes[n];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var d=c.nodeValue||c.text||"";""!=e.trim(e.compressSpaces(d))&&this.addChild(new e.Element.tspan(c),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(t.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new e.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(t.strokeStyle=n)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),t.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new e.Property("stroke",t.strokeStyle);r=r.addOpacity(this.style("stroke-opacity")),t.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();t.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=e.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(s):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=s:"undefined"==typeof t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=o:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=o:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=o)}if("undefined"!=typeof t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new e.Transform(this.attribute("transform").value);l.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(t,n[r][0],n[r][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),i=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(r,a),t.lineTo(n,a),t.lineTo(n,i),t.lineTo(r,i),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var s=e.ToNumberArray(this.attribute("viewBox").value),o=s[0],l=s[1];n=s[2],i=s[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),i,o,l,this.attribute("refX").value,this.attribute("refY").value),e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(s[2],s[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,r/2),o=Math.min(o,a/2),null!=t&&(t.beginPath(),t.moveTo(n+s,i),t.lineTo(n+r-s,i),t.quadraticCurveTo(n+r,i,n+r,i+o),t.lineTo(n+r,i+a-o),t.quadraticCurveTo(n+r,i+a,n+r-s,i+a),t.lineTo(n+s,i+a),t.quadraticCurveTo(n,i+a,n,i+a-o),t.lineTo(n,i+o),t.quadraticCurveTo(n,i,n+s,i),t.closePath()),new e.BoundingBox(n,i,n+r,i+a)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-r,i-r,n+r,i+r)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(a,s-r),t.bezierCurveTo(a+n*i,s-r,a+i,s-n*r,a+i,s),t.bezierCurveTo(a+i,s+n*r,a+n*i,s+r,a,s+r),t.bezierCurveTo(a-n*i,s+r,a-i,s+n*r,a-i,s),t.bezierCurveTo(a-i,s-n*r,a-n*i,s-r,a,s-r),t.closePath()),new e.BoundingBox(a-i,s-r,a+i,s+r)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var i=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var r=n.getAsCurrentPoint();for(n.addMarker(r),i.addPoint(r.x,r.y),null!=t&&t.moveTo(r.x,r.y),n.start=n.current;!n.isCommandOrEnd();){var r=n.getAsCurrentPoint();n.addMarker(r,n.start),i.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var a=n.current,r=n.getAsCurrentPoint();n.addMarker(r,a),i.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var s=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var s=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(o.x,o.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(o.x,o.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var o=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,c.x,c.y),null!=t&&t.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var o=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,c.x,c.y),null!=t&&t.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var o=n.current,d=n.getScalar(),h=n.getScalar(),p=n.getScalar()*(Math.PI/180),f=n.getScalar(),g=n.getScalar(),c=n.getAsCurrentPoint(),m=new e.Point(Math.cos(p)*(o.x-c.x)/2+Math.sin(p)*(o.y-c.y)/2,-Math.sin(p)*(o.x-c.x)/2+Math.cos(p)*(o.y-c.y)/2),v=Math.pow(m.x,2)/Math.pow(d,2)+Math.pow(m.y,2)/Math.pow(h,2);v>1&&(d*=Math.sqrt(v),h*=Math.sqrt(v));var y=(f==g?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(h,2)-Math.pow(d,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(d,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var b=new e.Point(y*d*m.y/h,y*-h*m.x/d),x=new e.Point((o.x+c.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(o.y+c.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},C=_([1,0],[(m.x-b.x)/d,(m.y-b.y)/h]),D=[(m.x-b.x)/d,(m.y-b.y)/h],M=[(-m.x-b.x)/d,(-m.y-b.y)/h],S=_(D,M);k(D,M)<=-1&&(S=Math.PI),k(D,M)>=1&&(S=0);var P=1-g?1:-1,A=C+P*(S/2),E=new e.Point(x.x+d*Math.cos(A),x.y+h*Math.sin(A));if(n.addMarkerAngle(E,A-P*Math.PI/2),n.addMarkerAngle(c,A-P*Math.PI),i.addPoint(c.x,c.y),null!=t){var k=d>h?d:h,I=d>h?1:d/h,T=d>h?h/d:1;t.translate(x.x,x.y),t.rotate(p),t.scale(I,T),t.arc(0,0,k,C,C+S,1-g),t.scale(1/I,1/T),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),r=new e.Element.svg;r.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new e.Property("width",n+"px"),r.attributes.height=new e.Property("height",i+"px"),r.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var a=document.createElement("canvas");a.width=n,a.height=i;var s=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var o=-1;1>=o;o++)for(var l=-1;1>=l;l++)s.save(),s.translate(o*a.width,l*a.height),r.render(s),s.restore();var u=t.createPattern(a,"repeat");return u}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,i){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var r=new e.Element.svg;r.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new e.Property("refX",this.attribute("refX").value),r.attributes.refY=new e.Property("refY",this.attribute("refY").value),r.attributes.width=new e.Property("width",this.attribute("markerWidth").value),r.attributes.height=new e.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(t,n,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var a=function(t){if(i.hasValue()){var n=new e.Property("color",t);return n.addOpacity(i).value}return t},s=this.getGradient(t,n);if(null==s)return a(r.stops[r.stops.length-1].color);for(var o=0;o<r.stops.length;o++)s.addColorStop(r.stops[o].offset,a(r.stops[o].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],u=new e.Element.rect;u.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),u.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var c=new e.Element.g;c.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var d=new e.Element.svg;d.attributes.x=new e.Property("x",0),d.attributes.y=new e.Property("y",0),d.attributes.width=new e.Property("width",l.width),d.attributes.height=new e.Property("height",l.height),d.children=[c];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;var p=h.getContext("2d");return p.fillStyle=s,d.render(p),p.createPattern(h,"no-repeat")}return s}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==s?null:t.createLinearGradient(i,r,a,s)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,s=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var o="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,s,0,i,r,o)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[i])),t.to=new e.Property("to",parseFloat(this.values.value[r])),t.progress=(n-i)/(r-i)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,r=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(r,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),i=e.ToNumberArray(t.to.value),r="",a=0;a<n.length;a++)r+=n[a]+(i[a]-n[a])*t.progress+" ";return r}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(e.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)
}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-i,t+Math.floor(2*i/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var r=0,a=n;a<e.children.length;a++){var s=e.children[a];if(a>n&&s.attribute("x").hasValue())break;r+=s.measureTextRecursive(t)}return-1*("end"==i?r:r/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),"undefined"!=typeof t.glyphs[i]&&(r=t.glyphs[i][a],null==r&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i]))}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<a.length;o++){var l=this.getGlyph(n,a,o),u=i/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var c=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==r&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),r=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<a.length;o++){var l=this.getGlyph(n,a,o);r+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(r+=s[o])}return r}var u=e.compressSpaces(this.getText());if(!t.measureText)return 10*u.length;t.save(),this.setContext(t);var c=t.measureText(u).width;return t.restore(),c}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=t.nodeValue||t.text||"",this.getText=function(){return this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=!0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else{var i=new e.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var i=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,i)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),r.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=a&&0!=s&&(t.save(),i?t.drawSvg(this.img,n,r,a,s):(t.translate(n,r),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,a,this.img.width,s,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+i,n+r)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=e.compressSpaces(n);for(var r=n.split("}"),i=0;i<r.length;i++)if(""!=e.trim(r[i]))for(var a=r[i].split("{"),s=a[0].split(","),o=a[1].split(";"),l=0;l<s.length;l++){var u=e.trim(s[l]);if(""!=u){for(var c={},d=0;d<o.length;d++){var h=o[d].indexOf(":"),p=o[d].substr(0,h),f=o[d].substr(h+1,o[d].length-h);null!=p&&null!=f&&(c[e.trim(p)]=new e.Property(e.trim(p),e.trim(f)))}if(e.Styles[u]=c,"@font-face"==u)for(var g=c["font-family"].value.replace(/"/g,""),m=c.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),b=m[v].indexOf(")",y),x=m[v].substr(y+5,b-y-6),w=e.parseXml(e.ajax(x)),k=w.getElementsByTagName("font"),_=0;_<k.length;_++){var C=e.CreateElement(k[_]);e.Definitions[g]=C}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){return null!=n?n.getBoundingBox():void 0},this.renderChildren=function(t){if(null!=n){var i=n;"symbol"==n.type&&(i=new e.Element.svg,i.type="svg",i.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),i.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),i.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),i.children=n.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new e.Property("height",this.attribute("height").value)));var r=i.parent;i.parent=null,i.render(t),i.parent=r}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==a&&0==s){for(var o=new e.BoundingBox,l=0;l<this.children.length;l++)o.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(o.x1),r=Math.floor(o.y1),a=Math.floor(o.width()),s=Math.floor(o.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var c=document.createElement("canvas");c.width=i+a,c.height=r+s;var d=c.getContext("2d");this.renderChildren(d);var h=document.createElement("canvas");h.width=i+a,h.height=r+s;var p=h.getContext("2d");n.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=d.createPattern(c,"no-repeat"),p.fillRect(0,0,i+a,r+s),t.fillStyle=p.createPattern(h,"no-repeat"),t.fillRect(0,0,i+a,r+s),n.attribute("mask").value=u},this.render=function(){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var r=0;r<this.children.length;r++){var a=this.children[r];if("undefined"!=typeof a.path){var s=null;a.attribute("transform").hasValue()&&(s=new e.Transform(a.attribute("transform").value),s.apply(t)),a.path(t),CanvasRenderingContext2D.prototype.closePath=i,s&&s.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),s=Math.floor(n.height()),o=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var d=this.children[c].extraFilterDistance||0;l=Math.max(l,d),u=Math.max(u,d)}var h=document.createElement("canvas");h.width=a+2*l,h.height=s+2*u;var p=h.getContext("2d");p.translate(-i+l,-r+u),e.render(p);for(var c=0;c<this.children.length;c++)this.children[c].apply(p,0,0,a+2*l,s+2*u);t.drawImage(h,0,0,a+2*l,s+2*u,i-l,r-u,a+2*l,s+2*u),e.style("filter",!0).value=o},this.render=function(){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function i(t,e,n,i,r,a,s){t[n*i*4+4*e+a]=s}function r(t,e){var n=a[t];return n*(0>n?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var a=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=a[0];a=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=a[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(o)*e+Math.sin(o)*n};a=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,a,s,o){for(var l=t.getImageData(0,0,s,o),a=0;o>a;a++)for(var e=0;s>e;e++){var u=n(l.data,e,a,s,o,0),c=n(l.data,e,a,s,o,1),d=n(l.data,e,a,s,o,2),h=n(l.data,e,a,s,o,3);i(l.data,e,a,s,o,0,r(0,u)+r(1,c)+r(2,d)+r(3,h)+r(4,1)),i(l.data,e,a,s,o,1,r(5,u)+r(6,c)+r(7,d)+r(8,h)+r(9,1)),i(l.data,e,a,s,o,2,r(10,u)+r(11,c)+r(12,d)+r(13,h)+r(14,1)),i(l.data,e,a,s,o,3,r(15,u)+r(16,c)+r(17,d)+r(18,h)+r(19,1))}t.clearRect(0,0,s,o),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,r,a){return"undefined"==typeof stackBlurCanvasRGBA?void e.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),stackBlurCanvasRGBA(t.canvas.id,n,i,r,a,this.blurRadius),void document.body.removeChild(t.canvas))}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),i.type=t.nodeName,i},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var i=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var r=e.CreateElement(n.documentElement);r.root=!0;var a=!0,s=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,s=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),s=r.style("height").toPixels("y")),e.ViewPort.SetCurrent(i,s),null!=e.opts.offsetX&&(r.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(r.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var o=null,l=null,u=e.ToNumberArray(r.attribute("viewBox").value);null!=e.opts.scaleWidth&&(r.attribute("width").hasValue()?o=r.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(u[2])||(o=u[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(r.attribute("height").hasValue()?l=r.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(u[3])||(l=u[3]/e.opts.scaleHeight)),null==o&&(o=l),null==l&&(l=o),r.attribute("width",!0).value=e.opts.scaleWidth,r.attribute("height",!0).value=e.opts.scaleHeight,r.attribute("transform",!0).value+=" scale("+1/o+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,i,s),r.render(t),a&&(a=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},o=!0;e.ImagesLoaded()&&(o=!1,s()),e.intervalID=setInterval(function(){var t=!1;if(o&&e.ImagesLoaded()&&(o=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(s(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],i=this.eventElements[t];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},e}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var r=t(i||{});(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=r);var a=e.getContext("2d");"undefined"!=typeof n.documentElement?r.loadXmlDoc(a,n):"<"==n.substr(0,1)?r.loadXml(a,n):r.load(a,n)}else for(var s=document.querySelectorAll("svg"),o=0;o<s.length;o++){var l=s[o],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var c=document.createElement("div");c.appendChild(l),canvg(u,c.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,r){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:r})})},{}],19:[function(t,e){function n(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in e)t==i&&(t=e[i]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,o=r[a].process,l=s.exec(t);l&&(channels=o(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<r.length;i++)for(var a=r[i].example,s=0;s<a.length;s++)t[t.length]=a[s];for(var o in e)t[t.length]=o;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var i=0;i<t.length;i++)try{var u=document.createElement("li"),c=new n(t[i]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),d.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[i]+" -> "+c.toRGB()+" -> "+c.toHex());u.appendChild(d),u.appendChild(h),l.appendChild(u)}catch(p){}return l}}e.exports=n},{}],20:[function(t){var e=t("underscore");e.mixin({transpose:function(t){return e.zip.apply(e,t)}})},{underscore:"underscore"}],21:[function(t,e){var n=t("d3-browserify"),i=function(t){var e=n.format("."+(t||3)+"s");return function(t){return e(t).replace("G","B")}},r=function(t){var e=1;return function(n){return n.length-e>t&&(n=n.slice(0,t-e)+"..."),n}},a=function(t){var e=n.scale["category"+(t>10?"20":"10")]().range();return function(t,n){return t.color||e[n%e.length]}};e.exports={formatKMB:i,formatShortText:r,categoryColours:a}},{"d3-browserify":"d3-browserify"}],22:[function(){!function(){function t(t,e){return new Date(e,t+1,0).getDate()}function e(t,e,n){return function(i,r,a){var s=t(i),o=[];if(i>s&&e(s),a>1)for(;r>s;){var l=new Date(+s);n(l)%a===0&&o.push(l),e(s)}else for(;r>s;)o.push(new Date(+s)),e(s);return o}}var n=window.nv||{};n.version="1.1.15b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev&&(n.dispatch.on("render_start",function(){n.logs.startTime=+new Date}),n.dispatch.on("render_end",function(){n.logs.endTime=+new Date,n.logs.totalTime=n.logs.endTime-n.logs.startTime,n.log("total",n.logs.totalTime)})),n.log=function(){if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},n.render=function(t){t=t||1,n.render.active=!0,n.dispatch.render_start(),setTimeout(function(){for(var e,i,r=0;t>r&&(i=n.render.queue[r]);r++)e=i.generate(),typeof i.callback==typeof Function&&i.callback(e),n.graphs.push(e);n.render.queue.splice(0,r),n.render.queue.length?setTimeout(arguments.callee,0):(n.dispatch.render_end(),n.render.active=!1)},0)},n.render.active=!1,n.render.queue=[],n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),n.render.queue.push(t),n.render.active||n.render()},n.identity=function(t){return t},n.strip=function(t){return t.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(t){return new Date(t.getFullYear(),t.getMonth(),0)},d3.time.monthEnds=e(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(t){return t.getMonth()}),n.interactiveGuideline=function(){"use strict";function t(d){d.each(function(d){function h(){var n=d3.mouse(this),i=n[0],r=n[1],l=!0,u=!1;if(c&&(i=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),l&&(i-=a.left,r-=a.top),0>i||0>r||i>f||r>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(e.nvPointerEventsClass))return;return o.elementMouseout({mouseX:i,mouseY:r}),void t.renderGuideLine(null)}var d=s.invert(i);o.elementMousemove({mouseX:i,mouseY:r,pointXValue:d}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:i,mouseY:r,pointXValue:d})}var p=d3.select(this),f=i||960,g=r||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]),v=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h),t.renderGuideLine=function(t){if(l){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[n.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}})})}var e=n.models.tooltip(),i=null,r=null,a={left:0,top:0},s=d3.scale.linear(),o=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),l=!0,u=null,c=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=o,t.tooltip=e,t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.xScale=function(e){return arguments.length?(s=e,t):s},t.showGuideLine=function(e){return arguments.length?(l=e,t):l},t.svgContainer=function(e){return arguments.length?(u=e,t):u},t},n.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t){return t.x});var i=d3.bisector(n).left,r=d3.max([0,i(t,e)-1]),a=n(t[r],r);if("undefined"==typeof a&&(a=r),a===e)return r;var s=d3.min([r+1,t.length-1]),o=n(t[s],s);return"undefined"==typeof o&&(o=s),Math.abs(o-e)>=Math.abs(a-e)?r:s},n.nearestValueIndex=function(t,e,n){"use strict";var i=1/0,r=null;return t.forEach(function(t,a){var s=Math.abs(e-t);i>=s&&n>s&&(i=s,r=a)}),r},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(d){var t=d3.select(d);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];p.left=p.left*n,p.top=p.top*n}}}function e(t){var e;e=d3.select(d?d:"body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(c?c:"xy-tooltip")).attr("id",g)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(m,!0),n.classed(m,!0),n.node()}function i(){if(f&&x(a)){t();var r=p.left,c=null!=u?u:p.top,g=e(b(a));if(h=g,d){var m=d.getElementsByTagName("svg")[0],v=(m?m.getBoundingClientRect():d.getBoundingClientRect(),{left:0,top:0});if(m){var y=m.getBoundingClientRect(),w=d.getBoundingClientRect(),k=y.top;if(0>k){var _=d.getBoundingClientRect();k=Math.abs(k)>_.height?0:k}v.top=Math.abs(k-w.top),v.left=Math.abs(y.left-w.left)}r+=d.offsetLeft+v.left-2*d.scrollLeft,c+=d.offsetTop+v.top-2*d.scrollTop}return l&&l>0&&(c=Math.floor(c/l)*l),n.tooltip.calcTooltipPosition([r,c],s,o,g),i}}var r=null,a=null,s="w",o=50,l=25,u=null,c=null,d=null,h=null,p={left:null,top:null},f=!0,g="nvtooltip-"+Math.floor(1e5*Math.random()),m="nv-pointer-events-none",v=function(t){return t},y=function(t){return t},b=function(t){if(null!=r)return r;if(null==t)return"";var e=d3.select(document.createElement("table")),n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value));var i=e.selectAll("tbody").data([t]).enter().append("tbody"),a=i.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});a.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),a.append("td").classed("key",!0).html(function(t){return t.key}),a.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),a.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))
}});var s=e.node().outerHTML;return void 0!==t.footer&&(s+="<div class='footer'>"+t.footer+"</div>"),s},x=function(t){return t&&t.series&&t.series.length>0?!0:!1};return i.nvPointerEventsClass=m,i.content=function(t){return arguments.length?(r=t,i):r},i.tooltipElem=function(){return h},i.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(b=t),i):b},i.data=function(t){return arguments.length?(a=t,i):a},i.gravity=function(t){return arguments.length?(s=t,i):s},i.distance=function(t){return arguments.length?(o=t,i):o},i.snapDistance=function(t){return arguments.length?(l=t,i):l},i.classes=function(t){return arguments.length?(c=t,i):c},i.chartContainer=function(t){return arguments.length?(d=t,i):d},i.position=function(t){return arguments.length?(p.left="undefined"!=typeof t.left?t.left:p.left,p.top="undefined"!=typeof t.top?t.top:p.top,i):p},i.fixedTop=function(t){return arguments.length?(u=t,i):u},i.enabled=function(t){return arguments.length?(f=t,i):f},i.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),i):v},i.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(y=t),i):y},i.id=function(){return g},i},n.tooltip.show=function(t,e,i,r,a,s){var o=document.createElement("div");o.className="nvtooltip "+(s?s:"xy-tooltip");var l=a;(!a||a.tagName.match(/g|svg/i))&&(l=document.getElementsByTagName("body")[0]),o.style.left=0,o.style.top=0,o.style.opacity=0,o.innerHTML=e,l.appendChild(o),a&&(t[0]=t[0]-a.scrollLeft,t[1]=t[1]-a.scrollTop),n.tooltip.calcTooltipPosition(t,i,r,o)},n.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},n.tooltip.findTotalOffsetTop=function(t,e){var n=e;do isNaN(t.offsetTop)||(n+=t.offsetTop);while(t=t.offsetParent);return n},n.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do isNaN(t.offsetLeft)||(n+=t.offsetLeft);while(t=t.offsetParent);return n},n.tooltip.calcTooltipPosition=function(t,e,i,r){var a,s,o=parseInt(r.offsetHeight),l=parseInt(r.offsetWidth),u=n.utils.windowSize().width,c=n.utils.windowSize().height,d=window.pageYOffset,h=window.pageXOffset;c=window.innerWidth>=document.body.scrollWidth?c:c-16,u=window.innerHeight>=document.body.scrollHeight?u:u-16,e=e||"s",i=i||20;var p=function(t){return n.tooltip.findTotalOffsetTop(t,s)},f=function(t){return n.tooltip.findTotalOffsetLeft(t,a)};switch(e){case"e":a=t[0]-l-i,s=t[1]-o/2;var g=f(r),m=p(r);h>g&&(a=t[0]+i>h?t[0]+i:h-g+a),d>m&&(s=d-m+s),m+o>d+c&&(s=d+c-m+s-o);break;case"w":a=t[0]+i,s=t[1]-o/2;var g=f(r),m=p(r);g+l>u&&(a=t[0]-l-i),d>m&&(s=d+5),m+o>d+c&&(s=d+c-m+s-o);break;case"n":a=t[0]-l/2-5,s=t[1]+i;var g=f(r),m=p(r);h>g&&(a=h+5),g+l>u&&(a=a-l/2+5),m+o>d+c&&(s=d+c-m+s-o);break;case"s":a=t[0]-l/2,s=t[1]-o-i;var g=f(r),m=p(r);h>g&&(a=h+5),g+l>u&&(a=a-l/2+5),d>m&&(s=d);break;case"none":a=t[0],s=t[1]-i;var g=f(r),m=p(r)}return r.style.left=a+"px",r.style.top=s+"px",r.style.opacity=1,r.style.position="absolute",r},n.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),n.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},n.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},n.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:n.utils.defaultColor()},n.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},n.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var i=n.length;return function(r){var a=e(r);return i||(i=n.length),"undefined"!=typeof t[a]?"function"==typeof t[a]?t[a]():t[a]:n[--i]}},n.utils.pjax=function(t,e){function i(i){d3.html(i,function(i){var r=d3.select(e).node();r.parentNode.replaceChild(d3.select(i).select(e).node(),r),n.utils.pjax(t,e)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),i(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&i(d3.event.state)})},n.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px","")),n=t.text().length;return n*e*.5}return 0},n.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||1/0===t?0:t},n.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},n.models.axis=function(){"use strict";function t(n){return n.each(function(t){var n=d3.select(this),a=n.selectAll("g.nv-wrap.nv-axis").data([t]),v=a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(v.append("g"),a.select("g"));null!==f?e.ticks(f):("top"==e.orient()||"bottom"==e.orient())&&e.ticks(Math.abs(s.range()[1]-s.range()[0])/100),y.transition().call(e),m=m||e.scale();var b=e.tickFormat();null==b&&(b=m.tickFormat());var x=y.selectAll("text.nv-axislabel").data([o||null]);switch(x.exit().remove(),e.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",0).attr("x",w/2),l){var k=a.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t){return"translate("+s(t)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate("+s.range()[e]+",0)"})}break;case"bottom":var _=36,C=30,D=y.selectAll("g").select("text");if(c%360){D.each(function(){var t=this.getBBox().width;t>C&&(C=t)});var M=Math.abs(Math.sin(c*Math.PI/180)),_=(M?M*C:C)+30;D.attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",_).attr("x",w/2),l){var k=a.selectAll("g.nv-axisMaxMin").data([s.domain()[0],s.domain()[s.domain().length-1]]);k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c?c%360>0?"start":"end":"middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"})}h&&D.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?-Math.max(i.right,r)+12:-10).attr("x",d?s.range()[0]/2:e.tickPadding()),l){var k=a.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t){return"translate(0,"+s(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?-Math.max(i.left,r)+g:-10).attr("x",d?-s.range()[0]/2:-e.tickPadding()),l){var k=a.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t){return"translate(0,"+m(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}}if(x.text(function(t){return t}),!l||"left"!==e.orient()&&"right"!==e.orient()||(y.selectAll("g").each(function(t){d3.select(this).select("text").attr("opacity",1),(s(t)<s.range()[1]+10||s(t)>s.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),s.domain()[0]==s.domain()[1]&&0==s.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===e.orient()||"bottom"===e.orient())){var S=[];a.selectAll("g.nv-axisMaxMin").each(function(t,e){try{S.push(e?s(t)-this.getBBox().width-4:s(t)+this.getBBox().width+4)}catch(n){S.push(e?s(t)-4:s(t)+4)}}),y.selectAll("g").each(function(t){(s(t)<S[0]||s(t)>S[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())})}u&&y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),m=s.copy()}),t}var e=d3.svg.axis(),i={top:0,right:0,bottom:0,left:0},r=75,a=60,s=d3.scale.linear(),o=null,l=!0,u=!0,c=0,d=!0,h=!1,p=!1,f=null,g=12;e.scale(s).orient("bottom").tickFormat(function(t){return t});var m;return t.axis=e,d3.rebind(t,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(r=e,t):r},t.ticks=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(a=e,t):a},t.axisLabel=function(e){return arguments.length?(o=e,t):o},t.showMaxMin=function(e){return arguments.length?(l=e,t):l},t.highlightZero=function(e){return arguments.length?(u=e,t):u},t.scale=function(n){return arguments.length?(s=n,e.scale(s),p="function"==typeof s.rangeBands,d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t):s},t.rotateYLabel=function(e){return arguments.length?(d=e,t):d},t.rotateLabels=function(e){return arguments.length?(c=e,t):c},t.staggerLabels=function(e){return arguments.length?(h=e,t):h},t.axisLabelDistance=function(e){return arguments.length?(g=e,t):g},t},n.models.historicalBar=function(){"use strict";function t(w){return w.each(function(t){var w=o-s.left-s.right,k=l-s.top-s.bottom,_=d3.select(this);c.domain(e||d3.extent(t[0].values.map(h).concat(f))),c.range(m?r||[.5*w/t[0].values.length,w*(t[0].values.length-.5)/t[0].values.length]:r||[0,w]),d.domain(i||d3.extent(t[0].values.map(p).concat(g))).range(a||[k,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var C=_.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([t[0].values]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),M=D.append("defs"),S=D.append("g"),P=C.select("g");S.append("g").attr("class","nv-bars"),C.attr("transform","translate("+s.left+","+s.top+")"),_.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})}),M.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),C.select("#nv-chart-clip-path-"+u+" rect").attr("width",w).attr("height",k),P.attr("clip-path",v?"url(#nv-chart-clip-path-"+u+")":"");var A=C.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});A.exit().remove();A.enter().append("rect").attr("x",0).attr("y",function(t,e){return n.utils.NaNtoZero(d(Math.max(0,p(t,e))))}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.abs(d(p(t,e))-d(0)))}).attr("transform",function(e,n){return"translate("+(c(h(e,n))-w/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,n){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({point:e,series:t[0],pos:[c(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(e,n){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){x&&(b.elementClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(b.elementDblClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())});A.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).transition().attr("transform",function(e,n){return"translate("+(c(h(e,n))-w/t[0].values.length*.45)+",0)"}).attr("width",w/t[0].values.length*.9),A.transition().attr("y",function(t,e){var i=p(t,e)<0?d(0):d(0)-d(p(t,e))<1?d(0)-1:d(p(t,e));return n.utils.NaNtoZero(i)}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.max(Math.abs(d(p(t,e))-d(0)),1))})}),t}var e,i,r,a,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=[],g=[0],m=!1,v=!0,y=n.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),x=!0;return t.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=b,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceX=function(e){return arguments.length?(f=e,t):f},t.forceY=function(e){return arguments.length?(g=e,t):g},t.padData=function(e){return arguments.length?(m=e,t):m},t.clipEdge=function(e){return arguments.length?(v=e,t):v},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.id=function(e){return arguments.length?(u=e,t):u},t.interactive=function(){return arguments.length?(x=!1,t):x},t},n.models.bullet=function(){"use strict";function t(n){return n.each(function(t,n){{var i=h-e.left-e.right,f=p-e.top-e.bottom,v=d3.select(this),y=a.call(this,t,n).slice().sort(d3.descending),b=s.call(this,t,n).slice().sort(d3.descending),x=o.call(this,t,n).slice().sort(d3.descending),w=l.call(this,t,n).slice(),k=u.call(this,t,n).slice(),_=c.call(this,t,n).slice(),C=d3.scale.linear().domain(d3.extent(d3.merge([d,y]))).range(r?[i,0]:[0,i]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(C.range())}this.__chart__=C;var D=d3.min(y),M=d3.max(y),S=y[1],P=v.selectAll("g.nv-wrap.nv-bullet").data([t]),A=P.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),E=A.append("g"),I=P.select("g");E.append("rect").attr("class","nv-range nv-rangeMax"),E.append("rect").attr("class","nv-range nv-rangeAvg"),E.append("rect").attr("class","nv-range nv-rangeMin"),E.append("rect").attr("class","nv-measure"),E.append("path").attr("class","nv-markerTriangle"),P.attr("transform","translate("+e.left+","+e.top+")");var T=function(t){return Math.abs(C(t)-C(0))},N=function(t){return C(0>t?t:0)};I.select("rect.nv-rangeMax").attr("height",f).attr("width",T(M>0?M:D)).attr("x",N(M>0?M:D)).datum(M>0?M:D),I.select("rect.nv-rangeAvg").attr("height",f).attr("width",T(S)).attr("x",N(S)).datum(S),I.select("rect.nv-rangeMin").attr("height",f).attr("width",T(M)).attr("x",N(M)).attr("width",T(M>0?D:M)).attr("x",N(M>0?D:M)).datum(M>0?D:M),I.select("rect.nv-measure").style("fill",g).attr("height",f/3).attr("y",f/3).attr("width",0>x?C(0)-C(x[0]):C(x[0])-C(0)).attr("x",N(x)).on("mouseover",function(){m.elementMouseover({value:x[0],label:_[0]||"Current",pos:[C(x[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:x[0],label:_[0]||"Current"})});var B=f/6;b[0]?I.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+C(b[0])+","+f/2+")"}).attr("d","M0,"+B+"L"+B+","+-B+" "+-B+","+-B+"Z").on("mouseover",function(){m.elementMouseover({value:b[0],label:k[0]||"Previous",pos:[C(b[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:b[0],label:k[0]||"Previous"})}):I.selectAll("path.nv-markerTriangle").remove(),P.selectAll(".nv-range").on("mouseover",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseover({value:t,label:n,pos:[C(t),f/2]})}).on("mouseout",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseout({value:t,label:n})})}),t}var e={top:0,right:0,bottom:0,left:0},i="left",r=!1,a=function(t){return t.ranges},s=function(t){return t.markers},o=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},d=[0],h=380,p=30,f=null,g=n.utils.getColor(["#1f77b4"]),m=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=m,t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,r="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(a=e,t):a},t.markers=function(e){return arguments.length?(s=e,t):s},t.measures=function(e){return arguments.length?(o=e,t):o},t.forceX=function(e){return arguments.length?(d=e,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.tickFormat=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(g=n.utils.getColor(e),t):g},t},n.models.bulletChart=function(){"use strict";function t(n){return n.each(function(i,p){var v=d3.select(this),y=(u||parseInt(v.style("width"))||960)-a.left-a.right,b=c-a.top-a.bottom,x=this;if(t.update=function(){t(n)},t.container=this,!i||!s.call(this,i,p)){var w=v.selectAll(".nv-noData").data([f]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+y/2).attr("y",18+a.top+b/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove();var k=s.call(this,i,p).slice().sort(d3.descending),_=o.call(this,i,p).slice().sort(d3.descending),C=l.call(this,i,p).slice().sort(d3.descending),D=v.selectAll("g.nv-wrap.nv-bulletChart").data([i]),M=D.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),S=M.append("g"),P=D.select("g");S.append("g").attr("class","nv-bulletWrap"),S.append("g").attr("class","nv-titles"),D.attr("transform","translate("+a.left+","+a.top+")");var A=d3.scale.linear().domain([0,Math.max(k[0],_[0],C[0])]).range(r?[y,0]:[0,y]),E=this.__chart__||d3.scale.linear().domain([0,1/0]).range(A.range());this.__chart__=A;var I=S.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-a.top-a.bottom)/2+")");I.append("text").attr("class","nv-title").text(function(t){return t.title}),I.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(y).height(b);var T=P.select(".nv-bulletWrap");d3.transition(T).call(e);var N=d||A.tickFormat(y/100),B=P.selectAll("g.nv-tick").data(A.ticks(y/50),function(t){return this.textContent||N(t)}),F=B.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+E(t)+",0)"}).style("opacity",1e-6);F.append("line").attr("y1",b).attr("y2",7*b/6),F.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*b/6).text(N);var z=d3.transition(B).attr("transform",function(t){return"translate("+A(t)+",0)"}).style("opacity",1);z.select("line").attr("y1",b).attr("y2",7*b/6),z.select("text").attr("y",7*b/6),d3.transition(B.exit()).attr("transform",function(t){return"translate("+A(t)+",0)"}).style("opacity",1e-6).remove(),g.on("tooltipShow",function(t){t.key=i.title,h&&m(t,x.parentNode)})}),d3.timer.flush(),t}var e=n.models.bullet(),i="left",r=!1,a={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},o=function(t){return t.markers},l=function(t){return t.measures},u=null,c=55,d=null,h=!0,p=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},f="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide"),m=function(e,i){var r=e.pos[0]+(i.offsetLeft||0)+a.left,s=e.pos[1]+(i.offsetTop||0)+a.top,o=p(e.key,e.label,e.value,e,t);n.tooltip.show([r,s],o,e.value<0?"e":"w",null,i)};return e.dispatch.on("elementMouseover.tooltip",function(t){g.tooltipShow(t)}),e.dispatch.on("elementMouseout.tooltip",function(t){g.tooltipHide(t)}),g.on("tooltipHide",function(){h&&n.tooltip.cleanup()}),t.dispatch=g,t.bullet=e,d3.rebind(t,e,"color"),t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,r="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(s=e,t):s},t.markers=function(e){return arguments.length?(o=e,t):o},t.measures=function(e){return arguments.length?(l=e,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.tickFormat=function(e){return arguments.length?(d=e,t):d},t.tooltips=function(e){return arguments.length?(h=e,t):h},t.tooltipContent=function(e){return arguments.length?(p=e,t):p},t.noData=function(e){return arguments.length?(f=e,t):f},t},n.models.cumulativeLineChart=function(){"use strict";function t(_){return _.each(function(_){function I(){d3.select(t.container).style("cursor","ew-resize")}function F(){N.x=d3.event.x,N.i=Math.round(T.invert(N.x)),V()}function z(){d3.select(t.container).style("cursor","auto"),D.index=N.i,A.stateChange(D)}function V(){ie.data([N]);var e=t.transitionDuration();t.transitionDuration(0),t.update(),t.transitionDuration(e)}var L=d3.select(this).classed("nv-chart-"+C,!0),R=this,W=(p||parseInt(L.style("width"))||960)-d.left-d.right,Y=(f||parseInt(L.style("height"))||400)-d.top-d.bottom;if(t.update=function(){L.transition().duration(E).call(t)},t.container=this,D.disabled=_.map(function(t){return!!t.disabled}),!M){var O;M={};for(O in D)M[O]=D[O]instanceof Array?D[O].slice(0):D[O]}var H=d3.behavior.drag().on("dragstart",I).on("drag",F).on("dragend",z);if(!(_&&_.length&&_.filter(function(t){return t.values.length}).length)){var j=L.selectAll(".nv-noData").data([S]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",d.left+W/2).attr("y",d.top+Y/2).text(function(t){return t}),t}if(L.selectAll(".nv-noData").remove(),i=a.xScale(),r=a.yScale(),k)a.yDomain(null);else{var $=_.filter(function(t){return!t.disabled}).map(function(t){var e=d3.extent(t.values,a.y());return e[0]<-.95&&(e[0]=-.95),[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),X=[d3.min($,function(t){return t[0]}),d3.max($,function(t){return t[1]})];a.yDomain(X)}T.domain([0,_[0].values.length-1]).range([0,W]).clamp(!0);var _=e(N.i,_),U=w?"none":"all",q=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([_]),G=q.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),K=q.select("g");if(G.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-background"),G.append("g").attr("class","nv-linesWrap").style("pointer-events",U),G.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),g&&(l.width(W),K.select(".nv-legendWrap").datum(_).call(l),d.top!=l.height()&&(d.top=l.height(),Y=(f||parseInt(L.style("height"))||400)-d.top-d.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),x){var Z=[{key:"Re-scale y-axis",disabled:!k}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),K.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-d.top+")").call(u)}q.attr("transform","translate("+d.left+","+d.top+")"),y&&K.select(".nv-y.nv-axis").attr("transform","translate("+W+",0)");var J=_.filter(function(t){return t.tempDisabled});q.select(".tempDisabled").remove(),J.length&&q.append("text").attr("class","tempDisabled").attr("x",W/2).attr("y","-.71em").style("text-anchor","end").text(J.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(c.width(W).height(Y).margin({left:d.left,top:d.top}).svgContainer(L).xScale(i),q.select(".nv-interactive").call(c)),G.select(".nv-background").append("rect"),K.select(".nv-background rect").attr("width",W).attr("height",Y),a.y(function(t){return t.display.y}).width(W).height(Y).color(_.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!_[e].disabled&&!_[e].tempDisabled}));var Q=K.select(".nv-linesWrap").datum(_.filter(function(t){return!t.disabled&&!t.tempDisabled}));Q.call(a),_.forEach(function(t,e){t.seriesIndex=e});var te=_.filter(function(t){return!t.disabled&&!!P(t)}),ee=K.select(".nv-avgLinesWrap").selectAll("line").data(te,function(t){return t.key}),ne=function(t){var e=r(P(t));return 0>e?0:e>Y?Y:e};ee.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t){return a.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",W).attr("y1",ne).attr("y2",ne),ee.style("stroke-opacity",function(t){var e=r(P(t));return 0>e||e>Y?0:1}).attr("x1",0).attr("x2",W).attr("y1",ne).attr("y2",ne),ee.exit().remove();var ie=Q.selectAll(".nv-indexLine").data([N]);ie.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(H),ie.attr("transform",function(t){return"translate("+T(t.i)+",0)"}).attr("height",Y),m&&(s.scale(i).ticks(Math.min(_[0].values.length,W/70)).tickSize(-Y,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(K.select(".nv-x.nv-axis")).call(s)),v&&(o.scale(r).ticks(Y/36).tickSize(-W,0),d3.transition(K.select(".nv-y.nv-axis")).call(o)),K.select(".nv-background rect").on("click",function(){N.x=d3.mouse(this)[0],N.i=Math.round(T.invert(N.x)),D.index=N.i,A.stateChange(D),V()}),a.dispatch.on("elementClick",function(t){N.i=t.pointIndex,N.x=T(N.i),D.index=N.i,A.stateChange(D),V()}),u.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,k=!e.disabled,D.rescaleY=k,A.stateChange(D),t.update()}),l.dispatch.on("stateChange",function(e){D.disabled=e.disabled,A.stateChange(D),t.update()}),c.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,r,l,u=[];if(_.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,o){r=n.interactiveBisect(s.values,e.pointXValue,t.x()),a.highlightPoint(o,r,!0);var c=s.values[r];"undefined"!=typeof c&&("undefined"==typeof i&&(i=c),"undefined"==typeof l&&(l=t.xScale()(t.x()(c,r))),u.push({key:s.key,value:t.y()(c,r),color:h(s,s.seriesIndex)}))}),u.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(u.map(function(t){return t.value}),p,g);null!==m&&(u[m].highlight=!0)}var v=s.tickFormat()(t.x()(i,r),r);c.tooltip.position({left:l+d.left,top:e.mouseY+d.top}).chartContainer(R.parentNode).enabled(b).valueFormatter(function(t){return o.tickFormat()(t)}).data({value:v,series:u})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(){A.tooltipHide(),a.clearHighlights()}),A.on("tooltipShow",function(t){b&&B(t,R.parentNode)}),A.on("changeState",function(e){"undefined"!=typeof e.disabled&&(_.forEach(function(t,n){t.disabled=e.disabled[n]}),D.disabled=e.disabled),"undefined"!=typeof e.index&&(N.i=e.index,N.x=T(N.i),D.index=e.index,ie.data([N])),"undefined"!=typeof e.rescaleY&&(k=e.rescaleY),t.update()})}),t}function e(t,e){return e.map(function(e){if(!e.values)return e;var n=a.y()(e.values[t],t);return-.95>n&&!I?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(a.y()(t,e)-n)/(1+n)},t}),e)})}var i,r,a=n.models.line(),s=n.models.axis(),o=n.models.axis(),l=n.models.legend(),u=n.models.legend(),c=n.interactiveGuideline(),d={top:30,right:30,bottom:50,left:60},h=n.utils.defaultColor(),p=null,f=null,g=!0,m=!0,v=!0,y=!1,b=!0,x=!0,w=!1,k=!0,_=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},C=a.id(),D={index:0,rescaleY:k},M=null,S="No Data Available.",P=function(t){return t.average},A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250,I=!1;s.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),u.updateState(!1);var T=d3.scale.linear(),N={i:0,x:0},B=function(e,i){var r=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=s.tickFormat()(a.x()(e.point,e.pointIndex)),c=o.tickFormat()(a.y()(e.point,e.pointIndex)),d=_(e.series.key,u,c,e,t);n.tooltip.show([r,l],d,null,null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],A.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){A.tooltipHide(t)}),A.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=A,t.lines=a,t.legend=l,t.xAxis=s,t.yAxis=o,t.interactiveLayer=c,d3.rebind(t,a,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(p=e,t):p
},t.height=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),l.color(h),t):h},t.rescaleY=function(e){return arguments.length?(k=e,t):k},t.showControls=function(e){return arguments.length?(x=e,t):x},t.useInteractiveGuideline=function(e){return arguments.length?(w=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):w},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,o.orient(e?"right":"left"),t):y},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(_=e,t):_},t.state=function(e){return arguments.length?(D=e,t):D},t.defaultState=function(e){return arguments.length?(M=e,t):M},t.noData=function(e){return arguments.length?(S=e,t):S},t.average=function(e){return arguments.length?(P=e,t):P},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t.noErrorCheck=function(e){return arguments.length?(I=e,t):I},t},n.models.discreteBar=function(){"use strict";function t(n){return n.each(function(t){var n=u-l.left-l.right,d=c-l.top-l.bottom,k=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var _=e&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),y0:t.y0}})});h.domain(e||d3.merge(_).map(function(t){return t.x})).rangeBands(r||[0,n],.1),p.domain(i||d3.extent(d3.merge(_).map(function(t){return t.y}).concat(m))),p.range(y?a||[d-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]:a||[d,0]),s=s||h,o=o||p.copy().range([p(0),p(0)]);{var C=k.selectAll("g.nv-wrap.nv-discretebar").data([t]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),M=D.append("g");C.select("g")}M.append("g").attr("class","nv-groups"),C.attr("transform","translate("+l.left+","+l.top+")");var S=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});S.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),S.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),S.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),S.transition().style("stroke-opacity",1).style("fill-opacity",.75);var P=S.selectAll("g.nv-bar").data(function(t){return t.values});P.exit().remove();var A=P.enter().append("g").attr("transform",function(t,e){return"translate("+(h(f(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),x.elementMouseover({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),x.elementMouseout({value:g(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){x.elementClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){x.elementDblClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});A.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/t.length),y?(A.append("text").attr("text-anchor","middle"),P.select("text").text(function(t,e){return b(g(t,e))}).transition().attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?p(g(t,e))-p(0)+12:-4})):P.selectAll("text").remove(),P.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",w).transition().attr("width",.9*h.rangeBand()/t.length),P.transition().attr("transform",function(t,e){var n=h(f(t,e))+.05*h.rangeBand(),i=g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e));return"translate("+n+", "+i+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(i&&i[0]||0))||1)}),s=h.copy(),o=p.copy()}),t}var e,i,r,a,s,o,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=[0],v=n.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";return t.dispatch=x,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(g=e,t):g},t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceY=function(e){return arguments.length?(m=e,t):m},t.color=function(e){return arguments.length?(v=n.utils.getColor(e),t):v},t.id=function(e){return arguments.length?(d=e,t):d},t.showValues=function(e){return arguments.length?(y=e,t):y},t.valueFormat=function(e){return arguments.length?(b=e,t):b},t.rectClass=function(e){return arguments.length?(w=e,t):w},t},n.models.discreteBarChart=function(){"use strict";function t(n){return n.each(function(n){var c=d3.select(this),m=this,w=(l||parseInt(c.style("width"))||960)-o.left-o.right,k=(u||parseInt(c.style("height"))||400)-o.top-o.bottom;if(t.update=function(){y.beforeUpdate(),c.transition().duration(b).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var _=c.selectAll(".nv-noData").data([v]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",o.left+w/2).attr("y",o.top+k/2).text(function(t){return t}),t}c.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale().clamp(!0);var C=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),M=D.append("defs"),S=C.select("g");D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),D.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+o.left+","+o.top+")"),p&&S.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),r.width(w).height(k);var P=S.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(P.transition().call(r),M.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),S.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(f?2:1)).attr("height",16).attr("x",-e.rangeBand()/(f?1:2)),d){a.scale(e).ticks(w/100).tickSize(-k,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+(i.range()[0]+(r.showValues()&&i.domain()[0]<0?16:0))+")"),S.select(".nv-x.nv-axis").transition().call(a);var A=S.select(".nv-x.nv-axis").selectAll("g");f&&A.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}h&&(s.scale(i).ticks(k/36).tickSize(-w,0),S.select(".nv-y.nv-axis").transition().call(s)),S.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",i(0)).attr("y2",i(0)),y.on("tooltipShow",function(t){g&&x(t,m.parentNode)})}),t}var e,i,r=n.models.discreteBar(),a=n.models.axis(),s=n.models.axis(),o={top:15,right:10,bottom:50,left:60},l=null,u=null,c=n.utils.getColor(),d=!0,h=!0,p=!1,f=!1,g=!0,m=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},v="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),b=250;a.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(p?"right":"left").tickFormat(d3.format(",.1f"));var x=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=a.tickFormat()(r.x()(e.point,e.pointIndex)),c=s.tickFormat()(r.y()(e.point,e.pointIndex)),d=m(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],y.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),y.on("tooltipHide",function(){g&&n.tooltip.cleanup()}),t.dispatch=y,t.discretebar=r,t.xAxis=a,t.yAxis=s,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),r.color(c),t):c},t.showXAxis=function(e){return arguments.length?(d=e,t):d},t.showYAxis=function(e){return arguments.length?(h=e,t):h},t.rightAlignYAxis=function(e){return arguments.length?(p=e,s.orient(e?"right":"left"),t):p},t.staggerLabels=function(e){return arguments.length?(f=e,t):f},t.tooltips=function(e){return arguments.length?(g=e,t):g},t.tooltipContent=function(e){return arguments.length?(m=e,t):m},t.noData=function(e){return arguments.length?(v=e,t):v},t.transitionDuration=function(e){return arguments.length?(b=e,t):b},t},n.models.distribution=function(){"use strict";function t(n){return n.each(function(t){var n=(r-("x"===s?i.left+i.right:i.top+i.bottom),"x"==s?"y":"x"),c=d3.select(this);e=e||u;var d=c.selectAll("g.nv-distribution").data([t]),h=d.enter().append("g").attr("class","nvd3 nv-distribution"),p=(h.append("g"),d.select("g"));d.attr("transform","translate("+i.left+","+i.top+")");var f=p.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});f.enter().append("g"),f.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var g=f.selectAll("line.nv-dist"+s).data(function(t){return t.values});g.enter().append("line").attr(s+"1",function(t,n){return e(o(t,n))}).attr(s+"2",function(t,n){return e(o(t,n))}),f.exit().selectAll("line.nv-dist"+s).transition().attr(s+"1",function(t,e){return u(o(t,e))}).attr(s+"2",function(t,e){return u(o(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+s+" nv-dist"+s+"-"+e}).attr(n+"1",0).attr(n+"2",a),g.transition().attr(s+"1",function(t,e){return u(o(t,e))}).attr(s+"2",function(t,e){return u(o(t,e))}),e=u.copy()}),t}var e,i={top:0,right:0,bottom:0,left:0},r=400,a=8,s="x",o=function(t){return t[s]},l=n.utils.defaultColor(),u=d3.scale.linear();return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(r=e,t):r},t.axis=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(a=e,t):a},t.getData=function(e){return arguments.length?(o=d3.functor(e),t):o},t.scale=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),t):l},t},n.models.historicalBarChart=function(){"use strict";function t(n){return n.each(function(v){var C=d3.select(this),D=this,M=(c||parseInt(C.style("width"))||960)-l.left-l.right,S=(d||parseInt(C.style("height"))||400)-l.top-l.bottom;if(t.update=function(){C.transition().duration(k).call(t)},t.container=this,y.disabled=v.map(function(t){return!!t.disabled}),!b){var P;b={};for(P in y)b[P]=y[P]instanceof Array?y[P].slice(0):y[P]}if(!(v&&v.length&&v.filter(function(t){return t.values.length}).length)){var A=C.selectAll(".nv-noData").data([x]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",l.left+M/2).attr("y",l.top+S/2).text(function(t){return t}),t}C.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale();var E=C.selectAll("g.nv-wrap.nv-historicalBarChart").data([v]),I=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),T=E.select("g");I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-barsWrap"),I.append("g").attr("class","nv-legendWrap"),h&&(o.width(M),T.select(".nv-legendWrap").datum(v).call(o),l.top!=o.height()&&(l.top=o.height(),S=(d||parseInt(C.style("height"))||400)-l.top-l.bottom),E.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),E.attr("transform","translate("+l.left+","+l.top+")"),g&&T.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),r.width(M).height(S).color(v.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!v[e].disabled}));var N=T.select(".nv-barsWrap").datum(v.filter(function(t){return!t.disabled}));N.transition().call(r),p&&(a.scale(e).tickSize(-S,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),T.select(".nv-x.nv-axis").transition().call(a)),f&&(s.scale(i).ticks(S/36).tickSize(-M,0),T.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,v.filter(function(t){return!t.disabled}).length||v.map(function(t){return t.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),t}),y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),n.transition().call(t)}),o.dispatch.on("legendDblclick",function(e){v.forEach(function(t){t.disabled=!0}),e.disabled=!1,y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),t.update()}),w.on("tooltipShow",function(t){m&&_(t,D.parentNode)}),w.on("changeState",function(e){"undefined"!=typeof e.disabled&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),y.disabled=e.disabled),t.update()})}),t}var e,i,r=n.models.historicalBar(),a=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l={top:30,right:90,bottom:50,left:90},u=n.utils.defaultColor(),c=null,d=null,h=!1,p=!0,f=!0,g=!1,m=!0,v=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},y={},b=null,x="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=250;a.orient("bottom").tickPadding(7),s.orient(g?"right":"left");var _=function(e,i){if(i){var o=d3.select(i).select("svg"),l=o.node()?o.attr("viewBox"):null;if(l){l=l.split(" ");var u=parseInt(o.style("width"))/l[2];e.pos[0]=e.pos[0]*u,e.pos[1]=e.pos[1]*u}}var c=e.pos[0]+(i.offsetLeft||0),d=e.pos[1]+(i.offsetTop||0),h=a.tickFormat()(r.x()(e.point,e.pointIndex)),p=s.tickFormat()(r.y()(e.point,e.pointIndex)),f=v(e.series.key,h,p,e,t);n.tooltip.show([c,d],f,null,null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],w.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),t.dispatch=w,t.bars=r,t.legend=o,t.xAxis=a,t.yAxis=s,d3.rebind(t,r,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),o.color(u),t):u},t.showLegend=function(e){return arguments.length?(h=e,t):h},t.showXAxis=function(e){return arguments.length?(p=e,t):p},t.showYAxis=function(e){return arguments.length?(f=e,t):f},t.rightAlignYAxis=function(e){return arguments.length?(g=e,s.orient(e?"right":"left"),t):g},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.state=function(e){return arguments.length?(y=e,t):y},t.defaultState=function(e){return arguments.length?(b=e,t):b},t.noData=function(e){return arguments.length?(x=e,t):x},t.transitionDuration=function(e){return arguments.length?(k=e,t):k},t},n.models.indentedTree=function(){"use strict";function t(e){return e.each(function(e){function n(e,i,r){return d3.event.stopPropagation(),d3.event.shiftKey&&!r?(d3.event.shiftKey=!1,e.values&&e.values.forEach(function(t){(t.values||t._values)&&n(t,0,!0)}),!0):s(e)?(e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),void t.update()):!0}function i(t){return t._values&&t._values.length?p:t.values&&t.values.length?f:""}function a(t){return t._values&&t._values.length}function s(t){var e=t.values||t._values;return e&&e.length}var y=1,b=d3.select(this),x=d3.layout.tree().children(function(t){return t.values}).size([r,c]);t.update=function(){b.transition().duration(600).call(t)},e[0]||(e[0]={key:u});var w=x.nodes(e[0]),k=d3.select(this).selectAll("div").data([[w]]),_=k.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),C=_.append("table"),D=k.select("table").attr("width","100%").attr("class",h);if(o){var M=C.append("thead"),S=M.append("tr");d.forEach(function(t){S.append("th").attr("width",t.width?t.width:"10%").style("text-align","numeric"==t.type?"right":"left").append("span").text(t.label)})}var P=D.selectAll("tbody").data(function(t){return t});P.enter().append("tbody"),y=d3.max(w,function(t){return t.depth}),x.size([r,y*c]);var A=P.selectAll("tr").data(function(t){return t.filter(function(t){return l&&!t.children?l(t):!0})},function(t){return t.id||t.id||++v});A.exit().remove(),A.select("img.nv-treeicon").attr("src",i).classed("folded",a);var E=A.enter().append("tr");d.forEach(function(t,e){var r=E.append("td").style("padding-left",function(t){return(e?0:t.depth*c+12+(i(t)?0:16))+"px"},"important").style("text-align","numeric"==t.type?"right":"left");0==e&&r.append("img").classed("nv-treeicon",!0).classed("nv-folded",a).attr("src",i).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(t){return i(t)?"inline-block":"none"}).on("click",n),r.each(function(n){!e&&m(n)?d3.select(this).append("a").attr("href",m).attr("class",d3.functor(t.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(t.classes)).text(function(e){return t.format?t.format(e):e[t.key]||"-"})}),t.showCount&&(r.append("span").attr("class","nv-childrenCount"),A.selectAll("span.nv-childrenCount").text(function(t){return t.values&&t.values.length||t._values&&t._values.length?"("+(t.values&&t.values.filter(function(t){return l?l(t):!0}).length||t._values&&t._values.filter(function(t){return l?l(t):!0}).length||0)+")":""}))}),A.order().on("click",function(t){g.elementClick({row:this,data:t,pos:[t.x,t.y]})}).on("dblclick",function(t){g.elementDblclick({row:this,data:t,pos:[t.x,t.y]})}).on("mouseover",function(t){g.elementMouseover({row:this,data:t,pos:[t.x,t.y]})}).on("mouseout",function(t){g.elementMouseout({row:this,data:t,pos:[t.x,t.y]})})}),t}var e={top:0,right:0,bottom:0,left:0},i=960,r=500,a=n.utils.defaultColor(),s=Math.floor(1e4*Math.random()),o=!0,l=!1,u="No Data Available.",c=20,d=[{key:"key",label:"Name",type:"text"}],h=null,p="images/grey-plus.png",f="images/grey-minus.png",g=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),m=function(t){return t.url},v=0;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.color=function(e){return arguments.length?(a=n.utils.getColor(e),scatter.color(a),t):a},t.id=function(e){return arguments.length?(s=e,t):s},t.header=function(e){return arguments.length?(o=e,t):o},t.noData=function(e){return arguments.length?(u=e,t):u},t.filterZero=function(e){return arguments.length?(l=e,t):l},t.columns=function(e){return arguments.length?(d=e,t):d},t.tableClass=function(e){return arguments.length?(h=e,t):h},t.iconOpen=function(e){return arguments.length?(p=e,t):p},t.iconClose=function(e){return arguments.length?(f=e,t):f},t.getUrl=function(e){return arguments.length?(m=e,t):m},t},n.models.legend=function(){"use strict";function t(h){return h.each(function(t){var h=i-e.left-e.right,p=d3.select(this),f=p.selectAll("g.nv-legend").data([t]),g=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var m=g.selectAll(".nv-series").data(function(t){return t}),v=m.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(e,n){d.legendClick(e,n),u&&(c?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){d.legendDblclick(e,n),u&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),m.classed("disabled",function(t){return t.disabled}),m.exit().remove(),m.select("circle").style("fill",function(t,e){return t.color||s(t,e)}).style("stroke",function(t,e){return t.color||s(t,e)}),m.select("text").text(a),o){var y=[];m.each(function(){var t,e=d3.select(this).select("text");try{if(t=e.getComputedTextLength(),0>=t)throw Error()}catch(i){t=n.utils.calcApproxTextWidth(e)}y.push(t+28)});for(var b=0,x=0,w=[];h>x&&b<y.length;)w[b]=y[b],x+=y[b++];for(0===b&&(b=1);x>h&&b>1;){w=[],b--;for(var k=0;k<y.length;k++)y[k]>(w[k%b]||0)&&(w[k%b]=y[k]);x=w.reduce(function(t,e){return t+e})}for(var _=[],C=0,D=0;b>C;C++)_[C]=D,D+=w[C];m.attr("transform",function(t,e){return"translate("+_[e%b]+","+(5+20*Math.floor(e/b))+")"}),l?g.attr("transform","translate("+(i-e.right-x)+","+e.top+")"):g.attr("transform","translate(0,"+e.top+")"),r=e.top+e.bottom+20*Math.ceil(y.length/b)}else{var M,S=5,P=5,A=0;m.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+28;return M=P,i<e.left+e.right+M+t&&(P=M=5,S+=20),P+=t,P>A&&(A=P),"translate("+M+","+S+")"}),g.attr("transform","translate("+(i-e.right-A)+","+e.top+")"),r=e.top+e.bottom+S+15}}),t}var e={top:5,right:0,bottom:5,left:0},i=400,r=20,a=function(t){return t.key},s=n.utils.defaultColor(),o=!0,l=!0,u=!0,c=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=d,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.key=function(e){return arguments.length?(a=e,t):a},t.color=function(e){return arguments.length?(s=n.utils.getColor(e),t):s},t.align=function(e){return arguments.length?(o=e,t):o},t.rightAlign=function(e){return arguments.length?(l=e,t):l},t.updateState=function(e){return arguments.length?(u=e,t):u},t.radioButtonMode=function(e){return arguments.length?(c=e,t):c},t},n.models.line=function(){"use strict";function t(v){return v.each(function(t){var v=s-a.left-a.right,y=o-a.top-a.bottom,b=d3.select(this);e=r.xScale(),i=r.yScale(),g=g||e,m=m||i;var x=b.selectAll("g.nv-wrap.nv-line").data([t]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=w.append("defs"),_=w.append("g"),C=x.select("g");_.append("g").attr("class","nv-groups"),_.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+a.left+","+a.top+")"),r.width(v).height(y);var D=x.select(".nv-scatterWrap");D.transition().call(r),k.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),x.select("#nv-edge-clip-"+r.id()+" rect").attr("width",v).attr("height",y>0?y:0),C.attr("clip-path",p?"url(#nv-edge-clip-"+r.id()+")":""),D.attr("clip-path",p?"url(#nv-edge-clip-"+r.id()+")":"");var M=x.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),M.exit().remove(),M.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),M.transition().style("stroke-opacity",1).style("fill-opacity",.5);var S=M.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});S.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y0(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))}).y1(function(){return m(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])}),M.exit().selectAll("path.nv-area").remove(),S.transition().attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(u(t,i)))}).y0(function(t,e){return n.utils.NaNtoZero(i(c(t,e)))}).y1(function(){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});var P=M.selectAll("path.nv-line").data(function(t){return[t.values]});P.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))})),P.transition().attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(u(t,i)))}).y(function(t,e){return n.utils.NaNtoZero(i(c(t,e)))})),g=e.copy(),m=i.copy()}),t}var e,i,r=n.models.scatter(),a={top:0,right:0,bottom:0,left:0},s=960,o=500,l=n.utils.defaultColor(),u=function(t){return t.x},c=function(t){return t.y},d=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h=function(t){return t.area},p=!1,f="linear";r.size(16).sizeDomain([16,256]);var g,m;return t.dispatch=r.dispatch,t.scatter=r,d3.rebind(t,r,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(u=e,r.x(e),t):u},t.y=function(e){return arguments.length?(c=e,r.y(e),t):c},t.clipEdge=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),r.color(l),t):l},t.interpolate=function(e){return arguments.length?(f=e,t):f},t.defined=function(e){return arguments.length?(d=e,t):d},t.isArea=function(e){return arguments.length?(h=d3.functor(e),t):h},t},n.models.lineChart=function(){"use strict";function t(b){return b.each(function(b){var M=d3.select(this),S=this,P=(d||parseInt(M.style("width"))||960)-u.left-u.right,A=(h||parseInt(M.style("height"))||400)-u.top-u.bottom;if(t.update=function(){M.transition().duration(C).call(t)},t.container=this,x.disabled=b.map(function(t){return!!t.disabled}),!w){var E;w={};for(E in x)w[E]=x[E]instanceof Array?x[E].slice(0):x[E]}if(!(b&&b.length&&b.filter(function(t){return t.values.length}).length)){var I=M.selectAll(".nv-noData").data([k]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",u.left+P/2).attr("y",u.top+A/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale();var T=M.selectAll("g.nv-wrap.nv-lineChart").data([b]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),B=T.select("g");N.append("rect").style("opacity",0),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap"),N.append("g").attr("class","nv-legendWrap"),N.append("g").attr("class","nv-interactive"),B.select("rect").attr("width",P).attr("height",A>0?A:0),p&&(o.width(P),B.select(".nv-legendWrap").datum(b).call(o),u.top!=o.height()&&(u.top=o.height(),A=(h||parseInt(M.style("height"))||400)-u.top-u.bottom),T.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),T.attr("transform","translate("+u.left+","+u.top+")"),m&&B.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),v&&(l.width(P).height(A).margin({left:u.left,top:u.top}).svgContainer(M).xScale(e),T.select(".nv-interactive").call(l)),r.width(P).height(A).color(b.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!b[e].disabled}));var F=B.select(".nv-linesWrap").datum(b.filter(function(t){return!t.disabled}));F.transition().call(r),f&&(a.scale(e).ticks(P/100).tickSize(-A,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),B.select(".nv-x.nv-axis").transition().call(a)),g&&(s.scale(i).ticks(A/36).tickSize(-P,0),B.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){x=e,_.stateChange(x),t.update()}),l.dispatch.on("elementMousemove",function(e){r.clearHighlights();var i,o,d,h=[];if(b.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,s){o=n.interactiveBisect(a.values,e.pointXValue,t.x()),r.highlightPoint(s,o,!0);var l=a.values[o];"undefined"!=typeof l&&("undefined"==typeof i&&(i=l),"undefined"==typeof d&&(d=t.xScale()(t.x()(l,o))),h.push({key:a.key,value:t.y()(l,o),color:c(a,a.seriesIndex)}))}),h.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(h.map(function(t){return t.value}),p,g);null!==m&&(h[m].highlight=!0)}var v=a.tickFormat()(t.x()(i,o));l.tooltip.position({left:d+u.left,top:e.mouseY+u.top}).chartContainer(S.parentNode).enabled(y).valueFormatter(function(t){return s.tickFormat()(t)}).data({value:v,series:h})(),l.renderGuideLine(d)}),l.dispatch.on("elementMouseout",function(){_.tooltipHide(),r.clearHighlights()}),_.on("tooltipShow",function(t){y&&D(t,S.parentNode)}),_.on("changeState",function(e){"undefined"!=typeof e.disabled&&b.length===e.disabled.length&&(b.forEach(function(t,n){t.disabled=e.disabled[n]
}),x.disabled=e.disabled),t.update()})}),t}var e,i,r=n.models.line(),a=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.interactiveGuideline(),u={top:30,right:20,bottom:50,left:60},c=n.utils.defaultColor(),d=null,h=null,p=!0,f=!0,g=!0,m=!1,v=!1,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),C=250;a.orient("bottom").tickPadding(7),s.orient(m?"right":"left");var D=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=a.tickFormat()(r.x()(e.point,e.pointIndex)),c=s.tickFormat()(r.y()(e.point,e.pointIndex)),d=b(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,null,null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],_.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=_,t.lines=r,t.legend=o,t.xAxis=a,t.yAxis=s,t.interactiveLayer=l,d3.rebind(t,r,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),o.color(c),t):c},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,s.orient(e?"right":"left"),t):m},t.useInteractiveGuideline=function(e){return arguments.length?(v=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(C=e,t):C},t},n.models.linePlusBarChart=function(){"use strict";function t(n){return n.each(function(n){var f=d3.select(this),g=this,b=(h||parseInt(f.style("width"))||960)-d.left-d.right,D=(p||parseInt(f.style("height"))||400)-d.top-d.bottom;if(t.update=function(){f.transition().call(t)},x.disabled=n.map(function(t){return!!t.disabled}),!w){var M;w={};for(M in x)w[M]=x[M]instanceof Array?x[M].slice(0):x[M]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var S=f.selectAll(".nv-noData").data([k]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",d.left+b/2).attr("y",d.top+D/2).text(function(t){return t}),t}f.selectAll(".nv-noData").remove();var P=n.filter(function(t){return!t.disabled&&t.bar}),A=n.filter(function(t){return!t.bar});e=A.filter(function(t){return!t.disabled}).length&&A.filter(function(t){return!t.disabled})[0].values.length?a.xScale():s.xScale(),i=s.yScale(),r=a.yScale();var E=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),I=E.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),T=E.select("g");I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y1 nv-axis"),I.append("g").attr("class","nv-y2 nv-axis"),I.append("g").attr("class","nv-barsWrap"),I.append("g").attr("class","nv-linesWrap"),I.append("g").attr("class","nv-legendWrap"),v&&(c.width(b/2),T.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(c),d.top!=c.height()&&(d.top=c.height(),D=(p||parseInt(f.style("height"))||400)-d.top-d.bottom),T.select(".nv-legendWrap").attr("transform","translate("+b/2+","+-d.top+")")),E.attr("transform","translate("+d.left+","+d.top+")"),a.width(b).height(D).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar})),s.width(b).height(D).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar}));var N=T.select(".nv-barsWrap").datum(P.length?P:[{values:[]}]),B=T.select(".nv-linesWrap").datum(A[0]&&!A[0].disabled?A:[{values:[]}]);d3.transition(N).call(s),d3.transition(B).call(a),o.scale(e).ticks(b/100).tickSize(-D,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(T.select(".nv-x.nv-axis")).call(o),l.scale(i).ticks(D/36).tickSize(-b,0),d3.transition(T.select(".nv-y1.nv-axis")).style("opacity",P.length?1:0).call(l),u.scale(r).ticks(D/36).tickSize(P.length?0:-b,0),T.select(".nv-y2.nv-axis").style("opacity",A.length?1:0).attr("transform","translate("+b+",0)"),d3.transition(T.select(".nv-y2.nv-axis")).call(u),c.dispatch.on("stateChange",function(e){x=e,_.stateChange(x),t.update()}),_.on("tooltipShow",function(t){y&&C(t,g.parentNode)}),_.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),t.update()})}),t}var e,i,r,a=n.models.line(),s=n.models.historicalBar(),o=n.models.axis(),l=n.models.axis(),u=n.models.axis(),c=n.models.legend(),d={top:30,right:60,bottom:50,left:60},h=null,p=null,f=function(t){return t.x},g=function(t){return t.y},m=n.utils.defaultColor(),v=!0,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");s.padData(!0),a.clipEdge(!1).padData(!0),o.orient("bottom").tickPadding(7).highlightZero(!1),l.orient("left"),u.orient("right");var C=function(e,i){var r=e.pos[0]+(i.offsetLeft||0),s=e.pos[1]+(i.offsetTop||0),c=o.tickFormat()(a.x()(e.point,e.pointIndex)),d=(e.series.bar?l:u).tickFormat()(a.y()(e.point,e.pointIndex)),h=b(e.series.key,c,d,e,t);n.tooltip.show([r,s],h,e.value<0?"n":"s",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],_.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],_.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=_,t.legend=c,t.lines=a,t.bars=s,t.xAxis=o,t.y1Axis=l,t.y2Axis=u,d3.rebind(t,a,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,a.x(e),s.x(e),t):f},t.y=function(e){return arguments.length?(g=e,a.y(e),s.y(e),t):g},t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),c.color(m),t):m},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t},n.models.lineWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function _(t){var e=+("e"==t),n=e?1:-1,i=B/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function P(){p.empty()||p.extent(w),O.data([p.empty()?r.domain():w]).each(function(t){var n=r(t[0])-e.range()[0],i=e.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",0>i?0:i)})}function A(){w=p.empty()?null:p.extent();var t=p.empty()?r.domain():p.extent();if(!(Math.abs(t[0]-t[1])<=1)){D.brush({extent:t,brush:p}),P();var e=L.select(".nv-focus .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}).map(function(e){return{key:e.key,values:e.values.filter(function(e,n){return s.x()(e,n)>=t[0]&&s.x()(e,n)<=t[1]})}}));e.transition().duration(M).call(s),L.select(".nv-focus .nv-x.nv-axis").transition().duration(M).call(l),L.select(".nv-focus .nv-y.nv-axis").transition().duration(M).call(u)}}var E=d3.select(this),I=this,T=(v||parseInt(E.style("width"))||960)-f.left-f.right,N=(y||parseInt(E.style("height"))||400)-f.top-f.bottom-b,B=b-g.top-g.bottom;if(t.update=function(){E.transition().duration(M).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var F=E.selectAll(".nv-noData").data([C]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",f.left+T/2).attr("y",f.top+N/2).text(function(t){return t}),t}E.selectAll(".nv-noData").remove(),e=s.xScale(),i=s.yScale(),r=o.xScale(),a=o.yScale();var z=E.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),V=z.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),L=z.select("g");V.append("g").attr("class","nv-legendWrap");var R=V.append("g").attr("class","nv-focus");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-linesWrap");var W=V.append("g").attr("class","nv-context");W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-linesWrap"),W.append("g").attr("class","nv-brushBackground"),W.append("g").attr("class","nv-x nv-brush"),x&&(h.width(T),L.select(".nv-legendWrap").datum(n).call(h),f.top!=h.height()&&(f.top=h.height(),N=(y||parseInt(E.style("height"))||400)-f.top-f.bottom-b),L.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),z.attr("transform","translate("+f.left+","+f.top+")"),s.width(T).height(N).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),o.defined(s.defined()).width(T).height(B).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),L.select(".nv-context").attr("transform","translate(0,"+(N+f.bottom+g.top)+")");var Y=L.select(".nv-context .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}));d3.transition(Y).call(o),l.scale(e).ticks(T/100).tickSize(-N,0),u.scale(i).ticks(N/36).tickSize(-T,0),L.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")"),p.x(r).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),A(),t.transitionDuration(e)}),w&&p.extent(w);var O=L.select(".nv-brushBackground").selectAll("g").data([w||p.extent()]),H=O.enter().append("g");H.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",B),H.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",B);var j=L.select(".nv-x.nv-brush").call(p);j.selectAll("rect").attr("height",B),j.selectAll(".resize").append("path").attr("d",_),A(),c.scale(r).ticks(T/100).tickSize(-B,0),L.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(L.select(".nv-context .nv-x.nv-axis")).call(c),d.scale(a).ticks(B/36).tickSize(-T,0),d3.transition(L.select(".nv-context .nv-y.nv-axis")).call(d),L.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),h.dispatch.on("stateChange",function(){t.update()}),D.on("tooltipShow",function(t){k&&S(t,I.parentNode)})}),t}var e,i,r,a,s=n.models.line(),o=n.models.line(),l=n.models.axis(),u=n.models.axis(),c=n.models.axis(),d=n.models.axis(),h=n.models.legend(),p=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},m=n.utils.defaultColor(),v=null,y=null,b=100,x=!0,w=null,k=!0,_=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},C="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","brush"),M=250;s.clipEdge(!0),o.interactive(!1),l.orient("bottom").tickPadding(5),u.orient("left"),c.orient("bottom").tickPadding(5),d.orient("left");var S=function(e,i){var r=e.pos[0]+(i.offsetLeft||0),a=e.pos[1]+(i.offsetTop||0),o=l.tickFormat()(s.x()(e.point,e.pointIndex)),c=u.tickFormat()(s.y()(e.point,e.pointIndex)),d=_(e.series.key,o,c,e,t);n.tooltip.show([r,a],d,null,null,i)};return s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],D.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),D.on("tooltipHide",function(){k&&n.tooltip.cleanup()}),t.dispatch=D,t.legend=h,t.lines=s,t.lines2=o,t.xAxis=l,t.yAxis=u,t.x2Axis=c,t.y2Axis=d,d3.rebind(t,s,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(s.x(e),o.x(e),t):s.x},t.y=function(e){return arguments.length?(s.y(e),o.y(e),t):s.y},t.margin=function(e){return arguments.length?(f.top="undefined"!=typeof e.top?e.top:f.top,f.right="undefined"!=typeof e.right?e.right:f.right,f.bottom="undefined"!=typeof e.bottom?e.bottom:f.bottom,f.left="undefined"!=typeof e.left?e.left:f.left,t):f},t.margin2=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(v=e,t):v},t.height=function(e){return arguments.length?(y=e,t):y},t.height2=function(e){return arguments.length?(b=e,t):b},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),h.color(m),t):m},t.showLegend=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(k=e,t):k},t.tooltipContent=function(e){return arguments.length?(_=e,t):_},t.interpolate=function(e){return arguments.length?(s.interpolate(e),o.interpolate(e),t):s.interpolate()},t.noData=function(e){return arguments.length?(C=e,t):C},t.xTickFormat=function(e){return arguments.length?(l.tickFormat(e),c.tickFormat(e),t):l.tickFormat()},t.yTickFormat=function(e){return arguments.length?(u.tickFormat(e),d.tickFormat(e),t):u.tickFormat()},t.brushExtent=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(M=e,t):M},t},n.models.linePlusBarWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function T(t){var e=+("e"==t),n=e?1:-1,i=H/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function V(){x.empty()||x.extent(E),ne.data([x.empty()?r.domain():E]).each(function(t){var e=r(t[0])-r.range()[0],n=r.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",0>n?0:n)})}function L(){E=x.empty()?null:x.extent(),e=x.empty()?r.domain():x.extent(),B.brush({extent:e,brush:x}),V(),d.width(Y).height(O).color(n.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),u.width(Y).height(O).color(n.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var t=Z.select(".nv-focus .nv-barsWrap").datum($.length?$.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return d.x()(t,n)>=e[0]&&d.x()(t,n)<=e[1]})}}):[{values:[]}]),o=Z.select(".nv-focus .nv-linesWrap").datum(X[0].disabled?[{values:[]}]:X.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return u.x()(t,n)>=e[0]&&u.x()(t,n)<=e[1]})}}));i=$.length?d.xScale():u.xScale(),p.scale(i).ticks(Y/100).tickSize(-O,0),p.domain([Math.ceil(e[0]),Math.floor(e[1])]),Z.select(".nv-x.nv-axis").transition().duration(F).call(p),t.transition().duration(F).call(d),o.transition().duration(F).call(u),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),g.scale(a).ticks(O/36).tickSize(-Y,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",$.length?1:0),m.scale(s).ticks(O/36).tickSize($.length?0:-Y,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",X.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),Z.select(".nv-focus .nv-y1.nv-axis").transition().duration(F).call(g),Z.select(".nv-focus .nv-y2.nv-axis").transition().duration(F).call(m)}var R=d3.select(this),W=this,Y=(_||parseInt(R.style("width"))||960)-w.left-w.right,O=(C||parseInt(R.style("height"))||400)-w.top-w.bottom-D,H=D-k.top-k.bottom;if(t.update=function(){R.transition().duration(F).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var j=R.selectAll(".nv-noData").data([N]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",w.left+Y/2).attr("y",w.top+O/2).text(function(t){return t}),t}R.selectAll(".nv-noData").remove();var $=n.filter(function(t){return!t.disabled&&t.bar}),X=n.filter(function(t){return!t.bar});i=d.xScale(),r=f.scale(),a=d.yScale(),s=u.yScale(),o=h.yScale(),l=c.yScale();var U=n.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})}),q=n.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})});i.range([0,Y]),r.domain(d3.extent(d3.merge(U.concat(q)),function(t){return t.x})).range([0,Y]);var G=R.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),K=G.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=G.select("g");K.append("g").attr("class","nv-legendWrap");var J=K.append("g").attr("class","nv-focus");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap");var Q=K.append("g").attr("class","nv-context");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","nv-barsWrap"),Q.append("g").attr("class","nv-linesWrap"),Q.append("g").attr("class","nv-brushBackground"),Q.append("g").attr("class","nv-x nv-brush"),A&&(b.width(Y/2),Z.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(b),w.top!=b.height()&&(w.top=b.height(),O=(C||parseInt(R.style("height"))||400)-w.top-w.bottom-D),Z.select(".nv-legendWrap").attr("transform","translate("+Y/2+","+-w.top+")")),G.attr("transform","translate("+w.left+","+w.top+")"),h.width(Y).height(H).color(n.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),c.width(Y).height(H).color(n.map(function(t,e){return t.color||P(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var te=Z.select(".nv-context .nv-barsWrap").datum($.length?$:[{values:[]}]),ee=Z.select(".nv-context .nv-linesWrap").datum(X[0].disabled?[{values:[]}]:X);Z.select(".nv-context").attr("transform","translate(0,"+(O+w.bottom+k.top)+")"),te.transition().call(h),ee.transition().call(c),x.x(r).on("brush",L),E&&x.extent(E);var ne=Z.select(".nv-brushBackground").selectAll("g").data([E||x.extent()]),ie=ne.enter().append("g");ie.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",H),ie.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",H);var re=Z.select(".nv-x.nv-brush").call(x);re.selectAll("rect").attr("height",H),re.selectAll(".resize").append("path").attr("d",T),f.ticks(Y/100).tickSize(-H,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),Z.select(".nv-context .nv-x.nv-axis").transition().call(f),v.scale(o).ticks(H/36).tickSize(-Y,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",$.length?1:0).attr("transform","translate(0,"+r.range()[0]+")"),Z.select(".nv-context .nv-y1.nv-axis").transition().call(v),y.scale(l).ticks(H/36).tickSize($.length?0:-Y,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",X.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),Z.select(".nv-context .nv-y2.nv-axis").transition().call(y),b.dispatch.on("stateChange",function(){t.update()}),B.on("tooltipShow",function(t){I&&z(t,W.parentNode)}),L()}),t}var e,i,r,a,s,o,l,u=n.models.line(),c=n.models.line(),d=n.models.historicalBar(),h=n.models.historicalBar(),p=n.models.axis(),f=n.models.axis(),g=n.models.axis(),m=n.models.axis(),v=n.models.axis(),y=n.models.axis(),b=n.models.legend(),x=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},_=null,C=null,D=100,M=function(t){return t.x},S=function(t){return t.y},P=n.utils.defaultColor(),A=!0,E=null,I=!0,T=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},N="No Data Available.",B=d3.dispatch("tooltipShow","tooltipHide","brush"),F=0;u.clipEdge(!0),c.interactive(!1),p.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),f.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right");var z=function(i,r){e&&(i.pointIndex+=Math.ceil(e[0]));var a=i.pos[0]+(r.offsetLeft||0),s=i.pos[1]+(r.offsetTop||0),o=p.tickFormat()(u.x()(i.point,i.pointIndex)),l=(i.series.bar?g:m).tickFormat()(u.y()(i.point,i.pointIndex)),c=T(i.series.key,o,l,i,t);n.tooltip.show([a,s],c,i.value<0?"n":"s",null,r)};return u.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],B.tooltipShow(t)}),u.dispatch.on("elementMouseout.tooltip",function(t){B.tooltipHide(t)}),d.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],B.tooltipShow(t)}),d.dispatch.on("elementMouseout.tooltip",function(t){B.tooltipHide(t)}),B.on("tooltipHide",function(){I&&n.tooltip.cleanup()}),t.dispatch=B,t.legend=b,t.lines=u,t.lines2=c,t.bars=d,t.bars2=h,t.xAxis=p,t.x2Axis=f,t.y1Axis=g,t.y2Axis=m,t.y3Axis=v,t.y4Axis=y,d3.rebind(t,u,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(M=e,u.x(e),d.x(e),t):M},t.y=function(e){return arguments.length?(S=e,u.y(e),d.y(e),t):S},t.margin=function(e){return arguments.length?(w.top="undefined"!=typeof e.top?e.top:w.top,w.right="undefined"!=typeof e.right?e.right:w.right,w.bottom="undefined"!=typeof e.bottom?e.bottom:w.bottom,w.left="undefined"!=typeof e.left?e.left:w.left,t):w},t.width=function(e){return arguments.length?(_=e,t):_},t.height=function(e){return arguments.length?(C=e,t):C},t.color=function(e){return arguments.length?(P=n.utils.getColor(e),b.color(P),t):P},t.showLegend=function(e){return arguments.length?(A=e,t):A},t.tooltips=function(e){return arguments.length?(I=e,t):I},t.tooltipContent=function(e){return arguments.length?(T=e,t):T},t.noData=function(e){return arguments.length?(N=e,t):N},t.brushExtent=function(e){return arguments.length?(E=e,t):E},t},n.models.multiBar=function(){"use strict";function t(n){return n.each(function(t){var n=c-u.left-u.right,S=d-u.top-u.bottom,P=d3.select(this);k&&t.length&&(k=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b&&(t=d3.layout.stack().offset(x).values(function(t){return t.values}).y(m)(!t.length&&k?k:t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),b&&t[0].values.map(function(e,n){var i=0,r=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=r,r-=e.size):(e.y1=e.size+i,i+=e.size)})});var A=i&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});h.domain(i||d3.merge(A).map(function(t){return t.x})).rangeBands(a||[0,n],D),p.domain(r||d3.extent(d3.merge(A).map(function(t){return b?t.y>0?t.y1:t.y1+t.y:t.y}).concat(v))).range(s||[S,0]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),p.domain()[0]===p.domain()[1]&&p.domain(p.domain()[0]?[p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]:[-1,1]),o=o||h,l=l||p;var E=P.selectAll("g.nv-wrap.nv-multibar").data([t]),I=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),T=I.append("defs"),N=I.append("g"),B=E.select("g");N.append("g").attr("class","nv-groups"),E.attr("transform","translate("+u.left+","+u.top+")"),T.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),E.select("#nv-edge-clip-"+f+" rect").attr("width",n).attr("height",S),B.attr("clip-path",y?"url(#nv-edge-clip-"+f+")":"");var F=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),F.exit().transition().selectAll("rect.nv-bar").delay(function(e,n){return n*C/t[0].values.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).remove(),F.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),F.transition().style("stroke-opacity",1).style("fill-opacity",.75);var z=F.selectAll("rect.nv-bar").data(function(e){return k&&!t.length?k.values:e.values});z.exit().remove();z.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,i){return b?0:i*h.rangeBand()/t.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).attr("width",h.rangeBand()/(b?1:t.length)).attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"});z.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),M.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),M.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){M.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){M.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),z.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"}),_&&(e||(e=t.map(function(){return!0})),z.style("fill",function(t,n,i){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(_(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),b?z.transition().delay(function(e,n){return n*C/t[0].values.length}).attr("y",function(t){return p(b?t.y1:0)}).attr("height",function(t){return Math.max(Math.abs(p(t.y+(b?t.y0:0))-p(b?t.y0:0)),1)}).attr("x",function(e){return b?0:e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/(b?1:t.length)):z.transition().delay(function(e,n){return n*C/t[0].values.length}).attr("x",function(e){return e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/t.length).attr("y",function(t,e){return m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(p(m(t,e))-p(0)),1)||0}),o=h.copy(),l=p.copy()}),t}var e,i,r,a,s,o,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=d3.scale.ordinal(),p=d3.scale.linear(),f=Math.floor(1e4*Math.random()),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=!0,b=!1,x="zero",w=n.utils.defaultColor(),k=!1,_=null,C=1200,D=.1,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=M,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(b=e,t):b},t.stackOffset=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(y=e,t):y},t.color=function(e){return arguments.length?(w=n.utils.getColor(e),t):w},t.barColor=function(e){return arguments.length?(_=n.utils.getColor(e),t):_},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(f=e,t):f},t.hideable=function(e){return arguments.length?(k=e,t):k},t.delay=function(e){return arguments.length?(C=e,t):C},t.groupSpacing=function(e){return arguments.length?(D=e,t):D},t},n.models.multiBarChart=function(){"use strict";function t(n){return n.each(function(n){var k=d3.select(this),E=this,I=(c||parseInt(k.style("width"))||960)-u.left-u.right,T=(d||parseInt(k.style("height"))||400)-u.top-u.bottom;if(t.update=function(){k.transition().duration(P).call(t)},t.container=this,_.disabled=n.map(function(t){return!!t.disabled}),!C){var N;C={};for(N in _)C[N]=_[N]instanceof Array?_[N].slice(0):_[N]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var B=k.selectAll(".nv-noData").data([D]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",u.left+I/2).attr("y",u.top+T/2).text(function(t){return t}),t}k.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale();var F=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),z=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),V=F.select("g");if(z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-barsWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),f&&(o.width(I-S()),r.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),V.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),T=(d||parseInt(k.style("height"))||400)-u.top-u.bottom),V.select(".nv-legendWrap").attr("transform","translate("+S()+","+-u.top+")")),p){var L=[{key:"Grouped",disabled:r.stacked()},{key:"Stacked",disabled:!r.stacked()}];l.width(S()).color(["#444","#444","#444"]),V.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-u.top+")").call(l)}F.attr("transform","translate("+u.left+","+u.top+")"),v&&V.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),r.disabled(n.map(function(t){return t.disabled
})).width(I).height(T).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var R=V.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(R.transition().call(r),g){a.scale(e).ticks(I/100).tickSize(-T,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),V.select(".nv-x.nv-axis").transition().call(a);var W=V.select(".nv-x.nv-axis > g").selectAll("g");if(W.selectAll("line, text").style("opacity",1),b){var Y=function(t,e){return"translate("+t+","+e+")"},O=5,H=17;W.selectAll("text").attr("transform",function(t,e,n){return Y(0,n%2==0?O:H)});var j=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;V.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return Y(0,0===e||j%2!==0?H:O)})}y&&W.filter(function(t,e){return e%Math.ceil(n[0].values.length/(I/100))!==0}).selectAll("text, line").style("opacity",0),x&&W.selectAll(".tick text").attr("transform","rotate("+x+" 0,0)").style("text-anchor",x>0?"start":"end"),V.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(s.scale(i).ticks(T/36).tickSize(-I,0),V.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){_=e,M.stateChange(_),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(L=L.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}_.stacked=r.stacked(),M.stateChange(_),t.update()}}),M.on("tooltipShow",function(t){w&&A(t,E.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),"undefined"!=typeof e.stacked&&(r.stacked(e.stacked),_.stacked=e.stacked),t.update()})}),t}var e,i,r=n.models.multiBar(),a=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,y=!0,b=!1,x=0,w=!0,k=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},_={stacked:!1},C=null,D="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=function(){return p?180:0},P=250;r.stacked(!1),a.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(v?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var A=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=a.tickFormat()(r.x()(e.point,e.pointIndex)),c=s.tickFormat()(r.y()(e.point,e.pointIndex)),d=k(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],M.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){w&&n.tooltip.cleanup()}),t.dispatch=M,t.multibar=r,t.legend=o,t.xAxis=a,t.yAxis=s,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(v=e,s.orient(e?"right":"left"),t):v},t.reduceXTicks=function(e){return arguments.length?(y=e,t):y},t.rotateLabels=function(e){return arguments.length?(x=e,t):x},t.staggerLabels=function(e){return arguments.length?(b=e,t):b},t.tooltip=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.state=function(e){return arguments.length?(_=e,t):_},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(D=e,t):D},t.transitionDuration=function(e){return arguments.length?(P=e,t):P},t},n.models.multiBarHorizontal=function(){"use strict";function t(n){return n.each(function(t){{var n=c-u.left-u.right,h=d-u.top-u.bottom;d3.select(this)}x&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),x&&t[0].values.map(function(e,n){var i=0,r=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=r-e.size,r-=e.size):(e.y1=i,i+=e.size)})});var D=i&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(i||d3.merge(D).map(function(t){return t.x})).rangeBands(a||[0,h],.1),f.domain(r||d3.extent(d3.merge(D).map(function(t){return x?t.y>0?t.y1+t.y:t.y1:t.y}).concat(v))),f.range(w&&!x?s||[f.domain()[0]<0?_:0,n-(f.domain()[1]>0?_:0)]:s||[0,n]),o=o||p,l=l||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);{var S=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),P=S.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),A=(P.append("defs"),P.append("g"));S.select("g")}A.append("g").attr("class","nv-groups"),S.attr("transform","translate("+u.left+","+u.top+")");var E=S.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),E.transition().style("stroke-opacity",1).style("fill-opacity",.75);var I=E.selectAll("g.nv-bar").data(function(t){return t.values});I.exit().remove();var T=I.enter().append("g").attr("transform",function(e,n,i){return"translate("+l(x?e.y0:0)+","+(x?0:i*p.rangeBand()/t.length+p(g(e,n)))+")"});T.append("rect").attr("width",0).attr("height",p.rangeBand()/(x?1:t.length)),I.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),M.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[f(m(e,n)+(x?e.y0:0)),p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),M.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){M.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){M.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),T.append("text"),w&&!x?(I.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return C(m(t,e))}),I.transition().select("text").attr("x",function(t,e){return m(t,e)<0?-4:f(m(t,e))-f(0)+4})):I.selectAll("text").text(""),k&&!x?(T.append("text").classed("nv-bar-label",!0),I.select("text.nv-bar-label").attr("text-anchor",function(t,e){return m(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),I.transition().select("text.nv-bar-label").attr("x",function(t,e){return m(t,e)<0?f(0)-f(m(t,e))+4:-4})):I.selectAll("text.nv-bar-label").text(""),I.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),b&&(e||(e=t.map(function(){return!0})),I.style("fill",function(t,n,i){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),x?I.transition().attr("transform",function(t,e){return"translate("+f(t.y1)+","+p(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(f(m(t,e)+t.y0)-f(t.y0))}).attr("height",p.rangeBand()):I.transition().attr("transform",function(e,n){return"translate("+f(m(e,n)<0?m(e,n):0)+","+(e.series*p.rangeBand()/t.length+p(g(e,n)))+")"}).select("rect").attr("height",p.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(f(m(t,e))-f(0)),1)}),o=p.copy(),l=f.copy()}),t}var e,i,r,a,s,o,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),f=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=n.utils.defaultColor(),b=null,x=!1,w=!1,k=!1,_=60,C=d3.format(",.2f"),D=1200,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=M,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(p=e,t):p},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(x=e,t):x},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.barColor=function(e){return arguments.length?(b=n.utils.getColor(e),t):b},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(h=e,t):h},t.delay=function(e){return arguments.length?(D=e,t):D},t.showValues=function(e){return arguments.length?(w=e,t):w},t.showBarLabels=function(e){return arguments.length?(k=e,t):k},t.valueFormat=function(e){return arguments.length?(C=e,t):C},t.valuePadding=function(e){return arguments.length?(_=e,t):_},t},n.models.multiBarHorizontalChart=function(){"use strict";function t(n){return n.each(function(n){var v=d3.select(this),b=this,S=(c||parseInt(v.style("width"))||960)-u.left-u.right,P=(d||parseInt(v.style("height"))||400)-u.top-u.bottom;if(t.update=function(){v.transition().duration(D).call(t)},t.container=this,x.disabled=n.map(function(t){return!!t.disabled}),!w){var A;w={};for(A in x)w[A]=x[A]instanceof Array?x[A].slice(0):x[A]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var E=v.selectAll(".nv-noData").data([k]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",u.left+S/2).attr("y",u.top+P/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale();var I=v.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]),T=I.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),N=I.select("g");if(T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),f&&(o.width(S-C()),r.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),N.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),P=(d||parseInt(v.style("height"))||400)-u.top-u.bottom),N.select(".nv-legendWrap").attr("transform","translate("+C()+","+-u.top+")")),p){var B=[{key:"Grouped",disabled:r.stacked()},{key:"Stacked",disabled:!r.stacked()}];l.width(C()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum(B).attr("transform","translate(0,"+-u.top+")").call(l)}I.attr("transform","translate("+u.left+","+u.top+")"),r.disabled(n.map(function(t){return t.disabled})).width(S).height(P).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var F=N.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(F.transition().call(r),g){a.scale(e).ticks(P/24).tickSize(-S,0),N.select(".nv-x.nv-axis").transition().call(a);var z=N.select(".nv-x.nv-axis").selectAll("g");z.selectAll("line, text")}m&&(s.scale(i).ticks(S/100).tickSize(-P,0),N.select(".nv-y.nv-axis").attr("transform","translate(0,"+P+")"),N.select(".nv-y.nv-axis").transition().call(s)),N.select(".nv-zeroLine line").attr("x1",i(0)).attr("x2",i(0)).attr("y1",0).attr("y2",-P),o.dispatch.on("stateChange",function(e){x=e,_.stateChange(x),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(B=B.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":r.stacked(!1);break;case"Stacked":r.stacked(!0)}x.stacked=r.stacked(),_.stateChange(x),t.update()}}),_.on("tooltipShow",function(t){y&&M(t,b.parentNode)}),_.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),"undefined"!=typeof e.stacked&&(r.stacked(e.stacked),x.stacked=e.stacked),t.update()})}),t}var e,i,r=n.models.multiBarHorizontal(),a=n.models.axis(),s=n.models.axis(),o=n.models.legend().height(30),l=n.models.legend().height(30),u={top:30,right:20,bottom:50,left:60},c=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,y=!0,b=function(t,e,n){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},x={stacked:v},w=null,k="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),C=function(){return p?180:0},D=250;r.stacked(v),a.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var M=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=a.tickFormat()(r.x()(e.point,e.pointIndex)),c=s.tickFormat()(r.y()(e.point,e.pointIndex)),d=b(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"e":"w",null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],_.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=_,t.multibar=r,t.legend=o,t.xAxis=a,t.yAxis=s,d3.rebind(t,r,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.tooltip=function(e){return arguments.length?(b=e,t):b},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(D=e,t):D},t},n.models.multiChart=function(){"use strict";function t(n){return n.each(function(n){var d=d3.select(this),M=this;t.update=function(){d.transition().call(t)},t.container=this;var S=(o||parseInt(d.style("width"))||960)-a.left-a.right,P=(l||parseInt(d.style("height"))||400)-a.top-a.bottom,A=n.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),E=n.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),I=n.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),T=n.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),N=n.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),B=n.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),F=n.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})}),z=n.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})});e.domain(d3.extent(d3.merge(F.concat(z)),function(t){return t.x})).range([0,S]);var V=d.selectAll("g.wrap.multiChart").data([n]),L=V.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");L.append("g").attr("class","x axis"),L.append("g").attr("class","y1 axis"),L.append("g").attr("class","y2 axis"),L.append("g").attr("class","lines1Wrap"),L.append("g").attr("class","lines2Wrap"),L.append("g").attr("class","bars1Wrap"),L.append("g").attr("class","bars2Wrap"),L.append("g").attr("class","stack1Wrap"),L.append("g").attr("class","stack2Wrap"),L.append("g").attr("class","legendWrap");var R=V.select("g");u&&(_.width(S/2),R.select(".legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(_),a.top!=_.height()&&(a.top=_.height(),P=(l||parseInt(d.style("height"))||400)-a.top-a.bottom),R.select(".legendWrap").attr("transform","translate("+S/2+","+-a.top+")")),f.width(S).height(P).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"line"==n[e].type})),g.width(S).height(P).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"line"==n[e].type})),m.width(S).height(P).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"bar"==n[e].type})),v.width(S).height(P).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"bar"==n[e].type})),y.width(S).height(P).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"area"==n[e].type})),b.width(S).height(P).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"area"==n[e].type})),R.attr("transform","translate("+a.left+","+a.top+")");var W=R.select(".lines1Wrap").datum(A),Y=R.select(".bars1Wrap").datum(I),O=R.select(".stack1Wrap").datum(N),H=R.select(".lines2Wrap").datum(E),j=R.select(".bars2Wrap").datum(T),$=R.select(".stack2Wrap").datum(B),X=N.length?N.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],U=B.length?B.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];h.domain(i||d3.extent(d3.merge(F).concat(X),function(t){return t.y})).range([0,P]),p.domain(r||d3.extent(d3.merge(z).concat(U),function(t){return t.y})).range([0,P]),f.yDomain(h.domain()),m.yDomain(h.domain()),y.yDomain(h.domain()),g.yDomain(p.domain()),v.yDomain(p.domain()),b.yDomain(p.domain()),N.length&&d3.transition(O).call(y),B.length&&d3.transition($).call(b),I.length&&d3.transition(Y).call(m),T.length&&d3.transition(j).call(v),A.length&&d3.transition(W).call(f),E.length&&d3.transition(H).call(g),x.ticks(S/100).tickSize(-P,0),R.select(".x.axis").attr("transform","translate(0,"+P+")"),d3.transition(R.select(".x.axis")).call(x),w.ticks(P/36).tickSize(-S,0),d3.transition(R.select(".y1.axis")).call(w),k.ticks(P/36).tickSize(-S,0),d3.transition(R.select(".y2.axis")).call(k),R.select(".y2.axis").style("opacity",z.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),_.dispatch.on("stateChange",function(){t.update()}),C.on("tooltipShow",function(t){c&&D(t,M.parentNode)})}),t}var e,i,r,a={top:30,right:20,bottom:50,left:60},s=d3.scale.category20().range(),o=null,l=null,u=!0,c=!0,d=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},e=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=n.models.line().yScale(h),g=n.models.line().yScale(p),m=n.models.multiBar().stacked(!1).yScale(h),v=n.models.multiBar().stacked(!1).yScale(p),y=n.models.stackedArea().yScale(h),b=n.models.stackedArea().yScale(p),x=n.models.axis().scale(e).orient("bottom").tickPadding(5),w=n.models.axis().scale(h).orient("left"),k=n.models.axis().scale(p).orient("right"),_=n.models.legend().height(30),C=d3.dispatch("tooltipShow","tooltipHide"),D=function(e,i){var r=e.pos[0]+(i.offsetLeft||0),a=e.pos[1]+(i.offsetTop||0),s=x.tickFormat()(f.x()(e.point,e.pointIndex)),o=(2==e.series.yAxis?k:w).tickFormat()(f.y()(e.point,e.pointIndex)),l=d(e.series.key,s,o,e,t);n.tooltip.show([r,a],l,void 0,void 0,i.offsetParent)};return f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){return Math.round(100*y.y()(t.point))?(t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],void C.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),y.dispatch.on("tooltipHide",function(t){C.tooltipHide(t)}),b.dispatch.on("tooltipShow",function(t){return Math.round(100*b.y()(t.point))?(t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],void C.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),b.dispatch.on("tooltipHide",function(t){C.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],C.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){c&&n.tooltip.cleanup()}),t.dispatch=C,t.lines1=f,t.lines2=g,t.bars1=m,t.bars2=v,t.stack1=y,t.stack2=b,t.xAxis=x,t.yAxis1=w,t.yAxis2=k,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,f.x(e),m.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,f.y(e),m.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(i=e,t):i},t.yDomain2=function(e){return arguments.length?(r=e,t):r},t.margin=function(e){return arguments.length?(a=e,t):a},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(s=e,_.color(e),t):s},t.showLegend=function(e){return arguments.length?(u=e,t):u},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(d=e,t):d},t},n.models.ohlcBar=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,k=l-s.top-s.bottom,C=d3.select(this);c.domain(e||d3.extent(t[0].values.map(h).concat(y))),c.range(x?r||[.5*n/t[0].values.length,n*(t[0].values.length-.5)/t[0].values.length]:r||[0,n]),d.domain(i||[d3.min(t[0].values.map(v).concat(b)),d3.max(t[0].values.map(m).concat(b))]).range(a||[k,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var D=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),M=D.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),S=M.append("defs"),P=M.append("g"),A=D.select("g");P.append("g").attr("class","nv-ticks"),D.attr("transform","translate("+s.left+","+s.top+")"),C.on("click",function(t,e){_.chartClick({data:t,index:e,pos:d3.event,id:u})}),S.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),D.select("#nv-chart-clip-path-"+u+" rect").attr("width",n).attr("height",k),A.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var E=D.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});E.exit().remove();E.enter().append("path").attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(e,i){var r=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-r/2+",0l"+r/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+r/2+",0l"+-r/2+",0z"}).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+d(m(t,e))+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),_.elementMouseover({point:e,series:t[0],pos:[c(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),_.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(t,e){_.elementClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(t,e){_.elementDblClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()});E.attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(E).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+d(m(t,e))+")"}).attr("d",function(e,i){var r=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-r/2+",0l"+r/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+r/2+",0l"+-r/2+",0z"})}),t}var e,i,r,a,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},v=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=n.utils.defaultColor(),_=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=_,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.open=function(e){return arguments.length?(f=e,t):f},t.close=function(e){return arguments.length?(g=e,t):g},t.high=function(e){return arguments.length?(m=e,t):m},t.low=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(a=e,t):a},t.forceX=function(e){return arguments.length?(y=e,t):y},t.forceY=function(e){return arguments.length?(b=e,t):b},t.padData=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(w=e,t):w},t.color=function(e){return arguments.length?(k=n.utils.getColor(e),t):k},t.id=function(e){return arguments.length?(u=e,t):u},t},n.models.pie=function(){"use strict";function t(n){return n.each(function(t){function n(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return E(e(t))}}var o=i-e.left-e.right,c=r-e.top-e.bottom,_=Math.min(o,c)/2,C=_-_/5,D=d3.select(this),M=D.selectAll(".nv-wrap.nv-pie").data(t),S=M.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+l),P=S.append("g"),A=M.select("g");P.append("g").attr("class","nv-pie"),P.append("g").attr("class","nv-pieLabels"),M.attr("transform","translate("+e.left+","+e.top+")"),A.select(".nv-pie").attr("transform","translate("+o/2+","+c/2+")"),A.select(".nv-pieLabels").attr("transform","translate("+o/2+","+c/2+")"),D.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:l})});var E=d3.svg.arc().outerRadius(C);b&&E.startAngle(b),x&&E.endAngle(x),v&&E.innerRadius(_*w);var I=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:s(t)}),T=M.select(".nv-pie").selectAll(".nv-slice").data(I),N=M.select(".nv-pieLabels").selectAll(".nv-label").data(I);T.exit().remove(),N.exit().remove();var B=T.enter().append("g").attr("class","nv-slice").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({label:a(t.data),value:s(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:l})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({label:a(t.data),value:s(t.data),point:t.data,index:e,id:l})}).on("click",function(t,e){k.elementClick({label:a(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()}).on("dblclick",function(t,e){k.elementDblClick({label:a(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()});T.attr("fill",function(t,e){return u(t,e)}).attr("stroke",function(t,e){return u(t,e)});B.append("path").each(function(t){this._current=t});if(T.select("path").transition().attr("d",E).attrTween("d",n),h){var F=d3.svg.arc().innerRadius(0);p&&(F=E),f&&(F=d3.svg.arc().outerRadius(E.outerRadius())),N.enter().append("g").classed("nv-label",!0).each(function(t){var e=d3.select(this);e.attr("transform",function(t){if(y){t.outerRadius=C+10,t.innerRadius=C+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+F.centroid(t)+") rotate("+e+")"}return t.outerRadius=_+10,t.innerRadius=_+15,"translate("+F.centroid(t)+")"}),e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),e.append("text").style("text-anchor",y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});
var z={},V=14,L=140,R=function(t){return Math.floor(t[0]/L)*L+","+Math.floor(t[1]/V)*V};N.transition().attr("transform",function(t){if(y){t.outerRadius=C+10,t.innerRadius=C+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+F.centroid(t)+") rotate("+e+")"}t.outerRadius=_+10,t.innerRadius=_+15;var n=F.centroid(t),i=R(n);return z[i]&&(n[1]-=V),z[R(n)]=!0,"translate("+n+")"}),N.select(".nv-label text").style("text-anchor",y?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t){var e=(t.endAngle-t.startAngle)/(2*Math.PI),n={key:a(t.data),value:s(t.data),percent:d3.format("%")(e)};return t.value&&e>m?n[g]:""})}}),t}var e={top:0,right:0,bottom:0,left:0},i=500,r=500,a=function(t){return t.x},s=function(t){return t.y},o=function(t){return t.description},l=Math.floor(1e4*Math.random()),u=n.utils.defaultColor(),c=d3.format(",.2f"),h=!0,p=!0,f=!1,g="key",m=.02,v=!1,y=!1,b=!1,x=!1,w=.5,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=k,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(r=e,t):r},t.values=function(){return n.log("pie.values() is no longer supported."),t},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(s=d3.functor(e),t):s},t.description=function(e){return arguments.length?(o=e,t):o},t.showLabels=function(e){return arguments.length?(h=e,t):h},t.labelSunbeamLayout=function(e){return arguments.length?(y=e,t):y},t.donutLabelsOutside=function(e){return arguments.length?(f=e,t):f},t.pieLabelsOutside=function(e){return arguments.length?(p=e,t):p},t.labelType=function(e){return arguments.length?(g=e,g=g||"key",t):g},t.donut=function(e){return arguments.length?(v=e,t):v},t.donutRatio=function(e){return arguments.length?(w=e,t):w},t.startAngle=function(e){return arguments.length?(b=e,t):b},t.endAngle=function(e){return arguments.length?(x=e,t):x},t.id=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.valueFormat=function(e){return arguments.length?(c=e,t):c},t.labelThreshold=function(e){return arguments.length?(m=e,t):m},t},n.models.pieChart=function(){"use strict";function t(n){return n.each(function(n){var l=d3.select(this),u=(a||parseInt(l.style("width"))||960)-r.left-r.right,c=(s||parseInt(l.style("height"))||400)-r.top-r.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,d.disabled=n.map(function(t){return!!t.disabled}),!h){var g;h={};for(g in d)h[g]=d[g]instanceof Array?d[g].slice(0):d[g]}if(!n||!n.length){var m=l.selectAll(".nv-noData").data([p]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",r.left+u/2).attr("y",r.top+c/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var v=l.selectAll("g.nv-wrap.nv-pieChart").data([n]),y=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),b=v.select("g");y.append("g").attr("class","nv-pieWrap"),y.append("g").attr("class","nv-legendWrap"),o&&(i.width(u).key(e.x()),v.select(".nv-legendWrap").datum(n).call(i),r.top!=i.height()&&(r.top=i.height(),c=(s||parseInt(l.style("height"))||400)-r.top-r.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")),v.attr("transform","translate("+r.left+","+r.top+")"),e.width(u).height(c);var x=b.select(".nv-pieWrap").datum([n]);d3.transition(x).call(e),i.dispatch.on("stateChange",function(e){d=e,f.stateChange(d),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){f.tooltipHide(t)}),f.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),d.disabled=e.disabled),t.update()})}),t}var e=n.models.pie(),i=n.models.legend(),r={top:30,right:20,bottom:20,left:20},a=null,s=null,o=!0,l=n.utils.defaultColor(),u=!0,c=function(t,e){return"<h3>"+t+"</h3><p>"+e+"</p>"},d={},h=null,p="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),g=function(i,r){var a=e.description()(i.point)||e.x()(i.point),s=i.pos[0]+(r&&r.offsetLeft||0),o=i.pos[1]+(r&&r.offsetTop||0),l=e.valueFormat()(e.y()(i.point)),u=c(a,l,i,t);n.tooltip.show([s,o],u,i.value<0?"n":"s",null,r)};return e.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],f.tooltipShow(t)}),f.on("tooltipShow",function(t){u&&g(t)}),f.on("tooltipHide",function(){u&&n.tooltip.cleanup()}),t.legend=i,t.dispatch=f,t.pie=e,d3.rebind(t,e,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(s=e,t):s},t.color=function(r){return arguments.length?(l=n.utils.getColor(r),i.color(l),e.color(l),t):l},t.showLegend=function(e){return arguments.length?(o=e,t):o},t.tooltips=function(e){return arguments.length?(u=e,t):u},t.tooltipContent=function(e){return arguments.length?(c=e,t):c},t.state=function(e){return arguments.length?(d=e,t):d},t.defaultState=function(e){return arguments.length?(h=e,t):h},t.noData=function(e){return arguments.length?(p=e,t):p},t},n.models.scatter=function(){"use strict";function t(W){return W.each(function(t){function W(){if(!k)return!1;var e=d3.merge(t.map(function(t,e){return t.values.map(function(t,n){var i=f(t,n),r=g(t,n);return[d(i)+1e-7*Math.random(),h(r)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return C(t[4],e)})}));if(L===!0){if(P){var n=$.select("defs").selectAll(".nv-point-clips").data([c]).enter();n.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+c);var i=$.select("#nv-points-clip-"+c).selectAll("circle").data(e);i.enter().append("circle").attr("r",A),i.exit().remove(),i.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),$.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+c+")")}e.length&&(e.push([d.range()[0]-20,h.range()[0]-20,null,null]),e.push([d.range()[1]+20,h.range()[1]+20,null,null]),e.push([d.range()[0]-20,h.range()[0]+20,null,null]),e.push([d.range()[1]+20,h.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,l+10],[o+10,l+10],[o+10,-10]]),a=d3.geom.voronoi(e).map(function(t,n){return{data:r.clip(t),series:e[n][2],point:e[n][3]}}),u=$.select(".nv-point-paths").selectAll("path").data(a);u.enter().append("path").attr("class",function(t,e){return"nv-path-"+e}),u.exit().remove(),u.attr("d",function(t){return 0===t.data.length?"M 0 0":"M"+t.data.join("L")+"Z"});var p=function(e,n){if(R)return 0;var i=t[e.series];if("undefined"!=typeof i){var r=i.values[e.point];n({point:r,series:i,pos:[d(f(r,e.point))+s.left,h(g(r,e.point))+s.top],seriesIndex:e.series,pointIndex:e.point})}};u.on("click",function(t){p(t,V.elementClick)}).on("mouseover",function(t){p(t,V.elementMouseover)}).on("mouseout",function(t){p(t,V.elementMouseout)})}else $.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],r=i.values[n];V.elementClick({point:r,series:i,pos:[d(f(r,n))+s.left,h(g(r,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],r=i.values[n];V.elementMouseover({point:r,series:i,pos:[d(f(r,n))+s.left,h(g(r,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],r=i.values[n];V.elementMouseout({point:r,series:i,seriesIndex:e.series,pointIndex:n})});R=!1}var Y=o-s.left-s.right,O=l-s.top-s.bottom,H=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var j=E&&I&&B?[]:d3.merge(t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),size:m(t,e)}})}));d.domain(E||d3.extent(j.map(function(t){return t.x}).concat(b))),d.range(D&&t[0]?T||[(Y*M+Y)/(2*t[0].values.length),Y-Y*(1+M)/(2*t[0].values.length)]:T||[0,Y]),h.domain(I||d3.extent(j.map(function(t){return t.y}).concat(x))).range(N||[O,0]),p.domain(B||d3.extent(j.map(function(t){return t.size}).concat(w))).range(F||[16,256]),(d.domain()[0]===d.domain()[1]||h.domain()[0]===h.domain()[1])&&(z=!0),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),isNaN(h.domain()[0])&&h.domain([-1,1]),e=e||d,i=i||h,r=r||p;var $=H.selectAll("g.nv-wrap.nv-scatter").data([t]),X=$.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c+(z?" nv-single-point":"")),U=X.append("defs"),q=X.append("g"),G=$.select("g");q.append("g").attr("class","nv-groups"),q.append("g").attr("class","nv-point-paths"),$.attr("transform","translate("+s.left+","+s.top+")"),U.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),$.select("#nv-edge-clip-"+c+" rect").attr("width",Y).attr("height",O>0?O:0),G.attr("clip-path",S?"url(#nv-edge-clip-"+c+")":""),R=!0;var K=$.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});if(K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().remove(),K.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),K.transition().style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5),y){var Z=K.selectAll("circle.nv-point").data(function(t){return t.values},_);Z.enter().append("circle").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("cx",function(t,i){return n.utils.NaNtoZero(e(f(t,i)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(i(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)}),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)})}else{var Z=K.selectAll("path.nv-point").data(function(t){return t.values});Z.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t,n){return"translate("+e(f(t,n))+","+i(g(t,n))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))})),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))}))}clearTimeout(a),a=setTimeout(W,300),e=d.copy(),i=h.copy(),r=p.copy()}),t}var e,i,r,a,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=n.utils.defaultColor(),c=Math.floor(1e5*Math.random()),d=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.size||1},v=function(t){return t.shape||"circle"},y=!0,b=[],x=[],w=[],k=!0,_=null,C=function(t){return!t.notActive},D=!1,M=.1,S=!1,P=!0,A=function(){return 25},E=null,I=null,T=null,N=null,B=null,F=null,z=!1,V=d3.dispatch("elementClick","elementMouseover","elementMouseout"),L=!0,R=!1;return t.clearHighlights=function(){d3.selectAll(".nv-chart-"+c+" .nv-point.hover").classed("hover",!1)},t.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+c+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)},V.on("elementMouseover.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),V.on("elementMouseout.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),t.dispatch=V,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=d3.functor(e),t):f},t.y=function(e){return arguments.length?(g=d3.functor(e),t):g},t.size=function(e){return arguments.length?(m=d3.functor(e),t):m},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(h=e,t):h},t.zScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(E=e,t):E},t.yDomain=function(e){return arguments.length?(I=e,t):I},t.sizeDomain=function(e){return arguments.length?(B=e,t):B},t.xRange=function(e){return arguments.length?(T=e,t):T},t.yRange=function(e){return arguments.length?(N=e,t):N},t.sizeRange=function(e){return arguments.length?(F=e,t):F},t.forceX=function(e){return arguments.length?(b=e,t):b},t.forceY=function(e){return arguments.length?(x=e,t):x},t.forceSize=function(e){return arguments.length?(w=e,t):w},t.interactive=function(e){return arguments.length?(k=e,t):k},t.pointKey=function(e){return arguments.length?(_=e,t):_},t.pointActive=function(e){return arguments.length?(C=e,t):C},t.padData=function(e){return arguments.length?(D=e,t):D},t.padDataOuter=function(e){return arguments.length?(M=e,t):M},t.clipEdge=function(e){return arguments.length?(S=e,t):S},t.clipVoronoi=function(e){return arguments.length?(P=e,t):P},t.useVoronoi=function(e){return arguments.length?(L=e,L===!1&&(P=!1),t):L},t.clipRadius=function(e){return arguments.length?(A=e,t):A},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.shape=function(e){return arguments.length?(v=e,t):v},t.onlyCircles=function(e){return arguments.length?(y=e,t):y},t.id=function(e){return arguments.length?(c=e,t):c},t.singlePoint=function(e){return arguments.length?(z=e,t):z},t},n.models.scatterChart=function(){"use strict";function t(n){return n.each(function(n){function S(){if(D)return X.select(".nv-point-paths").style("pointer-events","all"),!1;X.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(C).focus(t[0]),f.distortion(C).focus(t[1]),X.select(".nv-scatterWrap").call(e),x&&X.select(".nv-x.nv-axis").call(i),w&&X.select(".nv-y.nv-axis").call(r),X.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),X.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var P=d3.select(this),A=this,R=(c||parseInt(P.style("width"))||960)-u.left-u.right,W=(d||parseInt(P.style("height"))||400)-u.top-u.bottom;if(t.update=function(){P.transition().duration(B).call(t)},t.container=this,E.disabled=n.map(function(t){return!!t.disabled}),!I){var Y;I={};for(Y in E)I[Y]=E[Y]instanceof Array?E[Y].slice(0):E[Y]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var O=P.selectAll(".nv-noData").data([N]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",u.left+R/2).attr("y",u.top+W/2).text(function(t){return t}),t}P.selectAll(".nv-noData").remove(),F=F||p,z=z||f;var H=P.selectAll("g.nv-wrap.nv-scatterChart").data([n]),j=H.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),$=j.append("g"),X=H.select("g");if($.append("rect").attr("class","nvd3 nv-background"),$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-scatterWrap"),$.append("g").attr("class","nv-distWrap"),$.append("g").attr("class","nv-legendWrap"),$.append("g").attr("class","nv-controlsWrap"),b){var U=_?R/2:R;a.width(U),H.select(".nv-legendWrap").datum(n).call(a),u.top!=a.height()&&(u.top=a.height(),W=(d||parseInt(P.style("height"))||400)-u.top-u.bottom),H.select(".nv-legendWrap").attr("transform","translate("+(R-U)+","+-u.top+")")}if(_&&(s.width(180).color(["#444"]),X.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-u.top+")").call(s)),H.attr("transform","translate("+u.left+","+u.top+")"),k&&X.select(".nv-y.nv-axis").attr("transform","translate("+R+",0)"),e.width(R).height(W).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),0!==g&&e.xDomain(null),0!==m&&e.yDomain(null),H.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),0!==g){var q=p.domain()[1]-p.domain()[0];e.xDomain([p.domain()[0]-g*q,p.domain()[1]+g*q])}if(0!==m){var G=f.domain()[1]-f.domain()[0];e.yDomain([f.domain()[0]-m*G,f.domain()[1]+m*G])}(0!==m||0!==g)&&H.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),x&&(i.scale(p).ticks(i.ticks()&&i.ticks().length?i.ticks():R/100).tickSize(-W,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),w&&(r.scale(f).ticks(r.ticks()&&r.ticks().length?r.ticks():W/36).tickSize(-R,0),X.select(".nv-y.nv-axis").call(r)),v&&(o.getData(e.x()).scale(p).width(R).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),$.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),X.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),y&&(l.getData(e.y()).scale(f).width(W).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),$.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),X.select(".nv-distributionY").attr("transform","translate("+(k?R:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(X.select(".nv-background").attr("width",R).attr("height",W),X.select(".nv-background").on("mousemove",S),X.select(".nv-background").on("click",function(){D=!D}),e.dispatch.on("elementClick.freezeFisheye",function(){D=!D})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,C=n.disabled?0:2.5,X.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),X.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(C).focus(0),f.distortion(C).focus(0),X.select(".nv-scatterWrap").call(e),X.select(".nv-x.nv-axis").call(i),X.select(".nv-y.nv-axis").call(r)):D=!1,t.update()}),a.dispatch.on("stateChange",function(e){E.disabled=e.disabled,T.stateChange(E),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",function(){return t.pos[1]-W}),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],T.tooltipShow(t)}),T.on("tooltipShow",function(t){M&&V(t,A.parentNode)}),T.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),E.disabled=e.disabled),t.update()}),F=p.copy(),z=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),r=n.models.axis(),a=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=0,m=0,v=!1,y=!1,b=!0,x=!0,w=!0,k=!1,_=!!d3.fisheye,C=0,D=!1,M=!0,S=function(t,e){return"<strong>"+e+"</strong>"},P=function(t,e,n){return"<strong>"+n+"</strong>"},A=null,E={},I=null,T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N="No Data Available.",B=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),r.orient(k?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var F,z,V=function(a,s){var o=a.pos[0]+(s.offsetLeft||0),l=a.pos[1]+(s.offsetTop||0),c=a.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),h=p.range()[0]+u.left+(s.offsetLeft||0),g=a.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(a.point,a.pointIndex)),v=r.tickFormat()(e.y()(a.point,a.pointIndex));null!=S&&n.tooltip.show([c,d],S(a.series.key,m,v,a,t),"n",1,s,"x-nvtooltip"),null!=P&&n.tooltip.show([h,g],P(a.series.key,m,v,a,t),"e",1,s,"y-nvtooltip"),null!=A&&n.tooltip.show([o,l],A(a.series.key,m,v,a,t),a.value<0?"n":"s",null,s)},L=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),T.on("tooltipHide",function(){M&&n.tooltip.cleanup()}),t.dispatch=T,t.scatter=e,t.legend=a,t.controls=s,t.xAxis=i,t.yAxis=r,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),a.color(h),o.color(h),l.color(h),t):h},t.showDistX=function(e){return arguments.length?(v=e,t):v},t.showDistY=function(e){return arguments.length?(y=e,t):y},t.showControls=function(e){return arguments.length?(_=e,t):_},t.showLegend=function(e){return arguments.length?(b=e,t):b},t.showXAxis=function(e){return arguments.length?(x=e,t):x},t.showYAxis=function(e){return arguments.length?(w=e,t):w},t.rightAlignYAxis=function(e){return arguments.length?(k=e,r.orient(e?"right":"left"),t):k},t.fisheye=function(e){return arguments.length?(C=e,t):C},t.xPadding=function(e){return arguments.length?(g=e,t):g},t.yPadding=function(e){return arguments.length?(m=e,t):m},t.tooltips=function(e){return arguments.length?(M=e,t):M},t.tooltipContent=function(e){return arguments.length?(A=e,t):A},t.tooltipXContent=function(e){return arguments.length?(S=e,t):S},t.tooltipYContent=function(e){return arguments.length?(P=e,t):P},t.state=function(e){return arguments.length?(E=e,t):E},t.defaultState=function(e){return arguments.length?(I=e,t):I},t.noData=function(e){return arguments.length?(N=e,t):N},t.transitionDuration=function(e){return arguments.length?(B=e,t):B},t},n.models.scatterPlusLineChart=function(){"use strict";function t(n){return n.each(function(n){function D(){if(_)return j.select(".nv-point-paths").style("pointer-events","all"),!1;j.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(k).focus(t[0]),f.distortion(k).focus(t[1]),j.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),y&&j.select(".nv-x.nv-axis").call(i),b&&j.select(".nv-y.nv-axis").call(r),j.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),j.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var M=d3.select(this),S=this,V=(c||parseInt(M.style("width"))||960)-u.left-u.right,L=(d||parseInt(M.style("height"))||400)-u.top-u.bottom;if(t.update=function(){M.transition().duration(T).call(t)},t.container=this,P.disabled=n.map(function(t){return!!t.disabled}),!A){var R;A={};for(R in P)A[R]=P[R]instanceof Array?P[R].slice(0):P[R]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var W=M.selectAll(".nv-noData").data([I]);return W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),W.attr("x",u.left+V/2).attr("y",u.top+L/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),p=e.xScale(),f=e.yScale(),N=N||p,B=B||f;var Y=M.selectAll("g.nv-wrap.nv-scatterChart").data([n]),O=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),H=O.append("g"),j=Y.select("g");H.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-scatterWrap"),H.append("g").attr("class","nv-regressionLinesWrap"),H.append("g").attr("class","nv-distWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-controlsWrap"),Y.attr("transform","translate("+u.left+","+u.top+")"),x&&j.select(".nv-y.nv-axis").attr("transform","translate("+V+",0)"),v&&(a.width(V/2),Y.select(".nv-legendWrap").datum(n).call(a),u.top!=a.height()&&(u.top=a.height(),L=(d||parseInt(M.style("height"))||400)-u.top-u.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+V/2+","+-u.top+")")),w&&(s.width(180).color(["#444"]),j.select(".nv-controlsWrap").datum(z).attr("transform","translate(0,"+-u.top+")").call(s)),e.width(V).height(L).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),Y.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),Y.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var $=Y.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});$.enter().append("g").attr("class","nv-regLines");{var X=$.selectAll(".nv-regLine").data(function(t){return[t]});X.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}X.transition().attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(t){return f(p.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return f(p.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return h(t,n)}).style("stroke-opacity",function(t){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),y&&(i.scale(p).ticks(i.ticks()?i.ticks():V/100).tickSize(-L,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),b&&(r.scale(f).ticks(r.ticks()?r.ticks():L/36).tickSize(-V,0),j.select(".nv-y.nv-axis").call(r)),g&&(o.getData(e.x()).scale(p).width(V).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),j.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),m&&(l.getData(e.y()).scale(f).width(L).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),j.select(".nv-distributionY").attr("transform","translate("+(x?V:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(j.select(".nv-background").attr("width",V).attr("height",L),j.select(".nv-background").on("mousemove",D),j.select(".nv-background").on("click",function(){_=!_}),e.dispatch.on("elementClick.freezeFisheye",function(){_=!_})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,k=n.disabled?0:2.5,j.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),j.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(k).focus(0),f.distortion(k).focus(0),j.select(".nv-scatterWrap").call(e),j.select(".nv-x.nv-axis").call(i),j.select(".nv-y.nv-axis").call(r)):_=!1,t.update()}),a.dispatch.on("stateChange",function(e){P=e,E.stateChange(P),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-L),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],E.tooltipShow(t)}),E.on("tooltipShow",function(t){C&&F(t,S.parentNode)}),E.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),P.disabled=e.disabled),t.update()}),N=p.copy(),B=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),r=n.models.axis(),a=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=!1,m=!1,v=!0,y=!0,b=!0,x=!1,w=!!d3.fisheye,k=0,_=!1,C=!0,D=function(t,e){return"<strong>"+e+"</strong>"},M=function(t,e,n){return"<strong>"+n+"</strong>"},S=function(t,e,n,i){return"<h3>"+t+"</h3><p>"+i+"</p>"},P={},A=null,E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),I="No Data Available.",T=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),r.orient(x?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var N,B,F=function(a,s){var o=a.pos[0]+(s.offsetLeft||0),l=a.pos[1]+(s.offsetTop||0),c=a.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),h=p.range()[0]+u.left+(s.offsetLeft||0),g=a.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(a.point,a.pointIndex)),v=r.tickFormat()(e.y()(a.point,a.pointIndex));null!=D&&n.tooltip.show([c,d],D(a.series.key,m,v,a,t),"n",1,s,"x-nvtooltip"),null!=M&&n.tooltip.show([h,g],M(a.series.key,m,v,a,t),"e",1,s,"y-nvtooltip"),null!=S&&n.tooltip.show([o,l],S(a.series.key,m,v,a.point.tooltip,a,t),a.value<0?"n":"s",null,s)},z=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){E.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),E.on("tooltipHide",function(){C&&n.tooltip.cleanup()}),t.dispatch=E,t.scatter=e,t.legend=a,t.controls=s,t.xAxis=i,t.yAxis=r,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),a.color(h),o.color(h),l.color(h),t):h
},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(m=e,t):m},t.showControls=function(e){return arguments.length?(w=e,t):w},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.showXAxis=function(e){return arguments.length?(y=e,t):y},t.showYAxis=function(e){return arguments.length?(b=e,t):b},t.rightAlignYAxis=function(e){return arguments.length?(x=e,r.orient(e?"right":"left"),t):x},t.fisheye=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(C=e,t):C},t.tooltipContent=function(e){return arguments.length?(S=e,t):S},t.tooltipXContent=function(e){return arguments.length?(D=e,t):D},t.tooltipYContent=function(e){return arguments.length?(M=e,t):M},t.state=function(e){return arguments.length?(P=e,t):P},t.defaultState=function(e){return arguments.length?(A=e,t):A},t.noData=function(e){return arguments.length?(I=e,t):I},t.transitionDuration=function(e){return arguments.length?(T=e,t):T},t},n.models.sparkline=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,u=l-s.top-s.bottom,g=d3.select(this);c.domain(e||d3.extent(t,h)).range(r||[0,n]),d.domain(i||d3.extent(t,p)).range(a||[u,0]);{var m=g.selectAll("g.nv-wrap.nv-sparkline").data([t]),v=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");v.append("g"),m.select("g")}m.attr("transform","translate("+s.left+","+s.top+")");var y=m.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||f(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(h(t,e))}).y(function(t,e){return d(p(t,e))}));var b=m.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),i=e(n.lastIndexOf(d.domain()[1])),r=e(n.indexOf(d.domain()[0])),a=e(n.length-1);return[r,i,a].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t){return c(h(t,t.pointIndex))}).attr("cy",function(t){return d(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t){return h(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var e,i,r,a,s={top:2,right:0,bottom:2,left:0},o=400,l=32,u=!0,c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=n.utils.getColor(["#000"]);return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(h=d3.functor(e),t):h},t.y=function(e){return arguments.length?(p=d3.functor(e),t):p},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(a=e,t):a},t.animate=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(f=n.utils.getColor(e),t):f},t},n.models.sparklinePlus=function(){"use strict";function t(n){return n.each(function(h){function m(){if(!u){var t=M.selectAll(".nv-hoverValue").data(l),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(r.x()(h[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(n.append("line").attr("x1",0).attr("y1",-a.top).attr("x2",0).attr("y2",x),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-a.top).attr("text-anchor","end").attr("dy",".9em"),M.select(".nv-hoverValue .nv-xValue").text(c(r.x()(h[l[0]],l[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-a.top).attr("text-anchor","start").attr("dy",".9em"),M.select(".nv-hoverValue .nv-yValue").text(d(r.y()(h[l[0]],l[0]))))}}function v(){function t(t,e){for(var n=Math.abs(r.x()(t[0],0)-e),i=0,a=0;a<t.length;a++)Math.abs(r.x()(t[a],a)-e)<n&&(n=Math.abs(r.x()(t[a],a)-e),i=a);return i}if(!u){var n=d3.mouse(this)[0]-a.left;l=[t(h,Math.round(e.invert(n)))],m()}}var y=d3.select(this),b=(s||parseInt(y.style("width"))||960)-a.left-a.right,x=(o||parseInt(y.style("height"))||400)-a.top-a.bottom;if(t.update=function(){t(n)},t.container=this,!h||!h.length){var w=y.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+b/2).attr("y",a.top+x/2).text(function(t){return t}),t}y.selectAll(".nv-noData").remove();var k=r.y()(h[h.length-1],h.length-1);e=r.xScale(),i=r.yScale();var _=y.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),C=_.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),D=C.append("g"),M=_.select("g");D.append("g").attr("class","nv-sparklineWrap"),D.append("g").attr("class","nv-valueWrap"),D.append("g").attr("class","nv-hoverArea"),_.attr("transform","translate("+a.left+","+a.top+")");var S=M.select(".nv-sparklineWrap");r.width(b).height(x),S.call(r);var P=M.select(".nv-valueWrap"),A=P.selectAll(".nv-currentValue").data([k]);A.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),A.attr("x",b+(f?a.right:0)).attr("y",p?function(t){return i(t)}:0).style("fill",r.color()(h[h.length-1],h.length-1)).text(d(k)),D.select(".nv-hoverArea").append("rect").on("mousemove",v).on("click",function(){u=!u}).on("mouseout",function(){l=[],m()}),M.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-a.left+","+-a.top+")"}).attr("width",b+a.left+a.right).attr("height",x+a.top)}),t}var e,i,r=n.models.sparkline(),a={top:15,right:100,bottom:10,left:50},s=null,o=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),h=!0,p=!0,f=!1,g="No Data Available.";return t.sparkline=r,d3.rebind(t,r,"x","y","xScale","yScale","color"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.xTickFormat=function(e){return arguments.length?(c=e,t):c},t.yTickFormat=function(e){return arguments.length?(d=e,t):d},t.showValue=function(e){return arguments.length?(h=e,t):h},t.alignValue=function(e){return arguments.length?(p=e,t):p},t.rightAlignValue=function(e){return arguments.length?(f=e,t):f},t.noData=function(e){return arguments.length?(g=e,t):g},t},n.models.stackedArea=function(){"use strict";function t(n){return n.each(function(n){var d=a-r.left-r.right,y=s-r.top-r.bottom,b=d3.select(this);e=m.xScale(),i=m.yScale();var x=n;n.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var w=n.filter(function(t){return!t.disabled});n=d3.layout.stack().order(p).offset(h).values(function(t){return t.values}).x(u).y(c).out(function(t,e,n){var i=0===c(t)?0:n;t.display={y:i,y0:e}})(w);var k=b.selectAll("g.nv-wrap.nv-stackedarea").data([n]),_=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=_.append("defs"),D=_.append("g"),M=k.select("g");D.append("g").attr("class","nv-areaWrap"),D.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+r.left+","+r.top+")"),m.width(d).height(y).x(u).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(n.map(function(t){return t.color||o(t,t.seriesIndex)}));var S=M.select(".nv-scatterWrap").datum(n);S.call(m),C.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),k.select("#nv-edge-clip-"+l+" rect").attr("width",d).attr("height",y),M.attr("clip-path",g?"url(#nv-edge-clip-"+l+")":"");var P=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y+t.display.y0)}).interpolate(f),A=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y0)}),E=M.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});E.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t){return A(t.values,t.seriesIndex)}).on("mouseover",function(t){d3.select(this).classed("hover",!0),v.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t){d3.select(this).classed("hover",!1),v.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t){d3.select(this).classed("hover",!1),v.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),E.exit().remove(),E.style("fill",function(t){return t.color||o(t,t.seriesIndex)}).style("stroke",function(t){return t.color||o(t,t.seriesIndex)}),E.transition().attr("d",function(t,e){return P(t.values,e)}),m.dispatch.on("elementMouseover.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,i,r=t.length,a=t[0].length,s=1/r,o=[];for(n=0;a>n;++n){for(e=0,i=0;e<x.length;e++)i+=c(x[e].values[n]);if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;a>n;++n)o[n]=0;return o}}),t}var e,i,r={top:0,right:0,bottom:0,left:0},a=960,s=500,o=n.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=function(t){return t.x},c=function(t){return t.y},d="stack",h="zero",p="default",f="linear",g=!1,m=n.models.scatter(),v=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return m.size(2.2).sizeDomain([2.2,2.2]),m.dispatch.on("elementClick.area",function(t){v.areaClick(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],v.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){v.tooltipHide(t)}),t.dispatch=v,t.scatter=m,d3.rebind(t,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(u=d3.functor(e),t):u},t.y=function(e){return arguments.length?(c=d3.functor(e),t):c},t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(s=e,t):s},t.clipEdge=function(e){return arguments.length?(g=e,t):g},t.color=function(e){return arguments.length?(o=n.utils.getColor(e),t):o},t.offset=function(e){return arguments.length?(h=e,t):h},t.order=function(e){return arguments.length?(p=e,t):p},t.style=function(e){if(!arguments.length)return d;switch(d=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}return t},t.interpolate=function(e){return arguments.length?(f=e,t):f},t},n.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var T=d3.select(this),N=this,B=(d||parseInt(T.style("width"))||960)-c.left-c.right,F=(h||parseInt(T.style("height"))||400)-c.top-c.bottom;if(t.update=function(){T.transition().duration(E).call(t)},t.container=this,_.disabled=w.map(function(t){return!!t.disabled}),!C){var z;C={};for(z in _)C[z]=_[z]instanceof Array?_[z].slice(0):_[z]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var V=T.selectAll(".nv-noData").data([D]);return V.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",c.left+B/2).attr("y",c.top+F/2).text(function(t){return t}),t}T.selectAll(".nv-noData").remove(),e=r.xScale(),i=r.yScale();var L=T.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),R=L.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),W=L.select("g");if(R.append("rect").style("opacity",0),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-stackedWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),R.append("g").attr("class","nv-interactive"),W.select("rect").attr("width",B).attr("height",F),g){var Y=f?B-S:B;o.width(Y),W.select(".nv-legendWrap").datum(w).call(o),c.top!=o.height()&&(c.top=o.height(),F=(h||parseInt(T.style("height"))||400)-c.top-c.bottom),W.select(".nv-legendWrap").attr("transform","translate("+(B-Y)+","+-c.top+")")}if(f){var O=[{key:A.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=r.style(),style:"stack"},{key:A.stream||"Stream",metaKey:"Stream",disabled:"stream"!=r.style(),style:"stream"},{key:A.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=r.style(),style:"expand"},{key:A.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=r.style(),style:"stack_percent"}];S=P.length/3*260,O=O.filter(function(t){return-1!==P.indexOf(t.metaKey)}),l.width(S).color(["#444","#444","#444"]),W.select(".nv-controlsWrap").datum(O).call(l),c.top!=Math.max(l.height(),o.height())&&(c.top=Math.max(l.height(),o.height()),F=(h||parseInt(T.style("height"))||400)-c.top-c.bottom),W.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}L.attr("transform","translate("+c.left+","+c.top+")"),y&&W.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)"),b&&(u.width(B).height(F).margin({left:c.left,top:c.top}).svgContainer(T).xScale(e),L.select(".nv-interactive").call(u)),r.width(B).height(F);var H=W.select(".nv-stackedWrap").datum(w);H.transition().call(r),m&&(a.scale(e).ticks(B/100).tickSize(-F,0),W.select(".nv-x.nv-axis").attr("transform","translate(0,"+F+")"),W.select(".nv-x.nv-axis").transition().duration(0).call(a)),v&&(s.scale(i).ticks("wiggle"==r.offset()?0:F/36).tickSize(-B,0).setTickFormat("expand"==r.style()||"stack_percent"==r.style()?d3.format("%"):k),W.select(".nv-y.nv-axis").transition().duration(0).call(s)),r.dispatch.on("areaClick.toggle",function(e){w.forEach(1===w.filter(function(t){return!t.disabled}).length?function(t){t.disabled=!1}:function(t,n){t.disabled=n!=e.seriesIndex}),_.disabled=w.map(function(t){return!!t.disabled}),M.stateChange(_),t.update()}),o.dispatch.on("stateChange",function(e){_.disabled=e.disabled,M.stateChange(_),t.update()}),l.dispatch.on("legendClick",function(e){e.disabled&&(O=O.map(function(t){return t.disabled=!0,t}),e.disabled=!1,r.style(e.style),_.style=r.style(),M.stateChange(_),t.update())}),u.dispatch.on("elementMousemove",function(e){r.clearHighlights();var i,o,l,d=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,s){o=n.interactiveBisect(a.values,e.pointXValue,t.x()),r.highlightPoint(s,o,!0);var u=a.values[o];if("undefined"!=typeof u){"undefined"==typeof i&&(i=u),"undefined"==typeof l&&(l=t.xScale()(t.x()(u,o)));var c="expand"==r.style()?u.display.y:t.y()(u,o);d.push({key:a.key,value:c,color:p(a,a.seriesIndex),stackedValue:u.display})}}),d.reverse(),d.length>2){var h=t.yScale().invert(e.mouseY),f=null;d.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);return h>=n&&i+n>=h?void(f=e):void 0}),null!=f&&(d[f].highlight=!0)}var g=a.tickFormat()(t.x()(i,o)),m="expand"==r.style()?function(t){return d3.format(".1%")(t)}:function(t){return s.tickFormat()(t)};u.tooltip.position({left:l+c.left,top:e.mouseY+c.top}).chartContainer(N.parentNode).enabled(x).valueFormatter(m).data({value:g,series:d})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(){M.tooltipHide(),r.clearHighlights()}),M.on("tooltipShow",function(t){x&&I(t,N.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&w.length===e.disabled.length&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),"undefined"!=typeof e.style&&r.style(e.style),t.update()})}),t}var e,i,r=n.models.stackedArea(),a=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),u=n.interactiveGuideline(),c={top:30,right:25,bottom:50,left:60},d=null,h=null,p=n.utils.defaultColor(),f=!0,g=!0,m=!0,v=!0,y=!1,b=!1,x=!0,w=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k=d3.format(",.2f"),_={style:r.style()},C=null,D="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=250,P=["Stacked","Stream","Expanded"],A={},E=250;a.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),l.updateState(!1);var I=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=a.tickFormat()(r.x()(e.point,e.pointIndex)),c=s.tickFormat()(r.y()(e.point,e.pointIndex)),d=w(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return r.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],M.tooltipShow(t)}),r.dispatch.on("tooltipHide",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){x&&n.tooltip.cleanup()}),t.dispatch=M,t.stacked=r,t.legend=o,t.controls=l,t.xAxis=a,t.yAxis=s,t.interactiveLayer=u,d3.rebind(t,r,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),o.color(p),r.color(p),t):p},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,s.orient(e?"right":"left"),t):y},t.useInteractiveGuideline=function(e){return arguments.length?(b=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):b},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(_=e,t):_},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(D=e,t):D},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t.controlsData=function(e){return arguments.length?(P=e,t):P},t.controlLabels=function(e){return arguments.length?"object"!=typeof e?A:(A=e,t):A},s.setTickFormat=s.tickFormat,s.tickFormat=function(t){return arguments.length?(k=t,s):k},t}}()},{}],23:[function(t){var e=t("jquery");!function(t,e){function n(e,n){var r,a,s,o=e.nodeName.toLowerCase();return"area"===o?(r=e.parentNode,a=r.name,e.href&&a&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+a+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,a=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,a=t(this[0]);a.length&&a[0]!==document;){if(i=a.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(a,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var a="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?o["inner"+i].call(this):this.each(function(){t(this).css(s,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,a=t.ui[e].prototype;for(r in i)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)}})}(e)},{jquery:"jquery"}],24:[function(t){var e=t("jquery");t("./core"),function(t,e){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(a.inline?e.parent()[0]:a.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function r(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var a,s="datepicker";t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return r(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,r,a;i=e.nodeName.toLowerCase(),r="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),a=this._newInst(t(e),r),a.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,a):r&&this._inlineDatepicker(e,a)},_newInst:function(e,n){var r=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,s,n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,r,a,s=this._get(n,"appendText"),o=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[o?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&e.focus(this._showDatepicker),("button"===i||"both"===i)&&(r=this._get(n,"buttonText"),a=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):t("<button type='button'></button>").addClass(this._triggerClass).html(a?t("<img/>").attr({src:a,alt:r,title:r}):r)),e[o?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,a=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(n=0,i=0,r=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},a.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),t.input.attr("size",this._formatDate(t,a).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,a,o){var l,u,c,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],s,p)),r(p.settings,a||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+d,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(e){var n,i=t(e),r=t.data(e,s);i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,s),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,i,r=t(e),a=t.data(e,s);r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t
}))},_disableDatepicker:function(e){var n,i,r=t(e),a=t.data(e,s);r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,s)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,a){var s,o,l,u,c=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):c?"all"===i?t.extend({},c.settings):this._get(c,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=a),void(c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),r(c.settings,s),null!==l&&s.dateFormat!==e&&s.minDate===e&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&s.dateFormat!==e&&s.maxDate===e&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(t(n),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,r,a=t.datepicker._getInst(e.target),s=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return r=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",a.dpDiv),r[0]&&t.datepicker._selectDay(e.target,a.selectedMonth,a.selectedYear,r[0]),n=t.datepicker._get(a,"onSelect"),n?(i=t.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[i,a])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(a,"stepBigMonths"):-t.datepicker._get(a,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(a,"stepBigMonths"):+t.datepicker._get(a,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,r=t.datepicker._getInst(e.target);return t.datepicker._get(r,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,i,a,s,o,l,u;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),i=t.datepicker._get(n,"beforeShow"),a=i?i.apply(e,[e,n]):{},a!==!1&&(r(n.settings,a),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),o=t.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),u=t.datepicker._get(n,"duration"),n.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),u):n.dpDiv[l||"show"](l?u:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,a=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(e),r=i[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var r=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?r-s:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+o?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+a>u&&u>a?Math.abs(a+o):0),n},_findPos:function(e){for(var n,i=this._getInst(e),r=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,r,a,o=this._curInst;!o||e&&o!==t.data(e,s)||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),r=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[n]||t.effects[n])?o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),i,r):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var r=t(e),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,n+("M"===i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(e){var n,i=t(e),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var r=t(e),a=this._getInst(r[0]);a["selected"+("M"===i?"Month":"Year")]=a["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(e,n,i,r){var a,s=t(e);t(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(a=this._getInst(s[0]),a.selectedDay=a.currentDay=t("a",r).html(),a.selectedMonth=a.currentMonth=n,a.selectedYear=a.currentYear=i,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,r=t(e),a=this._getInst(r[0]);n=null!=n?n:this._formatDate(a),a.input&&a.input.val(n),this._updateAlternate(a),i=this._get(a,"onSelect"),i?i.apply(a.input?a.input[0]:null,[n,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,r,a=this._get(e,"altField");a&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),r=this.formatDate(n,i,this._getFormatConfig(e)),t(a).each(function(){t(this).val(r)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var r,a,s,o,l=0,u=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,x=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},w=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,r=new RegExp("^\\d{1,"+i+"}"),a=n.substring(l).match(r);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(e,i,r){var a=-1,s=t.map(x(e)?r:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var i=e[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(a=e[0],l+=i.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+l},_=function(){if(n.charAt(l)!==e.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<e.length;r++)if(b)"'"!==e.charAt(r)||x("'")?_():b=!1;else switch(e.charAt(r)){case"d":v=w("d");break;case"D":k("D",d,h);break;case"o":y=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":o=new Date(w("@")),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"!":o=new Date((w("!")-this._ticksTo1970)/1e4),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"'":x("'")?_():b=!0;break;default:_()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),y>-1)for(m=1,v=y;;){if(a=this._getDaysInMonth(g,m-1),a>=v)break;m++,v-=a}if(o=this._daylightSavingAdjust(new Date(g,m-1,v)),o.getFullYear()!==g||o.getMonth()+1!==m||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":d+=u("d",e.getDate(),2);break;case"D":d+=c("D",e.getDay(),r,a);break;case"o":d+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",e.getMonth()+1,2);break;case"M":d+=c("M",e.getMonth(),s,o);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=!1,r=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||r("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,n){return t.settings[n]!==e?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),a=r,s=this._getFormatConfig(t);try{a=this.parseDate(n,i,s)||r}catch(o){i=e?"":i}t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),t.currentDay=i?a.getDate():0,t.currentMonth=i?a.getMonth():0,t.currentYear=i?a.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var r=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},a=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,a=r.getFullYear(),s=r.getMonth(),o=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":o+=parseInt(u[1],10);break;case"w":case"W":o+=7*parseInt(u[1],10);break;case"m":case"M":s+=parseInt(u[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,s));break;case"y":case"Y":a+=parseInt(u[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(a,s))}u=l.exec(n)}return new Date(a,s,o)},s=null==n||""===n?i:"string"==typeof n?a(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return s=s&&"Invalid Date"===s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,a=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),r===t.selectedMonth&&a===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,a,s,o,l,u,c,d,h,p,f,g,m,v,y,b,x,w,k,_,C,D,M,S,P,A,E,I,T,N,B,F,z,V,L,R,W=new Date,Y=this._daylightSavingAdjust(new Date(W.getFullYear(),W.getMonth(),W.getDate())),O=this._get(t,"isRTL"),H=this._get(t,"showButtonPanel"),j=this._get(t,"hideIfNoPrevNext"),$=this._get(t,"navigationAsDateFormat"),X=this._getNumberOfMonths(t),U=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),G=1!==X[0]||1!==X[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-U,te=t.drawYear;if(0>Q&&(Q+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-X[0]*X[1]+1,J.getDate())),e=Z&&Z>e?Z:e;this._daylightSavingAdjust(new Date(te,Q,1))>e;)Q--,0>Q&&(Q=11,te--);for(t.drawMonth=Q,t.drawYear=te,n=this._get(t,"prevText"),n=$?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Q-q,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,te,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(O?"e":"w")+"'>"+n+"</span></a>":j?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(O?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=$?this.formatDate(r,this._daylightSavingAdjust(new Date(te,Q+q,1)),this._getFormatConfig(t)):r,a=this._canAdjustMonth(t,1,te,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(O?"w":"e")+"'>"+r+"</span></a>":j?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(O?"w":"e")+"'>"+r+"</span></a>",s=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?K:Y,s=$?this.formatDate(s,o,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(O?l:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(O?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),x="",k=0;k<X[0];k++){for(_="",this.maxRows=4,C=0;C<X[1];C++){if(D=this._daylightSavingAdjust(new Date(te,Q,t.selectedDay)),M=" ui-corner-all",S="",G){if(S+="<div class='ui-datepicker-group",X[1]>1)switch(C){case 0:S+=" ui-datepicker-group-first",M=" ui-corner-"+(O?"right":"left");break;case X[1]-1:S+=" ui-datepicker-group-last",M=" ui-corner-"+(O?"left":"right");break;default:S+=" ui-datepicker-group-middle",M=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===k?O?a:i:"")+(/all|right/.test(M)&&0===k?O?i:a:"")+this._generateMonthYearHeader(t,Q,te,Z,J,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",P=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)A=(w+c)%7,P+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[A]+"'>"+p[A]+"</span></th>";for(S+=P+"</tr></thead><tbody>",E=this._getDaysInMonth(te,Q),te===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,E)),I=(this._getFirstDayOfMonth(te,Q)-c+7)%7,T=Math.ceil((I+E)/7),N=G&&this.maxRows>T?this.maxRows:T,this.maxRows=N,B=this._daylightSavingAdjust(new Date(te,Q,1-I)),F=0;N>F;F++){for(S+="<tr>",z=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(B)+"</td>":"",w=0;7>w;w++)V=m?m.apply(t.input?t.input[0]:null,[B]):[!0,""],L=B.getMonth()!==Q,R=L&&!y||!V[0]||Z&&Z>B||J&&B>J,z+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(B.getTime()===D.getTime()&&Q===t.selectedMonth&&t._keyEvent||b.getTime()===B.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+V[1]+(B.getTime()===K.getTime()?" "+this._currentClass:"")+(B.getTime()===Y.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!V[2]?"":" title='"+V[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+B.getMonth()+"' data-year='"+B.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+B.getDate()+"</span>":"<a class='ui-state-default"+(B.getTime()===Y.getTime()?" ui-state-highlight":"")+(B.getTime()===K.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+B.getDate()+"</a>")+"</td>",B.setDate(B.getDate()+1),B=this._daylightSavingAdjust(B);S+=z+"</tr>"}Q++,Q>11&&(Q=0,te++),S+="</tbody></table>"+(G?"</div>"+(X[0]>0&&C===X[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),_+=S}x+=_}return x+=u,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,i,r,a,s,o){var l,u,c,d,h,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",x="";if(a||!m)x+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=r&&r.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=i.getMonth())&&(!u||c<=r.getMonth())&&(x+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");x+="</select>"}if(y||(b+=x+(!a&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(d[0]),g=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=r?Math.min(g,r.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!a&&m&&v?"":"&#xa0;")+x),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),r=t.drawMonth+("M"===n?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,a)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&n>e?n:e;return i&&r>i?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(n,i+(0>e?e:r[0]*r[1]),1));return 0>e&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),a=this._getMinMaxDate(t,"max"),s=null,o=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!r||e.getTime()>=r.getTime())&&(!a||e.getTime()<=a.getTime())&&(!s||e.getFullYear()>=s)&&(!o||e.getFullYear()<=o)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(e)},{"./core":23,jquery:"jquery"}],25:[function(t){var e=t("jquery");t("./core"),t("./mouse"),t("./widget"),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this
},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;return r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,r,a,s=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,a=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?a-this.offset.click.left>=n[0]||a-this.offset.click.left>n[2]?a:a-this.offset.click.left>=n[0]?a-s.grid[0]:a+s.grid[0]:a)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),r=i.options,a=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,a))})},stop:function(e,n){var i=t(this).data("ui-draggable"),r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("ui-draggable"),r=this;t.each(i.sortables,function(){var a=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,r,a,s,o,l,u,c,d,h,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)o=p.snapElements[d].left,l=o+p.snapElements[d].width,u=p.snapElements[d].top,c=u+p.snapElements[d].height,o-g>v||m>l+g||u-g>b||y>c+g||!t.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(u-b)<=g,r=Math.abs(c-y)<=g,a=Math.abs(o-v)<=g,s=Math.abs(l-m)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||r||a||s,"outer"!==f.snapMode&&(i=Math.abs(u-y)<=g,r=Math.abs(c-b)<=g,a=Math.abs(o-m)<=g,s=Math.abs(l-v)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(i||r||a||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=i||r||a||s||h)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(e)},{"./core":23,"./mouse":26,"./widget":27,jquery:"jquery"}],26:[function(t){var e=t("jquery");t("./widget"),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,a="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!a&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e)},{"./widget":27,jquery:"jquery"}],27:[function(t){var e=t("jquery");!function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(a){}r(e)},t.widget=function(e,n,i){var r,a,s,o,l={},u=e.split(".")[0];e=e.split(".")[1],r=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},a=t[u][e],s=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,a,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),o=new n,o.options=t.widget.extend({},o.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,a=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=a,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(o,{widgetEventPrefix:a?o.widgetEventPrefix||e:e},l,{constructor:s,namespace:u,widgetName:e,widgetFullName:r}),a?(t.each(a._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete a._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var r,a,s=i.call(arguments,1),o=0,l=s.length;l>o;o++)for(r in s[o])a=s[o][r],s[o].hasOwnProperty(r)&&a!==e&&(n[r]=t.isPlainObject(a)?t.isPlainObject(n[r])?t.widget.extend({},n[r],a):t.widget.extend({},a):a);return n},t.widget.bridge=function(n,r){var a=r.prototype.widgetFullName||n;t.fn[n]=function(s){var o="string"==typeof s,l=i.call(arguments,1),u=this;return s=!o&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(o?function(){var i,r=t.data(this,a);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,a);e?e.option(s||{})._init():t.data(this,a,new r(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,a,s,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},r=n.split("."),n=r.shift(),r.length){for(a=o[n]=t.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)a[r[s]]=a[r[s]]||{},a=a[r[s]];if(n=r.pop(),1===arguments.length)return a[n]===e?null:a[n];a[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var r,a=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,s){function o(){return e||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?a[s]:s).apply(a,arguments):void 0}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+a.eventNamespace,c=l[2];c?r.delegate(c,u,o):n.bind(u,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,a,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,a){"string"==typeof r&&(r={effect:r});var s,o=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=a,r.delay&&i.delay(r.delay),s&&t.effects&&t.effects.effect[o]?i[e](r):o!==e&&i[o]?i[o](r.duration,r.easing,a):i.queue(function(n){t(this)[e](),a&&a.call(i[0]),n()})}})}(e)},{jquery:"jquery"}],28:[function(t,e){var n=t("backbone"),i=t("underscore"),r=t("jquery"),a=t("../models/generic-filter-model"),s=t("../models/org-role-filter-model"),o=t("../models/years-filter-model");e.exports=n.Collection.extend({url:"/rest/filters",_loaded:null,_allDeferreds:[],orgCollection:null,orgGroupCollection:null,orgTypeCollection:null,initialize:function(){this.on("add",this._cleanUpAfterAdd),this.load()},load:function(){var t=this;return this._loaded||(this._loaded=new r.Deferred,this._allDeferreds.push(this._createOrgFilters()),this.fetch({remove:!1}).then(function(){r.when.apply(r,t._allDeferreds).done(t._loaded.resolve).fail(t._loaded.reject)}).fail(t._loaded.reject)),this._loaded},_cleanUpAfterAdd:function(t){var e=this;t.get("ui")||e.remove(t)},parse:function(t){return t=i.filter(t,function(t){return t.ui}),t=i.filter(t,function(t){return"/rest/filters/org-groups"!==t.endpoint&&"/rest/filters/org-types"!==t.endpoint&&"/rest/filters/org-roles"!==t.endpoint&&"/rest/filters/orgs"!==t.endpoint})},model:function(t,e){var i=null,r=e.collection;switch(t.name){case"Programs":case"Sectors":r._allDeferreds.push(r._goOneDeeper(r,t)),i=new n.Model({ui:!1});break;case"Dates":i=new o(t);break;default:i=new a(t),r._allDeferreds.push(i.getTree())}return i},_goOneDeeper:function(t,e){var s=e.endpoint,o=r.Deferred(),l=[],u=new n.Collection;return u.url=s,u.fetch().then(function(n){i.each(n,function(n){var i=new a({url:s+"/"+n.id,name:n.name,ui:!0,group:e.name});t.add(i),l.push(i.getTree())}),r.when.apply(r,l).then(function(){o.resolve()}),i.isEmpty(n)&&console.warn("Filters API returned empty",n)}),o},_createOrgFilters:function(){var t=this;return this._fetchOrgCollections().then(function(){t.makeTreeHelper(t.orgGroupCollection,t.orgCollection,"orgIds","children"),t.orgRolesCollection.each(function(e){var n=e.toJSON();if("Donor"===e.get("name")?(t.makeTreeHelper(t.orgTypeCollection,t.orgGroupCollection,"groupIds","children"),i.extend(n,{ui:!0,group:"Donor"===e.get("name")?"Donor":"Role",data:t.orgTypeCollection.toJSON()}),n.data=t._filterDonorOrgs(n.data,e.id)):(i.extend(n,{ui:!0,group:"Donor"===e.get("name")?"Donor":"Role",data:t.orgGroupCollection.toJSON()}),n.data=t._filterOrgs(n.data,e.id)),n.data.length>0){var r=e.get("name")+" Id";n.data=t._setFilterId(n.data,r),t.add(new s(n))}})})},_setFilterId:function(t,e){var n=this;return i.each(t,function(t){t.rolesIds&&(t.filterId=e),t.children&&(t.children=n._setFilterId(t.children,e))}),t},_filterOrgs:function(t,e){return t=i.filter(t,function(t){return t.children=i.filter(t.children,function(t){return t.rolesIds.indexOf(e)>-1}),t.isSelectable=!1,t.children.length>0})},_filterDonorOrgs:function(t,e){var n=this;return t=i.filter(t,function(t){return t.children=n._filterOrgs(t.children,e),t.isSelectable=!1,t.children.length>0})},_fetchOrgCollections:function(){var t=[];return this.orgCollection=new n.Collection,this.orgCollection.url="/rest/filters/orgs",t.push(this.orgCollection.fetch()),this.orgGroupCollection=new n.Collection,this.orgGroupCollection.url="/rest/filters/org-groups",t.push(this.orgGroupCollection.fetch()),this.orgTypeCollection=new n.Collection,this.orgTypeCollection.url="/rest/filters/org-types",t.push(this.orgTypeCollection.fetch()),this.orgRolesCollection=new n.Collection,this.orgRolesCollection.url="/rest/filters/org-roles",t.push(this.orgRolesCollection.fetch({})),r.when.apply(r,t)},joinHelper:function(t,e,n,r){t.each(function(t){var a=t.get(n),s=e.filter(function(t){return i.indexOf(a,t.get("id"))>=0});t.set(r,s)})},makeTreeHelper:function(t,e,n,r){t.each(function(t){var a=t.get(n),s=[];i.each(a,function(t){0!==t&&e.get({id:t})&&s.push(e.get({id:t}).toJSON())}),t.set(r,s)})}})},{"../models/generic-filter-model":32,"../models/org-role-filter-model":33,"../models/years-filter-model":34,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],29:[function(){!function(t){function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error("(Link) '"+e+"' can't match '"+n+"'.'")}function n(n){if(void 0===n&&(n={}),"object"!=typeof n)throw Error("(Format) 'format' option must be an object.");var i={};t(r).each(function(t,e){if(void 0===n[e])i[e]=a[t];else{if(typeof n[e]!=typeof a[t])throw Error("(Format) 'format."+e+"' must be a "+typeof a[t]+".");if("decimals"===e&&(0>n[e]||7<n[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");i[e]=n[e]}}),e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),this.r=i}function i(e,n){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new i.prototype.p(e.target||function(){},e.method,e.format||{},n)}var r="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),a=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];n.prototype.a=function(t){return this.r[t]},n.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var n=this.a("decimals"),i="",r="",a="",s="";return 0===parseFloat(t.toFixed(n))&&(t="0"),0>t&&(i=this.a("negative"),r=this.a("negativeBefore")),t=Math.abs(t).toFixed(n).toString(),t=t.split("."),this.a("thousand")?(a=e(t[0]).match(/.{1,3}/g),a=e(a.join(e(this.a("thousand"))))):a=t[0],this.a("mark")&&1<t.length&&(s=this.a("mark")+t[1]),this.a("to")(r+this.a("prefix")+i+a+s+this.a("postfix"))},n.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var n;return null===t||void 0===t?!1:(t=this.a("from")(t),t=t.toString(),n=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==n?(t=n,n="-"):n="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(n="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(n+t)),isNaN(t)?!1:t)},i.prototype.K=function(e,n){this.method=n||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},i.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},i.prototype.G=function(e){function n(t,e){return[e?null:t,e?t:null]}var i=this;this.method="val",this.target=e.on("change",function(e){i.B.val(n(t(e.target).val(),i.t),{link:i,set:!0})})},i.prototype.p=function(e,n,i,r){if(this.g=i,this.update=!r,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,n);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!n){if(e.is("input, select, textarea"))return void this.G(e);n="html"}if("function"==typeof n||"string"==typeof n&&e[n])return this.method=n,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},i.prototype.write=function(t,e,n,i){this.update&&!1===i||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,e,n):this.target[this.method](t,e,n))},i.prototype.q=function(e){this.g=new n(t.extend({},e,this.g instanceof n?this.g.r:this.g))},i.prototype.J=function(t){this.B=t},i.prototype.I=function(t){this.t=t},i.prototype.format=function(t){return this.g.L(t)},i.prototype.A=function(t){return this.g.w(t)},i.prototype.p.prototype=i.prototype,t.Link=i}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(e){return t.isArray(e)?e:[e]}function i(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function r(t,e){return 100*e/(t[1]-t[0])}function a(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var n,i,a,s=1;e>=t.d[s];)s++;return n=t.d[s-1],i=t.d[s],a=t.c[s-1],n=[n,i],a+r(n,0>n[0]?e+Math.abs(n[0]):e-n[0])/(100/(t.c[s]-a))}function s(t,e){if(e>=100)return t.d.slice(-1)[0];for(var n,i,r,a=1;e>=t.c[a];)a++;return n=t.d[a-1],i=t.d[a],r=t.c[a-1],n=[n,i],100/(t.c[a]-r)*(e-r)*(n[1]-n[0])/100+n[0]}function o(t,e){for(var n,i=1;(t.dir?100-e:e)>=t.c[i];)i++;return t.m?(n=t.c[i-1],i=t.c[i],e-n>(i-n)/2?i:n):(t.h[i-1]?(n=t.h[i-1],i=t.c[i-1]+Math.round((e-t.c[i-1])/n)*n):i=e,i)}function l(t,n){if(!e(n))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=n}function u(n,i){if("object"!=typeof i||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");
t.each(i,function(i,r){var a;if("number"==typeof r&&(r=[r]),!t.isArray(r))throw Error("noUiSlider: 'range' contains invalid value.");if(a="min"===i?0:"max"===i?100:parseFloat(i),!e(a)||!e(r[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.c.push(a),n.d.push(r[0]),a?n.h.push(isNaN(r[1])?!1:r[1]):isNaN(r[1])||(n.h[0]=r[1])}),t.each(n.h,function(t,e){return e?void(n.h[t]=r([n.d[t],n.d[t+1]],e)/(100/(n.c[t+1]-n.c[t]))):!0})}function c(e,n){if("number"==typeof n&&(n=[n]),!t.isArray(n)||!n.length||2<n.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=n.length,e.start=n}function d(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function h(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function p(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function f(t,n){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=r(t.d,n),!e(n))throw Error("noUiSlider: 'margin' option must be numeric.")}function g(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function m(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||n,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:n}}function v(e,n,i){e.o=[n.lower,n.upper],e.g=n.format,t.each(e.o,function(e,r){if(!t.isArray(r))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(r,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(i),this.q(n.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,n){var i,r={c:[],d:[],h:[!1],margin:0};return i={step:{e:!1,f:l},start:{e:!0,f:c},connect:{e:!0,f:h},direction:{e:!0,f:g},range:{e:!0,f:u},snap:{e:!1,f:d},orientation:{e:!1,f:p},margin:{e:!1,f:f},behaviour:{e:!0,f:m},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(i,function(t,i){if(void 0===e[t]){if(i.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}i.f(r,e[t],n)}),r.style=r.k?"top":"left",r}function b(e,n){var i=t("<div><div/></div>").addClass(T[2]),r=["-lower","-upper"];return e.dir&&r.reverse(),i.children().addClass(T[3]+" "+T[3]+r[n]),i}function x(e,n){return n.j&&(n=new t.Link({target:t(n.j).clone().appendTo(e),method:n.method,format:n.g},!0)),n}function w(e,n){var i,r=[];for(i=0;i<e.b;i++){var a=r,s=i,o=e.o[i],l=n[i].children(),u=e.g,c=void 0,d=[],c=new t.Link({},!0);for(c.q(u),d.push(c),c=0;c<o.length;c++)d.push(x(l,o[c]));a[s]=d}return r}function k(t,e,n){switch(t){case 1:e.addClass(T[7]),n[0].addClass(T[6]);break;case 3:n[1].addClass(T[6]);case 2:n[0].addClass(T[7]);case 0:e.addClass(T[6])}}function _(t,e){var n,i=[];for(n=0;n<t.b;n++)i.push(b(t,n).appendTo(e));return i}function C(e,n){return n.addClass([T[0],T[8+e.dir],T[4+e.k]].join(" ")),t("<div/>").appendTo(n).addClass(T[1])}function D(e,r,l){function u(){return b[["width","height"][r.k]]()}function c(t){var e,n=[M.val()];for(e=0;e<t.length;e++)M.trigger(t[e],n)}function d(e,n,i){var a=e[0]!==D[0][0]?1:0,l=S[0]+r.margin,u=S[1]-r.margin;return i&&1<D.length&&(n=a?Math.max(n,l):Math.min(n,u)),100>n&&(n=o(r,n)),n=Math.max(Math.min(parseFloat(n.toFixed(7)),100),0),n===S[a]?1===D.length?!1:n===l||n===u?0:!1:(e.css(r.style,n+"%"),e.is(":first-child")&&e.toggleClass(T[17],n>50),S[a]=n,r.dir&&(n=100-n),t(x[a]).each(function(){this.write(s(r,n),e.children(),M)}),!0)}function h(t,e,n){n||i(M,T[14]),d(t,e,!1),c(["slide","set","change"])}function p(t,e,n,i){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=M.attr("disabled");if(M.hasClass(T[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var a,s,e=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),u=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(a=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY),(o||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),a=t.clientX+window.pageXOffset,s=t.clientY+window.pageYOffset),u.C=[a,s],u.cursor=o,t=u,t.l=t.C[r.k],n(t,i)})}function f(t,e){var n,i=e.b||D,r=!1,r=100*(t.l-e.start)/u(),a=i[0][0]!==D[0][0]?1:0,s=e.D;n=r+s[0],r+=s[1],1<i.length?(0>n&&(r+=Math.abs(n)),r>100&&(n-=r-100),n=[Math.max(Math.min(n,100),0),Math.max(Math.min(r,100),0)]):n=[n,r],r=d(i[0],n[a],1===i.length),1<i.length&&(r=d(i[1],n[a?0:1],!1)||r),r&&c(["slide"])}function g(e){t("."+T[15]).removeClass(T[15]),e.cursor&&t("body").css("cursor","").off(".nui"),A.off(".nui"),M.removeClass(T[12]),c(["set","change"])}function m(e,n){1===n.b.length&&n.b[0].children().addClass(T[15]),e.stopPropagation(),p(I.move,A,f,{start:e.l,b:n.b,D:[S[0],S[D.length-1]]}),p(I.end,A,g,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<D.length&&M.addClass(T[12]),t("body").on("selectstart.nui",!1))}function v(e){var n=e.l,i=0;e.stopPropagation(),t.each(D,function(){i+=this.offset()[r.style]}),i=i/2>n||1===D.length?0:1,n-=b.offset()[r.style],n=100*n/u(),h(D[i],n,r.n.m),r.n.m&&m(e,{b:[D[i]]})}function y(t){var e=(t=t.l<b.offset()[r.style])?0:100;t=t?0:D.length-1,h(D[t],e,!1)}var b,x,D,M=t(e),S=[-1,-1];if(M.hasClass(T[0]))throw Error("Slider was already initialized.");b=C(r,M),D=_(r,b),x=w(r,D),k(r.i,M,D),function(t){var e;if(!t.fixed)for(e=0;e<D.length;e++)p(I.start,D[e].children(),m,{b:[D[e]]});t.s&&p(I.start,b,v,{b:D}),t.extend&&(M.addClass(T[16]),t.s&&p(I.start,M,y,{b:D})),t.v&&(e=b.find("."+T[7]).addClass(T[10]),t.fixed&&(e=e.add(b.children().not(e).children())),p(I.start,e,m,{b:D}))}(r.n),e.vSet=function(){var e,s,o,l,u,h,p=Array.prototype.slice.call(arguments,0),f=n(p[0]);for("object"==typeof p[1]?(e=p[1].set,s=p[1].link,o=p[1].update,l=p[1].animate):!0===p[1]&&(e=!0),r.dir&&1<r.b&&f.reverse(),l&&i(M,T[14]),p=1<D.length?3:1,1===f.length&&(p=1),u=0;p>u;u++)l=s||x[u%2][0],l=l.A(f[u%2]),!1!==l&&(l=a(r,l),r.dir&&(l=100-l),!0!==d(D[u%2],l,!0)&&t(x[u%2]).each(function(t){return t?void this.write(h,D[u%2].children(),M,o):(h=this.u,!0)}));return!0===e&&c(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<r.b;t++)e[t]=x[t][0].F;return 1===e.length?e[0]:r.dir?e.reverse():e},e.destroy=function(){return t.each(x,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(T.join(" ")).empty(),l},M.val(r.start)}function M(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){D(this,e,t)})}function S(e){return this.each(function(){var n=t(this).val(),i=this.destroy(),r=t.extend({},i,e);t(this).noUiSlider(r),i.start===r.start&&t(this).val(n)})}function P(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var A=t(document),E=t.fn.val,I=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},T="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.fn.val=function(){var e=arguments,n=t(this[0]);return arguments.length?this.each(function(){(t(this).hasClass(T[0])?P:E).apply(t(this),e)}):(n.hasClass(T[0])?P:E).call(n)},t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?S:M).call(this,t)}}(window.jQuery||window.Zepto)},{}],30:[function(t,e){function n(){this.initialize.apply(this,arguments)}var i=t("underscore"),r=t("backbone"),a=t("jquery");window.jQuery=window.$=r.$=a,t("jquery-ui/draggable");var s=t("./views/filters-view");i.extend(n.prototype,r.Events,{initialize:function(t){t=i.defaults(t,{draggable:!0}),i.has(t,"sync")&&(r.sync=t.sync),this.view=new s(t),this.loaded=this.view._loaded.promise(),this.listenTo(this.view,"all",function(){this.trigger.apply(this,arguments)})},setElement:function(){this.view.setElement(arguments)},showFilters:function(){this.view.showFilters()},getAllFilters:function(){return this.view.serialize({includeUnselected:!0,wholeModel:!0})},serializeToModels:function(){return this.view.serialize({wholeModel:!0})},serialize:function(){return this.view.serialize({})},deserialize:function(t,e){return this.view.deserialize(t,e)},reset:function(t){this.view.resetFilters(),t&&t.silent||this.view.applyFilters()}}),e.exports=n},{"./views/filters-view":38,backbone:"backbone",jquery:"jquery","jquery-ui/draggable":25,underscore:"underscore"}],31:[function(t,e){var n=t("backbone");e.exports=n.Model.extend({defaults:{name:"Filter Name",method:"GET",totalCount:375,activeCount:375,_loaded:!1},initialize:function(t){this.set("name",t.name),this.set("group",t.group||t.name),this.set("method",t.method),this.url=t.url||t.endpoint}})},{backbone:"backbone"}],32:[function(t,e){var n=t("underscore"),i=t("../models/base-filter-model"),r=t("../tree/tree-node-model");e.exports=i.extend({initialize:function(t){i.prototype.initialize.apply(this,[t]),this.getTree()},getTree:function(){var t=this,e=this.get("_loaded");return e||t.set("_loaded",this._createTree().then(function(){return t.get("tree")})),this.get("_loaded")},serialize:function(t){var e=this.get("tree");if(e){var n=e.serialize(t);return n}return{}},deserialize:function(t){var e=this,n=this.get("tree");if(t){if(!n)return console.warn("deserialize no tree found",e),!1;n.deserialize(t)}},reset:function(){var t=this.get("tree");t&&(t.set("selected",!0),t.set("selected",!1))},_createTree:function(){return this.url||(this.url=this.get("endpoint")),this.fetch({type:this.get("method"),data:"{}"}).fail(function(t,e,n){console.error("failed to get filter ",t,e,n)})},parse:function(t){var e=this;if(n.isArray(t)||(t=[t]),n.isArray(t)&&t.length>0){var i=null;1===t.length?(t[0].filterId&&(t[0].name=t[0].filterId),t[0].values&&(t[0].children=t[0].values),t[0].isSelectable=!1,i=t[0]):i={id:-1,code:"-1",name:e.get("name"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!0};var a=new r(i);e.set("tree",a)}}})},{"../models/base-filter-model":31,"../tree/tree-node-model":35,underscore:"underscore"}],33:[function(t,e){var n=t("jquery"),i=t("../models/generic-filter-model"),r=t("../tree/tree-node-model");e.exports=i.extend({initialize:function(t){this.loaded=n.Deferred(),this._createTree(t.data),i.prototype.initialize.apply(this,[t])},getTree:function(){return this.loaded},_createTree:function(t){var e=this,n={};n=1===t.length?t[0]:{id:-1,code:"-1",name:e.get("name"),filterId:e.get("filterId"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!1};var i=new r(n);this.set("tree",i),this.loaded.resolve(i)}})},{"../models/generic-filter-model":32,"../tree/tree-node-model":35,jquery:"jquery"}],34:[function(t,e){var n=t("jquery"),i=t("../models/base-filter-model");e.exports=i.extend({initialize:function(t){i.prototype.initialize.apply(this,[t]),this.url=t.endpoint,this.set({selectedStart:null,selectedEnd:null,startYear:"01/01/1961",endYear:"31/12/2015"}),this.set("_loaded",n.Deferred())},parse:function(t){return t.startYear&&-1!==t.startYear||(t.startYear=this.attributes.startYear),t.endYear&&-1!==t.endYear||(t.endYear=this.attributes.endYear),this.get("_loaded").resolve(),t},serialize:function(){return this.get("selectedStart")?{date:{start:this._dateConvert(this.get("selectedStart")),end:this._dateConvert(this.get("selectedEnd"))}}:null},deserialize:function(t){t&&t.date&&(this.set("selectedStart",this._dateConvert(t.date.start)),this.set("selectedEnd",this._dateConvert(t.date.end)))},reset:function(){this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear"))},_dateConvert:function(t){var e=null;return t&&(t.indexOf("/")>-1?(t=t.split("/"),e=t[2]+"-"+t[1]+"-"+t[0]):t.indexOf("-")>-1&&(t=t.split("-"),e=t[2]+"/"+t[1]+"/"+t[0])),e}})},{"../models/base-filter-model":31,jquery:"jquery"}],35:[function(t,e){var n,i=t("underscore"),r=t("backbone"),a=r.Collection.extend({model:n});n=r.Model.extend({defaults:{selected:void 0,expanded:!0,visible:!0,numSelected:0,numPossible:0,children:null,isSelectable:!0},initialize:function(t){var e=this,r=new a;if(this.set("children",r),Array.isArray(t.children)&&i.each(t.children,function(t){var e=new n(t);r.add(e)}),!r.isEmpty()&&this.get("isSelectable")){var s=new n(e.toJSON());s.set("name","unkown: "+this.get("name")),r.add(s)}this._addListenersToChildren(),this.on("change:selected",e._onSelectChange),this._updateCount()},serialize:function(t){var e={},n=this.get("children");if(n.length>0?n.each(function(n){var r=n.serialize(t);i.each(r,function(t,n){t&&(e[n]=e[n]?e[n].concat(t):t)})}):(this.get("selected")||t.includeUnselected)&&(this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e["default"]=t.wholeModel?[this]:[this.id]),this.get("filterId")){var r=this.get("filterId");e[r]&&e["default"]?(e[r]=e[r].concat(e["default"]),delete e["default"]):e["default"]&&(e[r]=e["default"],delete e["default"])}return e},deserialize:function(t){var e=this,n=this.get("children");n.length>0&&n.each(function(n){!n.get("filterId")&&e.get("filterId")&&n.set("filterId",e.get("filterId")),n.deserialize(t)}),t[this.get("filterId")]&&(i(t[this.get("filterId")]).indexOf(this.id)>-1?this.set("selected",!0,{propagation:!0}):0===n.length&&this.set("selected",!1,{propagation:!0}))},_onSelectChange:function(t,e,n){var i=this,r=this.get("children");this.get("selected")?this.set("numSelected",this.get("numPossible")):this.set("numSelected",0),r.isEmpty()||i._updateChildNodes(n.propagation),n.propagation&&i.trigger("updateCount")},_addListenersToChildren:function(){var t=this,e=this.get("children");e.each(function(n){n.on("change:visible",function(){t.set(e.findWhere({visible:!0})?{visible:!0}:{visible:!1})}),n.on("updateCount",function(){t._updateCount(),t.trigger("updateCount")})})},_updateCount:function(){var t=this.get("children"),e={selected:0,possible:0};t.isEmpty()?e={selected:this.get("selected")?1:0,possible:1}:t.each(function(t){e.selected+=t.get("numSelected"),e.possible+=t.get("numPossible")}),this.set("numSelected",e.selected),this.set("numPossible",e.possible)},_updateChildNodes:function(t){var e=this,n=this.get("children");n.isEmpty()||n.each(function(n){n.set("selected",e.get("selected"),{propagation:t})})},filterText:function(t){var e=this.get("children");e.isEmpty()?this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1?this.set("visible",!0):this.set("visible",!1):(this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1&&this.set("visible",!0),e.each(function(e){e.filterText(t)}))}}),e.exports=n},{backbone:"backbone",underscore:"underscore"}],36:[function(t,e){var n=t("underscore"),i=t("backbone"),r=t("jquery"),a='<div class="node small">\n  <div class="selectable"></div>\n  <div class="toggle-nav"><%= name %>\n    <span class="count">(<%= numSelected %> / <%= numPossible %>)</span>\n    <span class="expanded">+</span>\n  </div>\n\n  <% /*TODO: fix hardcode of \'unkown\' */\n  if (obj.name && obj.name.indexOf("unkown")>-1) { %>\n    &nbsp;<a href="#"\n      data-toggle="popover"\n      data-container="body"\n      data-placement="right"\n      data-trigger="click"\n      data-content="projects that aren\'t tagged to a specific child.">\n      <span class="glyphicon glyphicon-info-sign"></span>\n    </a>\n  <%}%>\n</div>\n',s=i.View.extend({tagName:"li",className:"parent_li",template:n.template(a),initialize:function(){},render:function(t){return this.model=t,t&&(this.$el.html(this.template(t.toJSON())),this.renderChildren()),this},renderChildren:function(){var t=r("<ul>");this.$el.append(t);var e=this.model.get("children");e.isEmpty()?(this.$(".expanded").remove(),this.$("> .node > .toggle-nav > .count").text("")):e.each(function(e){var n=new s;t.append(n.render(e).$el)}),this._addModelListeners(),this._addUIListeners(),this._updateSelection(),this._updateExpanded(t)},_addModelListeners:function(){var t=this;this.model.on("change:selected",function(){t._updateSelection()}),this.model.on("change:expanded",function(){t._updateExpanded()}),this.model.on("change:numSelected",function(){t._updateCountUI()}),this.model.on("change:visible",function(){t._updateVisibility()})},_addUIListeners:function(){var t=this;this.$("> .node > .selectable").on("click",function(){t.clickBox()}),this.$("> .node > .toggle-nav").on("click",function(){t.clickName()})},_updateSelection:function(){this._updateCheckboxFill()},_updateCountUI:function(){this.model.get("children").isEmpty()||(this.$("> .node > .toggle-nav > .count").text("("+this.model.get("numSelected")+" / "+this.model.get("numPossible")+")"),this._updateCheckboxFill())},_updateVisibility:function(){this.model.get("visible")?this.$el.show():this.$el.hide()},_updateCheckboxFill:function(){this.model.get("children").isEmpty()?this.model.get("selected")?this.$("> .node > .selectable").addClass("selected"):this.$("> .node > .selectable").removeClass("selected"):this.model.get("numSelected")>0?this.model.get("numSelected")<this.model.get("numPossible")?(this.$("> .node > .selectable").addClass("half-fill"),this.$("> .node > .selectable").removeClass("selected")):(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").addClass("selected")):0===this.model.get("numSelected")&&(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").removeClass("selected"))},_updateExpanded:function(t){var e=this.$("> .node > .toggle-nav > .expanded");this.model.get("expanded")?(this.expand(),e.text("-"),e.addClass("open").removeClass("closed")):(this.collapse(),t&&t.find("> li").hide(),e.text("+"),e.addClass("closed").removeClass("open"))},clickBox:function(){this.model.set("selected",!this.model.get("selected"),{propagation:!0})},clickName:function(){this.model.get("children").isEmpty()?this.clickBox():this.model.set("expanded",!this.model.get("expanded"))},collapse:function(){var t=this.$el.find(" > ul > li");t.hide("fast")},expand:function(){var t=this.$el.find(" > ul > li");t.show("fast")}});e.exports=s},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],37:[function(t,e){var n=t("underscore"),i=t("jquery"),r=t("backbone"),a="<li><a href=\"#\"><%= name %>   <span class='filter-count small pull-right'>all</span></a></li>\n",s='\n<div class="panel-heading">\n  <button type="button" class="close cancel"  aria-hidden="true">&times;</button>\n  <h3 class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset" title="Turn of all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply" >Apply</button>\n  </div>\n</div>\n';e.exports=r.View.extend({className:"filter-type",titleTemplate:n.template(a),contentTemplate:n.template(s),initialize:function(t){this.app=t.app},renderFilters:function(){},renderTitle:function(){var t=this;return this.titleEl=this.titleTemplate(this.model.toJSON()),this.$titleEl=i(this.titleEl),this.$titleEl.on("click",function(){return i(this).siblings().removeClass("active"),i(this).addClass("active"),t.$el.html(""),t.renderFilters(),!1}),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],38:[function(t,e){var n=(t("jquery"),t("underscore")),i=t("backbone"),r=t("../views/top-level-filter-view"),a=t("../collections/all-filters-collection"),s='\n<div class="panel-heading">\n  <button type="button" class="close cancel"  aria-hidden="true">&times;</button>\n  <h3 class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset" title="Turn of all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply" >Apply</button>\n  </div>\n</div>\n',o='<li class=""><a href="#filter-pane-<%= name %>" role="tab" data-toggle="tab"><%= name %></a></li>\n';e.exports=i.View.extend({id:"tool-filters",name:"Filters",apiURL:"/rest/filters",events:{"click .apply":"applyFilters","click .cancel":"cancel","click .reset":"resetFilters"},filterViewsInstances:{},template:n.template(s),titleTemplate:n.template(o),initialize:function(t){var e=this;this.draggable=t.draggable,this.translator=t.translator,this.firstRender=!0,this._createTopLevelFilterViews(),this.allFilters=new a,this._loaded=this.allFilters._loaded,this._getFilterList().then(function(){return e.allFilters.each(function(t){e._createFilterViews(t)}),this})},_createTopLevelFilterViews:function(){this.filterViewsInstances={donors:new r({name:"Donor"}),sectors:new r({name:"Sector"}),programs:new r({name:"Programs"}),activity:new r({name:"Activity"}),allAgencies:new r({name:"AllAgencies"}),financials:new r({name:"Financial"}),others:new r({name:"Other"})}},render:function(){var t=this;return this.$el.addClass("panel panel-primary"),this.draggable&&this.$el.draggable({cancel:".panel-body, .panel-footer",cursor:"move"}),this.firstRender&&(this.$el.html(this.template({})),this.$el.show(),this._getFilterList().done(function(){t.renderFilters(),t.popovers=t.$('[data-toggle="popover"]'),t.popovers.popover(),t.translator&&t.translator.translateDOM(t.el)}),this.firstRender=!1),this},renderFilters:function(){this.$(".filter-options").html("");for(var t in this.filterViewsInstances)if(this.filterViewsInstances.hasOwnProperty(t)){var e=this.filterViewsInstances[t];this.$(".filter-titles").append(e.renderTitle().titleEl),this.$(".filter-options").append(e.renderFilters().el)}this.$(".filter-titles a:first").tab("show")},_getFilterList:function(){return this.allFilters.load()},_createFilterViews:function(t){switch(t.get("group")){case"ActivityBudgetList":case"TypeOfAssistanceList":case"FinancingInstrumentsList":this.filterViewsInstances.financials.filterCollection.add(t);break;case"ActivityStatusList":case"ActivityApprovalStatus":this.filterViewsInstances.activity.filterCollection.add(t);break;case"Programs":this.filterViewsInstances.programs.filterCollection.add(t);break;case"Sectors":this.filterViewsInstances.sectors.filterCollection.add(t);break;case"Donor":this.filterViewsInstances.donors.filterCollection.add(t);break;case"Role":this.filterViewsInstances.allAgencies.filterCollection.add(t);break;default:this.filterViewsInstances.others.filterCollection.add(t)}},serialize:function(t){var e={columnFilters:{},otherFilters:{}};return this.allFilters.each(function(i){"Dates"===i.get("name")?n.extend(e.otherFilters,i.serialize(t)):n.extend(e.columnFilters,i.serialize(t))}),n.each(e,function(t,i){(!t||n.isEmpty(t))&&delete e[i]}),e},deserialize:function(t,e){t?this.allFilters.each(function(e){e.deserialize("Dates"===e.get("name")?t.otherFilters:t.columnFilters)}):console.warn("could not deserialize blob:",t),e&&e.silent||this.applyFilters()},showFilters:function(){this.render(),this.filterStash=null,this._loaded.done(n.bind(function(){this.filterStash=this.serialize({})},this))},resetFilters:function(){this.allFilters.each(function(t){t.reset()})},applyFilters:function(){this._loaded.done(n.bind(function(){var t=this.serialize({});this.trigger("apply",t)},this))},cancel:function(){this.filterStash&&this.deserialize(this.filterStash,{silent:!0}),this.trigger("cancel",this.filterStash)}})},{"../collections/all-filters-collection":28,"../views/top-level-filter-view":40,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],39:[function(t,e){var n=t("underscore"),i=t("../tree/tree-node-view"),r=t("../views/base-filter-view"),a='<div class="search-form">\n  <div class="input-group form-group">\n    <input type="text" class="form-control search-text" placeholder="Search...">\n    <span class="input-group-btn">\n      <button  class="btn btn-success">Go</button>\n    </span>\n  </div><!-- /input-group -->\n</div>\n<div class="toggle-all">\n  <em>\n    <a href="#" class="select-all" >select all</a> /\n    <a href="#" class="select-none" >deselect all</a>\n  </em>\n</div>\n\n<div class="tree tree-container" style=""></div><!--display:none;-->\n';e.exports=r.extend({className:r.prototype.className+" filter-generic",template:n.template(a),_loaded:null,events:{},initialize:function(t){var e=this;r.prototype.initialize.apply(this,[t]),this.model=t.model,this.treeView=new i,this.model.getTree().then(function(t){t?(e._updateCountInMenu(),t.on("change:numSelected",function(){e._updateCountInMenu()})):console.warn("no tree for: ",e.model)})},searchKeyUp:function(t){(13===t.keyCode||""===this.$(".search-text").val()||this.$(".search-text").val().length>1)&&this.model.get("tree").filterText(this.$(".search-text").val().toLowerCase())},_updateCountInMenu:function(){this.$titleEl&&this.model.get("tree")&&(this.model.get("tree").get("numSelected")===this.model.get("tree").get("numPossible")||0===this.model.get("tree").get("numSelected")?(this.$titleEl.find(".filter-count").text("all"),this.$el.removeClass("active")):(this.$titleEl.find(".filter-count").text(this.model.get("tree").get("numSelected")+"/"+this.model.get("tree").get("numPossible")),this.$el.addClass("active")))},renderTitle:function(){return r.prototype.renderTitle.apply(this),this._updateCountInMenu(),this},renderFilters:function(){var t=this;return r.prototype.renderFilters.apply(this),this.model.getTree().then(function(e){t.$el.html(t.template(t.model.toJSON())),t.$(".select-none").on("click",function(){return t._selectNone(),!1}),t.$(".select-all").on("click",function(){return t._selectAll(),!1}),t.$("input.search-text").on("keyup",function(e){t.searchKeyUp(e)}),e?(t.$(".tree-container").append(t.treeView.render(t.model.get("tree")).$el),e.set("expanded",!0),e.filterText("")):t.$(".tree-container").append("Hi, report to David")}).fail(function(){console.error("renderFilters failed :(")}),this},_selectAll:function(){this.model.get("tree").set("selected",!1),this.model.get("tree").set("selected",!0)},_selectNone:function(){this.model.get("tree").set("selected",!0),this.model.get("tree").set("selected",!1)}})},{"../tree/tree-node-view":36,"../views/base-filter-view":37,underscore:"underscore"}],40:[function(t,e){var n=t("underscore"),i=t("backbone"),r='<li class=""><a href="#filter-pane-<%= name %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',a='<ul class="sub-filters-titles nav nav-pills nav-stacked">\n</ul>\n<div class="sub-filters-content">\n  <img src="img/loading-icon.gif" />\n</div>\n',s=t("../views/generic-filter-view"),o=t("../views/years-filter-view"),l=t("../models/years-filter-model");e.exports=i.View.extend({className:"tab-pane",titleTemplate:n.template(r),contentTemplate:n.template(a),filterCollection:null,viewList:[],name:"tbd",initialize:function(t){this.name=t.name,this.filterCollection=new i.Collection},renderFilters:function(){var t=this,e=null,n=!0;return this.$el.attr("id","filter-pane-"+this.name),this.$el.html(this.contentTemplate()),this.filterCollection.each(function(i){i instanceof l?(e=new o({model:i,el:t.$(".sub-filters-content")}),t.viewList.push(e)):(e=new s({model:i,el:t.$(".sub-filters-content")}),t.viewList.push(e)),t.$(".sub-filters-titles").append(e.renderTitle().$titleEl),n&&(n=!1,e.renderFilters(),t.$(".sub-filters-titles li:first").addClass("active"))}),this},renderTitle:function(){return this.titleEl=this.titleTemplate({name:this.name}),this}})},{"../models/years-filter-model":34,"../views/generic-filter-view":39,"../views/years-filter-view":41,backbone:"backbone",underscore:"underscore"}],41:[function(t,e){var n=t("underscore"),i=t("../views/base-filter-view");t("../lib/jquery.nouislider.min.js"),t("jquery-ui/datepicker");var r='\n  <h3 class="title text-center"><span class="start-year">1990</span> <strong>-</strong> <span class="end-year">2015</span></h3>\n   <div class="year-slider"></div>\n\n   <p>Start Date: <input type="text" id="start-date" class="date-picker"></p>\n   <p>End Date: <input type="text" id="end-date" class="date-picker"></p>\n';e.exports=i.extend({className:i.prototype.className+" filter-years",template:n.template(r),_loaded:null,initialize:function(t){var e=this;i.prototype.initialize.apply(this,[t]),this.model=t.model,this._loaded=this.model.fetch().then(function(){e.model.get("selectedStart")||(e.model.set("selectedStart",e.model.get("startYear")),e.model.set("selectedEnd",e.model.get("endYear")))}),this.listenTo(this.model,"change",this._updateTitle)},renderFilters:function(){var t=this;return i.prototype.renderFilters.apply(this),this.$el.html(this.template(this.model.toJSON())),this._loaded.then(function(){t._renderDatePickers(),t._updateTitle()}),this},_renderDatePickers:function(){var t=this;this.$("#start-date").datepicker({defaultDate:this.model.get("selectedStart"),minDate:this.model.get("startYear"),maxDate:this.model.get("endYear"),dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#end-date").datepicker("option","minDate",e),t.model.set("selectedStart",e)}}),this.$("#end-date").datepicker({defaultDate:this.model.get("selectedEnd"),minDate:this.model.get("startYear"),maxDate:this.model.get("endYear"),dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#start-date").datepicker("option","maxDate",e),t.model.set("selectedEnd",e)}}),this.$("#start-date").val(this.model.get("selectedStart")),this.$("#end-date").val(this.model.get("selectedEnd"))},renderTitle:function(){return i.prototype.renderTitle.apply(this),this._updateTitle(),this},_updateTitle:function(){this.$titleEl.find(".filter-count").text(this.model.get("selectedStart")+" - "+this.model.get("selectedEnd")),this.$(".start-year").text(this.model.get("selectedStart")),this.$(".end-year").text(this.model.get("selectedEnd"))},_renderSlider:function(){var t=this;this.slider=window.jQuery(this.$(".year-slider")).noUiSlider({start:[t.model.get("selectedStart"),t.model.get("selectedEnd")],step:1,connect:!0,range:{min:t.model.get("startYear"),max:t.model.get("endYear")},serialization:{lower:[window.jQuery.Link({target:window.jQuery(".start-year")})],upper:[window.jQuery.Link({target:window.jQuery(".end-year")})],format:{decimals:0}}}),this.slider.on("change",function(){t.model.set("selectedStart",parseInt(t.$(".start-year").text(),10))}),this.slider.on("change",function(){t.model.set("selectedEnd",parseInt(t.$(".end-year").text(),10))})}})},{"../lib/jquery.nouislider.min.js":29,"../views/base-filter-view":37,"jquery-ui/datepicker":24,underscore:"underscore"}],42:[function(t,e){function n(){"use strict";
if(!(this instanceof n))throw new Error("State needs to be created with the `new` keyword.");this.initialize.apply(this,arguments)}var i=t("underscore"),r=t("backbone");i.extend(n.prototype,r.Events,{initialize:function(t){this.data=t.data,this._stateRegistry={},this._unclaimed={},t.url&&this.listenToURL(i(t).pick("url","prefix"))},listenToURL:function(t){this._url=t.url,this._urlPrefix=t.prefix||"saved/",this.listenTo(this._url,"change",this.urlMaybeLoad),this._url.hash()&&this.urlMaybeLoad(this._url.hash())},urlMaybeLoad:function(t){if(0===t.indexOf(this._urlPrefix)){var e=t.split(this._urlPrefix)[1];e?this.data?this.loadById(e):this.load(e):this.reset()}else""===t?this.reset():console.warn("hash changed but not for state:",t)},loadById:function(t){this.data.savedMaps.load(t).done(i(function(t){this.load(t.get("stateBlob"))}).bind(this))},load:function(t){var e=JSON.parse(t),n=!1;i.each(e,function(t,e){var r=this._stateRegistry[e];i.isUndefined(r)?(this._unclaimed[e]=t,console.warn("Saving state for unregistered id: "+e)):i.isEqual(r.get(),t)||(r.set(t),n=!0)},this),this.trigger("load"),n&&this.trigger("change")},reset:function(){var t=!1;i.each(this._stateRegistry,function(e){var n=e.get();i.isEqual(n,e.empty)||(e.set(e.empty),t=!0)},this),this.trigger("reset"),t&&this.trigger("change")},freeze:function(t){t=t||{};var e={};i.each(this._stateRegistry,function(t,n){var r=t.get();e[n]=i.clone(r)});var n=JSON.stringify(e);return t.toURL&&(this._url||console.error("State cannot change URL if it does have a ref to it"),this._url.hash(this._urlPrefix+n)),this.trigger("freeze",n),n},register:function(t,e,n){if(e in this._stateRegistry)throw new Error("Attempted registration of duplicate state id "+e);this._stateRegistry[e]={get:i.bind(n.get,t),set:i.bind(n.set,t),empty:n.empty},e in this._unclaimed?(console.info("restoring state for previously unregistered id ",e),this._stateRegistry[e].set(this._unclaimed[e]),delete this._unclaimed[e]):this._stateRegistry[e].set(n.empty),this.trigger("register")}}),e.exports=n},{backbone:"backbone",underscore:"underscore"}],43:[function(t,e){function n(){"use strict";if(!(this instanceof n))throw new Error("URL needs to be created with the `new` keyword.");if(window._ampUrler)throw new Error("Another instance of URL is already managing window.location");window._ampUrler=!0,this.initialize.apply(this,arguments)}var i=t("underscore"),r=t("backbone");i.extend(n.prototype,r.Events,{initialize:function(t){t=t||{},this.root=t.root||window.location.host+window.location.pathname,window.addEventListener("hashchange",i(this.change).bind(this))},hash:function(t){return arguments.length?void(window.location.hash=t):window.location.hash.slice(1)},full:function(){return""+window.location},change:function(){this.trigger("change",this.hash())}}),e.exports=n},{backbone:"backbone",underscore:"underscore"}]},{},[1]);