!function t(e,n,i){function a(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return a(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(t,e,n){t("./ugly/lib-load-hacks");var i=(t("jquery"),t("./app/models/amp-user.js"),t("./app/app-class")),a=new i({el:"#amp-dashboard"});window.app=a,a.state.saved.load()},{"./app/app-class":2,"./app/models/amp-user.js":12,"./ugly/lib-load-hacks":37,jquery:"jquery"}],2:[function(t,e,n){function i(){if(!(this instanceof i))throw new Error("App needs to be instantiated with the `new` keyword.");this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("jquery").Deferred,s=t("./backbone-dash"),o=t("./check-support"),l=t("amp-url/index"),c=t("amp-state/index"),u=t("amp-state/index").StateLoadError,d=t("amp-translate"),h=t("amp-filter/src/main"),p=t("./models/settings-collection"),f=t("./models/saved-dashes-collection.js"),g=t("./views/main"),m=t("./views/fail");a.extend(i.prototype,s.Events,{rendered:!1,initialize:function(t){var e,n=new r;this.initialized=n.promise();try{if(this.settings=new p([],{app:this}),this.browserIssues=o(),a(this.browserIssues).chain().groupBy("severity").each(function(t,n){if(e=a(t).pluck("feature").join(", "),"critical"===n)throw{name:"Incompatible Web Browser",message:"Dashboards cannot work without these features, which are not supported by your web browser: "+e+'. Any <a href="http://browsehappy.com/">modern browser</a> will work.',toString:function(){return this.name+": "+this.message}};"major"===n?this.report("Limited support for old web browsers",["Your browser does not provide some features used by Dashboards: "+e+".",'Some features may not work correctly, however any <a href="http://browsehappy.com/">modern browser</a> will provide a better experience.']):"minor"===n&&console.warn("This browser is missing support for",e)},this),this.hasIssue("download")&&!this.hasIssue("flash")){var i=document.createElement("script"),v=document.createElement("script");i.src="/TEMPLATE/ampTemplate/commonJs/swfobject-2.2.js",v.src="/TEMPLATE/ampTemplate/commonJs/downloadify-0.2.js",document.body.appendChild(i),document.body.appendChild(v)}this.url=new l,this.savedDashes=new f([],{app:this}),this.state=new c({url:this.url,saved:this.savedDashes});try{this.state.urlMaybeLoad()}catch(b){if(!(b instanceof u))throw b;this.report("Could not load saved dashboard",["If you are trying to load a shared link, please make sure the entire URL was copied"]),this.url.hash("")}var y=JSON.parse('{\n"amp.common:footer": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and DGF",\n\n"amp.common:title": "AMP",\n"amp.common:title-desktop": "Desktop",\n"amp.common:subtitle-my-desktop": "My Desktop",\n"amp.common:subtitle-add-tab": "Add Tab",\n"amp.common:subtitle-tab-manager": "Tab Manager",\n"amp.common:title-reports": "Reports",\n"amp.common:subtitle-all-reports": "All Reports",\n"amp.common:subtitle-fav-reports": "Favourite Reports",\n"amp.common:subtitle-report-generator": "Report Generator",\n"amp.common:subtitle-saiku": "Saiku",\n"amp.common:title-documents": "Documents",\n"amp.common:title-dashboards": "Dashboards",\n"amp.common:subtitle-gis": "New GIS (BETA)",\n"amp.common:subtitle-dashboards": "New Dashboard (BETA)",\n"amp.common:subtitle-dashboard-generator": "Dashboard Generator",\n"amp.common:subtitle-donor-profile": "Donor Profile",\n"amp.common:subtitle-region-profile": "Region Profile",\n"amp.common:subtitle-sector-profile": "Sector Profile",\n"amp.common:subtitle-executing-profile": "Executing Agency Profile",\n"amp.common:subtitle-beneficiary-profile": "Beneficiary Ministry Profile",\n"amp.common:title-tools": "Tools",\n"amp.common:subtitle-workspace-setup": "Workspace Setup",\n"amp.common:subtitle-advanced-mode": "Advanced Mode",\n"amp.common:subtitle-search": "Search",\n"amp.common:subtitle-addressbook": "Address Book",\n"amp.common:title-help": "Help",\n"amp.common:subtitle-amp-help": "AMP Help",\n"amp.common:subtitle-glossary": "Glossary",\n"amp.common:subtitle-email-support-team": "Email Support Team",\n"amp.common:title-logout": "Logout",\n"amp.common:filters-loading": "Loading...",\n"amp.dashboard:page-title":"AMP Dashboards",\n"amp.dashboard:loading": "Loading...",\n"amp.dashboard:title-projectdata": "Project Data",\n"amp.dashboard:sub-title-projectdata": "View where projects are being implemented throughout the country.",\n"amp.dashboard:title-Country": "Country",\n"amp.dashboard:title-Region": "Region",\n"amp.dashboard:title-Zone": "Zone",\n"amp.dashboard:title-District": "District",\n"amp.dashboard:chart-reset": "reset others",\n"amp.dashboard:chart-radioui-commitments": "Commitments",\n"amp.dashboard:chart-radioui-disbursements": "Disbursements",\n"amp.dashboard:filters-none-applied": "No filters applied",\n"amp.dashboard:close": "Close",\n"amp.dashboard:modal-sorry": "Sorry for any inconvenience",\n"amp.dashboard:share-dashboard-top": "Share dashboard",\n"amp.dashboard:share-dashboard": "Share this dashboard view",\n"amp.dashboard:share-link": "Link",\n"amp.dashboard:of": "of",\n"amp.dashboard:tooltip-predict-otherseries": "TRANSLATEME",\n"amp.dashboard:total": "total",\n"amp.common:title": "AMP Toolbar",\n"amp.common:title-filters": "Filters",\n"amp.dashboard:chart-TopDonorAgencies": "Top Donor Agencies",\n"amp.dashboard:chart-TopDonorGroups": "Top Donor Groups",\n"amp.dashboard:chart-TopRegions": "Top Regions",\n"amp.dashboard:chart-TopSectors": "Top Sectors",\n"amp.dashboard:chart-AidPredictability": "Aid Predictability",\n"amp.dashboard:chart-FundingType": "Funding Type",\n"amp.dashboard:chart-ResponsibleOrganizations": "Responsible Organizations",\n"amp.dashboard:chart-BeneficiaryAgencies": "Beneficiary Agencies",\n"amp.dashboard:chart-ExecutingAgencies": "Executing Agencies",\n"amp.dashboard:chart-ImplementingAgencies": "Implementing Agencies",\n"amp.dashboard:chart-Peace-buildingandState-buildingGoals": "Peace-building and State-building Goals",\n"amp.dashboard:predictability-planned": "Planned",\n"amp.dashboard:predictability-actual": "Actual",\n"amp.dashboard:chart-FundingType-Grant": "Grant",\n"amp.dashboard:chart-FundingType-Loan": "Loan",\n"amp.dashboard:chart-FundingType-others": "Others",\n"amp.dashboard:chart-TopRegions-DistrictUndefined": "District: U",\n"amp.dashboard:chart-TopRegions-others": "Others",\n"amp.dashboard:chart-TopSectors-others": "Others",\n"amp.dashboard:chart-TopDonorAgencies-others": "Others",\n"amp.dashboard:chart-TopDonorGroups-others": "Others",\n"amp.dashboard:chart-ResponsibleOrganizations-others": "Others",\n"amp.dashboard:chart-BeneficiaryAgencies-others": "Others",\n"amp.dashboard:chart-ExecutingAgencies-others": "Others",\n"amp.dashboard:chart-ImplementingAgencies-others": "Others",\n"amp.dashboard:chart-Peace-buildingandState-buildingGoals-others":"Others",\n"amp.dashboard:filters-edit":"edit filters",\n"amp.dashboard:dashboard-settings":"Settings",\n"amp.dashboard:settings-edit":"edit settings",\n"amp.dashboard:download-amount":"Amount",\n"amp.dashboard:download-preview":"Preview:",\n"amp.dashboard:download-rendering":"Rendering...",\n"amp.dashboard:download-download-chart":"Download chart",\n"amp.dashboard:download-download-data":"Download data",\n"amp.dashboard:chart-no-data-available":"No Data Available",\n"amp.dashboard:chart-loading-saved-settings":"Loading saved settings...",\n"amp.dashboard:filters-show-settings":"Show filter settings",\n"amp.dashboard:filters-chart-legends-Grouped":"Grouped",\n"amp.dashboard:filters-chart-legends-Stacked":"Stacked",\n"amp.dashboard:of-total": "of total",\n"amp.dashboard:aid-predictability-actual-disbursements": "Actual Disbursements",\n"amp.dashboard:aid-predictability-planned-disbursements": "Planned Disbursements",\n"amp.dashboard:filters-hide-details": "Hide filter details",\n"amp.dashboard:saving-state": "Saving dashboard state, please wait...",\n"amp.dashboard:date-range": "Date Range",\n"amp.dashboard:currency" : "Currency",\n"amp.dashboard:type" : "Type",\n"amp.dashboard:year" : "Year",\n"amp.dashboard:ftype-actual-commitment": "Actual Commitments",\n"amp.dashboard:ftype-actual-disbursement": "Actual Disbursements",\n"amp.dashboard:ftype-actual-expenditure": "Actual Expenditures",\n"amp.dashboard:ftype-planned-commitment": "Planned Commitments" ,\n"amp.dashboard:ftype-planned-disbursement":	"Planned Disbursements" ,\n"amp.dashboard:ftype-planned-expenditures":	"Planned Expenditures",  			\n"amp.dashboard:dashboard-chart-tops-info-modal": "Category Detail",\n"amp.dashboard:chart-tops-table-projecttitle": "Project Title",\n"amp.dashboard:chart-tops-inunits": "In units",\n"amp.dashboard:chart-tops-inthousands": "In thousands",\n"amp.dashboard:chart-tops-inmillions": "In millions"\n}\n\n');this.translator=new d({defaultKeys:y,ajax:s.wrappedAjax}),this.filter=new h({draggable:!0,sync:t.sync||s.sync,caller:"DASHBOARD"}),this.view=new g({app:this,el:t.el}),n.resolve(this)}catch(b){a.defer(function(){throw b}),this.view=new m({app:this,el:t.el,err:b}),this.err=b,n.reject(this)}},render:function(){this.tryAfter(this.translator.promise,this.view.render,this.view),this.translator.translateDOM(document)},hasIssue:function(t){return!!a(this.browserIssues).findWhere({feature:t})},viewFail:function(t,e){t.$el.html(new m({app:this,err:e}).render().el)},tryTo:function(t,e){try{return t.call(e)}catch(n){a.defer(function(){throw n}),this.viewFail(e,n)}},tryAfter:function(t,e,n){t.done(a(function(){this.tryTo(e,n)}).bind(this)).fail(a(function(){this.viewFail(n,"failed to load")}).bind(this))},report:function(t,e){this.initialized.done(function(n){n.modal(t,{messages:e,tone:"warning"})}).fail(function(){console.warn("REPORT:",t,e)})},modal:function(t,e){e=a({}).extend(e,{tone:"primary"});var n=new r;return this.initialized.done(function(i){var a=i.view.modal(t,e);n.resolve(a)}).fail(function(){console.warn("failed to show modal because the app views did not initialize",t),n.reject("app views did not init")}),n.promise()}}),e.exports=i},{"./backbone-dash":3,"./check-support":11,"./models/saved-dashes-collection.js":20,"./models/settings-collection":22,"./views/fail":31,"./views/main":33,"amp-filter/src/main":63,"amp-state/index":75,"amp-translate":76,"amp-url/index":77,jquery:"jquery",underscore:"underscore"}],3:[function(t,e,n){function i(t){this.instance=t,this.toString=function(){return"Module initialization error"}}function a(t){return t.extend({constructor:function(){var e=t.apply(this,arguments);if(!this.app)throw new i(this);return e},sync:u})}var r=t("underscore"),s=t("backbone"),o=window&&"localhost:3000"===window.location.host,l=["/rest/dashboard"],c=function(t){return t=r({}).extend(t,{url:(o?"http://localhost:8080":"")+t.url,headers:{Accept:"application/json","Content-Type":"application/json"}})},u=function(t){function e(e,n,i,a){return a=r({}).extend(a,{url:e}),a=c(a),t.call(this,n,i,a)}function n(t,n,a,r){var s=t+"+POST:"+r.data;if(i[s])return i[s]();var o=e(t,n,a,r);return i[s]=function(){return o.done(r.success).always(r.complete)},o.fail(function(){delete i[s]}),o}var i={};return function(t,i,a){var o=a.url||r(i).result("url")||s.Model.prototype.url.call(i),c=!1;return"POST"===a.type&&r.some(l,function(t){return 0===o.indexOf(t)})&&(c=!0),(c?n:e)(o,t,i,a)}}(s.sync);e.exports=r({}).extend(s,{InitError:i,Model:a(s.Model),Collection:a(s.Collection),View:a(s.View),sync:u,wrappedAjax:function(t){return s.ajax(c(t))}})},{backbone:"backbone",underscore:"underscore"}],4:[function(t,e,n){function i(t){return t}function a(t){return t[0].values.length-1}function r(t){var e=o.models.discreteBarChart().valueFormat(t.shortFormatter).showValues(!0).showYAxis(!1).showXAxis(!1).margin({top:5,right:10,bottom:10,left:10});return e}function s(t,e,n,i,a){var r,s=o.models.legend().width(a||t.clientWidth).margin({left:20,right:20}).rightAlign(!1).color(c.categoryColours(n[0].values.length)).key(function(t){return i?c.formatShortText(12)(t.x):t.x});l.select(t).datum(n).append("g").attr("class","legend").datum(n[0].values).call(s),r=t.querySelector(".legend").getBBox().height,e.margin({top:r+15})}var o=window.nv,l=t("d3-browserify"),c=t("../../ugly/util");e.exports={dispatchName:"discretebar",countCategories:a,addLegend:s,dataToNv:i,chart:r}},{"../../ugly/util":41,"d3-browserify":"d3-browserify"}],5:[function(t,e,n){function i(t){return t}function a(t){return t.length}function r(t){var e=10,n=s.models.customizedMultiBarChart().forceY([0,e]).reduceXTicks(!1).margin({top:5,right:10,bottom:20,left:50});return t.nvControls||n.showControls(!1),n.yAxis.tickFormat(t.shortFormatter).showMaxMin(!1),n}{var s=window.nv;t("./customized/multiBarChart.js")}e.exports={dispatchName:"multibar",countCategories:a,dataToNv:i,chart:r}},{"./customized/multiBarChart.js":10}],6:[function(t,e,n){function i(t){return 1!==t.length&&u.fail("Pie charts can only show one series of data. got",t.length),c.isArray(t[0].values)||u.fail('Data series did not have a "values" array. Instead',t[0].values),t[0].values}function a(t){return t[0].values.length}function r(t){var e=l.models.pieChart().valueFormat(t.shortFormatter).labelType("percent").donut(!0).donutRatio(.35);return e}function s(t){t.showLegend(!1)}function o(t,e,n){return[void 0,t,e,n]}var l=window.nv,c=t("underscore"),u=t("./common");e.exports={dispatchName:"pie",normalizeNvTTArgs:o,countCategories:a,removeLegend:s,dataToNv:i,chart:r}},{"./common":9,underscore:"underscore"}],7:[function(t,e,n){function i(t,e){var n=t.target,i=parseInt(o.data(n,"seriesIndex"),10)||0,a=parseInt(o.data(n,"xIndex"),10);return{label:e[i].values[a].x||a,seriesIndex:i,pointIndex:a,point:e[i].values[a]||a}}function a(t,e,n){t.addEventListener("click",function(t){var a=i(t,e),r=l.getNiceContext(a,e,t.target.innerText);n.clickHandler(r)})}function r(t,e){var n=s(t).pluck("key"),i=s(t).chain().map(function(t){return t.values}).transpose().value(),r=c({keys:n,values:i,moneyFormat:e.shortFormatter}),o=document.createElement("div");return o.innerHTML=r,a(o,t,e),o}var s=t("underscore"),o=t("../../ugly/util"),l=t("./common"),c=s.template('<div class="table-responsive">\n  <table class="table table-striped table-condensed">\n\n    <% if (_(keys).some()) { %>\n      <thead>\n        <tr>\n          <td></td>\n          <% _(keys).each(function(key, colIndex) { %>\n            <th data-series-index="<%= colIndex %>">\n              <%= key %>\n            </th>\n          <% }); %>\n        </tr>\n      </thead>\n    <% } %>\n\n    <tbody>\n      <% _(values).each(function(row, rowIndex) { %>\n        <tr>\n          <th data-x-index="<%= rowIndex %>">\n            <%= row[0].x %>\n          </th>\n          <% _(row).each(function(datum, colIndex) { %>\n            <td data-x-index="<%= rowIndex %>" data-series-index="<%= colIndex %>">\n              <%= moneyFormat(datum.y) %>\n            </td>\n          <% }) %>\n        </tr>\n      <% }) %>\n    </tbody>\n\n  </table>\n</div>\n');e.exports={charter:r}},{"../../ugly/util":41,"./common":9,underscore:"underscore"}],8:[function(t,e,n){function i(t,e,n){n=n||{},n=a(a(n).clone()).defaults({height:void 0,width:void 0,numberFormatter:r.format(","),shortFormatter:n.numberFormatter||s.formatKMB(3,app.settings.numberFormatSettings.decimalSeparator),addLegend:!0,trimLabels:!0,getTTContent:o.defaultGetTTContent,ttTemplate:h,clickHandler:o.defaultClickHandler,nvControls:!0});var i=p[t]||o.fail("unrecognized chart type",t);return{el:i(e,n)}}var a=t("underscore"),r=t("d3-browserify"),s=t("../../ugly/util"),o=t("./common"),l=t("./_bar"),c=t("./_multibar"),u=t("./_pie"),d=t("./_table"),h=a.template('<div class="panel panel-primary panel-popover">\n  <% if (tt.heading) { %>\n    <div class="panel-heading"><%= tt.heading %></div>\n  <% } %>\n  <div class="panel-body">\n    <span class="dollaz">\n      <% if (tt.bodyText) { %>\n        <%= tt.bodyText %>\n      <% } %>\n      <% if (tt.bodyList) { %>\n        <ul class="list-unstyled">\n          <% _(tt.bodyList).each(function(item) { %>\n            <li><b><%= item.k %></b> <%= item.v %></li>\n          <% }) %>\n        </ul>\n      <% } %>\n    </span>\n  </div>\n  <% if (tt.footerText) { %>\n    <div class="panel-footer">\n      <%= tt.footerText %>\n    </div>\n  <% } %>\n</div>\n'),p={bar:o.nvCharter(l),pie:o.nvCharter(u),multibar:o.nvCharter(c),table:d.charter};e.exports=i},{"../../ugly/util":41,"./_bar":4,"./_multibar":5,"./_pie":6,"./_table":7,"./common":9,"d3-browserify":"d3-browserify",underscore:"underscore"}],9:[function(t,e,n){function i(){throw{name:"Chart Error",message:Array.prototype.join.call(arguments,", "),toString:function(){return this.name+": "+this.message}}}function a(t,e){return t.x(function(t){return b.formatShortText(19)(t.x)}).color(b.categoryColours(e))}function r(t,e){var n=document.getElementById("super-secret-render-area-shh");return n||(n=document.createElement("div"),n.id="super-secret-render-area-shh",n.style.position="absolute",n.style.left="-9999em",n.style.top="-9999em",document.body.appendChild(n)),t&&(n.style.height=t+"px"),e&&(n.style.width=e+"px"),n}function s(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","dash-chart"),r(t,e).appendChild(n),n}function o(t,e,n,i,a,r,s){return a&&e.x(function(t){return b.formatShortText(50)(t.x)}),r&&i.addLegend?i.addLegend(n,e,t,a,s):!r&&i.removeLegend&&i.removeLegend(e),v.select(n).datum(t).call(e),m.utils.windowResize(e.update),m.addGraph(function(){return e}),n}function l(t,e,n){var i=n.countCategories(e);return t.color(b.categoryColours(i)),t}function c(t){return{tt:{heading:t.x.raw,bodyText:t.y.raw,formattedAmount:t.z.raw}}}function u(t,e,n){var i=t.seriesIndex||0;return{data:e,series:{key:e[i].key,index:i,values:e[i].values},x:{raw:t.point.x,fmt:t.label,index:t.pointIndex||t.index||0},y:{raw:t.point.y,fmt:t.point.z||n}}}function d(t,e,n,i,a){var r=function(t,n,r,s){return i(a(u(s,e,r)))};n.normalizeNvTTArgs&&(r=b.transformArgs(n.normalizeNvTTArgs,r)),t.tooltipContent(r)}function h(){}function p(t,e,n,i){t[n.dispatchName].dispatch.on("elementClick",function(t){i(u(t,e))})}function f(t){return function(e,n){var i=s(n.height,n.width),a=t.chart(n),r=t.dataToNv(e);return l(a,e,t),d(a,e,t,n.ttTemplate,n.getTTContent),o(r,a,i,t,n.trimLabels,n.addLegend,n.width),p(a,e,t,n.clickHandler),i}}function g(t){var e="";if(e=app.settings.numberFormatSettings.groupSeparator.length>0?"0,0":"0",app.settings.numberFormatSettings.numberFormat.indexOf(".")>0){var n=app.settings.numberFormatSettings.numberFormat.length-app.settings.numberFormatSettings.numberFormat.indexOf(".");e=e+"."+new Array(n).join("0")}var i={delimiters:{thousands:app.settings.numberFormatSettings.groupSeparator,decimal:app.settings.numberFormatSettings.decimalSeparator},abbreviations:{thousand:"K",million:"M",billion:"B",trillion:"T"},ordinal:function(t){return 1===t?"st":"rds"},currency:{symbol:"$"}};y.language("amp",i),y.language("amp");var a=new y(t).format(e);return a}{var m=window.nv,v=t("d3-browserify"),b=t("../../ugly/util"),y=t("numeral");t("underscore")}!function(t){var e=t.utils.calcApproxTextWidth;t.utils.calcApproxTextWidth=function(t){var n,i=t.text(),a=i,r=(i.match(/\./g)||[]).length;if(i.toUpperCase()===i){for(var s=0;s<i.length/5;s++)a+=" ";t.text(a),n=e(t),t.text(i)}else n=e(t);return n-=n/a.length*(r/3),n+=6}}(m);e.exports={fail:i,nvChartCommon:a,getNiceContext:u,defaultGetTTContent:c,defaultClickHandler:h,mkChartSVG:s,nvBoiler:o,nvCharter:f,formatNumber:g}},{"../../ugly/util":41,"d3-browserify":"d3-browserify",numeral:43,underscore:"underscore"}],10:[function(t,e,n){nv.models.customizedMultiBarChart=function(){"use strict";function t(w){return w.each(function(w){var E=d3.select(this),M=this,P=(c||parseInt(E.style("width"))||960)-l.left-l.right,I=(u||parseInt(E.style("height"))||400)-l.top-l.bottom;try{w[0].values[0].x.length>4&&(l.bottom+=130)}catch(N){}if(t.update=function(){E.transition().duration(_).call(t)},t.container=this,k.disabled=w.map(function(t){return!!t.disabled}),!C){var $;C={};for($ in k)C[$]=k[$]instanceof Array?k[$].slice(0):k[$]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var O=E.selectAll(".nv-noData").data([D]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",l.left+P/2).attr("y",l.top+I/2).text(function(t){return t}),t}E.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var F=E.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([w]),B=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),L=F.select("g");B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),p&&(s.width(P-S()),i.barColor()&&w.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),L.select(".nv-legendWrap").datum(w).call(s),l.top!=s.height()&&(l.top=s.height(),I=(u||parseInt(E.style("height"))||400)-l.top-l.bottom),L.select(".nv-legendWrap").attr("transform","translate("+S()+","+-l.top+")"));var R=app.translator.translateSync("amp.dashboard:filters-chart-legends-Grouped","Grouped"),j=app.translator.translateSync("amp.dashboard:filters-chart-legends-Stacked","Stacked");if(h){var z=[{key:R,disabled:i.stacked()},{key:j,disabled:!i.stacked()}];o.width(S()).color(["#444","#444","#444"]),L.select(".nv-controlsWrap").datum(z).attr("transform","translate(0,"+-l.top+")").call(o)}F.attr("transform","translate("+l.left+","+l.top+")"),m&&L.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),i.disabled(w.map(function(t){return t.disabled})).width(P).height(I).color(w.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!w[e].disabled}));var V=L.select(".nv-barsWrap").datum(w.filter(function(t){return!t.disabled}));if(V.transition().call(i),f){a.scale(e).ticks(P/100).tickSize(-I,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),L.select(".nv-x.nv-axis").transition().call(a);var W=L.select(".nv-x.nv-axis > g").selectAll("g");W.selectAll("line, text").style("opacity",1);try{w[0].values[0].x.length>4&&L.selectAll(".nv-x.nv-axis .nv-wrap g g text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)")}catch(N){}if(b){var U=function(t,e){return"translate("+t+","+e+")"},H=5,Y=17;W.selectAll("text").attr("transform",function(t,e,n){return U(0,n%2==0?H:Y)});var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;L.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return U(0,0===e||q%2!==0?Y:H)})}v&&W.filter(function(t,e){return e%Math.ceil(w[0].values.length/(P/100))!==0}).selectAll("text, line").style("opacity",0),y&&W.selectAll(".tick text").attr("transform","rotate("+y+" 0,0)").style("text-anchor",y>0?"start":"end"),L.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}g&&(r.scale(n).ticks(I/36).tickSize(-P,0),L.select(".nv-y.nv-axis").transition().call(r)),s.dispatch.on("stateChange",function(e){k=e,T.stateChange(k),t.update()}),o.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(z=z.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case R:i.stacked(!1);break;case j:i.stacked(!0)}k.stacked=i.stacked(),T.stateChange(k),t.update()}}),T.on("tooltipShow",function(t){x&&A(t,M.parentNode)}),T.on("changeState",function(e){"undefined"!=typeof e.disabled&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),"undefined"!=typeof e.stacked&&(i.stacked(e.stacked),k.stacked=e.stacked),t.update()})}),t}var e,n,i=nv.models.multiBar(),a=nv.models.axis(),r=nv.models.axis(),s=nv.models.legend(),o=nv.models.legend(),l={top:30,right:20,bottom:50,left:60},c=null,u=null,d=nv.utils.defaultColor(),h=!0,p=!0,f=!0,g=!0,m=!1,v=!0,b=!1,y=0,x=!0,w=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k={stacked:!1},C=null,D="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=function(){return h?300:0},_=250;i.stacked(!1),a.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),r.orient(m?"right":"left").tickFormat(d3.format(",.1f")),o.updateState(!1);var A=function(e,n){var s=e.pos[0]+(n.offsetLeft||0),o=e.pos[1]+(n.offsetTop||0),l=a.tickFormat()(i.x()(e.point,e.pointIndex)),c=r.tickFormat()(i.y()(e.point,e.pointIndex)),u=w(e.series.key,l,c,e,t);nv.tooltip.show([s,o],u,e.value<0?"n":"s",null,n)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],T.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t)}),T.on("tooltipHide",function(){x&&nv.tooltip.cleanup()}),t.dispatch=T,t.multibar=i,t.legend=s,t.controls=o,t.xAxis=a,t.yAxis=r,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(d=nv.utils.getColor(e),s.color(d),t):d},t.showControls=function(e){return arguments.length?(h=e,t):h},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,r.orient(e?"right":"left"),t):m},t.reduceXTicks=function(e){return arguments.length?(v=e,t):v},t.rotateLabels=function(e){return arguments.length?(y=e,t):y},t.staggerLabels=function(e){return arguments.length?(b=e,t):b},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(k=e,t):k},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(D=e,t):D},t.transitionDuration=function(e){return arguments.length?(_=e,t):_},t}},{}],11:[function(t,e,n){function i(){return!!document.querySelector}function a(){try{return document.createElementNS("http://w3.org/2000/svg","svg"),!0}catch(t){return!1}}function r(){return!!document.createElement("canvas").getContext}function s(){if(!r())return!1;var t=document.createElement("canvas").getContext("2d").fillText;return"function"==typeof t}function o(){return!u()}function l(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}}function c(){var t="whatever";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return console.log(e),!1}}var u=function(){var t=!!function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"MSIE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\bOPR\/(\d+)/))?"Opera "+t[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=!!e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}().match(/^MSIE/);return function(){return t}}();e.exports=function(){var t=[];return i()||t.push({feature:"querySelector",severity:"critical"}),a()||t.push({feature:"SVG",severity:"critical"}),s()||t.push({feature:"canvas",severity:"major"}),o()||t.push({feature:"download",severity:l()?"minor":"major"}),l()||t.push({feature:"flash",severity:u()?"major":"minor"}),c()||t.push({feature:"localStorage",severity:"minor"}),t}},{}],12:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/user",defaults:{email:void 0},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],13:[function(t,e,n){var i=t("underscore"),a=t("./chart-model-base");e.exports=a.extend({defaults:{title:""},_prepareTranslations:function(){var t=this,e={};e["amp.dashboard:aid-predictability-planned-disbursements"]="Planned Disbursements",e["amp.dashboard:aid-predictability-actual-disbursements"]="Actual Disbursements",this.localizedPredictability=this.app.translator.translateList(e).then(function(e){t.localizedPredictabilityList=e})},parse:function(t){function e(t){return function(e){return{x:e.year,y:e[t].amount,z:e[t].formattedAmount}}}return this.set("title",t.title),t.processed=[{key:this.localizedPredictabilityList["amp.dashboard:aid-predictability-planned-disbursements"],originalKey:"planned",values:i(t.years).map(e("planned disbursements"))},{key:this.localizedPredictabilityList["amp.dashboard:aid-predictability-actual-disbursements"],originalKey:"actual",values:i(t.years).map(e("actual disbursements"))}],t}})},{"./chart-model-base":15,underscore:"underscore"}],14:[function(t,e,n){var i=t("underscore"),a=t("./chart-model-base"),r=t("../charts/common");e.exports=a.extend({defaults:{typed:!0,limit:3,title:""},_prepareTranslations:function(){var t=this,e={},n=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");"Funding Type"===this.get("name")&&(e[n+"Grant"]="Grant",e[n+"Loan"]="Loan",e[n+"others"]="Others"),this.localizedFType=this.app.translator.translateList(e).then(function(e){t.localizedLookup=e})},parse:function(t){this.set("title",t.title);var e,n=this;e=t.values.length>0&&!isNaN(parseInt(t.values[0].Year,10))?i.sortBy(t.values,function(t){return parseInt(t.Year,10)}):i(t.values).sortBy("Year");var a=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join(""),s=n.localizedLookup[a+"others"];if(t.processed=i(e).chain().reduce(function(t,e){return t.push.apply(t,i(e.values).pluck("type")),t},[]).uniq().map(function(t){var r=t.replace(/[ :.]/g,""),s=t;return n.localizedLookup[a+r]&&(s=n.localizedLookup[a+r]),{key:s,values:i(e).map(function(e){var n=i(e.values).findWhere({type:t});return{x:e.Year,y:n&&n.amount||0,z:n&&n.formattedAmount||0}})}}).value(),this.get("limit")<t.processed.length){var o=i(t.processed).chain().map(function(t){return{key:t.key,total:i(t.values).reduce(function(t,e){return t+e.y},0)}}).sortBy("total").reverse().rest(this.get("limit")-2).pluck("key").value(),l={key:s,color:"#777",special:"others",values:i(t.processed).chain().filter(function(t){return i(o).contains(t.key)}).map(function(t){return t.values}).transpose().map(function(t){return{x:t[0].x,y:i(t).reduce(function(t,e){return t+e.y},0),z:""}}).map(function(t){return{x:t.x,y:t.y,z:r.formatNumber(t.y)}}).value()};t.processed=t.processed.slice(0,this.get("limit")),t.processed.push(l)}return t}})},{"../charts/common":9,"./chart-model-base":15,underscore:"underscore"}],15:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash");e.exports=a.Model.extend({defaults:{},initialize:function(t,e){this.app=e.app,this.url=e.url,this._prepareTranslations()},hasData:function(){return i(this.get("processed")).chain().pluck("values").reduce(function(t,e){return e.length&&!0||t},!1).value()},fetch:function(t){var e=JSON.parse(t.data);return e.settings=this.app.settings.toAPI(),this.get("adjtype")&&(e.settings=i({}).extend(e.settings,{0:this.get("adjtype")})),t.data=JSON.stringify(e),a.Model.prototype.fetch.call(this,t)}})},{"../backbone-dash":3,
underscore:"underscore"}],16:[function(t,e,n){var i=t("jquery").param,a=t("underscore"),r=t("./chart-model-base"),s=t("../charts/common");e.exports=r.extend({defaults:{limit:5,title:""},_prepareTranslations:function(){var t={},e=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");"Top Regions"===this.get("name")&&(t[e+"DistrictUndefined"]="Districts: Undefined"),t[e+"others"]="Others",this.localizedTopChart=this.app.translator.translateList(t).done(a(function(t){this.localizedLookup=t}).bind(this))},parse:function(t){this.set("title",t.title),this.localizedLookup||this.app.report("Loading error",["Translations for the application were not loaded before rendering"]);var e=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");this.localizedOthers=this.localizedLookup[e+"others"],void 0===this.localizedOthers&&console.error("missing translation in .json file: "+e+"others");var n=a(t.values.slice()).map(function(t){var n=t.name.replace(/[ :.]/g,""),i=t.name;return this.localizedLookup[e+n]&&(i=this.localizedLookup[e+n]),{x:i,y:t.amount,z:t.formattedAmount,id:t.id}},this);if(a(a(n).pluck("x")).uniq().length<n.length&&this.app.report("Data Error",["The data for "+this.get("name")+" was inconsistent due to duplicate keys","The chart will be shown, but it may have errors or other issues as a result."]),t.maxLimit>n.length){var i={x:this.localizedOthers,y:t.total-a.chain(n).pluck("y").reduce(function(t,e){return t+e},0).value(),color:"#777",special:"others"};i.z=s.formatNumber(i.y*parseFloat(app.settings.numberMultiplier.name)),n.push(i)}return t.processed=[{values:n}],t},fetch:function(t){return t=a.defaults(t||{},{url:this.url+"?"+i(this.pick("limit"))}),r.prototype.fetch.call(this,t)}})},{"../charts/common":9,"./chart-model-base":15,jquery:"jquery",underscore:"underscore"}],17:[function(t,e,n){var i=t("../backbone-dash");e.exports=i.Collection.extend({initialize:function(t,e){this.app=e.app}})},{"../backbone-dash":3}],18:[function(t,e,n){var i=t("backbone"),a=(t("underscore"),i.Model.extend({})),r=i.Collection.extend({model:a,url:"/rest/common/fm",fetchData:function(){var t={"detail-modules":["DASHBOARDS"]};this.fetch({type:"POST",async:!1,processData:!1,mimeType:"application/json",traditional:!0,headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},data:JSON.stringify(t),error:function(t,e){console.error("error loading charts.")},success:function(t,e){}})}});e.exports=r},{backbone:"backbone",underscore:"underscore"}],19:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r="mapId";e.exports=a.Model.extend({defaults:{name:void 0,description:void 0,stateBlob:void 0},parse:function(t){return i(t).has(r)&&(t.id=t[r],delete t[r]),t},initialize:function(t,e){this.app=e.app,this.url=e.url},toJSON:function(){var t=a.Model.prototype.toJSON.apply(this,arguments);return i(t).has("id")&&(t[r]=t.id,delete t.id),t}},{fromId:function(t,e){return new this({id:t},e)}})},{"../backbone-dash":3,underscore:"underscore"}],20:[function(t,e,n){var i=t("underscore"),a=t("jquery").Deferred,r=t("../backbone-dash"),s=t("./saved-dash");e.exports=r.Collection.extend({url:"/rest/dashboard/saved-charts",model:s,timer:void 0,initializedOnce:!1,initialize:function(t,e){this.app=e.app},load:function(t){var e=this;if(e.initializedOnce===!1){e.initializedOnce=!0;var n=new a,r=this.get(t);if(r)n.resolve(r);else{var s=this.model.fromId(t,{app:this.app});this.add(s),s.fetch().done(function(){n.resolve(s),void 0===e.timer&&(e.timer=setInterval(function(){void 0!==this.app&&void 0!==this.app.filter&&this.app.filter.finishedFirstLoad===!0&&(clearInterval(e.timer),this.app.filter.trigger("apply"),this.app.rendered===!1&&(this.app.rendered=!0,app.render()))},100))}).fail(i(function(){this.app.report("Failed to load saved dashboard",["Could not retrieve the saved state."]),n.reject()}).bind(this))}return n.promise()}}})},{"../backbone-dash":3,"./saved-dash":19,jquery:"jquery",underscore:"underscore"}],21:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash");e.exports=a.Model.extend({initialize:function(t,e){this.app=e.app,this.url=e.url},select:function(t){var e=i(this.attributes.options).findWhere({selected:!0});delete e.selected;var n=i(this.attributes.options).findWhere({id:t});n.selected=!0,this.trigger("change")}})},{"../backbone-dash":3,underscore:"underscore"}],22:[function(t,e,n){function i(t){return!isNaN(parseInt(t,10))}function a(t,e){return function(n){return t(n)&&(n[e]=!0),n}}var r=t("jquery").Deferred,s=t("underscore"),o=t("../backbone-dash"),l=t("./setting");e.exports=o.Collection.extend({url:"/rest/amp/settings",model:l,comparator:"id",initialize:function(t,e){this.app=e.app,this._loaded=new r,s.bindAll(this,"toAPI","fromState"),this.app.hasIssue("localStorage")||this.on("sync",s(function(){try{var t=JSON.parse(localStorage.settings);"object"==typeof t&&null!==t&&(t[1]&&this.findWhere({id:"1"}).select(t[1]),t[2]&&this.findWhere({id:"2"}).select(t[2]))}catch(e){}}).bind(this))},parse:function(t){return this.extractNumberFormatSettings(t),s(t).chain().map(a(function(t){return!i(t.id)},"ignore")).map(a(function(t){return"0"===t.id},"ignore")).map(a(function(t){return"0"===t.id},"ftype")).map(function(t){return s(t).extend({options:s(t.options).map(a(function(e){return e.id===t.defaultId},"selected"))})}).value()},load:function(){return"pending"!==this._loaded.state()?this._loaded.promise():(this.fetch({app:this.app}).then(s(function(){this._loaded.resolve()}).bind(this)).fail(s(function(){this.app.report("Failed to load dashboard settings",["Could not connect to the server."]),this._loaded.reject()}).bind(this)),this._loaded.promise())},toAPI:function(t){return 0===this.length?{}:this.chain().map(function(t){return t.toJSON()}).filter(function(t){return!t.ignore}).reduce(function(t,e){return t[e.id]=s(e.options).findWhere({selected:!0}).id,t},{}).extend(t||{}).value()},fromState:function(t){s(t).each(function(t,e){this.get(e).select(t)},this)},getVisible:function(){return this.filter(function(t){return!t.get("ignore")})},extractNumberFormatSettings:function(t){var e={},n=s.find(t,function(t){return"number-format"===t.id});if(e.numberFormat=s.find(n.options,function(t){return t.id===n.defaultId}).name||"#,#.#",-1!==e.numberFormat.indexOf(",")){var i=s.find(t,function(t){return"number-group-separator"===t.id});e.groupSeparator=s.find(i.options,function(t){return t.id===i.defaultId}).name||","}else e.groupSeparator="";var a=s.find(t,function(t){return"number-decimal-separator"===t.id});e.decimalSeparator=s.find(a.options,function(t){return t.id===a.defaultId}).name||".",this.app.settings.numberFormatSettings=e;var r=s.find(t,function(t){return"number-multiplier"===t.id});this.app.settings.numberMultiplier=s.find(r.options,function(t){return t.id===r.defaultId}),this.app.settings.numberMultiplierDescription="1.0"===this.app.settings.numberMultiplier.name?"amp.dashboard:chart-tops-inunits":"0.001"===this.app.settings.numberMultiplier.name?"amp.dashboard:chart-tops-inthousands":"amp.dashboard:chart-tops-inmillions"}})},{"../backbone-dash":3,"./setting":21,jquery:"jquery",underscore:"underscore"}],23:[function(t,e,n){var i=t("d3-browserify"),a=t("./chart-view-base");e.exports=a.extend({uiDefaults:{big:!1,view:"multibar"},chartViews:["multibar","table"],chartOptions:{nvControls:!1},downloadChartOptions:{nvControls:!1,trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of","of"),n=app.translator.translateSync("amp.dashboard:total","total"),a=app.translator.translateSync(app.settings.numberMultiplierDescription),r=-1;r=t.data[0].disabled===!0?1:t.series.index;var s=t.x.raw+" "+app.translator.translateSync("amp.dashboard:aid-predictability-"+t.data[r].originalKey+"-"+this.model.get("measure"),""),o=t.data[1-r],l=o.values[t.x.index],c=0;l.y>0&&(c=t.y.raw/l.y);var u="<b>"+i.format("%")(c)+"</b>&nbsp<span>"+e+"</span>&nbsp"+t.x.raw+"&nbsp<span>"+n+"</span>";return{tt:{heading:s,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency")+" ("+a+")",footerText:u}}}})},{"./chart-view-base":27,"d3-browserify":"d3-browserify"}],24:[function(t,e,n){var i=t("d3-browserify"),a=t("./chart-view-base");e.exports=a.extend({uiDefaults:{big:!0,adjtype:"FAKE",view:"multibar"},chartViews:["multibar","table"],downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of","of"),n=app.translator.translateSync("amp.dashboard:total","total"),a=app.translator.translateSync(app.settings.numberMultiplierDescription);return{tt:{heading:t.x.raw+" "+t.series.key,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency")+" ("+a+")",footerText:"<b>"+i.format("%")(t.y.raw/this.model.get("total"))+"</b>&nbsp<span>"+e+"</span>&nbsp"+t.x.raw+"&nbsp<span>"+n+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].special&&this.model.set("limit",this.model.get("limit")+1)}})},{"./chart-view-base":27,"d3-browserify":"d3-browserify"}],25:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template("<script type=\"text/javascript\">\r\n	function openPreviewActivity(id) {\r\n		window.open('/aim/viewActivityPreview.do~public=true~pageId=2~activityId=' + id, '_blank');\r\n	}\r\n</script>\r\n\r\n<div class='chart-tops-info-category'>\r\n	<span>\r\n		<b><%= (context.x.fmt || context.x.raw) %></b> - <%= model.get('adjtype')%> -  		\r\n		<span data-i18n=\"<%= app.settings.numberMultiplierDescription %>\"></span>\r\n		<%= model.get('currency') %>\r\n	</span>\r\n</div>\r\n<div class=\"chart-tops-info-container\">\r\n	<div class=\"chart-tops-info-content\">\r\n		<% if(values === undefined) { %>\r\n			<img alt=\"\" src=\"/TEMPLATE/ampTemplate/dashboard/build/img/loading-icon.gif\">\r\n			<span data-i18n=\"amp.dashboard:download-rendering\">Rendering...</span>\r\n		<% } else { %>\r\n			<% var rowClass = ''; %>\r\n			<table>\r\n				<tr>\r\n					<th><span data-i18n=\"amp.dashboard:chart-tops-table-projecttitle\">Project Title</span></th>\r\n					<th><span data-i18n=\"amp.dashboard:chart-tops-table-amount\">Amount</span></th>\r\n				</tr>			\r\n			<% _(values).each(function(row, i) { %>\r\n          		<% 	if (i % 2 === 0) rowClass = 'odd_row';\r\n    				else rowClass = ''; %>\r\n    			<tr class=\"<%=rowClass%>\">\r\n    				<td>\r\n    					<span class='pointer' onclick='openPreviewActivity(<%=row.id%>)'><%=row.name%></span>\r\n    				</td>\r\n    				<td><%=row.formattedAmount%></td>\r\n    			</tr>\r\n        	<% }) %>\r\n        	</table>\r\n		<% } %>\r\n	</div>\r\n</div>");e.exports=a.View.extend({initialize:function(t){this.app=t.app,this.context=t.context,this.model=t.model,this.numberMultiplier=app.settings.find(function(t){return"number-multiplier"===t.id})},render:function(){var t=this;this.$el.html(r({model:this.model,context:this.context,values:void 0,numberMultiplier:this.numberMultiplier})),app.translator.translateDOM($(".dash-settings-modal"));var e=this.app.filter.serialize();return e.settings=this.app.settings.toAPI(),e.settings[0]=this.model.get("adjtype"),$.ajax({method:"POST",url:t.model.url+"/"+this.context.data[0].values[this.context.x.index].id,dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(e)}).done(function(e){t.$el.html(r({model:t.model,context:t.context,values:e.values,numberMultiplier:t.numberMultiplier})),app.translator.translateDOM($(".dash-settings-modal"))}),this}})},{"../backbone-dash":3,underscore:"underscore"}],26:[function(t,e,n){var i=t("d3-browserify"),a=t("./chart-view-base"),r=t("./chart-tops-info-modal");e.exports=a.extend({uiDefaults:{adjtype:"FAKE"},modalView:void 0,downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of-total","of total"),n=app.translator.translateSync(app.settings.numberMultiplierDescription);return{tt:{heading:t.x.raw,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency")+" ("+n+")",footerText:"<b>"+i.format("%")(t.y.raw/this.model.get("total"))+"</b>&nbsp<span>"+e+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].values[t.x.index].special?(this.model.set("limit",this.model.get("limit")+5),this.model.get("limit")>10&&this.model.set("big",!0)):this.model.get("showCategoriesInfo")===!0&&(this.modalView=new r({app:app,context:t,model:this.model}),this.openInfoWindow())},openInfoWindow:function(){var t="dash-settings-modal";this.app.modal("Category Detail",{specialClass:t,bodyEl:this.modalView.render().el,i18nTitle:"amp.dashboard:dashboard-chart-tops-info-modal"}),app.translator.translateDOM($("."+t))}})},{"./chart-tops-info-modal":25,"./chart-view-base":27,"d3-browserify":"d3-browserify"}],27:[function(t,e,n){var i=t("jquery").Deferred,a=t("underscore"),r=t("../backbone-dash"),s=t("../charts/chart"),o=t("../../ugly/util"),l=t("./download"),c=a.template('<div class="col-xs-12 <% if (!model.get(\'big\')) { %>col-md-6<% } else { %> big-chart<% } %>">\n\n  <div class="panel panel-chart">\n    <div class="panel-heading fix-title-height">\n      <span class="pull-right big-number">\n        <b class="chart-total"></b>\n        <span class="chart-currency"></span>\n      </span>\n      <h2 data-i18n="amp.dashboard:chart-<%= model.get(\'name\').replace(/ /g,\'\') %>"><%= model.get(\'title\') %></h2>\n    </div>\n\n    <div class="panel-body">\n      <div class="chart-container">\n        <h3 class="dash-chart-diagnostic text-center"></h3>\n        <div class="dash-chart-wrap">\n        </div>\n        <button type="button" class="btn btn-link btn-xs pull-right reset" style="display:none" data-i18n="amp.dashboard:chart-reset">reset others</button>\n      </div>\n    </div>\n\n    <div class="panel-footer clearfix">\n\n      <div class="pull-right">\n\n        <div class="btn-group">\n          <% _(views).each(function(view) { %>\n            <button type="button" data-view="<%= view %>"\n                class="chart-view btn btn-sm btn-<%= (view === model.get(\'view\')) ? \'primary\' : \'default\' %>">\n              <span class="glyphicon glyphicon-<%= {\n                bar: \'signal\',\n                multibar: \'signal\',\n                pie: \'adjust\',\n                table: \'th-list\'\n              }[view] %>"></span>\n            </button>\n          <% }) %>\n        </div>\n\n        <div class="btn-group">\n          <a\n            class="btn btn-sm btn-default download"\n            download="AMP <%= model.get(\'title\') %> - <%= (new Date()).toISOString().split(\'T\')[0] %>.png"\n            target="_blank">\n            <span class="glyphicon glyphicon-cloud-download"></span>\n          </a>\n          <button type="button" class="btn btn-sm btn-<%= model.get(\'big\') ? \'primary\' : \'default\' %> expand hidden-xs hidden-sm">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n          </button>\n        </div>\n\n      </div><!-- buttons in .pull-right -->\n\n      <% if (model.get(\'adjtype\')) { %>\n        <form class="form-inline dash-form dash-adj-type" role="form">\n          <select class="form-control like-btn-sm ftype-options">\n            <option>...</option>\n            <!-- gets populated after settings load -->\n          </select>\n          <span class="cheat-lineheight"></span>\n        </form>\n      <% } %>\n\n    </div>\n  </div>\n\n  <div class="export-modal"></div>\n</div>\n\n'),u=a.template('<option value="<%=opt.id%>" <%= current ? selected="selected" : \'\' %>><%=opt.name%></option>');e.exports=r.View.extend({uiDefaults:{big:!1,view:"bar"},events:{"change .dash-adj-type select":"changeAdjType","click .reset":"resetLimit","click .chart-view":"changeChartView","click .download":"download","click .expand":"big","click .retry":"render"},chartViews:["bar","pie","table"],initialize:function(t){this.app=t.app,this.model.set(this.uiDefaults),this.rendered=!1,this._stateWait=new i,this.message=null,this.app.savedDashes.length?this.app.state.loadPromise.always(this._stateWait.resolve):this._stateWait.resolve(),this.listenTo(this.app.filter,"apply",this.updateData),this.listenTo(this.app.settings,"change",this.updateData),this.listenTo(this.model,"change:adjtype",this.render),this.listenTo(this.model,"change:limit",this.updateData),this.listenTo(this.model,"change:view",this.render),this.app.state.register(this,"chart:"+this.model.url,{get:a.partial(a(this.model.pick).bind(this.model),"limit","adjtype","view","big"),set:a(this.model.set).bind(this.model),empty:null}),a.bindAll(this,"showChart","failLoading"),this.getTTContent&&a.bindAll(this,"getTTContent"),this.chartClickHandler&&a.bindAll(this,"chartClickHandler")},render:function(){var t={views:this.chartViews,model:this.model,chart:this.chartEl,util:o};return this.$el.html(c(t)),this.message=this.$(".dash-chart-diagnostic"),this.chartContainer=this.$(".dash-chart-wrap"),void 0!==this.model.get("adjtype")?this.app.settings.load().done(a(function(){this.rendered=!0;var t=this.app.settings.get("0");t?"FAKE"===this.model.get("adjtype")&&this.model.set("adjtype",t.get("defaultId")):this.app.report("Could not find Funding Type settings"),this.$(".ftype-options").html(a(t.get("options")).map(function(t){return u({opt:t,current:t.id===this.model.get("adjtype")})},this))}).bind(this)):this.rendered=!0,"pending"!==this._stateWait.state()&&this.updateData(),this.app.translator.translateDOM(this.el),this},updateData:function(){if(this.app.rendered===!0&&this.rendered){if("pending"===this._stateWait.state())return this.message.html("Loading saved settings...").attr("data-i18n","amp.dashboard:chart-loading-saved-settings"),void app.translator.translateDOM($(".chart-container"));this.chartContainer.empty(),this.message.html('<span data-i18n="amp.dashboard:loading">...</span>').fadeIn(100),this.app.translator.getTranslations().done(a(function(){this.model.fetch({type:"POST",data:JSON.stringify(this.app.filter.serialize())}).always(a(function(){}).bind(this)).done(this.showChart).fail(this.failLoading)}).bind(this)).fail(a(function(){this.app.report("Could not load translations",["Refreshing the page may fix the issue."])}).bind(this))}},showChart:function(){if(!this.model.hasData())return this.message.html("No Data Available").attr("data-i18n","amp.dashboard:chart-no-data-available"),app.translator.translateDOM($(".chart-container")),void this.resetNumbers();var t=s(this.model.get("view"),this.model.get("processed"),this.getChartOptions());this.chartContainer.html(t.el),this.renderNumbers();var e=this.model.get("limit");e&&this.$(".reset")[e===this.model.defaults.limit?"hide":"show"](),this.message.stop().fadeOut(200),this.beautifyLegends(this)},getChartOptions:function(){var t=a(a(this.chartOptions).clone()||{}).defaults({trimLabels:!this.model.get("big"),getTTContent:this.getTTContent,clickHandler:this.chartClickHandler,width:this.$(".panel-body").width(),height:this.$(".panel-body").height()});return t},failLoading:function(){this.message.html("Failed to load data <small>"+arguments[2]+' <button type="button" class="retry btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Retry</button></small>').show(),console.error("failed loading chart :(",arguments)},renderNumbers:function(){this.model.get("total")&&this.$(".chart-total").html(this.model.get("sumarizedTotal")),this.$(".chart-currency").html(this.model.get("currency"))},resetNumbers:function(){this.$(".chart-total").html(""),this.$(".chart-currency").html("")},resetLimit:function(){this.model.set("limit",this.model.defaults.limit)},changeAdjType:function(t){var e=t.currentTarget.value;this.model.set("adjtype",e)},changeChartView:function(t){var e=o.data(t.currentTarget,"view");this.model.set("view",e)},big:function(){this.model.set("big",!this.model.get("big"))},setClear:function(t){this.$el[t?"addClass":"removeClass"]("clearfix")},download:function(){var t=new l({app:this.app,model:this.model,chartOptions:a(this.getChartOptions()).omit("height","width")}),e="dash-download-modal";this.app.modal("Download chart",{bodyEl:t.render().el,specialClass:e,i18nTitle:"amp.dashboard:download-download-chart"}),app.translator.translateDOM($("."+e))},beautifyLegends:function(t){var e=!1,n=!1;void 0!=t.model&&void 0!=t.model.get("values")&&t.model.get("values").length>0&&(e=!0),void 0!=t.model&&void 0!=t.model.get("processed")&&t.model.get("processed").length>1&&(n=!0),$(this.$el).find(".nv-series").each(function(i,a){e&&!n?void 0!=t.model.get("values")[i]?$(a).data("data-title",t.model.get("values")[i].name):$(a).data("data-title",app.translator.translateSync("amp.dashboard:chart-FundingType-others","Others")):n&&void 0!=t.model.get("processed")[i]&&$(a).data("data-title",t.model.get("processed")[i].key),$(a).data("data-title")&&$(a).hover(function(){var t=$(this).offset();nv.tooltip.show([t.left,t.top],"<div class='panel panel-primary panel-popover'><div class='panel-heading'>"+$(a).data("data-title")+"</div></div>")},function(){nv.tooltip.cleanup()})})}})},{"../../ugly/util":41,"../backbone-dash":3,"../charts/chart":8,"./download":30,jquery:"jquery",underscore:"underscore"}],28:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=t("../models/chart-tops"),s=t("../models/chart-aid-predictability"),o=t("../models/chart-funding-type"),l=t("./chart-tops"),c=t("./chart-aid-predictability"),u=t("./chart-funding-type");e.exports=a.View.extend({className:"row",initialize:function(t){this.app=t.app,this.chartViews=this.collection.map(function(t){var e=t instanceof r?l:t instanceof s?c:t instanceof o?u:null;return new e({model:t,app:this.app})},this),this.listenToOnce(this.app.filter,"apply",this.applyFilter),this.listenTo(this.collection,"change:big",this.injectBreaks)},render:function(){return this.$el.html(i(this.chartViews).map(function(t){return t.render().el})),this.injectBreaks(),this},injectBreaks:function(t){if(i(this.chartViews).reduce(function(t,e){return e.setClear(t),t?!1:e.model.get("big")?!1:!0},!1),t){var e=i(this.chartViews).find(function(e){return e.model===t});e&&e.render()}}})},{"../backbone-dash":3,"../models/chart-aid-predictability":13,"../models/chart-funding-type":14,"../models/chart-tops":16,"./chart-aid-predictability":23,"./chart-funding-type":24,"./chart-tops":26,underscore:"underscore"}],29:[function(t,e,n){var i=t("../backbone-dash"),a=t("./filters"),r=t("./settings"),s=t("./share");e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app,this.settings=new r({app:this.app}),this.filters=new a({app:this.app}),this.share=new s({app:this.app})},render:function(){return this.$el.html([this.filters.render().el,this.settings.render().el,this.share.render().el]),this}})},{"../backbone-dash":3,"./filters":32,"./settings":35,"./share":36}],30:[function(t,e,n){var i=t("underscore"),a=t("babyparse"),r=t("../../ugly/lib-load-hacks").canvg,s=t("../../ugly/util"),i=t("underscore"),o=t("../backbone-dash"),l=t("../charts/chart"),s=t("../../ugly/util"),c=i.template('<h4 data-i18n="amp.dashboard:download-preview">Preview:</h4>\n\n<!-- This \'modal\' div fixes AMP-19525: In FF when the chart is drawn (for less than a second) in \'svg-wrap\', sometimes the mouse cursor is over one of the bars and triggers the tooltip,\nthat process is not fully performed thus resulting in incomplete html which is rejected by the browser :(  -->\n<div class="modal-preview-area">\n</div>\n<div class="preview-area">\n	<div class="svg-wrap hidden">\n  	</div>\n  	<div class="canvas-wrap hidden">\n  	</div>\n  	<div class="table-wrap hidden">\n  	</div>\n</div>\n\n<div class="text-center">\n  <a class="btn btn-success download-chart disabled">\n    <span class="glyphicon glyphicon-download"></span>\n    <span data-i18n="amp.dashboard:download-rendering" class="word">Rendering...</span>\n  </a>\n</div>\n');e.exports=o.View.extend({adjTypeTranslation:{"Actual Commitments":"amp.dashboard:ftype-actual-commitment","Actual Disbursements":"amp.dashboard:ftype-actual-disbursement","Actual Expenditures":"amp.dashboard:ftype-actual-expenditure","Planned Commitments":"amp.dashboard:ftype-planned-commitment","Planned Disbursements":"amp.dashboard:ftype-planned-disbursement","Planned Expenditures":"amp.dashboard:ftype-planned-expenditures"},initialize:function(t){this.app=t.app,this.dashChartOptions=i({}).extend(t.chartOptions,{height:450,width:970,trimLabels:!1})},render:function(){if(this.$el.html(c()),"table"===this.model.get("view"))this.renderCSV(this.$(".preview-area .table-wrap").removeClass("hidden"));else var t=this,e=!1,n=window.setInterval(function(){$(".dash-download-modal").closest(".in").length>0&&(window.clearInterval(n),nv.tooltip.cleanup(),e===!1&&(e=!0,t.renderChart(t.$(".preview-area .svg-wrap").removeClass("hidden"),t.$(".preview-area .canvas-wrap"))))},100);return this},renderChart:function(t,e){i(this.app.browserIssues).findWhere({feature:"canvas"})&&this.app.viewFail(this,"Chart export requires a modern web browser");var n=this.model.get("view"),a=this.model.get("processed"),r=document.createElement("canvas"),s=l(n,a,i({}).extend(this.dashChartOptions,{height:this.dashChartOptions.height-42})).el;t.html(s),this.prepareCanvas(r,this.dashChartOptions.height,this.dashChartOptions.width),this.chartToCanvas(s,r,function(){t.hide();var n=new Image;n.src=r.toDataURL("image/png"),e.html(n),$(e).removeClass("hidden"),$(".modal-preview-area").remove(),this.makeDownloadable(n.src,"chart",".png")})},prepareCanvas:function(t,e,n){var i=t.getContext("2d"),a=(void 0!==this.model.get("sumarizedTotal")?": "+this.model.get("sumarizedTotal")+" ":" ")+this.model.get("currency"),r=this.model.get("adjtype");r&&(a=r+a),t.setAttribute("width",n),t.setAttribute("height",e),i.beginPath(),i.rect(0,0,n,e),i.fillStyle="#fff",i.fill(),i.fillStyle="#163f66",i.font='bold 22px "Open Sans"',i.fillText(this.model.get("name").toUpperCase(),10,32),i.fillStyle="#333",i.textAlign="right",i.fillText(a,n-10,32),i.textAlign="left",i.font='normal 12px "sans-serif"'},chartToCanvas:function(t,e,n){var a=i(n).bind(this);window.setTimeout(function(){this.app.tryTo(function(){r(e,t.parentNode.innerHTML,{offsetY:42,ignoreDimensions:!0,ignoreClear:!0,ignoreMouse:!0,renderCallback:a})},this)}.bind(this),1500)},renderCSV:function(t){var e,n,r,o,l=this.model.get("processed"),c=this.model.get("currency"),u=this.model.get("adjtype")||!1,d=this,h=i(l).pluck("key");e=i(l).chain().pluck("values").transpose().map(function(t){return i(t).reduce(function(t,e){return t.push(e.y),t},[t[0].x])}).map(function(t){if(t.push(c||""),u){var e=d.adjTypeTranslation[u],n=this.app.translator.translateSync(e,u);t.push(n)}return t}).value(),n=[];var p=this.app.translator.translateSync("amp.dashboard:download-amount","Amount"),f=this.app.translator.translateSync("amp.dashboard:currency","Currency"),g=this.app.translator.translateSync("amp.dashboard:type","Type"),m=this.app.translator.translateSync("amp.dashboard:year","Year");this.model.url.indexOf("/tops")>-1?(n.push(this.model.get("title")),n.push(p),n.push(f),n.push(g)):this.model.url.indexOf("/aid-predictability")>-1?(n.push(m),i.each(h,function(t){n.push(t)}),n.push(f)):this.model.url.indexOf("/ftype")>-1&&(n.push(m),i.each(h,function(t){n.push(t)}),n.push(f),n.push(g)),e.unshift(n),r=a.unparse(e,{quotes:!0}),o=document.createElement("textarea"),o.setAttribute("class","csv-preview"),o.value=r,t.html(o),this.app.hasIssue("download")||(r=s.textAsDataURL(r)),window.setTimeout(i(function(){this.makeDownloadable(r,"data",".csv")}).bind(this),100)},makeDownloadable:function(t,e,n){var i=this.model.get("name")+n,a=this.$(".download-chart").removeClass("disabled");a.find(".word").text("Download "+e).attr("data-i18n","amp.dashboard:download-download-"+e),app.translator.translateDOM(a),this.app.hasIssue("download")?this.app.hasIssue("flash")?this.app.report("Your browser is missing features to initiate the download",['You might be able to save this chart manually by right-clicking the preview and selecting "Save Picture As...']):this.app.tryTo(function(){window.Downloadify.create(a[0],{swf:"/TEMPLATE/ampTemplate/commonMedia/downloadify.swf",downloadImage:"/TEMPLATE/ampTemplate/commonMedia/download-button-states.png?rev=4",transparent:!0,width:176,height:34,filename:i,data:t.replace("data:text/plain;base64,//","").replace("data:image/png;base64,",""),dataType:".csv"===n?"string":"base64",append:!0,onError:function(){this.app.report("Could not download the file.")}})},this):this.$(".download-chart").attr("href",t).attr("download",i),-1!==n.indexOf("csv")&&$(".modal-preview-area").remove()}})},{"../../ugly/lib-load-hacks":37,"../../ugly/util":41,"../backbone-dash":3,"../charts/chart":8,babyparse:42,underscore:"underscore"}],31:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="container">\n  <header class="spaced text-center">\n    <h2>\n      The application encountered an\n      <span class="text-danger">error</span>\n      <small>:(</small>\n    </h2>\n    <p><%= err %></p>\n  </header>\n</div>\n');e.exports=a.View.extend({initialize:function(t){this.app=t.app,this.err=t.err},render:function(){return this.$el.html(r({err:this.err})),this}})},{"../backbone-dash":3,underscore:"underscore"}],32:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="col-xs-12 col-md-6">\n  <div class="panel">\n    <div class="panel-body">\n      <button type="button" class="btn btn-sm btn-default pull-right show-filters">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:filters-edit">Edit filters</span>\n      </button>\n      <h3 class="inline-heading" data-i18n="amp.common:title-filters">Filters</h3>\n      <div class="applied-filters">\n        <em data-i18n="amp.common:filters-loading">Loading...</em>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="filter-popup"></div>\n'),s=i.template('<% if (!countApplied) { %>\n  <em data-i18n="amp.dashboard:filters-none-applied">No filters applied</em>\n<% } else { %>\n  <span>\n    <button class="btn btn-default btn-sm show-filter-details">\n      <span class="glyphicon glyphicon-eye-open"></span>\n      <span data-i18n="amp.dashboard:filters-show-settings">Show filter settings</span>\n      (<b><%= countApplied %></b>)\n    </button>\n  </span>\n<% } %>\n'),o=i.template('<div>\n  <h4 class="inline-heading" data-i18n="amp.dashboard:filters-active">Active Filters</h4>\n  <button type="button" class="btn btn-sm btn-default hide-filter-details">\n    <span class="glyphicon glyphicon-eye-close"></span>\n    <span data-i18n="amp.dashboard:filters-hide-details">Hide filter details</span>\n  </button>\n</div>\n<% _(applied).each(function(filter) { %>\n  <h5><%= filter.name %></h5>\n  <ul>\n    <% _(filter.detail).each(function(detail) { %>\n      <li><%= detail %></li>\n    <% }) %>\n  </ul>\n<% }) %>'),l=t("../../../../../../../ampTemplate/module/amp-log")("dashboard:filters:view");e.exports=a.View.extend({events:{"click .show-filters":"showFilter","click .show-filter-details":"showFilterDetails","click .hide-filter-details":"hideFilterDetails"},initialize:function(t){this.finishedFirstLoad=!1,this.app=t.app,this.listenTo(this.app.filter,"cancel",this.hideFilter),this.listenTo(this.app.filter,"apply",this.applyFilter),this.app.settings.load().done(i(function(){var t={};this.app.filter.extractDates(this.app.settings.models,t,"dashboard-default-min-date","dashboard-default-max-date"),this.app.filter.loaded.done(i(function(){console.error("filters loaded"),this.app.state.register(this,"filters",{get:i(function(){return{filter:this.app.filter.serialize()}}).bind(this),set:i(function(e){void 0!==e.filter.otherFilters&&void 0!==e.filter.otherFilters.date?l.log("Using saved filters."):(l.log("Using default filter dates."),e.filter=t),this.app.filter.deserialize(e.filter),this.app.filter.finishedFirstLoad=!0}).bind(this),empty:{filter:{}}})}).bind(this))}).bind(this))},render:function(){return this.$el.html(r()),this.app.filter.setElement(this.el.querySelector("#filter-popup")),
this.hideFilter(),this.app.filter.loaded.done(i(this.renderApplied).bind(this)).fail(i(function(){this.$(".applied-filters").html('<strong class="text-danger filters-err">Failed to load filters</strong> <a href="" class="btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a>'),this.$("button").addClass("disabled")}).bind(this)),this},renderApplied:function(){var t=this.app.filter.serializeToModels(),e=i(t.columnFilters).keys().length;e+=!!t.otherFilters,this.$(".applied-filters").html(s({countApplied:e})),this.app.translator.translateDOM(this.el)},showFilter:function(){this.app.filter.showFilters(),this.$("#filter-popup").show()},hideFilter:function(){this.$("#filter-popup").hide()},applyFilter:function(){this.hideFilter(),this.renderApplied()},showFilterDetails:function(){var t=this.app.filter.serializeToModels(),e=i(t.columnFilters).map(function(t,e){return{name:t.filterName||e,id:e.replace(/[^\w]/g,""),detail:i(t).map(function(n){return void 0!==n.attributes?n.get("name"):n!==e&&n!==t.filterName?n:void 0})}});if(t.otherFilters){var n=t.otherFilters.date,a=app.translator.translateSync("amp.dashboard:date-range","Date Range");e.push({name:a,detail:[n.start+"&mdash;"+n.end]})}this.$(".applied-filters").html(o({applied:e})),this.app.translator.translateDOM(this.el)},hideFilterDetails:function(){this.renderApplied()}})},{"../../../../../../../ampTemplate/module/amp-log":45,"../backbone-dash":3,underscore:"underscore"}],33:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=(t("amp-state/index").StateLoadError,t("./controls")),s=t("./charts"),o=t("../models/charts-collection"),l=t("amp-boilerplate"),c=t("../models/chart-tops"),u=t("../models/chart-aid-predictability"),d=t("../models/chart-funding-type"),h=i.template('<div class="container">\n</div>\n'),p=i.template('<div class="modal fade" id="<%= m.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog <%= m.specialClass %>">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <h4 class="modal-title text-<%= m.tone %>" data-i18n="<%= m.i18nTitle %>"><%= m.title %></h4>\n      </div>\n      <div class="modal-body">\n        <% if (m.content) { %>\n          <%= m.content %>\n        <% } %>\n        <% if (m.messages) { %>\n          <% _(m.messages).each(function(message) { %>\n            <p><%= message %></p>\n          <% }) %>\n        <% } %>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-<%= m.tone %>" data-i18n="amp.dashboard:close" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n'),f=t("../models/enabled-charts-collection");e.exports=a.View.extend({initialize:function(t){this.app=t.app,this.app.settings.load(),this.controls=new r({app:this.app});var e=new f;e.fetchData(),void 0!==e.models[0].get("error")&&(window.location="/");var n=[];i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Donors"===t})&&n.push(new c({name:"Top Donor Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/do"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Donor Group"===t})&&n.push(new c({name:"Top Donor Groups",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/dg"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Regions"===t})&&n.push(new c({name:"Top Regions",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/re"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Top Sectors"===t})&&n.push(new c({name:"Top Sectors",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ps"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Aid Predictability"===t})&&n.push(new u({name:"Aid Predictability"},{app:this.app,url:"/rest/dashboard/aid-predictability"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Funding Type"===t})&&n.push(new d({name:"Funding Type"},{app:this.app,url:"/rest/dashboard/ftype"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Responsible Organizations"===t})&&n.push(new c({name:"Responsible Organizations",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ro"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Beneficiary Agencies"===t})&&n.push(new c({name:"Beneficiary Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ba"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Executing Agencies"===t})&&n.push(new c({name:"Executing Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ea"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Implementing Agencies"===t})&&n.push(new c({name:"Implementing Agencies",big:!1,view:"bar"},{app:this.app,url:"/rest/dashboard/tops/ia"})),i.find(e.models[0].get("DASHBOARDS"),function(t){return"Peace-building and State-building Goals"===t})&&n.push(new c({name:"Peace-building and State-building Goals",big:!0,showCategoriesInfo:!0,view:"pie"},{app:this.app,url:"/rest/dashboard/tops/ndd"}));var a=new o(n,{app:this.app});this.charts=new s({app:this.app,collection:a}),this.headerWidget=new l.layout({caller:"DASHBOARD"})},render:function(){return this.$el.html(h()),this.$(".container").html([this.controls.render().el,this.charts.render().el]),this},modal:function(t,e){e=i({title:t,id:i.uniqueId("modal")}).extend(e),this.$el.parent().append(p({m:e}));var n=this.$el.parent().find("#"+e.id);return e.bodyEl&&n.find(".modal-body").html(e.bodyEl),n.modal(),n[0]}})},{"../backbone-dash":3,"../models/chart-aid-predictability":13,"../models/chart-funding-type":14,"../models/chart-tops":16,"../models/charts-collection":17,"../models/enabled-charts-collection":18,"./charts":28,"./controls":29,"amp-boilerplate":46,"amp-state/index":75,underscore:"underscore"}],34:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=t("../../../../../../../ampTemplate/module/amp-log")("amp:dashboard:settings:modal"),s=i.template('<div class="tab-content filter-options">\n  <div class="tab-pane active">\n    <ul class="sub-filters-titles nav nav-pills nav-stacked">\n      <% _(settings.getVisible()).each(function(setting) { %>\n        <li <%= setting.id === current.id ? \'class="active"\' : \'\' %>>\n          <a class="setting-select" href="#<%= setting.id %>"><span><%= setting.get(\'name\') %></span></a>\n        </li>\n      <% }) %>\n    </ul>\n    <div class="sub-filters-content">\n      <select class="form-control setting-value">\n        <% _(current.get(\'options\')).each(function(option) { %>\n          <option value="<%= option.value %>" <%= option.selected ? \'selected="selected"\' : \'\' %>><%= option.name %></option>\n        <% }) %>\n      </select>\n    </div>\n  </div>\n</div>\n');e.exports=a.View.extend({events:{"click .setting-select":"selectSetting","change .setting-value":"changeSetting"},initialize:function(t){this.app=t.app,r.log("Initialized with",t)},render:function(){this.current||(this.current=this.app.settings.getVisible()[0],r.log("Render requested, but there's no  current setting. Trying to guess it")),this.$el.html(s({settings:this.app.settings,current:this.current}));var t=this;return r.onDebug(function(){r.log("Rendered width current=",t.current.toJSON())}),this},selectSetting:function(t){t.preventDefault();var e=t.currentTarget.hash.slice(1);this.current=this.app.settings.get(e);var n=this;r.onDebug(function(){r.log("Current setting changed to",n.current.toJSON())}),this.render()},changeSetting:function(t){var e=t.currentTarget.value;if(r.log("Changing",e,"setting"),!this.app.hasIssue("localStorage")&&(1==this.current.get("id")||2==this.current.get("id"))){var n;try{n=JSON.parse(localStorage.settings)}catch(t){}finally{("object"!=typeof n||null===n)&&(n={})}var i=this.current.get("id");n[i]=e,localStorage.settings=JSON.stringify(n)}this.current.select(e)}})},{"../../../../../../../ampTemplate/module/amp-log":45,"../backbone-dash":3,underscore:"underscore"}],35:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=t("./settings-modal"),s=i.template('<div class="col-xs-12 col-sm-6 col-md-3">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:dashboard-settings" class="inline-heading">Settings</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-settings-button">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:settings-edit">edit settings</span>\n      </button>\n    </div>\n  </div>\n</div>\n');e.exports=a.View.extend({events:{"click .dash-settings-button":"editSettings"},initialize:function(t){this.app=t.app,this.modalView=new r({app:this.app,collection:this.collection}),this.app.settings._loaded.done(i(function(){this.app.state.register(this,"settings",{get:this.app.settings.toAPI,set:this.app.settings.fromState})}).bind(this))},render:function(){return this.$el.html(s()),this},editSettings:function(){var t="dash-settings-modal";this.app.modal("Settings",{specialClass:t,bodyEl:this.modalView.render().el,i18nTitle:"amp.dashboard:dashboard-settings"}),app.translator.translateDOM($("."+t))}})},{"../backbone-dash":3,"./settings-modal":34,underscore:"underscore"}],36:[function(t,e,n){var i=t("underscore"),a=t("../backbone-dash"),r=i.template('<div class="col-xs-12 col-sm-6 col-md-3">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:share-dashboard-top" class="inline-heading">Share</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-share-button">\n        <span class="glyphicon glyphicon-link"></span>\n        <span data-i18n="amp.dashboard:share-link">link</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="dash-share-modal modal fade" id="<%= details.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="panel panel-primary">\n      <div class="panel-heading fix-title-height">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <span data-i18n="amp.dashboard:share-dashboard">Share this dashboard view</span>\n      </div>\n      <div class="panel-body">\n        <form role="form">\n          <label data-i18n="amp.dashboard:share-link" for="dash-share-url">Link</label>\n          <input type="url" class="form-control" id="dash-share-url" />\n        </form>\n      </div>\n      <div class="panel-footer">\n        <button type="button" class="btn btn-primary" data-i18n="amp.dashboard:close" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=a.View.extend({events:{"click .dash-share-button":"share"},initialize:function(t){this.app=t.app},render:function(){return this.$el.html(r({details:{}})),this},share:function(){var t=app.translator.translateSync("amp.dashboard:saving-state","Saving dashboard state, please wait...");this.$("#dash-share-url").attr("disabled","disabled").val(t);var e=this.app.state.freeze();this.listenToOnce(this.app.savedDashes,"request",function(t,e){e.done(i(function(){var e=t.get("id");this.app.url.hash(this.app.state.toHash(e),{silent:!0}),this.$("#dash-share-url").removeAttr("disabled").val(this.app.url.full())}).bind(this)).fail(i(function(){this.$("#dash-share-url").val("Error: could not save dashboard for sharing.")}).bind(this))}),this.app.savedDashes.create({title:"Dashboard",description:"Saved dashboard",stateBlob:e},{app:this.app}),this.$(".dash-share-modal").modal()}})},{"../backbone-dash":3,underscore:"underscore"}],37:[function(t,e,n){t("nvd3"),t("./underscore-transpose"),window.RGBColor=t("./lib-src/rgbcolor"),t("./lib-src/canvg"),e.exports={canvg:window.canvg}},{"./lib-src/canvg":38,"./lib-src/rgbcolor":39,"./underscore-transpose":40,nvd3:44}],38:[function(t,e,n){!function(){function t(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(t){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return n++,"canvg"+n},e.Definitions={},e.Styles={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(window.DOMParser){var i=new DOMParser;return i.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(e.ctx,t,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var a=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),a.hasValue()&&(i.attribute("patternTransform",!0).value=a.value)}return i.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(t){return 96},e.Property.prototype.getEM=function(t){var n=12,i=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(t)),n},e.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var a=this.numValue();return n&&1>a?a*e.ViewPort.ComputeSize(t):a},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,i,a,r,s){var o=null!=s?this.Parse(s):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:r||o.fontFamily,fontSize:a||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:i||o.fontWeight,fontVariant:n||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var i={},a=e.trim(e.compressSpaces(n||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",o=0;o<a.length;o++)r.fontStyle||-1==t.Styles.indexOf(a[o])?r.fontVariant||-1==t.Variants.indexOf(a[o])?r.fontWeight||-1==t.Weights.indexOf(a[o])?r.fontSize?"inherit"!=a[o]&&(s+=a[o]):("inherit"!=a[o]&&(i.fontSize=a[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=a[o]&&(i.fontWeight=a[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=a[o]&&(i.fontVariant=a[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=a[o]&&(i.fontStyle=a[o]),r.fontStyle=!0);return""!=s&&(i.fontFamily=s),i}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),i=[],a=0;a<n.length;a+=2)i.push(new e.Point(n[a],n[a+1]));return i},e.BoundingBox=function(t,e,n,a){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,a,r){var s=t+2/3*(n-t),o=e+2/3*(i-e),l=s+1/3*(a-t),c=o+1/3*(r-e);this.addBezierCurve(t,e,s,l,o,c,a,r)},this.addBezierCurve=function(t,e,n,a,r,s,o,l){var c=[t,e],u=[n,a],d=[r,s],h=[o,l];for(this.addPoint(c[0],c[1]),this.addPoint(h[0],h[1]),i=0;i<=1;i++){var p=function(t){return Math.pow(1-t,3)*c[i]+3*Math.pow(1-t,2)*t*u[i]+3*(1-t)*Math.pow(t,2)*d[i]+Math.pow(t,3)*h[i]},f=6*c[i]-12*u[i]+6*d[i],g=-3*c[i]+9*u[i]-9*d[i]+3*h[i],m=3*u[i]-3*c[i];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(0>v)){var b=(-f+Math.sqrt(v))/(2*g);b>0&&1>b&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)));var y=(-f-Math.sqrt(v))/(2*g);y>0&&1>y&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)))}}else{if(0==f)continue;var x=-m/f;x>0&&1>x&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,a)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],a=this.m[1],r=this.m[3],s=this.m[5],o=0,l=0,c=1,u=1/(e*(r*c-s*l)-n*(a*c-s*o)+i*(a*l-r*o));t.transform(u*(r*c-s*l),u*(s*o-a*c),u*(i*l-n*c),u*(e*c-i*o),u*(n*s-i*r),u*(i*a-e*s))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),a=0;a<i.length;a++){var r=e.trim(i[a].split("(")[0]),s=i[a].split("(")[1].replace(")",""),o=new this.Type[r](s);o.type=r,this.transforms.push(o)}},e.AspectRatio=function(t,n,i,a,r,s,o,l,c,u){n=e.compressSpaces(n),n=n.replace(/^defer\s/,"");var d=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",p=i/a,f=r/s,g=Math.min(p,f),m=Math.max(p,f);"meet"==h&&(a*=g,s*=g),"slice"==h&&(a*=m,s*=m),c=new e.Property("refX",c),u=new e.Property("refY",u),c.hasValue()&&u.hasValue()?t.translate(-g*c.toPixels("x"),-g*u.toPixels("y")):(d.match(/^xMid/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i/2-a/2,0),d.match(/YMid$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,r/2-s/2),d.match(/^xMax/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i-a,0),d.match(/YMax$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,r-s)),"none"==d?t.scale(p,f):"meet"==h?t.scale(g,g):"slice"==h&&t.scale(m,m),t.translate(null==o?0:-o,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,n){var i=this.attributes[t];return null!=i?i:(1==n&&(i=new e.Property(t,""),this.attributes[t]=i),i||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,i){var a=this.styles[t];if(null!=a)return a;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=i){var s=this.parent;if(null!=s){var o=s.style(t);if(null!=o&&o.hasValue())return o}}return 1==n&&(a=new e.Property(t,""),this.styles[t]=a),a||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var i=t;n&&(i=e.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];this.attributes[i.nodeName]=new e.Property(i.nodeName,i.nodeValue)}var a=e.Styles[t.nodeName];if(null!=a)for(var r in a)this.styles[r]=a[r];if(this.attribute("class").hasValue())for(var s=e.compressSpaces(this.attribute("class").value).split(" "),o=0;o<s.length;o++){if(a=e.Styles["."+s[o]],null!=a)for(var r in a)this.styles[r]=a[r];if(a=e.Styles[t.nodeName+"."+s[o]],null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("id").hasValue()){var a=e.Styles["#"+this.attribute("id").value];if(null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),n=0;n<a.length;n++)if(""!=e.trim(a[n])){var l=a[n].split(":"),r=e.trim(l[0]),c=e.trim(l[1]);this.styles[r]=new e.Property(r,c)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var u=t.childNodes[n];if(1==u.nodeType&&this.addChild(u,!0),this.captureTextNodes&&(3==u.nodeType||4==u.nodeType)){var d=u.nodeValue||u.text||"";""!=e.trim(e.compressSpaces(d))&&this.addChild(new e.Element.tspan(u),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(t.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new e.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(t.strokeStyle=n)}else if(this.style("stroke").hasValue()){var a=this.style("stroke");"currentColor"==a.value&&(a.value=this.style("color").value),t.strokeStyle="none"==a.value?"rgba(0,0,0,0)":a.value}if(this.style("stroke-opacity").hasValue()){var a=new e.Property("stroke",t.strokeStyle);a=a.addOpacity(this.style("stroke-opacity")),t.strokeStyle=a.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=e.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(s):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=s:"undefined"==typeof t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=o:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=o:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=o)}if("undefined"!=typeof t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new e.Transform(this.attribute("transform").value);l.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var c=this.style("clip-path",!1,!0).getDefinition();null!=c&&c.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),a=1;a<n.length-1;a++)i.render(t,n[a][0],n[a][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),i=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var a=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(a=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(a,r),t.lineTo(n,r),t.lineTo(n,i),t.lineTo(a,i),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var s=e.ToNumberArray(this.attribute("viewBox").value),o=s[0],l=s[1];n=s[2],i=s[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),i,o,l,this.attribute("refX").value,this.attribute("refY").value),
e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(s[2],s[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,a/2),o=Math.min(o,r/2),null!=t&&(t.beginPath(),t.moveTo(n+s,i),t.lineTo(n+a-s,i),t.quadraticCurveTo(n+a,i,n+a,i+o),t.lineTo(n+a,i+r-o),t.quadraticCurveTo(n+a,i+r,n+a-s,i+r),t.lineTo(n+s,i+r),t.quadraticCurveTo(n,i+r,n,i+r-o),t.lineTo(n,i+o),t.quadraticCurveTo(n,i,n+s,i),t.closePath()),new e.BoundingBox(n,i,n+a,i+r)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),a=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-a,i-a,n+a,i+a)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,s-a),t.bezierCurveTo(r+n*i,s-a,r+i,s-n*a,r+i,s),t.bezierCurveTo(r+i,s+n*a,r+n*i,s+a,r,s+a),t.bezierCurveTo(r-n*i,s+a,r-i,s+n*a,r-i,s),t.bezierCurveTo(r-i,s-n*a,r-n*i,s-a,r,s-a),t.closePath()),new e.BoundingBox(r-i,s-a,r+i,s+a)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var i=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var a=n.getAsCurrentPoint();for(n.addMarker(a),i.addPoint(a.x,a.y),null!=t&&t.moveTo(a.x,a.y),n.start=n.current;!n.isCommandOrEnd();){var a=n.getAsCurrentPoint();n.addMarker(a,n.start),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var r=n.current,a=n.getAsCurrentPoint();n.addMarker(a,r),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var s=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var s=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getPoint(),c=n.getAsControlPoint(),u=n.getAsCurrentPoint();n.addMarker(u,c,l),i.addBezierCurve(o.x,o.y,l.x,l.y,c.x,c.y,u.x,u.y),null!=t&&t.bezierCurveTo(l.x,l.y,c.x,c.y,u.x,u.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getReflectedControlPoint(),c=n.getAsControlPoint(),u=n.getAsCurrentPoint();n.addMarker(u,c,l),i.addBezierCurve(o.x,o.y,l.x,l.y,c.x,c.y,u.x,u.y),null!=t&&t.bezierCurveTo(l.x,l.y,c.x,c.y,u.x,u.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var o=n.current,c=n.getAsControlPoint(),u=n.getAsCurrentPoint();n.addMarker(u,c,c),i.addQuadraticCurve(o.x,o.y,c.x,c.y,u.x,u.y),null!=t&&t.quadraticCurveTo(c.x,c.y,u.x,u.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var o=n.current,c=n.getReflectedControlPoint();n.control=c;var u=n.getAsCurrentPoint();n.addMarker(u,c,c),i.addQuadraticCurve(o.x,o.y,c.x,c.y,u.x,u.y),null!=t&&t.quadraticCurveTo(c.x,c.y,u.x,u.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var o=n.current,d=n.getScalar(),h=n.getScalar(),p=n.getScalar()*(Math.PI/180),f=n.getScalar(),g=n.getScalar(),u=n.getAsCurrentPoint(),m=new e.Point(Math.cos(p)*(o.x-u.x)/2+Math.sin(p)*(o.y-u.y)/2,-Math.sin(p)*(o.x-u.x)/2+Math.cos(p)*(o.y-u.y)/2),v=Math.pow(m.x,2)/Math.pow(d,2)+Math.pow(m.y,2)/Math.pow(h,2);v>1&&(d*=Math.sqrt(v),h*=Math.sqrt(v));var b=(f==g?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(h,2)-Math.pow(d,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(d,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));isNaN(b)&&(b=0);var y=new e.Point(b*d*m.y/h,b*-h*m.x/d),x=new e.Point((o.x+u.x)/2+Math.cos(p)*y.x-Math.sin(p)*y.y,(o.y+u.y)/2+Math.sin(p)*y.x+Math.cos(p)*y.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},C=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},D=C([1,0],[(m.x-y.x)/d,(m.y-y.y)/h]),T=[(m.x-y.x)/d,(m.y-y.y)/h],S=[(-m.x-y.x)/d,(-m.y-y.y)/h],_=C(T,S);k(T,S)<=-1&&(_=Math.PI),k(T,S)>=1&&(_=0);var A=1-g?1:-1,E=D+A*(_/2),M=new e.Point(x.x+d*Math.cos(E),x.y+h*Math.sin(E));if(n.addMarkerAngle(M,E-A*Math.PI/2),n.addMarkerAngle(u,E-A*Math.PI),i.addPoint(u.x,u.y),null!=t){var k=d>h?d:h,P=d>h?1:d/h,I=d>h?h/d:1;t.translate(x.x,x.y),t.rotate(p),t.scale(P,I),t.arc(0,0,k,D,D+_,1-g),t.scale(1/P,1/I),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t,n){var i=this.attribute("width").toPixels("x",!0),a=this.attribute("height").toPixels("y",!0),r=new e.Element.svg;r.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new e.Property("width",i+"px"),r.attributes.height=new e.Property("height",a+"px"),r.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var s=document.createElement("canvas");s.width=i,s.height=a;var o=s.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var l=-1;1>=l;l++)for(var c=-1;1>=c;c++)o.save(),o.translate(l*s.width,c*s.height),r.render(o),o.restore();var u=t.createPattern(s,"repeat");return u}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,i){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.refX=new e.Property("refX",this.attribute("refX").value),a.attributes.refY=new e.Property("refY",this.attribute("refY").value),a.attributes.width=new e.Property("width",this.attribute("markerWidth").value),a.attributes.height=new e.Property("height",this.attribute("markerHeight").value),a.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),a.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),a.children=this.children,a.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(t){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(t,n,i){var a=this;this.getHrefAttribute().hasValue()&&(a=this.getHrefAttribute().getDefinition());var r=function(t){if(i.hasValue()){var n=new e.Property("color",t);return n.addOpacity(i).value}return t},s=this.getGradient(t,n);if(null==s)return r(a.stops[a.stops.length-1].color);for(var o=0;o<a.stops.length;o++)s.addColorStop(a.stops[o].offset,r(a.stops[o].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],c=new e.Element.rect;c.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),c.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),c.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),c.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var u=new e.Element.g;u.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),u.children=[c];var d=new e.Element.svg;d.attributes.x=new e.Property("x",0),d.attributes.y=new e.Property("y",0),d.attributes.width=new e.Property("width",l.width),d.attributes.height=new e.Property("height",l.height),d.children=[u];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;var p=h.getContext("2d");return p.fillStyle=s,d.render(p),p.createPattern(h,"no-repeat")}return s}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==r&&a==s?null:t.createLinearGradient(i,a,r,s)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),r=i,s=a;this.attribute("fx").hasValue()&&(r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var o="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(r,s,0,i,a,o)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),i=Math.floor(n),a=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[i])),t.to=new e.Property("to",parseFloat(this.values.value[a])),t.progress=(n-i)/(a-i)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,a=e.g+(n.g-e.g)*t.progress,r=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(a,10)+","+parseInt(r,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),i=e.ToNumberArray(t.to.value),a="",r=0;r<n.length;r++)a+=n[r]+(i[r]-n[r])*t.progress+" ";return a}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(e.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-i,t+Math.floor(2*i/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var a=0,r=n;r<e.children.length;r++){var s=e.children[r];if(r>n&&s.attribute("x").hasValue())break;a+=s.measureTextRecursive(t)}return-1*("end"==i?a:a/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],a=null;if(t.isArabic){var r="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(r="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(r="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(r="initial"),"undefined"!=typeof t.glyphs[i]&&(a=t.glyphs[i][r],null==a&&"glyph"==t.glyphs[i].type&&(a=t.glyphs[i]))}else a=t.glyphs[i];return null==a&&(a=t.missingGlyph),a},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var l=this.getGlyph(n,r,o),c=i/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(c,-c);var u=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/i,"italic"==a&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==a&&t.transform(1,0,-.4,1,0,0),t.lineWidth=u,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=0,r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var l=this.getGlyph(n,r,o);a+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(a+=s[o])}return a}var c=e.compressSpaces(this.getText());if(!t.measureText)return 10*c.length;t.save(),this.setContext(t);var u=t.measureText(c).width;return t.restore(),u}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=t.nodeValue||t.text||"",this.getText=function(){return this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=!0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else{var i=new e.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var i=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,i)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var a=this;this.img.onload=function(){a.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),a.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=r&&0!=s&&(t.save(),i?t.drawSvg(this.img,n,a,r,s):(t.translate(n,a),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,s,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+i,n+a)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(t){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=e.compressSpaces(n);for(var a=n.split("}"),i=0;i<a.length;i++)if(""!=e.trim(a[i]))for(var r=a[i].split("{"),s=r[0].split(","),o=r[1].split(";"),l=0;l<s.length;l++){var c=e.trim(s[l]);if(""!=c){for(var u={},d=0;d<o.length;d++){var h=o[d].indexOf(":"),p=o[d].substr(0,h),f=o[d].substr(h+1,o[d].length-h);null!=p&&null!=f&&(u[e.trim(p)]=new e.Property(e.trim(p),e.trim(f)))}if(e.Styles[c]=u,"@font-face"==c)for(var g=u["font-family"].value.replace(/"/g,""),m=u.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var b=m[v].indexOf("url"),y=m[v].indexOf(")",b),x=m[v].substr(b+5,y-b-6),w=e.parseXml(e.ajax(x)),k=w.getElementsByTagName("font"),C=0;C<k.length;C++){var D=e.CreateElement(k[C]);e.Definitions[g]=D}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){return null!=n?n.getBoundingBox():void 0},this.renderChildren=function(t){if(null!=n){var i=n;"symbol"==n.type&&(i=new e.Element.svg,i.type="svg",i.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),i.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),i.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),i.children=n.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new e.Property("height",this.attribute("height").value)));var a=i.parent;i.parent=null,i.render(t),i.parent=a}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var i=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==r&&0==s){for(var o=new e.BoundingBox,l=0;l<this.children.length;l++)o.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(o.x1),a=Math.floor(o.y1),r=Math.floor(o.width()),s=Math.floor(o.height())}var c=n.attribute("mask").value;n.attribute("mask").value="";var u=document.createElement("canvas");u.width=i+r,u.height=a+s;var d=u.getContext("2d");this.renderChildren(d);var h=document.createElement("canvas");h.width=i+r,h.height=a+s;var p=h.getContext("2d");n.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=d.createPattern(u,"no-repeat"),p.fillRect(0,0,i+r,a+s),t.fillStyle=p.createPattern(h,"no-repeat"),t.fillRect(0,0,i+r,a+s),n.attribute("mask").value=c},this.render=function(t){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var a=0;a<this.children.length;a++){var r=this.children[a];if("undefined"!=typeof r.path){
var s=null;r.attribute("transform").hasValue()&&(s=new e.Transform(r.attribute("transform").value),s.apply(t)),r.path(t),CanvasRenderingContext2D.prototype.closePath=i,s&&s.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(t){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),a=Math.floor(n.y1),r=Math.floor(n.width()),s=Math.floor(n.height()),o=e.style("filter").value;e.style("filter").value="";for(var l=0,c=0,u=0;u<this.children.length;u++){var d=this.children[u].extraFilterDistance||0;l=Math.max(l,d),c=Math.max(c,d)}var h=document.createElement("canvas");h.width=r+2*l,h.height=s+2*c;var p=h.getContext("2d");p.translate(-i+l,-a+c),e.render(p);for(var u=0;u<this.children.length;u++)this.children[u].apply(p,0,0,r+2*l,s+2*c);t.drawImage(h,0,0,r+2*l,s+2*c,i-l,a-c,r+2*l,s+2*c),e.style("filter",!0).value=o},this.render=function(t){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,a){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e,n,i,a){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,i,a,r){return t[n*i*4+4*e+r]}function i(t,e,n,i,a,r,s){t[n*i*4+4*e+r]=s}function a(t,e){var n=r[t];return n*(0>n?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var r=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=r[0];r=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=r[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(o)*e+Math.sin(o)*n};r=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,r,s,o){for(var l=t.getImageData(0,0,s,o),r=0;o>r;r++)for(var e=0;s>e;e++){var c=n(l.data,e,r,s,o,0),u=n(l.data,e,r,s,o,1),d=n(l.data,e,r,s,o,2),h=n(l.data,e,r,s,o,3);i(l.data,e,r,s,o,0,a(0,c)+a(1,u)+a(2,d)+a(3,h)+a(4,1)),i(l.data,e,r,s,o,1,a(5,c)+a(6,u)+a(7,d)+a(8,h)+a(9,1)),i(l.data,e,r,s,o,2,a(10,c)+a(11,u)+a(12,d)+a(13,h)+a(14,1)),i(l.data,e,r,s,o,3,a(15,c)+a(16,u)+a(17,d)+a(18,h)+a(19,1))}t.clearRect(0,0,s,o),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,a,r){return"undefined"==typeof stackBlurCanvasRGBA?void e.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),stackBlurCanvasRGBA(t.canvas.id,n,i,a,r,this.blurRadius),void document.body.removeChild(t.canvas))}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(t){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(t){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),i.type=t.nodeName,i},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var i=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var a=e.CreateElement(n.documentElement);a.root=!0;var r=!0,s=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(a.style("width").hasValue()&&(t.canvas.width=a.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),a.style("height").hasValue()&&(t.canvas.height=a.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,s=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&a.style("width").hasValue()&&a.style("height").hasValue()&&(i=a.style("width").toPixels("x"),s=a.style("height").toPixels("y")),e.ViewPort.SetCurrent(i,s),null!=e.opts.offsetX&&(a.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(a.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var o=null,l=null,c=e.ToNumberArray(a.attribute("viewBox").value);null!=e.opts.scaleWidth&&(a.attribute("width").hasValue()?o=a.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(c[2])||(o=c[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(a.attribute("height").hasValue()?l=a.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(c[3])||(l=c[3]/e.opts.scaleHeight)),null==o&&(o=l),null==l&&(l=o),a.attribute("width",!0).value=e.opts.scaleWidth,a.attribute("height",!0).value=e.opts.scaleHeight,a.attribute("transform",!0).value+=" scale("+1/o+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,i,s),a.render(t),r&&(r=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},o=!0;e.ImagesLoaded()&&(o=!1,s()),e.intervalID=setInterval(function(){var t=!1;if(o&&e.ImagesLoaded()&&(o=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(s(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],i=this.eventElements[t];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},e}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var a=t(i||{});(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=a);var r=e.getContext("2d");"undefined"!=typeof n.documentElement?a.loadXmlDoc(r,n):"<"==n.substr(0,1)?a.loadXml(r,n):a.load(r,n)}else for(var s=document.querySelectorAll("svg"),o=0;o<s.length;o++){var l=s[o],c=document.createElement("canvas");c.width=l.clientWidth,c.height=l.clientHeight,l.parentNode.insertBefore(c,l),l.parentNode.removeChild(l);var u=document.createElement("div");u.appendChild(l),canvg(c,u.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,a){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:a})})},{}],39:[function(t,e,n){function i(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in e)t==n&&(t=e[n]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<a.length;r++){var s=a[r].re,o=a[r].process,l=s.exec(t);l&&(channels=o(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,n=0;n<a.length;n++)for(var r=a[n].example,s=0;s<r.length;s++)t[t.length]=r[s];for(var o in e)t[t.length]=o;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var n=0;n<t.length;n++)try{var c=document.createElement("li"),u=new i(t[n]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),d.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[n]+" -> "+u.toRGB()+" -> "+u.toHex());c.appendChild(d),c.appendChild(h),l.appendChild(c)}catch(p){}return l}}e.exports=i},{}],40:[function(t,e,n){var i=t("underscore");i.mixin({transpose:function(t){return i.zip.apply(i,t)}})},{underscore:"underscore"}],41:[function(t,e,n){function i(t,e){return function(){var n=t.apply(null,arguments);return e.apply(null,n)}}function a(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function r(t,e,n){return void 0===n?t.getAttribute("data-"+a(e)):void t.setAttribute("data-"+a(e),n)}var s=t("d3-browserify"),o=function(t,e){var n=s.format("."+(t||3)+"s");return e=e||".",function(t){return n(t).replace("G","B").replace(".",e)}},l=function(t){var e=1;return function(n){return n.length-e>t&&(n=n.slice(0,t-e)+"..."),n}},c=function(t){var e=s.scale["category"+(t>10?"20":"10")]().range();return function(t,n){return t.color||t.data&&t.data.color||e[n%e.length]}},u=function(t){var e,n=String.fromCharCode(255)+String.fromCharCode(254);return n+=Array.prototype.reduce.call(t,function(t,n){return e=n.charCodeAt(0),t+String.fromCharCode(255&e)+String.fromCharCode(e>>8)},""),btoa(n)},d=function(t){return"data:text/plain;base64,"+u(t)};e.exports={formatKMB:o,formatShortText:l,categoryColours:c,u16le64:u,textAsDataURL:d,transformArgs:i,data:r}},{"d3-browserify":"d3-browserify"}],42:[function(t,e,n){!function(t){function n(t,e){var n=s(e),i=new a(n),r=i.parse(t);return l(n.complete)&&n.complete(r),r}function i(t,e){function n(){"object"==typeof e&&("string"==typeof e.delimiter&&1==e.delimiter.length&&-1==u.BAD_DELIMITERS.indexOf(e.delimiter)&&(l=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(o=e.quotes),"string"==typeof e.newline&&(c=e.newline))}function i(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function a(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var i=t instanceof Array&&t.length>0,a=!(e[0]instanceof Array);if(i){for(var s=0;s<t.length;s++)s>0&&(n+=l),n+=r(t[s],s);e.length>0&&(n+=c)}for(var o=0;o<e.length;o++){for(var u=i?t.length:e[o].length,d=0;u>d;d++){d>0&&(n+=l);var h=i&&a?t[d]:d;n+=r(e[o][h],d)}o<e.length-1&&(n+=c)}return n}function r(t,e){if("undefined"==typeof t)return"";t=t.toString().replace(/"/g,'""');var n="boolean"==typeof o&&o||o instanceof Array&&o[e]||s(t,u.BAD_DELIMITERS)||t.indexOf(l)>-1||" "==t.charAt(0)||" "==t.charAt(t.length-1);return n?'"'+t+'"':t}function s(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}var o=!1,l=",",c="\r\n";if(n(),"string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return a(null,t);if("object"==typeof t[0])return a(i(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.data[0]instanceof Array?t.fields:i(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),a(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"}function a(t){function e(){return g&&h&&(d("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma"),h=!1),n()&&i(),a()}function n(){return t.header&&0==f.length}function i(){if(g){for(var t=0;n()&&t<g.data.length;t++)for(var e=0;e<g.data[t].length;e++)f.push(g.data[t][e]);g.data.splice(0,1)}}function a(){if(!g||!t.header&&!t.dynamicTyping)return g;for(var e=0;e<g.data.length;e++){for(var n={},i=0;i<g.data[e].length;i++){if(t.dynamicTyping){var a=g.data[e][i];g.data[e][i]="true"==a?!0:"false"==a?!1:c(a)}t.header&&(i>=f.length&&(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(g.data[e][i])),n[f[i]]=g.data[e][i])}t.header&&(g.data[e]=n,i>f.length?d("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+i,e):i<f.length&&d("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+i,e))}return t.header&&g.meta,g.meta.fields=f,g}function s(e){for(var n,i,a,s=[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP],o=0;o<s.length;o++){var l=s[o],c=0,d=0;a=void 0;for(var h=new r({delimiter:l,preview:10}).parse(e),p=0;p<h.data.length;p++){var f=h.data[p].length;d+=f,"undefined"!=typeof a?f>1&&(c+=Math.abs(f-a),a=f):a=f}d/=h.data.length,("undefined"==typeof i||i>c)&&d>1.99&&(i=c,n=l)}return t.delimiter=n,{successful:!!n,bestDelimiter:n}}function c(t){var e=p.test(t);return e?parseFloat(t):t}function d(t,e,n,i){g.errors.push({type:t,code:e,message:n,row:i})}var h,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,f=[],g={data:[],errors:[],meta:{}};t=o(t),this.parse=function(i){if(h=!1,!t.delimiter){var a=s(i);a.successful?t.delimiter=a.bestDelimiter:(h=!0,t.delimiter=","),g.meta.delimiter=t.delimiter}if(l(t.step)){var o=t.step;t.step=function(t,i){g=t,n()?e():o(e(),i)}}return g=new r(t).parse(i),e()}}function r(t){function e(){for(;P<T.length&&!z&&!(E>0&&L>=E);){if(V)return i();'"'==M?a():I?r():s(),n()}return i()}function n(){P++,M=T[P]}function i(){return z&&w("Abort","ParseAbort","Parsing was aborted by the user's step function"),I&&w("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),l(A)?void 0:D()}function a(){y()&&!b()?I=!I:(d(),I&&b()?P++:w("Quotes","UnexpectedQuotes","Unexpected quotes"))}function r(){(m(P)||v(P))&&N++,d()}function s(){M==S?h():m(P)?(p(),n()):v(P)?p():o()?c():d()}function o(){if(!_)return!1;var t=0==P||v(P-1)||m(P-2);return t&&T[P]===_}function c(){for(;!m(P)&&!v(P)&&P<T.length;)n()}function d(){$[F][B]+=M}function h(){$[F].push(""),B=$[F].length-1}function p(){f(),N++,L++,$.push([]),F=$.length-1,h()}function f(){g(),l(A)&&($[F]&&A(D(),R),C())}function g(){1==$[F].length&&j.test($[F][0])&&(t.keepEmptyRows?$[F].splice(0,1):$.splice(F,1),F=$.length-1)}function m(t){return t<T.length-1&&("\r"==T[t]&&"\n"==T[t+1]||"\n"==T[t]&&"\r"==T[t+1])}function v(t){return"\r"==T[t]||"\n"==T[t]}function b(){return!y()&&P<T.length-1&&'"'==T[P+1]}function y(){return!I&&x(P-1)||x(P+1)}function x(t){"number"!=typeof t&&(t=P);var e=T[t];return-1>=t||t>=T.length||e==S||"\r"==e||"\n"==e}function w(t,e,n){O.push({type:t,code:e,message:n,line:N,row:F,index:P})}function k(t){T=t,I=!1,P=0,L=0,N=1,C(),$=[[""]],M=T[P]}function C(){$=[],O=[],F=0,B=0}function D(){return{data:$,errors:O,meta:{lines:N,delimiter:S,aborted:z}}}var T,S,_,A,E,M,P,I,N,$,O,F,B,L,R=this,j=/^\s*$/,z=!1,V=!1;t=t||{},S=t.delimiter,_=t.comments,A=t.step,E=t.preview,("string"!=typeof S||1!=S.length||u.BAD_DELIMITERS.indexOf(S)>-1)&&(S=","),_===!0?_="#":("string"!=typeof _||1!=_.length||u.BAD_DELIMITERS.indexOf(_)>-1||_==S)&&(_=!1),this.parse=function(t){if("string"!=typeof t)throw"Input must be a string";return k(t),e()},this.abort=function(){z=!0}}function s(t){"object"!=typeof t&&(t={});var e=o(t);return("string"!=typeof e.delimiter||1!=e.delimiter.length||u.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=c.delimiter),"boolean"!=typeof e.header&&(e.header=c.header),"boolean"!=typeof e.dynamicTyping&&(e.dynamicTyping=c.dynamicTyping),"number"!=typeof e.preview&&(e.preview=c.preview),"function"!=typeof e.step&&(e.step=c.step),"function"!=typeof e.complete&&(e.complete=c.complete),"boolean"!=typeof e.keepEmptyRows&&(e.keepEmptyRows=c.keepEmptyRows),e}function o(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=o(t[n]);return e}function l(t){return"function"==typeof t}var c={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,comments:!1,complete:void 0,keepEmptyRows:!1},u={};u.parse=n,u.unparse=i,u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\ufeff",u.BAD_DELIMITERS=["\r","\n",'"',u.BYTE_ORDER_MARK],"undefined"!=typeof e&&e.exports?e.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):t.Baby=u}("undefined"!=typeof window?window:this)},{}],43:[function(t,e,n){(function(){function t(t){this._value=t}function n(t,e,n,i){var a,r,s=Math.pow(10,e);return r=(n(t*s)/s).toFixed(e),i&&(a=new RegExp("0{1,"+i+"}$"),r=r.replace(a,"")),r}function i(t,e,n){var i;return i=e.indexOf("$")>-1?r(t,e,n):e.indexOf("%")>-1?s(t,e,n):e.indexOf(":")>-1?o(t,e):c(t._value,e,n)}function a(t,e){var n,i,a,r,s,o=e,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(e.indexOf(":")>-1)t._value=l(e);else if(e===v)t._value=0;else{for("."!==g[m].delimiters.decimal&&(e=e.replace(/\./g,"").replace(g[m].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+g[m].abbreviations.thousand+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+g[m].abbreviations.million+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+g[m].abbreviations.billion+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+g[m].abbreviations.trillion+"(?:\\)|(\\"+g[m].currency.symbol+")?(?:\\))?)?$"),s=0;s<=c.length&&!(u=e.indexOf(c[s])>-1?Math.pow(1024,s+1):!1);s++);t._value=(u?u:1)*(o.match(n)?Math.pow(10,3):1)*(o.match(i)?Math.pow(10,6):1)*(o.match(a)?Math.pow(10,9):1)*(o.match(r)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=u?Math.ceil(t._value):t._value}return t._value}function r(t,e,n){var i,a,r=e.indexOf("$"),s=e.indexOf("("),o=e.indexOf("-"),l="";return e.indexOf(" $")>-1?(l=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(l=" ",e=e.replace("$ ","")):e=e.replace("$",""),a=c(t._value,e,n),1>=r?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),i=1,(s>r||o>r)&&(i=0),a.splice(i,0,g[m].currency.symbol+l),a=a.join("")):a=g[m].currency.symbol+l+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,l+g[m].currency.symbol),a=a.join("")):a=a+l+g[m].currency.symbol,a}function s(t,e,n){var i,a="",r=100*t._value;return e.indexOf(" %")>-1?(a=" ",e=e.replace(" %","")):e=e.replace("%",""),i=c(r,e,n),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,a+"%"),i=i.join("")):i=i+a+"%",i}function o(t){var e=Math.floor(t._value/60/60),n=Math.floor((t._value-60*e*60)/60),i=Math.round(t._value-60*e*60-60*n);return e+":"+(10>n?"0"+n:n)+":"+(10>i?"0"+i:i)}function l(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}function c(t,e,i){var a,r,s,o,l,c,u=!1,d=!1,h=!1,p="",f=!1,b=!1,y=!1,x=!1,w=!1,k="",C="",D=Math.abs(t),T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],S="",_=!1;if(0===t&&null!==v)return v;if(e.indexOf("(")>-1?(u=!0,e=e.slice(1,-1)):e.indexOf("+")>-1&&(d=!0,e=e.replace(/\+/g,"")),e.indexOf("a")>-1&&(f=e.indexOf("aK")>=0,b=e.indexOf("aM")>=0,y=e.indexOf("aB")>=0,x=e.indexOf("aT")>=0,w=f||b||y||x,e.indexOf(" a")>-1?(p=" ",e=e.replace(" a","")):e=e.replace("a",""),D>=Math.pow(10,12)&&!w||x?(p+=g[m].abbreviations.trillion,t/=Math.pow(10,12)):D<Math.pow(10,12)&&D>=Math.pow(10,9)&&!w||y?(p+=g[m].abbreviations.billion,t/=Math.pow(10,9)):D<Math.pow(10,9)&&D>=Math.pow(10,6)&&!w||b?(p+=g[m].abbreviations.million,t/=Math.pow(10,6)):(D<Math.pow(10,6)&&D>=Math.pow(10,3)&&!w||f)&&(p+=g[m].abbreviations.thousand,t/=Math.pow(10,3))),e.indexOf("b")>-1)for(e.indexOf(" b")>-1?(k=" ",e=e.replace(" b","")):e=e.replace("b",""),s=0;s<=T.length;s++)if(a=Math.pow(1024,s),r=Math.pow(1024,s+1),t>=a&&r>t){k+=T[s],a>0&&(t/=a);break}return e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(C=" ",e=e.replace(" o","")):e=e.replace("o",""),C+=g[m].ordinal(t)),e.indexOf("[.]")>-1&&(h=!0,e=e.replace("[.]",".")),o=t.toString().split(".")[0],l=e.split(".")[1],c=e.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),S=n(t,l[0].length+l[1].length,i,l[1].length)):S=n(t,l.length,i),o=S.split(".")[0],S=S.split(".")[1].length?g[m].delimiters.decimal+S.split(".")[1]:"",h&&0===Number(S.slice(1))&&(S="")):o=n(t,null,i),o.indexOf("-")>-1&&(o=o.slice(1),_=!0),c>-1&&(o=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g[m].delimiters.thousands)),0===e.indexOf(".")&&(o=""),(u&&_?"(":"")+(!u&&_?"-":"")+(!_&&d?"+":"")+o+S+(C?C:"")+(p?p:"")+(k?k:"")+(u&&_?")":"")}function u(t,e){g[t]=e}function d(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function h(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var n=d(t),i=d(e);return n>i?n:i},-(1/0))}var p,f="1.5.3",g={},m="en",v=null,b="0,0",y="undefined"!=typeof e&&e.exports;p=function(e){return p.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=p.fn.unformat(e)),new t(Number(e))},p.version=f,p.isNumeral=function(e){return e instanceof t},p.language=function(t,e){if(!t)return m;if(t&&!e){if(!g[t])throw new Error("Unknown language : "+t);m=t}return(e||!g[t])&&u(t,e),p},p.languageData=function(t){if(!t)return g[m];if(!g[t])throw new Error("Unknown language : "+t);return g[t]},p.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),p.zeroFormat=function(t){v="string"==typeof t?t:null},p.defaultFormat=function(t){b="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i,a=this.length>>>0,r=!1;for(1<arguments.length&&(i=e,r=!0),n=0;a>n;++n)this.hasOwnProperty(n)&&(r?i=t(i,this[n],n,this):(i=this[n],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return i}),p.fn=t.prototype={clone:function(){return p(this)},format:function(t,e){return i(this,t?t:b,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:a(this,t?t:b)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,i,a){return t+n*e}var n=h.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/n,this},subtract:function(t){function e(t,e,i,a){return t-n*e}var n=h.call(null,this._value,t);return this._value=[t].reduce(e,this._value*n)/n,this},multiply:function(t){function e(t,e,n,i){var a=h(t,e);return t*a*e*a/(a*a)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e,n,i){var a=h(t,e);return t*a/(e*a)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(p(this._value).subtract(t).value())}},y&&(e.exports=p),"undefined"==typeof ender&&(this.numeral=p),"function"==typeof define&&define.amd&&define([],function(){return p})}).call(this)},{}],44:[function(t,e,n){!function(){function t(t,e){return new Date(e,t+1,0).getDate()}function e(t,e,n){return function(i,a,r){var s=t(i),o=[];if(i>s&&e(s),r>1)for(;a>s;){var l=new Date(+s);n(l)%r===0&&o.push(l),e(s)}else for(;a>s;)o.push(new Date(+s)),e(s);return o}}var n=window.nv||{};n.version="1.1.15b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev&&(n.dispatch.on("render_start",function(t){n.logs.startTime=+new Date}),n.dispatch.on("render_end",function(t){n.logs.endTime=+new Date,n.logs.totalTime=n.logs.endTime-n.logs.startTime,n.log("total",n.logs.totalTime)})),n.log=function(){if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},n.render=function(t){t=t||1,n.render.active=!0,n.dispatch.render_start(),setTimeout(function(){for(var e,i,a=0;t>a&&(i=n.render.queue[a]);a++)e=i.generate(),typeof i.callback==typeof Function&&i.callback(e),n.graphs.push(e);n.render.queue.splice(0,a),n.render.queue.length?setTimeout(arguments.callee,0):(n.dispatch.render_end(),n.render.active=!1)},0)},n.render.active=!1,n.render.queue=[],n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),n.render.queue.push(t),n.render.active||n.render()},n.identity=function(t){return t},n.strip=function(t){return t.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(t){return new Date(t.getFullYear(),t.getMonth(),0)},d3.time.monthEnds=e(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(t){return t.getMonth()}),n.interactiveGuideline=function(){"use strict";function t(d){d.each(function(d){function h(){var n=d3.mouse(this),i=n[0],a=n[1],l=!0,c=!1;if(u&&(i=d3.event.offsetX,a=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(c=!0)),l&&(i-=r.left,a-=r.top),0>i||0>a||i>f||a>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||c){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(e.nvPointerEventsClass))return;return o.elementMouseout({mouseX:i,mouseY:a}),void t.renderGuideLine(null)}var d=s.invert(i);o.elementMousemove({mouseX:i,mouseY:a,pointXValue:d}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:i,mouseY:a,pointXValue:d})}var p=d3.select(this),f=i||960,g=a||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]),v=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine"),c&&(c.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h),t.renderGuideLine=function(t){if(l){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[n.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}})})}var e=n.models.tooltip(),i=null,a=null,r={left:0,top:0},s=d3.scale.linear(),o=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),l=!0,c=null,u=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=o,t.tooltip=e,t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.xScale=function(e){return arguments.length?(s=e,t):s},t.showGuideLine=function(e){return arguments.length?(l=e,t):l},t.svgContainer=function(e){return arguments.length?(c=e,t):c},t},n.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t,e){return t.x});var i=d3.bisector(n).left,a=d3.max([0,i(t,e)-1]),r=n(t[a],a);if("undefined"==typeof r&&(r=a),r===e)return a;var s=d3.min([a+1,t.length-1]),o=n(t[s],s);return"undefined"==typeof o&&(o=s),Math.abs(o-e)>=Math.abs(r-e)?a:s;

},n.nearestValueIndex=function(t,e,n){"use strict";var i=1/0,a=null;return t.forEach(function(t,r){var s=Math.abs(e-t);i>=s&&n>s&&(i=s,a=r)}),a},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(d){var t=d3.select(d);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];p.left=p.left*n,p.top=p.top*n}}}function e(t){var e;e=d3.select(d?d:"body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(u?u:"xy-tooltip")).attr("id",g)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(m,!0),n.classed(m,!0),n.node()}function i(){if(f&&x(r)){t();var a=p.left,u=null!=c?c:p.top,g=e(y(r));if(h=g,d){var m=d.getElementsByTagName("svg")[0],v=(m?m.getBoundingClientRect():d.getBoundingClientRect(),{left:0,top:0});if(m){var b=m.getBoundingClientRect(),w=d.getBoundingClientRect(),k=b.top;if(0>k){var C=d.getBoundingClientRect();k=Math.abs(k)>C.height?0:k}v.top=Math.abs(k-w.top),v.left=Math.abs(b.left-w.left)}a+=d.offsetLeft+v.left-2*d.scrollLeft,u+=d.offsetTop+v.top-2*d.scrollTop}return l&&l>0&&(u=Math.floor(u/l)*l),n.tooltip.calcTooltipPosition([a,u],s,o,g),i}}var a=null,r=null,s="w",o=50,l=25,c=null,u=null,d=null,h=null,p={left:null,top:null},f=!0,g="nvtooltip-"+Math.floor(1e5*Math.random()),m="nv-pointer-events-none",v=function(t,e){return t},b=function(t){return t},y=function(t){if(null!=a)return a;if(null==t)return"";var e=d3.select(document.createElement("table")),n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(b(t.value));var i=e.selectAll("tbody").data([t]).enter().append("tbody"),r=i.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).html(function(t){return t.key}),r.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var s=e.node().outerHTML;return void 0!==t.footer&&(s+="<div class='footer'>"+t.footer+"</div>"),s},x=function(t){return t&&t.series&&t.series.length>0?!0:!1};return i.nvPointerEventsClass=m,i.content=function(t){return arguments.length?(a=t,i):a},i.tooltipElem=function(){return h},i.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(y=t),i):y},i.data=function(t){return arguments.length?(r=t,i):r},i.gravity=function(t){return arguments.length?(s=t,i):s},i.distance=function(t){return arguments.length?(o=t,i):o},i.snapDistance=function(t){return arguments.length?(l=t,i):l},i.classes=function(t){return arguments.length?(u=t,i):u},i.chartContainer=function(t){return arguments.length?(d=t,i):d},i.position=function(t){return arguments.length?(p.left="undefined"!=typeof t.left?t.left:p.left,p.top="undefined"!=typeof t.top?t.top:p.top,i):p},i.fixedTop=function(t){return arguments.length?(c=t,i):c},i.enabled=function(t){return arguments.length?(f=t,i):f},i.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),i):v},i.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(b=t),i):b},i.id=function(){return g},i},n.tooltip.show=function(t,e,i,a,r,s){var o=document.createElement("div");o.className="nvtooltip "+(s?s:"xy-tooltip");var l=r;(!r||r.tagName.match(/g|svg/i))&&(l=document.getElementsByTagName("body")[0]),o.style.left=0,o.style.top=0,o.style.opacity=0,o.innerHTML=e,l.appendChild(o),r&&(t[0]=t[0]-r.scrollLeft,t[1]=t[1]-r.scrollTop),n.tooltip.calcTooltipPosition(t,i,a,o)},n.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},n.tooltip.findTotalOffsetTop=function(t,e){var n=e;do isNaN(t.offsetTop)||(n+=t.offsetTop);while(t=t.offsetParent);return n},n.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do isNaN(t.offsetLeft)||(n+=t.offsetLeft);while(t=t.offsetParent);return n},n.tooltip.calcTooltipPosition=function(t,e,i,a){var r,s,o=parseInt(a.offsetHeight),l=parseInt(a.offsetWidth),c=n.utils.windowSize().width,u=n.utils.windowSize().height,d=window.pageYOffset,h=window.pageXOffset;u=window.innerWidth>=document.body.scrollWidth?u:u-16,c=window.innerHeight>=document.body.scrollHeight?c:c-16,e=e||"s",i=i||20;var p=function(t){return n.tooltip.findTotalOffsetTop(t,s)},f=function(t){return n.tooltip.findTotalOffsetLeft(t,r)};switch(e){case"e":r=t[0]-l-i,s=t[1]-o/2;var g=f(a),m=p(a);h>g&&(r=t[0]+i>h?t[0]+i:h-g+r),d>m&&(s=d-m+s),m+o>d+u&&(s=d+u-m+s-o);break;case"w":r=t[0]+i,s=t[1]-o/2;var g=f(a),m=p(a);g+l>c&&(r=t[0]-l-i),d>m&&(s=d+5),m+o>d+u&&(s=d+u-m+s-o);break;case"n":r=t[0]-l/2-5,s=t[1]+i;var g=f(a),m=p(a);h>g&&(r=h+5),g+l>c&&(r=r-l/2+5),m+o>d+u&&(s=d+u-m+s-o);break;case"s":r=t[0]-l/2,s=t[1]-o-i;var g=f(a),m=p(a);h>g&&(r=h+5),g+l>c&&(r=r-l/2+5),d>m&&(s=d);break;case"none":r=t[0],s=t[1]-i;var g=f(a),m=p(a)}return a.style.left=r+"px",a.style.top=s+"px",a.style.opacity=1,a.style.position="absolute",a},n.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),n.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},n.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},n.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:n.utils.defaultColor()},n.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},n.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var i=n.length;return function(a,r){var s=e(a);return i||(i=n.length),"undefined"!=typeof t[s]?"function"==typeof t[s]?t[s]():t[s]:n[--i]}},n.utils.pjax=function(t,e){function i(i){d3.html(i,function(i){var a=d3.select(e).node();a.parentNode.replaceChild(d3.select(i).select(e).node(),a),n.utils.pjax(t,e)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),i(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&i(d3.event.state)})},n.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px","")),n=t.text().length;return n*e*.5}return 0},n.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0?0:t},n.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},n.models.axis=function(){"use strict";function t(n){return n.each(function(t){var n=d3.select(this),r=n.selectAll("g.nv-wrap.nv-axis").data([t]),v=r.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),b=(v.append("g"),r.select("g"));null!==f?e.ticks(f):("top"==e.orient()||"bottom"==e.orient())&&e.ticks(Math.abs(s.range()[1]-s.range()[0])/100),b.transition().call(e),m=m||e.scale();var y=e.tickFormat();null==y&&(y=m.tickFormat());var x=b.selectAll("text.nv-axislabel").data([o||null]);switch(x.exit().remove(),e.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",0).attr("x",w/2),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+s(t)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+s.range()[e]+",0)"})}break;case"bottom":var C=36,D=30,T=b.selectAll("g").select("text");if(u%360){T.each(function(t,e){var n=this.getBBox().width;n>D&&(D=n)});var S=Math.abs(Math.sin(u*Math.PI/180)),C=(S?S*D:D)+30;T.attr("transform",function(t,e,n){return"rotate("+u+" 0,0)"}).style("text-anchor",u%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",C).attr("x",w/2),l){var k=r.selectAll("g.nv-axisMaxMin").data([s.domain()[0],s.domain()[s.domain().length-1]]);k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(t,e,n){return"rotate("+u+" 0,0)"}).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"})}h&&T.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?-Math.max(i.right,a)+12:-10).attr("x",d?s.range()[0]/2:e.tickPadding()),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+s(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?-Math.max(i.left,a)+g:-10).attr("x",d?-s.range()[0]/2:-e.tickPadding()),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+m(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=y(t);return(""+n).match("NaN")?"":n}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}}if(x.text(function(t){return t}),!l||"left"!==e.orient()&&"right"!==e.orient()||(b.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(s(t)<s.range()[1]+10||s(t)>s.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),s.domain()[0]==s.domain()[1]&&0==s.domain()[0]&&r.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===e.orient()||"bottom"===e.orient())){var _=[];r.selectAll("g.nv-axisMaxMin").each(function(t,e){try{_.push(e?s(t)-this.getBBox().width-4:s(t)+this.getBBox().width+4)}catch(n){_.push(e?s(t)-4:s(t)+4)}}),b.selectAll("g").each(function(t,e){(s(t)<_[0]||s(t)>_[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())})}c&&b.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),m=s.copy()}),t}var e=d3.svg.axis(),i={top:0,right:0,bottom:0,left:0},a=75,r=60,s=d3.scale.linear(),o=null,l=!0,c=!0,u=0,d=!0,h=!1,p=!1,f=null,g=12;e.scale(s).orient("bottom").tickFormat(function(t){return t});var m;return t.axis=e,d3.rebind(t,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.ticks=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(r=e,t):r},t.axisLabel=function(e){return arguments.length?(o=e,t):o},t.showMaxMin=function(e){return arguments.length?(l=e,t):l},t.highlightZero=function(e){return arguments.length?(c=e,t):c},t.scale=function(n){return arguments.length?(s=n,e.scale(s),p="function"==typeof s.rangeBands,d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t):s},t.rotateYLabel=function(e){return arguments.length?(d=e,t):d},t.rotateLabels=function(e){return arguments.length?(u=e,t):u},t.staggerLabels=function(e){return arguments.length?(h=e,t):h},t.axisLabelDistance=function(e){return arguments.length?(g=e,t):g},t},n.models.historicalBar=function(){"use strict";function t(w){return w.each(function(t){var w=o-s.left-s.right,k=l-s.top-s.bottom,C=d3.select(this);u.domain(e||d3.extent(t[0].values.map(h).concat(f))),u.range(m?a||[.5*w/t[0].values.length,w*(t[0].values.length-.5)/t[0].values.length]:a||[0,w]),d.domain(i||d3.extent(t[0].values.map(p).concat(g))).range(r||[k,0]),u.domain()[0]===u.domain()[1]&&u.domain(u.domain()[0]?[u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var D=C.selectAll("g.nv-wrap.nv-historicalBar-"+c).data([t[0].values]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+c),S=T.append("defs"),_=T.append("g"),A=D.select("g");_.append("g").attr("class","nv-bars"),D.attr("transform","translate("+s.left+","+s.top+")"),C.on("click",function(t,e){y.chartClick({data:t,index:e,pos:d3.event,id:c})}),S.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),D.select("#nv-chart-clip-path-"+c+" rect").attr("width",w).attr("height",k),A.attr("clip-path",v?"url(#nv-chart-clip-path-"+c+")":"");var E=D.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});E.exit().remove();E.enter().append("rect").attr("x",0).attr("y",function(t,e){return n.utils.NaNtoZero(d(Math.max(0,p(t,e))))}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.abs(d(p(t,e))-d(0)))}).attr("transform",function(e,n){return"translate("+(u(h(e,n))-w/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,n){x&&(d3.select(this).classed("hover",!0),y.elementMouseover({point:e,series:t[0],pos:[u(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(e,n){x&&(d3.select(this).classed("hover",!1),y.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){x&&(y.elementClick({value:p(t,e),data:t,index:e,pos:[u(h(t,e)),d(p(t,e))],e:d3.event,id:c}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(y.elementDblClick({value:p(t,e),data:t,index:e,pos:[u(h(t,e)),d(p(t,e))],e:d3.event,id:c}),d3.event.stopPropagation())});E.attr("fill",function(t,e){return b(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).transition().attr("transform",function(e,n){return"translate("+(u(h(e,n))-w/t[0].values.length*.45)+",0)"}).attr("width",w/t[0].values.length*.9),E.transition().attr("y",function(t,e){var i=p(t,e)<0?d(0):d(0)-d(p(t,e))<1?d(0)-1:d(p(t,e));return n.utils.NaNtoZero(i)}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.max(Math.abs(d(p(t,e))-d(0)),1))})}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,c=Math.floor(1e4*Math.random()),u=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=[],g=[0],m=!1,v=!0,b=n.utils.defaultColor(),y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),x=!0;return t.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+c).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+c).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=y,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceX=function(e){return arguments.length?(f=e,t):f},t.forceY=function(e){return arguments.length?(g=e,t):g},t.padData=function(e){return arguments.length?(m=e,t):m},t.clipEdge=function(e){return arguments.length?(v=e,t):v},t.color=function(e){return arguments.length?(b=n.utils.getColor(e),t):b},t.id=function(e){return arguments.length?(c=e,t):c},t.interactive=function(e){return arguments.length?(x=!1,t):x},t},n.models.bullet=function(){"use strict";function t(n){return n.each(function(t,n){{var i=h-e.left-e.right,f=p-e.top-e.bottom,v=d3.select(this),b=r.call(this,t,n).slice().sort(d3.descending),y=s.call(this,t,n).slice().sort(d3.descending),x=o.call(this,t,n).slice().sort(d3.descending),w=l.call(this,t,n).slice(),k=c.call(this,t,n).slice(),C=u.call(this,t,n).slice(),D=d3.scale.linear().domain(d3.extent(d3.merge([d,b]))).range(a?[i,0]:[0,i]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range())}this.__chart__=D;var T=d3.min(b),S=d3.max(b),_=b[1],A=v.selectAll("g.nv-wrap.nv-bullet").data([t]),E=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),M=E.append("g"),P=A.select("g");M.append("rect").attr("class","nv-range nv-rangeMax"),M.append("rect").attr("class","nv-range nv-rangeAvg"),M.append("rect").attr("class","nv-range nv-rangeMin"),M.append("rect").attr("class","nv-measure"),M.append("path").attr("class","nv-markerTriangle"),A.attr("transform","translate("+e.left+","+e.top+")");var I=function(t){return Math.abs(D(t)-D(0))},N=function(t){return D(0>t?t:0)};P.select("rect.nv-rangeMax").attr("height",f).attr("width",I(S>0?S:T)).attr("x",N(S>0?S:T)).datum(S>0?S:T),P.select("rect.nv-rangeAvg").attr("height",f).attr("width",I(_)).attr("x",N(_)).datum(_),P.select("rect.nv-rangeMin").attr("height",f).attr("width",I(S)).attr("x",N(S)).attr("width",I(S>0?T:S)).attr("x",N(S>0?T:S)).datum(S>0?T:S),P.select("rect.nv-measure").style("fill",g).attr("height",f/3).attr("y",f/3).attr("width",0>x?D(0)-D(x[0]):D(x[0])-D(0)).attr("x",N(x)).on("mouseover",function(){m.elementMouseover({value:x[0],label:C[0]||"Current",pos:[D(x[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:x[0],label:C[0]||"Current"})});var $=f/6;y[0]?P.selectAll("path.nv-markerTriangle").attr("transform",function(t){return"translate("+D(y[0])+","+f/2+")"}).attr("d","M0,"+$+"L"+$+","+-$+" "+-$+","+-$+"Z").on("mouseover",function(){m.elementMouseover({value:y[0],label:k[0]||"Previous",pos:[D(y[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:y[0],label:k[0]||"Previous"})}):P.selectAll("path.nv-markerTriangle").remove(),A.selectAll(".nv-range").on("mouseover",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseover({value:t,label:n,pos:[D(t),f/2]})}).on("mouseout",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseout({value:t,label:n})})}),t}var e={top:0,right:0,bottom:0,left:0},i="left",a=!1,r=function(t){return t.ranges},s=function(t){return t.markers},o=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},c=function(t){return t.markerLabels?t.markerLabels:[]},u=function(t){return t.measureLabels?t.measureLabels:[]},d=[0],h=380,p=30,f=null,g=n.utils.getColor(["#1f77b4"]),m=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=m,t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,a="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(r=e,t):r},t.markers=function(e){return arguments.length?(s=e,t):s},t.measures=function(e){return arguments.length?(o=e,t):o},t.forceX=function(e){return arguments.length?(d=e,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.tickFormat=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(g=n.utils.getColor(e),t):g},t},n.models.bulletChart=function(){"use strict";function t(n){return n.each(function(i,p){var v=d3.select(this),b=(c||parseInt(v.style("width"))||960)-r.left-r.right,y=u-r.top-r.bottom,x=this;if(t.update=function(){t(n)},t.container=this,!i||!s.call(this,i,p)){var w=v.selectAll(".nv-noData").data([f]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",r.left+b/2).attr("y",18+r.top+y/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove();var k=s.call(this,i,p).slice().sort(d3.descending),C=o.call(this,i,p).slice().sort(d3.descending),D=l.call(this,i,p).slice().sort(d3.descending),T=v.selectAll("g.nv-wrap.nv-bulletChart").data([i]),S=T.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),_=S.append("g"),A=T.select("g");_.append("g").attr("class","nv-bulletWrap"),_.append("g").attr("class","nv-titles"),T.attr("transform","translate("+r.left+","+r.top+")");var E=d3.scale.linear().domain([0,Math.max(k[0],C[0],D[0])]).range(a?[b,0]:[0,b]),M=this.__chart__||d3.scale.linear().domain([0,1/0]).range(E.range());this.__chart__=E;var P=_.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(u-r.top-r.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(t){return t.title}),P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(b).height(y);var I=A.select(".nv-bulletWrap");d3.transition(I).call(e);var N=d||E.tickFormat(b/100),$=A.selectAll("g.nv-tick").data(E.ticks(b/50),function(t){return this.textContent||N(t)}),O=$.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1e-6);O.append("line").attr("y1",y).attr("y2",7*y/6),O.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*y/6).text(N);var F=d3.transition($).attr("transform",function(t){return"translate("+E(t)+",0)"}).style("opacity",1);F.select("line").attr("y1",y).attr("y2",7*y/6),F.select("text").attr("y",7*y/6),d3.transition($.exit()).attr("transform",function(t){return"translate("+E(t)+",0)"}).style("opacity",1e-6).remove(),g.on("tooltipShow",function(t){t.key=i.title,h&&m(t,x.parentNode)})}),d3.timer.flush(),t}var e=n.models.bullet(),i="left",a=!1,r={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},o=function(t){return t.markers},l=function(t){return t.measures},c=null,u=55,d=null,h=!0,p=function(t,e,n,i,a){return"<h3>"+e+"</h3><p>"+n+"</p>"},f="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide"),m=function(e,i){var a=e.pos[0]+(i.offsetLeft||0)+r.left,s=e.pos[1]+(i.offsetTop||0)+r.top,o=p(e.key,e.label,e.value,e,t);n.tooltip.show([a,s],o,e.value<0?"e":"w",null,i)};return e.dispatch.on("elementMouseover.tooltip",function(t){g.tooltipShow(t)}),e.dispatch.on("elementMouseout.tooltip",function(t){g.tooltipHide(t)}),g.on("tooltipHide",function(){h&&n.tooltip.cleanup()}),t.dispatch=g,t.bullet=e,d3.rebind(t,e,"color"),t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,a="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(s=e,t):s},t.markers=function(e){return arguments.length?(o=e,t):o},t.measures=function(e){return arguments.length?(l=e,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(u=e,t):u},t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.tickFormat=function(e){return arguments.length?(d=e,t):d},t.tooltips=function(e){return arguments.length?(h=e,t):h},t.tooltipContent=function(e){return arguments.length?(p=e,t):p},t.noData=function(e){return arguments.length?(f=e,t):f},t},n.models.cumulativeLineChart=function(){"use strict";function t(C){return C.each(function(C){function P(e,n){d3.select(t.container).style("cursor","ew-resize")}function O(t,e){N.x=d3.event.x,N.i=Math.round(I.invert(N.x)),B()}function F(e,n){d3.select(t.container).style("cursor","auto"),T.index=N.i,E.stateChange(T)}function B(){it.data([N]);var e=t.transitionDuration();t.transitionDuration(0),t.update(),t.transitionDuration(e)}var L=d3.select(this).classed("nv-chart-"+D,!0),R=this,j=(p||parseInt(L.style("width"))||960)-d.left-d.right,z=(f||parseInt(L.style("height"))||400)-d.top-d.bottom;if(t.update=function(){L.transition().duration(M).call(t)},t.container=this,T.disabled=C.map(function(t){return!!t.disabled}),!S){var V;S={};for(V in T)S[V]=T[V]instanceof Array?T[V].slice(0):T[V]}var W=d3.behavior.drag().on("dragstart",P).on("drag",O).on("dragend",F);if(!(C&&C.length&&C.filter(function(t){return t.values.length}).length)){var U=L.selectAll(".nv-noData").data([_]);return U.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",d.left+j/2).attr("y",d.top+z/2).text(function(t){return t}),t}if(L.selectAll(".nv-noData").remove(),i=r.xScale(),a=r.yScale(),k)r.yDomain(null);else{var H=C.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,r.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),Y=[d3.min(H,function(t){return t[0]}),d3.max(H,function(t){return t[1]})];r.yDomain(Y)}I.domain([0,C[0].values.length-1]).range([0,j]).clamp(!0);var C=e(N.i,C),q=w?"none":"all",G=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([C]),X=G.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),K=G.select("g");if(X.append("g").attr("class","nv-interactive"),X.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-background"),X.append("g").attr("class","nv-linesWrap").style("pointer-events",q),X.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),X.append("g").attr("class","nv-legendWrap"),X.append("g").attr("class","nv-controlsWrap"),g&&(l.width(j),K.select(".nv-legendWrap").datum(C).call(l),d.top!=l.height()&&(d.top=l.height(),z=(f||parseInt(L.style("height"))||400)-d.top-d.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),x){var Z=[{key:"Re-scale y-axis",disabled:!k}];c.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),K.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-d.top+")").call(c)}G.attr("transform","translate("+d.left+","+d.top+")"),b&&K.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)");var Q=C.filter(function(t){return t.tempDisabled});G.select(".tempDisabled").remove(),Q.length&&G.append("text").attr("class","tempDisabled").attr("x",j/2).attr("y","-.71em").style("text-anchor","end").text(Q.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(u.width(j).height(z).margin({left:d.left,top:d.top}).svgContainer(L).xScale(i),G.select(".nv-interactive").call(u)),X.select(".nv-background").append("rect"),K.select(".nv-background rect").attr("width",j).attr("height",z),r.y(function(t){return t.display.y}).width(j).height(z).color(C.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!C[e].disabled&&!C[e].tempDisabled}));var J=K.select(".nv-linesWrap").datum(C.filter(function(t){return!t.disabled&&!t.tempDisabled}));J.call(r),C.forEach(function(t,e){t.seriesIndex=e});var tt=C.filter(function(t){return!t.disabled&&!!A(t)}),et=K.select(".nv-avgLinesWrap").selectAll("line").data(tt,function(t){return t.key}),nt=function(t){var e=a(A(t));return 0>e?0:e>z?z:e};et.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",j).attr("y1",nt).attr("y2",nt),et.style("stroke-opacity",function(t){var e=a(A(t));return 0>e||e>z?0:1}).attr("x1",0).attr("x2",j).attr("y1",nt).attr("y2",nt),et.exit().remove();var it=J.selectAll(".nv-indexLine").data([N]);it.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(W),it.attr("transform",function(t){return"translate("+I(t.i)+",0)"}).attr("height",z),m&&(s.scale(i).ticks(Math.min(C[0].values.length,j/70)).tickSize(-z,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(K.select(".nv-x.nv-axis")).call(s)),v&&(o.scale(a).ticks(z/36).tickSize(-j,0),d3.transition(K.select(".nv-y.nv-axis")).call(o)),K.select(".nv-background rect").on("click",function(){N.x=d3.mouse(this)[0],N.i=Math.round(I.invert(N.x)),T.index=N.i,E.stateChange(T),B()}),r.dispatch.on("elementClick",function(t){N.i=t.pointIndex,N.x=I(N.i),T.index=N.i,E.stateChange(T),B()}),c.dispatch.on("legendClick",function(e,n){e.disabled=!e.disabled,k=!e.disabled,T.rescaleY=k,E.stateChange(T),t.update()}),l.dispatch.on("stateChange",function(e){T.disabled=e.disabled,E.stateChange(T),t.update()}),u.dispatch.on("elementMousemove",function(e){r.clearHighlights();var i,a,l,c=[];if(C.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,o){a=n.interactiveBisect(s.values,e.pointXValue,t.x()),r.highlightPoint(o,a,!0);var u=s.values[a];"undefined"!=typeof u&&("undefined"==typeof i&&(i=u),"undefined"==typeof l&&(l=t.xScale()(t.x()(u,a))),c.push({key:s.key,value:t.y()(u,a),color:h(s,s.seriesIndex)}))}),c.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(c.map(function(t){return t.value}),p,g);null!==m&&(c[m].highlight=!0)}var v=s.tickFormat()(t.x()(i,a),a);u.tooltip.position({
left:l+d.left,top:e.mouseY+d.top}).chartContainer(R.parentNode).enabled(y).valueFormatter(function(t,e){return o.tickFormat()(t)}).data({value:v,series:c})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(t){E.tooltipHide(),r.clearHighlights()}),E.on("tooltipShow",function(t){y&&$(t,R.parentNode)}),E.on("changeState",function(e){"undefined"!=typeof e.disabled&&(C.forEach(function(t,n){t.disabled=e.disabled[n]}),T.disabled=e.disabled),"undefined"!=typeof e.index&&(N.i=e.index,N.x=I(N.i),T.index=e.index,it.data([N])),"undefined"!=typeof e.rescaleY&&(k=e.rescaleY),t.update()})}),t}function e(t,e){return e.map(function(e,n){if(!e.values)return e;var i=r.y()(e.values[t],t);return-.95>i&&!P?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(r.y()(t,e)-i)/(1+i)},t}),e)})}var i,a,r=n.models.line(),s=n.models.axis(),o=n.models.axis(),l=n.models.legend(),c=n.models.legend(),u=n.interactiveGuideline(),d={top:30,right:30,bottom:50,left:60},h=n.utils.defaultColor(),p=null,f=null,g=!0,m=!0,v=!0,b=!1,y=!0,x=!0,w=!1,k=!0,C=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},D=r.id(),T={index:0,rescaleY:k},S=null,_="No Data Available.",A=function(t){return t.average},E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),M=250,P=!1;s.orient("bottom").tickPadding(7),o.orient(b?"right":"left"),c.updateState(!1);var I=d3.scale.linear(),N={i:0,x:0},$=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=s.tickFormat()(r.x()(e.point,e.pointIndex)),u=o.tickFormat()(r.y()(e.point,e.pointIndex)),d=C(e.series.key,c,u,e,t);n.tooltip.show([a,l],d,null,null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],E.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){E.tooltipHide(t)}),E.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=E,t.lines=r,t.legend=l,t.xAxis=s,t.yAxis=o,t.interactiveLayer=u,d3.rebind(t,r,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(p=e,t):p},t.height=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),l.color(h),t):h},t.rescaleY=function(e){return arguments.length?(k=e,t):k},t.showControls=function(e){return arguments.length?(x=e,t):x},t.useInteractiveGuideline=function(e){return arguments.length?(w=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):w},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(b=e,o.orient(e?"right":"left"),t):b},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(C=e,t):C},t.state=function(e){return arguments.length?(T=e,t):T},t.defaultState=function(e){return arguments.length?(S=e,t):S},t.noData=function(e){return arguments.length?(_=e,t):_},t.average=function(e){return arguments.length?(A=e,t):A},t.transitionDuration=function(e){return arguments.length?(M=e,t):M},t.noErrorCheck=function(e){return arguments.length?(P=e,t):P},t},n.models.discreteBar=function(){"use strict";function t(n){return n.each(function(t){var n=c-l.left-l.right,d=u-l.top-l.bottom,k=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var C=e&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),y0:t.y0}})});h.domain(e||d3.merge(C).map(function(t){return t.x})).rangeBands(a||[0,n],.1),p.domain(i||d3.extent(d3.merge(C).map(function(t){return t.y}).concat(m))),p.range(b?r||[d-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]:r||[d,0]),s=s||h,o=o||p.copy().range([p(0),p(0)]);{var D=k.selectAll("g.nv-wrap.nv-discretebar").data([t]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),S=T.append("g");D.select("g")}S.append("g").attr("class","nv-groups"),D.attr("transform","translate("+l.left+","+l.top+")");var _=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});_.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),_.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),_.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),_.transition().style("stroke-opacity",1).style("fill-opacity",.75);var A=_.selectAll("g.nv-bar").data(function(t){return t.values});A.exit().remove();var E=A.enter().append("g").attr("transform",function(t,e,n){return"translate("+(h(f(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),x.elementMouseover({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),x.elementMouseout({value:g(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){x.elementClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){x.elementDblClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});E.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/t.length),b?(E.append("text").attr("text-anchor","middle"),A.select("text").text(function(t,e){return y(g(t,e))}).transition().attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?p(g(t,e))-p(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",w).transition().attr("width",.9*h.rangeBand()/t.length),A.transition().attr("transform",function(t,e){var n=h(f(t,e))+.05*h.rangeBand(),i=g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e));return"translate("+n+", "+i+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(i&&i[0]||0))||1)}),s=h.copy(),o=p.copy()}),t}var e,i,a,r,s,o,l={top:0,right:0,bottom:0,left:0},c=960,u=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=[0],v=n.utils.defaultColor(),b=!1,y=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";return t.dispatch=x,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(g=e,t):g},t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(u=e,t):u},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceY=function(e){return arguments.length?(m=e,t):m},t.color=function(e){return arguments.length?(v=n.utils.getColor(e),t):v},t.id=function(e){return arguments.length?(d=e,t):d},t.showValues=function(e){return arguments.length?(b=e,t):b},t.valueFormat=function(e){return arguments.length?(y=e,t):y},t.rectClass=function(e){return arguments.length?(w=e,t):w},t},n.models.discreteBarChart=function(){"use strict";function t(n){return n.each(function(n){var u=d3.select(this),m=this,w=(l||parseInt(u.style("width"))||960)-o.left-o.right,k=(c||parseInt(u.style("height"))||400)-o.top-o.bottom;if(t.update=function(){b.beforeUpdate(),u.transition().duration(y).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var C=u.selectAll(".nv-noData").data([v]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",o.left+w/2).attr("y",o.top+k/2).text(function(t){return t}),t}u.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale().clamp(!0);var D=u.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),T=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),S=T.append("defs"),_=D.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),T.append("g").attr("class","nv-barsWrap"),_.attr("transform","translate("+o.left+","+o.top+")"),p&&_.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),a.width(w).height(k);var A=_.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(A.transition().call(a),S.append("clipPath").attr("id","nv-x-label-clip-"+a.id()).append("rect"),_.select("#nv-x-label-clip-"+a.id()+" rect").attr("width",e.rangeBand()*(f?2:1)).attr("height",16).attr("x",-e.rangeBand()/(f?1:2)),d){r.scale(e).ticks(w/100).tickSize(-k,0),_.select(".nv-x.nv-axis").attr("transform","translate(0,"+(i.range()[0]+(a.showValues()&&i.domain()[0]<0?16:0))+")"),_.select(".nv-x.nv-axis").transition().call(r);var E=_.select(".nv-x.nv-axis").selectAll("g");f&&E.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}h&&(s.scale(i).ticks(k/36).tickSize(-w,0),_.select(".nv-y.nv-axis").transition().call(s)),_.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",i(0)).attr("y2",i(0)),b.on("tooltipShow",function(t){g&&x(t,m.parentNode)})}),t}var e,i,a=n.models.discreteBar(),r=n.models.axis(),s=n.models.axis(),o={top:15,right:10,bottom:50,left:60},l=null,c=null,u=n.utils.getColor(),d=!0,h=!0,p=!1,f=!1,g=!0,m=function(t,e,n,i,a){return"<h3>"+e+"</h3><p>"+n+"</p>"},v="No Data Available.",b=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),y=250;r.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(p?"right":"left").tickFormat(d3.format(",.1f"));var x=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=r.tickFormat()(a.x()(e.point,e.pointIndex)),u=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=m(e.series.key,c,u,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],b.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){b.tooltipHide(t)}),b.on("tooltipHide",function(){g&&n.tooltip.cleanup()}),t.dispatch=b,t.discretebar=a,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),a.color(u),t):u},t.showXAxis=function(e){return arguments.length?(d=e,t):d},t.showYAxis=function(e){return arguments.length?(h=e,t):h},t.rightAlignYAxis=function(e){return arguments.length?(p=e,s.orient(e?"right":"left"),t):p},t.staggerLabels=function(e){return arguments.length?(f=e,t):f},t.tooltips=function(e){return arguments.length?(g=e,t):g},t.tooltipContent=function(e){return arguments.length?(m=e,t):m},t.noData=function(e){return arguments.length?(v=e,t):v},t.transitionDuration=function(e){return arguments.length?(y=e,t):y},t},n.models.distribution=function(){"use strict";function t(n){return n.each(function(t){var n=(a-("x"===s?i.left+i.right:i.top+i.bottom),"x"==s?"y":"x"),u=d3.select(this);e=e||c;var d=u.selectAll("g.nv-distribution").data([t]),h=d.enter().append("g").attr("class","nvd3 nv-distribution"),p=(h.append("g"),d.select("g"));d.attr("transform","translate("+i.left+","+i.top+")");var f=p.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});f.enter().append("g"),f.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var g=f.selectAll("line.nv-dist"+s).data(function(t){return t.values});g.enter().append("line").attr(s+"1",function(t,n){return e(o(t,n))}).attr(s+"2",function(t,n){return e(o(t,n))}),f.exit().selectAll("line.nv-dist"+s).transition().attr(s+"1",function(t,e){return c(o(t,e))}).attr(s+"2",function(t,e){return c(o(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+s+" nv-dist"+s+"-"+e}).attr(n+"1",0).attr(n+"2",r),g.transition().attr(s+"1",function(t,e){return c(o(t,e))}).attr(s+"2",function(t,e){return c(o(t,e))}),e=c.copy()}),t}var e,i={top:0,right:0,bottom:0,left:0},a=400,r=8,s="x",o=function(t){return t[s]},l=n.utils.defaultColor(),c=d3.scale.linear();return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.axis=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(r=e,t):r},t.getData=function(e){return arguments.length?(o=d3.functor(e),t):o},t.scale=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),t):l},t},n.models.historicalBarChart=function(){"use strict";function t(n){return n.each(function(v){var D=d3.select(this),T=this,S=(u||parseInt(D.style("width"))||960)-l.left-l.right,_=(d||parseInt(D.style("height"))||400)-l.top-l.bottom;if(t.update=function(){D.transition().duration(k).call(t)},t.container=this,b.disabled=v.map(function(t){return!!t.disabled}),!y){var A;y={};for(A in b)y[A]=b[A]instanceof Array?b[A].slice(0):b[A]}if(!(v&&v.length&&v.filter(function(t){return t.values.length}).length)){var E=D.selectAll(".nv-noData").data([x]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",l.left+S/2).attr("y",l.top+_/2).text(function(t){return t}),t}D.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var M=D.selectAll("g.nv-wrap.nv-historicalBarChart").data([v]),P=M.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),I=M.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-legendWrap"),h&&(o.width(S),I.select(".nv-legendWrap").datum(v).call(o),l.top!=o.height()&&(l.top=o.height(),_=(d||parseInt(D.style("height"))||400)-l.top-l.bottom),M.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),M.attr("transform","translate("+l.left+","+l.top+")"),g&&I.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)"),a.width(S).height(_).color(v.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!v[e].disabled}));var N=I.select(".nv-barsWrap").datum(v.filter(function(t){return!t.disabled}));N.transition().call(a),p&&(r.scale(e).tickSize(-_,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(r)),f&&(s.scale(i).ticks(_/36).tickSize(-S,0),I.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("legendClick",function(e,i){e.disabled=!e.disabled,v.filter(function(t){return!t.disabled}).length||v.map(function(t){return t.disabled=!1,M.selectAll(".nv-series").classed("disabled",!1),t}),b.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(b),n.transition().call(t)}),o.dispatch.on("legendDblclick",function(e){v.forEach(function(t){t.disabled=!0}),e.disabled=!1,b.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(b),t.update()}),w.on("tooltipShow",function(t){m&&C(t,T.parentNode)}),w.on("changeState",function(e){"undefined"!=typeof e.disabled&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),b.disabled=e.disabled),t.update()})}),t}var e,i,a=n.models.historicalBar(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l={top:30,right:90,bottom:50,left:90},c=n.utils.defaultColor(),u=null,d=null,h=!1,p=!0,f=!0,g=!1,m=!0,v=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},b={},y=null,x="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=250;r.orient("bottom").tickPadding(7),s.orient(g?"right":"left");var C=function(e,i){if(i){var o=d3.select(i).select("svg"),l=o.node()?o.attr("viewBox"):null;if(l){l=l.split(" ");var c=parseInt(o.style("width"))/l[2];e.pos[0]=e.pos[0]*c,e.pos[1]=e.pos[1]*c}}var u=e.pos[0]+(i.offsetLeft||0),d=e.pos[1]+(i.offsetTop||0),h=r.tickFormat()(a.x()(e.point,e.pointIndex)),p=s.tickFormat()(a.y()(e.point,e.pointIndex)),f=v(e.series.key,h,p,e,t);n.tooltip.show([u,d],f,null,null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],w.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),t.dispatch=w,t.bars=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),o.color(c),t):c},t.showLegend=function(e){return arguments.length?(h=e,t):h},t.showXAxis=function(e){return arguments.length?(p=e,t):p},t.showYAxis=function(e){return arguments.length?(f=e,t):f},t.rightAlignYAxis=function(e){return arguments.length?(g=e,s.orient(e?"right":"left"),t):g},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.state=function(e){return arguments.length?(b=e,t):b},t.defaultState=function(e){return arguments.length?(y=e,t):y},t.noData=function(e){return arguments.length?(x=e,t):x},t.transitionDuration=function(e){return arguments.length?(k=e,t):k},t},n.models.indentedTree=function(){"use strict";function t(e){return e.each(function(e){function n(e,i,a){return d3.event.stopPropagation(),d3.event.shiftKey&&!a?(d3.event.shiftKey=!1,e.values&&e.values.forEach(function(t){(t.values||t._values)&&n(t,0,!0)}),!0):s(e)?(e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),void t.update()):!0}function i(t){return t._values&&t._values.length?p:t.values&&t.values.length?f:""}function r(t){return t._values&&t._values.length}function s(t){var e=t.values||t._values;return e&&e.length}var b=1,y=d3.select(this),x=d3.layout.tree().children(function(t){return t.values}).size([a,u]);t.update=function(){y.transition().duration(600).call(t)},e[0]||(e[0]={key:c});var w=x.nodes(e[0]),k=d3.select(this).selectAll("div").data([[w]]),C=k.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),D=C.append("table"),T=k.select("table").attr("width","100%").attr("class",h);if(o){var S=D.append("thead"),_=S.append("tr");d.forEach(function(t){_.append("th").attr("width",t.width?t.width:"10%").style("text-align","numeric"==t.type?"right":"left").append("span").text(t.label)})}var A=T.selectAll("tbody").data(function(t){return t});A.enter().append("tbody"),b=d3.max(w,function(t){return t.depth}),x.size([a,b*u]);var E=A.selectAll("tr").data(function(t){return t.filter(function(t){return l&&!t.children?l(t):!0})},function(t,e){return t.id||t.id||++v});E.exit().remove(),E.select("img.nv-treeicon").attr("src",i).classed("folded",r);var M=E.enter().append("tr");d.forEach(function(t,e){var a=M.append("td").style("padding-left",function(t){return(e?0:t.depth*u+12+(i(t)?0:16))+"px"},"important").style("text-align","numeric"==t.type?"right":"left");0==e&&a.append("img").classed("nv-treeicon",!0).classed("nv-folded",r).attr("src",i).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(t){return i(t)?"inline-block":"none"}).on("click",n),a.each(function(n){!e&&m(n)?d3.select(this).append("a").attr("href",m).attr("class",d3.functor(t.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(t.classes)).text(function(e){return t.format?t.format(e):e[t.key]||"-"})}),t.showCount&&(a.append("span").attr("class","nv-childrenCount"),E.selectAll("span.nv-childrenCount").text(function(t){return t.values&&t.values.length||t._values&&t._values.length?"("+(t.values&&t.values.filter(function(t){return l?l(t):!0}).length||t._values&&t._values.filter(function(t){return l?l(t):!0}).length||0)+")":""}))}),E.order().on("click",function(t){g.elementClick({row:this,data:t,pos:[t.x,t.y]})}).on("dblclick",function(t){g.elementDblclick({row:this,data:t,pos:[t.x,t.y]})}).on("mouseover",function(t){g.elementMouseover({row:this,data:t,pos:[t.x,t.y]})}).on("mouseout",function(t){g.elementMouseout({row:this,data:t,pos:[t.x,t.y]})})}),t}var e={top:0,right:0,bottom:0,left:0},i=960,a=500,r=n.utils.defaultColor(),s=Math.floor(1e4*Math.random()),o=!0,l=!1,c="No Data Available.",u=20,d=[{key:"key",label:"Name",type:"text"}],h=null,p="images/grey-plus.png",f="images/grey-minus.png",g=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),m=function(t){return t.url},v=0;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.color=function(e){return arguments.length?(r=n.utils.getColor(e),scatter.color(r),t):r},t.id=function(e){return arguments.length?(s=e,t):s},t.header=function(e){return arguments.length?(o=e,t):o},t.noData=function(e){return arguments.length?(c=e,t):c},t.filterZero=function(e){return arguments.length?(l=e,t):l},t.columns=function(e){return arguments.length?(d=e,t):d},t.tableClass=function(e){return arguments.length?(h=e,t):h},t.iconOpen=function(e){return arguments.length?(p=e,t):p},t.iconClose=function(e){return arguments.length?(f=e,t):f},t.getUrl=function(e){return arguments.length?(m=e,t):m},t},n.models.legend=function(){"use strict";function t(h){return h.each(function(t){var h=i-e.left-e.right,p=d3.select(this),f=p.selectAll("g.nv-legend").data([t]),g=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var m=g.selectAll(".nv-series").data(function(t){return t}),v=m.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(e,n){d.legendClick(e,n),c&&(u?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){d.legendDblclick(e,n),c&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),m.classed("disabled",function(t){return t.disabled}),m.exit().remove(),m.select("circle").style("fill",function(t,e){return t.color||s(t,e)}).style("stroke",function(t,e){return t.color||s(t,e)}),m.select("text").text(r),o){var b=[];m.each(function(t,e){var i,a=d3.select(this).select("text");try{if(i=a.getComputedTextLength(),0>=i)throw Error()}catch(r){i=n.utils.calcApproxTextWidth(a)}b.push(i+28)});for(var y=0,x=0,w=[];h>x&&y<b.length;)w[y]=b[y],x+=b[y++];for(0===y&&(y=1);x>h&&y>1;){w=[],y--;for(var k=0;k<b.length;k++)b[k]>(w[k%y]||0)&&(w[k%y]=b[k]);x=w.reduce(function(t,e,n,i){return t+e})}for(var C=[],D=0,T=0;y>D;D++)C[D]=T,T+=w[D];m.attr("transform",function(t,e){return"translate("+C[e%y]+","+(5+20*Math.floor(e/y))+")"}),l?g.attr("transform","translate("+(i-e.right-x)+","+e.top+")"):g.attr("transform","translate(0,"+e.top+")"),a=e.top+e.bottom+20*Math.ceil(b.length/y)}else{var S,_=5,A=5,E=0;m.attr("transform",function(t,n){var a=d3.select(this).select("text").node().getComputedTextLength()+28;return S=A,i<e.left+e.right+S+a&&(A=S=5,_+=20),A+=a,A>E&&(E=A),"translate("+S+","+_+")"}),g.attr("transform","translate("+(i-e.right-E)+","+e.top+")"),a=e.top+e.bottom+_+15}}),t}var e={top:5,right:0,bottom:5,left:0},i=400,a=20,r=function(t){return t.key},s=n.utils.defaultColor(),o=!0,l=!0,c=!0,u=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=d,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.key=function(e){return arguments.length?(r=e,t):r},t.color=function(e){return arguments.length?(s=n.utils.getColor(e),t):s},t.align=function(e){return arguments.length?(o=e,t):o},t.rightAlign=function(e){return arguments.length?(l=e,t):l},t.updateState=function(e){return arguments.length?(c=e,t):c},t.radioButtonMode=function(e){return arguments.length?(u=e,t):u},t},n.models.line=function(){"use strict";function t(v){return v.each(function(t){var v=s-r.left-r.right,b=o-r.top-r.bottom,y=d3.select(this);e=a.xScale(),i=a.yScale(),g=g||e,m=m||i;var x=y.selectAll("g.nv-wrap.nv-line").data([t]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=w.append("defs"),C=w.append("g"),D=x.select("g");C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+r.left+","+r.top+")"),a.width(v).height(b);var T=x.select(".nv-scatterWrap");T.transition().call(a),k.append("clipPath").attr("id","nv-edge-clip-"+a.id()).append("rect"),x.select("#nv-edge-clip-"+a.id()+" rect").attr("width",v).attr("height",b>0?b:0),D.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":""),T.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":"");var S=x.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});S.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),S.exit().remove(),S.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),S.transition().style("stroke-opacity",1).style("fill-opacity",.5);var _=S.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});_.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(c(t,e)))}).y0(function(t,e){return n.utils.NaNtoZero(m(u(t,e)))}).y1(function(t,e){return m(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])}),S.exit().selectAll("path.nv-area").remove(),_.transition().attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(c(t,i)))}).y0(function(t,e){return n.utils.NaNtoZero(i(u(t,e)))}).y1(function(t,e){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});var A=S.selectAll("path.nv-line").data(function(t){return[t.values]});A.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(c(t,e)))}).y(function(t,e){return n.utils.NaNtoZero(m(u(t,e)))})),A.transition().attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(c(t,i)))}).y(function(t,e){return n.utils.NaNtoZero(i(u(t,e)))})),g=e.copy(),m=i.copy()}),t}var e,i,a=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},s=960,o=500,l=n.utils.defaultColor(),c=function(t){return t.x},u=function(t){return t.y},d=function(t,e){return!isNaN(u(t,e))&&null!==u(t,e)},h=function(t){return t.area},p=!1,f="linear";a.size(16).sizeDomain([16,256]);var g,m;return t.dispatch=a.dispatch,t.scatter=a,d3.rebind(t,a,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(c=e,a.x(e),t):c},t.y=function(e){return arguments.length?(u=e,a.y(e),t):u},t.clipEdge=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),a.color(l),t):l},t.interpolate=function(e){return arguments.length?(f=e,t):f},t.defined=function(e){return arguments.length?(d=e,t):d},t.isArea=function(e){return arguments.length?(h=d3.functor(e),t):h},t},n.models.lineChart=function(){"use strict";function t(y){return y.each(function(y){var S=d3.select(this),_=this,A=(d||parseInt(S.style("width"))||960)-c.left-c.right,E=(h||parseInt(S.style("height"))||400)-c.top-c.bottom;if(t.update=function(){S.transition().duration(D).call(t)},t.container=this,x.disabled=y.map(function(t){return!!t.disabled}),!w){var M;w={};for(M in x)w[M]=x[M]instanceof Array?x[M].slice(0):x[M]}if(!(y&&y.length&&y.filter(function(t){return t.values.length}).length)){var P=S.selectAll(".nv-noData").data([k]);return P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",c.left+A/2).attr("y",c.top+E/2).text(function(t){return t;

}),t}S.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var I=S.selectAll("g.nv-wrap.nv-lineChart").data([y]),N=I.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),$=I.select("g");N.append("rect").style("opacity",0),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap"),N.append("g").attr("class","nv-legendWrap"),N.append("g").attr("class","nv-interactive"),$.select("rect").attr("width",A).attr("height",E>0?E:0),p&&(o.width(A),$.select(".nv-legendWrap").datum(y).call(o),c.top!=o.height()&&(c.top=o.height(),E=(h||parseInt(S.style("height"))||400)-c.top-c.bottom),I.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")),I.attr("transform","translate("+c.left+","+c.top+")"),m&&$.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),v&&(l.width(A).height(E).margin({left:c.left,top:c.top}).svgContainer(S).xScale(e),I.select(".nv-interactive").call(l)),a.width(A).height(E).color(y.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!y[e].disabled}));var O=$.select(".nv-linesWrap").datum(y.filter(function(t){return!t.disabled}));O.transition().call(a),f&&(r.scale(e).ticks(A/100).tickSize(-E,0),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),$.select(".nv-x.nv-axis").transition().call(r)),g&&(s.scale(i).ticks(E/36).tickSize(-A,0),$.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),l.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,o,d,h=[];if(y.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,s){o=n.interactiveBisect(r.values,e.pointXValue,t.x()),a.highlightPoint(s,o,!0);var l=r.values[o];"undefined"!=typeof l&&("undefined"==typeof i&&(i=l),"undefined"==typeof d&&(d=t.xScale()(t.x()(l,o))),h.push({key:r.key,value:t.y()(l,o),color:u(r,r.seriesIndex)}))}),h.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(h.map(function(t){return t.value}),p,g);null!==m&&(h[m].highlight=!0)}var v=r.tickFormat()(t.x()(i,o));l.tooltip.position({left:d+c.left,top:e.mouseY+c.top}).chartContainer(_.parentNode).enabled(b).valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:v,series:h})(),l.renderGuideLine(d)}),l.dispatch.on("elementMouseout",function(t){C.tooltipHide(),a.clearHighlights()}),C.on("tooltipShow",function(t){b&&T(t,_.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&y.length===e.disabled.length&&(y.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),t.update()})}),t}var e,i,a=n.models.line(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.interactiveGuideline(),c={top:30,right:20,bottom:50,left:60},u=n.utils.defaultColor(),d=null,h=null,p=!0,f=!0,g=!0,m=!1,v=!1,b=!0,y=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D=250;r.orient("bottom").tickPadding(7),s.orient(m?"right":"left");var T=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=r.tickFormat()(a.x()(e.point,e.pointIndex)),u=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=y(e.series.key,c,u,e,t);n.tooltip.show([o,l],d,null,null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],C.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=C,t.lines=a,t.legend=o,t.xAxis=r,t.yAxis=s,t.interactiveLayer=l,d3.rebind(t,a,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),o.color(u),t):u},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,s.orient(e?"right":"left"),t):m},t.useInteractiveGuideline=function(e){return arguments.length?(v=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):v},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(y=e,t):y},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(D=e,t):D},t},n.models.linePlusBarChart=function(){"use strict";function t(n){return n.each(function(n){var f=d3.select(this),g=this,y=(h||parseInt(f.style("width"))||960)-d.left-d.right,T=(p||parseInt(f.style("height"))||400)-d.top-d.bottom;if(t.update=function(){f.transition().call(t)},x.disabled=n.map(function(t){return!!t.disabled}),!w){var S;w={};for(S in x)w[S]=x[S]instanceof Array?x[S].slice(0):x[S]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var _=f.selectAll(".nv-noData").data([k]);return _.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),_.attr("x",d.left+y/2).attr("y",d.top+T/2).text(function(t){return t}),t}f.selectAll(".nv-noData").remove();var A=n.filter(function(t){return!t.disabled&&t.bar}),E=n.filter(function(t){return!t.bar});e=E.filter(function(t){return!t.disabled}).length&&E.filter(function(t){return!t.disabled})[0].values.length?r.xScale():s.xScale(),i=s.yScale(),a=r.yScale();var M=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),P=M.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),I=M.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y1 nv-axis"),P.append("g").attr("class","nv-y2 nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-linesWrap"),P.append("g").attr("class","nv-legendWrap"),v&&(u.width(y/2),I.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(u),d.top!=u.height()&&(d.top=u.height(),T=(p||parseInt(f.style("height"))||400)-d.top-d.bottom),I.select(".nv-legendWrap").attr("transform","translate("+y/2+","+-d.top+")")),M.attr("transform","translate("+d.left+","+d.top+")"),r.width(y).height(T).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar})),s.width(y).height(T).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar}));var N=I.select(".nv-barsWrap").datum(A.length?A:[{values:[]}]),$=I.select(".nv-linesWrap").datum(E[0]&&!E[0].disabled?E:[{values:[]}]);d3.transition(N).call(s),d3.transition($).call(r),o.scale(e).ticks(y/100).tickSize(-T,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(I.select(".nv-x.nv-axis")).call(o),l.scale(i).ticks(T/36).tickSize(-y,0),d3.transition(I.select(".nv-y1.nv-axis")).style("opacity",A.length?1:0).call(l),c.scale(a).ticks(T/36).tickSize(A.length?0:-y,0),I.select(".nv-y2.nv-axis").style("opacity",E.length?1:0).attr("transform","translate("+y+",0)"),d3.transition(I.select(".nv-y2.nv-axis")).call(c),u.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),C.on("tooltipShow",function(t){b&&D(t,g.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),t.update()})}),t}var e,i,a,r=n.models.line(),s=n.models.historicalBar(),o=n.models.axis(),l=n.models.axis(),c=n.models.axis(),u=n.models.legend(),d={top:30,right:60,bottom:50,left:60},h=null,p=null,f=function(t){return t.x},g=function(t){return t.y},m=n.utils.defaultColor(),v=!0,b=!0,y=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");s.padData(!0),r.clipEdge(!1).padData(!0),o.orient("bottom").tickPadding(7).highlightZero(!1),l.orient("left"),c.orient("right");var D=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),s=e.pos[1]+(i.offsetTop||0),u=o.tickFormat()(r.x()(e.point,e.pointIndex)),d=(e.series.bar?l:c).tickFormat()(r.y()(e.point,e.pointIndex)),h=y(e.series.key,u,d,e,t);n.tooltip.show([a,s],h,e.value<0?"n":"s",null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],C.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],C.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=C,t.legend=u,t.lines=r,t.bars=s,t.xAxis=o,t.y1Axis=l,t.y2Axis=c,d3.rebind(t,r,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,r.x(e),s.x(e),t):f},t.y=function(e){return arguments.length?(g=e,r.y(e),s.y(e),t):g},t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),u.color(m),t):m},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(y=e,t):y},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t},n.models.lineWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function C(t){var e=+("e"==t),n=e?1:-1,i=$/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function A(){p.empty()||p.extent(w),V.data([p.empty()?a.domain():w]).each(function(t,n){var i=a(t[0])-e.range()[0],r=e.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",0>i?0:i),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",0>r?0:r)})}function E(){w=p.empty()?null:p.extent();var t=p.empty()?a.domain():p.extent();if(!(Math.abs(t[0]-t[1])<=1)){T.brush({extent:t,brush:p}),A();var e=L.select(".nv-focus .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return s.x()(e,n)>=t[0]&&s.x()(e,n)<=t[1]})}}));e.transition().duration(S).call(s),L.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(l),L.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(c)}}var M=d3.select(this),P=this,I=(v||parseInt(M.style("width"))||960)-f.left-f.right,N=(b||parseInt(M.style("height"))||400)-f.top-f.bottom-y,$=y-g.top-g.bottom;if(t.update=function(){M.transition().duration(S).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var O=M.selectAll(".nv-noData").data([D]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",f.left+I/2).attr("y",f.top+N/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),e=s.xScale(),i=s.yScale(),a=o.xScale(),r=o.yScale();var F=M.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),B=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),L=F.select("g");B.append("g").attr("class","nv-legendWrap");var R=B.append("g").attr("class","nv-focus");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-linesWrap");var j=B.append("g").attr("class","nv-context");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-linesWrap"),j.append("g").attr("class","nv-brushBackground"),j.append("g").attr("class","nv-x nv-brush"),x&&(h.width(I),L.select(".nv-legendWrap").datum(n).call(h),f.top!=h.height()&&(f.top=h.height(),N=(b||parseInt(M.style("height"))||400)-f.top-f.bottom-y),L.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),F.attr("transform","translate("+f.left+","+f.top+")"),s.width(I).height(N).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),o.defined(s.defined()).width(I).height($).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),L.select(".nv-context").attr("transform","translate(0,"+(N+f.bottom+g.top)+")");var z=L.select(".nv-context .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}));d3.transition(z).call(o),l.scale(e).ticks(I/100).tickSize(-N,0),c.scale(i).ticks(N/36).tickSize(-I,0),L.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")"),p.x(a).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),E(),t.transitionDuration(e)}),w&&p.extent(w);var V=L.select(".nv-brushBackground").selectAll("g").data([w||p.extent()]),W=V.enter().append("g");W.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",$),W.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",$);var U=L.select(".nv-x.nv-brush").call(p);U.selectAll("rect").attr("height",$),U.selectAll(".resize").append("path").attr("d",C),E(),u.scale(a).ticks(I/100).tickSize(-$,0),L.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(L.select(".nv-context .nv-x.nv-axis")).call(u),d.scale(r).ticks($/36).tickSize(-I,0),d3.transition(L.select(".nv-context .nv-y.nv-axis")).call(d),L.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),h.dispatch.on("stateChange",function(e){t.update()}),T.on("tooltipShow",function(t){k&&_(t,P.parentNode)})}),t}var e,i,a,r,s=n.models.line(),o=n.models.line(),l=n.models.axis(),c=n.models.axis(),u=n.models.axis(),d=n.models.axis(),h=n.models.legend(),p=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},m=n.utils.defaultColor(),v=null,b=null,y=100,x=!0,w=null,k=!0,C=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},D="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush"),S=250;s.clipEdge(!0),o.interactive(!1),l.orient("bottom").tickPadding(5),c.orient("left"),u.orient("bottom").tickPadding(5),d.orient("left");var _=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),r=e.pos[1]+(i.offsetTop||0),o=l.tickFormat()(s.x()(e.point,e.pointIndex)),u=c.tickFormat()(s.y()(e.point,e.pointIndex)),d=C(e.series.key,o,u,e,t);n.tooltip.show([a,r],d,null,null,i)};return s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],T.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){T.tooltipHide(t)}),T.on("tooltipHide",function(){k&&n.tooltip.cleanup()}),t.dispatch=T,t.legend=h,t.lines=s,t.lines2=o,t.xAxis=l,t.yAxis=c,t.x2Axis=u,t.y2Axis=d,d3.rebind(t,s,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(s.x(e),o.x(e),t):s.x},t.y=function(e){return arguments.length?(s.y(e),o.y(e),t):s.y},t.margin=function(e){return arguments.length?(f.top="undefined"!=typeof e.top?e.top:f.top,f.right="undefined"!=typeof e.right?e.right:f.right,f.bottom="undefined"!=typeof e.bottom?e.bottom:f.bottom,f.left="undefined"!=typeof e.left?e.left:f.left,t):f},t.margin2=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(v=e,t):v},t.height=function(e){return arguments.length?(b=e,t):b},t.height2=function(e){return arguments.length?(y=e,t):y},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),h.color(m),t):m},t.showLegend=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(k=e,t):k},t.tooltipContent=function(e){return arguments.length?(C=e,t):C},t.interpolate=function(e){return arguments.length?(s.interpolate(e),o.interpolate(e),t):s.interpolate()},t.noData=function(e){return arguments.length?(D=e,t):D},t.xTickFormat=function(e){return arguments.length?(l.tickFormat(e),u.tickFormat(e),t):l.tickFormat()},t.yTickFormat=function(e){return arguments.length?(c.tickFormat(e),d.tickFormat(e),t):c.tickFormat()},t.brushExtent=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(S=e,t):S},t},n.models.linePlusBarWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function I(t){var e=+("e"==t),n=e?1:-1,i=W/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function B(){x.empty()||x.extent(M),nt.data([x.empty()?a.domain():M]).each(function(t,e){var n=a(t[0])-a.range()[0],i=a.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",0>i?0:i)})}function L(){M=x.empty()?null:x.extent(),e=x.empty()?a.domain():x.extent(),$.brush({extent:e,brush:x}),B(),d.width(z).height(V).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),c.width(z).height(V).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var t=Z.select(".nv-focus .nv-barsWrap").datum(H.length?H.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return d.x()(t,n)>=e[0]&&d.x()(t,n)<=e[1]})}}):[{values:[]}]),o=Z.select(".nv-focus .nv-linesWrap").datum(Y[0].disabled?[{values:[]}]:Y.map(function(t,n){return{key:t.key,values:t.values.filter(function(t,n){return c.x()(t,n)>=e[0]&&c.x()(t,n)<=e[1]})}}));i=H.length?d.xScale():c.xScale(),p.scale(i).ticks(z/100).tickSize(-V,0),p.domain([Math.ceil(e[0]),Math.floor(e[1])]),Z.select(".nv-x.nv-axis").transition().duration(O).call(p),t.transition().duration(O).call(d),o.transition().duration(O).call(c),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),g.scale(r).ticks(V/36).tickSize(-z,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",H.length?1:0),m.scale(s).ticks(V/36).tickSize(H.length?0:-z,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),Z.select(".nv-focus .nv-y1.nv-axis").transition().duration(O).call(g),Z.select(".nv-focus .nv-y2.nv-axis").transition().duration(O).call(m)}var R=d3.select(this),j=this,z=(C||parseInt(R.style("width"))||960)-w.left-w.right,V=(D||parseInt(R.style("height"))||400)-w.top-w.bottom-T,W=T-k.top-k.bottom;if(t.update=function(){R.transition().duration(O).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var U=R.selectAll(".nv-noData").data([N]);return U.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",w.left+z/2).attr("y",w.top+V/2).text(function(t){return t}),t}R.selectAll(".nv-noData").remove();var H=n.filter(function(t){return!t.disabled&&t.bar}),Y=n.filter(function(t){return!t.bar});i=d.xScale(),a=f.scale(),r=d.yScale(),s=c.yScale(),o=h.yScale(),l=u.yScale();var q=n.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:_(t,e)}})}),G=n.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:_(t,e)}})});i.range([0,z]),a.domain(d3.extent(d3.merge(q.concat(G)),function(t){return t.x})).range([0,z]);var X=R.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),K=X.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=X.select("g");K.append("g").attr("class","nv-legendWrap");var Q=K.append("g").attr("class","nv-focus");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","nv-barsWrap"),Q.append("g").attr("class","nv-linesWrap");var J=K.append("g").attr("class","nv-context");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap"),J.append("g").attr("class","nv-brushBackground"),J.append("g").attr("class","nv-x nv-brush"),E&&(y.width(z/2),Z.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(y),w.top!=y.height()&&(w.top=y.height(),V=(D||parseInt(R.style("height"))||400)-w.top-w.bottom-T),Z.select(".nv-legendWrap").attr("transform","translate("+z/2+","+-w.top+")")),X.attr("transform","translate("+w.left+","+w.top+")"),h.width(z).height(W).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),u.width(z).height(W).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var tt=Z.select(".nv-context .nv-barsWrap").datum(H.length?H:[{values:[]}]),et=Z.select(".nv-context .nv-linesWrap").datum(Y[0].disabled?[{values:[]}]:Y);Z.select(".nv-context").attr("transform","translate(0,"+(V+w.bottom+k.top)+")"),tt.transition().call(h),et.transition().call(u),x.x(a).on("brush",L),M&&x.extent(M);var nt=Z.select(".nv-brushBackground").selectAll("g").data([M||x.extent()]),it=nt.enter().append("g");it.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",W),it.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",W);var at=Z.select(".nv-x.nv-brush").call(x);at.selectAll("rect").attr("height",W),at.selectAll(".resize").append("path").attr("d",I),f.ticks(z/100).tickSize(-W,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),Z.select(".nv-context .nv-x.nv-axis").transition().call(f),v.scale(o).ticks(W/36).tickSize(-z,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",H.length?1:0).attr("transform","translate(0,"+a.range()[0]+")"),Z.select(".nv-context .nv-y1.nv-axis").transition().call(v),b.scale(l).ticks(W/36).tickSize(H.length?0:-z,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),Z.select(".nv-context .nv-y2.nv-axis").transition().call(b),y.dispatch.on("stateChange",function(e){t.update()}),$.on("tooltipShow",function(t){P&&F(t,j.parentNode)}),L()}),t}var e,i,a,r,s,o,l,c=n.models.line(),u=n.models.line(),d=n.models.historicalBar(),h=n.models.historicalBar(),p=n.models.axis(),f=n.models.axis(),g=n.models.axis(),m=n.models.axis(),v=n.models.axis(),b=n.models.axis(),y=n.models.legend(),x=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},C=null,D=null,T=100,S=function(t){return t.x},_=function(t){return t.y},A=n.utils.defaultColor(),E=!0,M=null,P=!0,I=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},N="No Data Available.",$=d3.dispatch("tooltipShow","tooltipHide","brush"),O=0;c.clipEdge(!0),u.interactive(!1),p.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),f.orient("bottom").tickPadding(5),v.orient("left"),b.orient("right");var F=function(i,a){e&&(i.pointIndex+=Math.ceil(e[0]));var r=i.pos[0]+(a.offsetLeft||0),s=i.pos[1]+(a.offsetTop||0),o=p.tickFormat()(c.x()(i.point,i.pointIndex)),l=(i.series.bar?g:m).tickFormat()(c.y()(i.point,i.pointIndex)),u=I(i.series.key,o,l,i,t);n.tooltip.show([r,s],u,i.value<0?"n":"s",null,a)};return c.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],$.tooltipShow(t)}),c.dispatch.on("elementMouseout.tooltip",function(t){$.tooltipHide(t)}),d.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],$.tooltipShow(t)}),d.dispatch.on("elementMouseout.tooltip",function(t){$.tooltipHide(t)}),$.on("tooltipHide",function(){P&&n.tooltip.cleanup()}),t.dispatch=$,t.legend=y,t.lines=c,t.lines2=u,t.bars=d,t.bars2=h,t.xAxis=p,t.x2Axis=f,t.y1Axis=g,t.y2Axis=m,t.y3Axis=v,t.y4Axis=b,d3.rebind(t,c,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(S=e,c.x(e),d.x(e),t):S},t.y=function(e){return arguments.length?(_=e,c.y(e),d.y(e),t):_},t.margin=function(e){return arguments.length?(w.top="undefined"!=typeof e.top?e.top:w.top,w.right="undefined"!=typeof e.right?e.right:w.right,w.bottom="undefined"!=typeof e.bottom?e.bottom:w.bottom,w.left="undefined"!=typeof e.left?e.left:w.left,t):w},t.width=function(e){return arguments.length?(C=e,t):C},t.height=function(e){return arguments.length?(D=e,t):D},t.color=function(e){return arguments.length?(A=n.utils.getColor(e),y.color(A),t):A},t.showLegend=function(e){return arguments.length?(E=e,t):E},t.tooltips=function(e){return arguments.length?(P=e,t):P},t.tooltipContent=function(e){return arguments.length?(I=e,t):I},t.noData=function(e){return arguments.length?(N=e,t):N},t.brushExtent=function(e){return arguments.length?(M=e,t):M},t},n.models.multiBar=function(){"use strict";function t(n){return n.each(function(t){var n=u-c.left-c.right,_=d-c.top-c.bottom,A=d3.select(this);k&&t.length&&(k=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),y&&(t=d3.layout.stack().offset(x).values(function(t){return t.values}).y(m)(!t.length&&k?k:t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),y&&t[0].values.map(function(e,n){var i=0,a=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a,a-=e.size):(e.y1=e.size+i,i+=e.size)})});var E=i&&a?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});h.domain(i||d3.merge(E).map(function(t){return t.x})).rangeBands(r||[0,n],T),p.domain(a||d3.extent(d3.merge(E).map(function(t){return y?t.y>0?t.y1:t.y1+t.y:t.y}).concat(v))).range(s||[_,0]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),p.domain()[0]===p.domain()[1]&&p.domain(p.domain()[0]?[p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]:[-1,1]),o=o||h,l=l||p;var M=A.selectAll("g.nv-wrap.nv-multibar").data([t]),P=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),I=P.append("defs"),N=P.append("g"),$=M.select("g");N.append("g").attr("class","nv-groups"),M.attr("transform","translate("+c.left+","+c.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),M.select("#nv-edge-clip-"+f+" rect").attr("width",n).attr("height",_),$.attr("clip-path",b?"url(#nv-edge-clip-"+f+")":"");var O=M.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),O.exit().transition().selectAll("rect.nv-bar").delay(function(e,n){return n*D/t[0].values.length}).attr("y",function(t){return l(y?t.y0:0)}).attr("height",0).remove(),O.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),O.transition().style("stroke-opacity",1).style("fill-opacity",.75);var F=O.selectAll("rect.nv-bar").data(function(e){return k&&!t.length?k.values:e.values});F.exit().remove();F.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,i){return y?0:i*h.rangeBand()/t.length}).attr("y",function(t){return l(y?t.y0:0)}).attr("height",0).attr("width",h.rangeBand()/(y?1:t.length)).attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"});F.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),S.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(y?t.length/2:e.series+.5)/t.length,p(m(e,n)+(y?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),S.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){S.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(y?t.length/2:e.series+.5)/t.length,p(m(e,n)+(y?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){S.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(y?t.length/2:e.series+.5)/t.length,p(m(e,n)+(y?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),F.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"}),C&&(e||(e=t.map(function(){return!0})),F.style("fill",function(t,n,i){return d3.rgb(C(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(C(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),y?F.transition().delay(function(e,n){return n*D/t[0].values.length}).attr("y",function(t,e){return p(y?t.y1:0)}).attr("height",function(t,e){return Math.max(Math.abs(p(t.y+(y?t.y0:0))-p(y?t.y0:0)),1)}).attr("x",function(e,n){return y?0:e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/(y?1:t.length)):F.transition().delay(function(e,n){return n*D/t[0].values.length}).attr("x",function(e,n){return e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/t.length).attr("y",function(t,e){return m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(p(m(t,e))-p(0)),1)||0}),o=h.copy(),l=p.copy()}),t}var e,i,a,r,s,o,l,c={top:0,right:0,bottom:0,left:0},u=960,d=500,h=d3.scale.ordinal(),p=d3.scale.linear(),f=Math.floor(1e4*Math.random()),g=function(t){return t.x},m=function(t){return t.y},v=[0],b=!0,y=!1,x="zero",w=n.utils.defaultColor(),k=!1,C=null,D=1200,T=.1,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=S,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,
t):p},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(a=e,t):a},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(y=e,t):y},t.stackOffset=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(b=e,t):b},t.color=function(e){return arguments.length?(w=n.utils.getColor(e),t):w},t.barColor=function(e){return arguments.length?(C=n.utils.getColor(e),t):C},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(f=e,t):f},t.hideable=function(e){return arguments.length?(k=e,t):k},t.delay=function(e){return arguments.length?(D=e,t):D},t.groupSpacing=function(e){return arguments.length?(T=e,t):T},t},n.models.multiBarChart=function(){"use strict";function t(n){return n.each(function(n){var k=d3.select(this),M=this,P=(u||parseInt(k.style("width"))||960)-c.left-c.right,I=(d||parseInt(k.style("height"))||400)-c.top-c.bottom;if(t.update=function(){k.transition().duration(A).call(t)},t.container=this,C.disabled=n.map(function(t){return!!t.disabled}),!D){var N;D={};for(N in C)D[N]=C[N]instanceof Array?C[N].slice(0):C[N]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var $=k.selectAll(".nv-noData").data([T]);return $.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),$.attr("x",c.left+P/2).attr("y",c.top+I/2).text(function(t){return t}),t}k.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var O=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),F=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),B=O.select("g");if(F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),f&&(o.width(P-_()),a.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),B.select(".nv-legendWrap").datum(n).call(o),c.top!=o.height()&&(c.top=o.height(),I=(d||parseInt(k.style("height"))||400)-c.top-c.bottom),B.select(".nv-legendWrap").attr("transform","translate("+_()+","+-c.top+")")),p){var L=[{key:"Grouped",disabled:a.stacked()},{key:"Stacked",disabled:!a.stacked()}];l.width(_()).color(["#444","#444","#444"]),B.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-c.top+")").call(l)}O.attr("transform","translate("+c.left+","+c.top+")"),v&&B.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),a.disabled(n.map(function(t){return t.disabled})).width(P).height(I).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var R=B.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(R.transition().call(a),g){r.scale(e).ticks(P/100).tickSize(-I,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),B.select(".nv-x.nv-axis").transition().call(r);var j=B.select(".nv-x.nv-axis > g").selectAll("g");if(j.selectAll("line, text").style("opacity",1),y){var z=function(t,e){return"translate("+t+","+e+")"},V=5,W=17;j.selectAll("text").attr("transform",function(t,e,n){return z(0,n%2==0?V:W)});var U=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;B.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return z(0,0===e||U%2!==0?W:V)})}b&&j.filter(function(t,e){return e%Math.ceil(n[0].values.length/(P/100))!==0}).selectAll("text, line").style("opacity",0),x&&j.selectAll(".tick text").attr("transform","rotate("+x+" 0,0)").style("text-anchor",x>0?"start":"end"),B.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(s.scale(i).ticks(I/36).tickSize(-P,0),B.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){C=e,S.stateChange(C),t.update()}),l.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(L=L.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}C.stacked=a.stacked(),S.stateChange(C),t.update()}}),S.on("tooltipShow",function(t){w&&E(t,M.parentNode)}),S.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),"undefined"!=typeof e.stacked&&(a.stacked(e.stacked),C.stacked=e.stacked),t.update()})}),t}var e,i,a=n.models.multiBar(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),c={top:30,right:20,bottom:50,left:60},u=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,b=!0,y=!1,x=0,w=!0,k=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},C={stacked:!1},D=null,T="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),_=function(){return p?180:0},A=250;a.stacked(!1),r.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(v?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var E=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=r.tickFormat()(a.x()(e.point,e.pointIndex)),u=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=k(e.series.key,c,u,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],S.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){w&&n.tooltip.cleanup()}),t.dispatch=S,t.multibar=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(v=e,s.orient(e?"right":"left"),t):v},t.reduceXTicks=function(e){return arguments.length?(b=e,t):b},t.rotateLabels=function(e){return arguments.length?(x=e,t):x},t.staggerLabels=function(e){return arguments.length?(y=e,t):y},t.tooltip=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.state=function(e){return arguments.length?(C=e,t):C},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(T=e,t):T},t.transitionDuration=function(e){return arguments.length?(A=e,t):A},t},n.models.multiBarHorizontal=function(){"use strict";function t(n){return n.each(function(t){{var n=u-c.left-c.right,h=d-c.top-c.bottom;d3.select(this)}x&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),x&&t[0].values.map(function(e,n){var i=0,a=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a-e.size,a-=e.size):(e.y1=i,i+=e.size)})});var T=i&&a?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(i||d3.merge(T).map(function(t){return t.x})).rangeBands(r||[0,h],.1),f.domain(a||d3.extent(d3.merge(T).map(function(t){return x?t.y>0?t.y1+t.y:t.y1:t.y}).concat(v))),f.range(w&&!x?s||[f.domain()[0]<0?C:0,n-(f.domain()[1]>0?C:0)]:s||[0,n]),o=o||p,l=l||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);{var _=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),A=_.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),E=(A.append("defs"),A.append("g"));_.select("g")}E.append("g").attr("class","nv-groups"),_.attr("transform","translate("+c.left+","+c.top+")");var M=_.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),M.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),M.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),M.transition().style("stroke-opacity",1).style("fill-opacity",.75);var P=M.selectAll("g.nv-bar").data(function(t){return t.values});P.exit().remove();var I=P.enter().append("g").attr("transform",function(e,n,i){return"translate("+l(x?e.y0:0)+","+(x?0:i*p.rangeBand()/t.length+p(g(e,n)))+")"});I.append("rect").attr("width",0).attr("height",p.rangeBand()/(x?1:t.length)),P.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),S.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[f(m(e,n)+(x?e.y0:0)),p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),S.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){S.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){S.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),I.append("text"),w&&!x?(P.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return D(m(t,e))}),P.transition().select("text").attr("x",function(t,e){return m(t,e)<0?-4:f(m(t,e))-f(0)+4})):P.selectAll("text").text(""),k&&!x?(I.append("text").classed("nv-bar-label",!0),P.select("text.nv-bar-label").attr("text-anchor",function(t,e){return m(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),P.transition().select("text.nv-bar-label").attr("x",function(t,e){return m(t,e)<0?f(0)-f(m(t,e))+4:-4})):P.selectAll("text.nv-bar-label").text(""),P.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),y&&(e||(e=t.map(function(){return!0})),P.style("fill",function(t,n,i){return d3.rgb(y(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(y(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),x?P.transition().attr("transform",function(t,e){return"translate("+f(t.y1)+","+p(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(f(m(t,e)+t.y0)-f(t.y0))}).attr("height",p.rangeBand()):P.transition().attr("transform",function(e,n){return"translate("+f(m(e,n)<0?m(e,n):0)+","+(e.series*p.rangeBand()/t.length+p(g(e,n)))+")"}).select("rect").attr("height",p.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(f(m(t,e))-f(0)),1)}),o=p.copy(),l=f.copy()}),t}var e,i,a,r,s,o,l,c={top:0,right:0,bottom:0,left:0},u=960,d=500,h=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),f=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=[0],b=n.utils.defaultColor(),y=null,x=!1,w=!1,k=!1,C=60,D=d3.format(",.2f"),T=1200,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=S,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(p=e,t):p},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(a=e,t):a},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(x=e,t):x},t.color=function(e){return arguments.length?(b=n.utils.getColor(e),t):b},t.barColor=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(h=e,t):h},t.delay=function(e){return arguments.length?(T=e,t):T},t.showValues=function(e){return arguments.length?(w=e,t):w},t.showBarLabels=function(e){return arguments.length?(k=e,t):k},t.valueFormat=function(e){return arguments.length?(D=e,t):D},t.valuePadding=function(e){return arguments.length?(C=e,t):C},t},n.models.multiBarHorizontalChart=function(){"use strict";function t(n){return n.each(function(n){var v=d3.select(this),y=this,_=(u||parseInt(v.style("width"))||960)-c.left-c.right,A=(d||parseInt(v.style("height"))||400)-c.top-c.bottom;if(t.update=function(){v.transition().duration(T).call(t)},t.container=this,x.disabled=n.map(function(t){return!!t.disabled}),!w){var E;w={};for(E in x)w[E]=x[E]instanceof Array?x[E].slice(0):x[E]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var M=v.selectAll(".nv-noData").data([k]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",c.left+_/2).attr("y",c.top+A/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var P=v.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]),I=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),N=P.select("g");if(I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),I.append("g").attr("class","nv-barsWrap"),I.append("g").attr("class","nv-legendWrap"),I.append("g").attr("class","nv-controlsWrap"),f&&(o.width(_-D()),a.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),N.select(".nv-legendWrap").datum(n).call(o),c.top!=o.height()&&(c.top=o.height(),A=(d||parseInt(v.style("height"))||400)-c.top-c.bottom),N.select(".nv-legendWrap").attr("transform","translate("+D()+","+-c.top+")")),p){var $=[{key:"Grouped",disabled:a.stacked()},{key:"Stacked",disabled:!a.stacked()}];l.width(D()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum($).attr("transform","translate(0,"+-c.top+")").call(l)}P.attr("transform","translate("+c.left+","+c.top+")"),a.disabled(n.map(function(t){return t.disabled})).width(_).height(A).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var O=N.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(O.transition().call(a),g){r.scale(e).ticks(A/24).tickSize(-_,0),N.select(".nv-x.nv-axis").transition().call(r);var F=N.select(".nv-x.nv-axis").selectAll("g");F.selectAll("line, text")}m&&(s.scale(i).ticks(_/100).tickSize(-A,0),N.select(".nv-y.nv-axis").attr("transform","translate(0,"+A+")"),N.select(".nv-y.nv-axis").transition().call(s)),N.select(".nv-zeroLine line").attr("x1",i(0)).attr("x2",i(0)).attr("y1",0).attr("y2",-A),o.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),l.dispatch.on("legendClick",function(e,n){if(e.disabled){switch($=$.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}x.stacked=a.stacked(),C.stateChange(x),t.update()}}),C.on("tooltipShow",function(t){b&&S(t,y.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),"undefined"!=typeof e.stacked&&(a.stacked(e.stacked),x.stacked=e.stacked),t.update()})}),t}var e,i,a=n.models.multiBarHorizontal(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend().height(30),l=n.models.legend().height(30),c={top:30,right:20,bottom:50,left:60},u=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,b=!0,y=function(t,e,n,i,a){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},x={stacked:v},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D=function(){return p?180:0},T=250;a.stacked(v),r.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var S=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=r.tickFormat()(a.x()(e.point,e.pointIndex)),u=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=y(e.series.key,c,u,e,t);n.tooltip.show([o,l],d,e.value<0?"e":"w",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],C.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=C,t.multibar=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.tooltip=function(e){return arguments.length?(y=e,t):y},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(y=e,t):y},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(T=e,t):T},t},n.models.multiChart=function(){"use strict";function t(n){return n.each(function(n){var d=d3.select(this),S=this;t.update=function(){d.transition().call(t)},t.container=this;var _=(o||parseInt(d.style("width"))||960)-r.left-r.right,A=(l||parseInt(d.style("height"))||400)-r.top-r.bottom,E=n.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),M=n.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),P=n.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),I=n.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),N=n.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),$=n.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),O=n.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})}),F=n.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:t.x,y:t.y}})});e.domain(d3.extent(d3.merge(O.concat(F)),function(t){return t.x})).range([0,_]);var B=d.selectAll("g.wrap.multiChart").data([n]),L=B.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");L.append("g").attr("class","x axis"),L.append("g").attr("class","y1 axis"),L.append("g").attr("class","y2 axis"),L.append("g").attr("class","lines1Wrap"),L.append("g").attr("class","lines2Wrap"),L.append("g").attr("class","bars1Wrap"),L.append("g").attr("class","bars2Wrap"),L.append("g").attr("class","stack1Wrap"),L.append("g").attr("class","stack2Wrap"),L.append("g").attr("class","legendWrap");var R=B.select("g");c&&(C.width(_/2),R.select(".legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(C),r.top!=C.height()&&(r.top=C.height(),A=(l||parseInt(d.style("height"))||400)-r.top-r.bottom),R.select(".legendWrap").attr("transform","translate("+_/2+","+-r.top+")")),f.width(_).height(A).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"line"==n[e].type})),g.width(_).height(A).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"line"==n[e].type})),m.width(_).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"bar"==n[e].type})),v.width(_).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"bar"==n[e].type})),b.width(_).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"area"==n[e].type})),y.width(_).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"area"==n[e].type})),R.attr("transform","translate("+r.left+","+r.top+")");var j=R.select(".lines1Wrap").datum(E),z=R.select(".bars1Wrap").datum(P),V=R.select(".stack1Wrap").datum(N),W=R.select(".lines2Wrap").datum(M),U=R.select(".bars2Wrap").datum(I),H=R.select(".stack2Wrap").datum($),Y=N.length?N.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],q=$.length?$.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];h.domain(i||d3.extent(d3.merge(O).concat(Y),function(t){return t.y})).range([0,A]),p.domain(a||d3.extent(d3.merge(F).concat(q),function(t){return t.y})).range([0,A]),f.yDomain(h.domain()),m.yDomain(h.domain()),b.yDomain(h.domain()),g.yDomain(p.domain()),v.yDomain(p.domain()),y.yDomain(p.domain()),N.length&&d3.transition(V).call(b),$.length&&d3.transition(H).call(y),P.length&&d3.transition(z).call(m),I.length&&d3.transition(U).call(v),E.length&&d3.transition(j).call(f),M.length&&d3.transition(W).call(g),x.ticks(_/100).tickSize(-A,0),R.select(".x.axis").attr("transform","translate(0,"+A+")"),d3.transition(R.select(".x.axis")).call(x),w.ticks(A/36).tickSize(-_,0),d3.transition(R.select(".y1.axis")).call(w),k.ticks(A/36).tickSize(-_,0),d3.transition(R.select(".y2.axis")).call(k),R.select(".y2.axis").style("opacity",F.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),C.dispatch.on("stateChange",function(e){t.update()}),D.on("tooltipShow",function(t){u&&T(t,S.parentNode)})}),t}var e,i,a,r={top:30,right:20,bottom:50,left:60},s=d3.scale.category20().range(),o=null,l=null,c=!0,u=!0,d=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},e=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=n.models.line().yScale(h),g=n.models.line().yScale(p),m=n.models.multiBar().stacked(!1).yScale(h),v=n.models.multiBar().stacked(!1).yScale(p),b=n.models.stackedArea().yScale(h),y=n.models.stackedArea().yScale(p),x=n.models.axis().scale(e).orient("bottom").tickPadding(5),w=n.models.axis().scale(h).orient("left"),k=n.models.axis().scale(p).orient("right"),C=n.models.legend().height(30),D=d3.dispatch("tooltipShow","tooltipHide"),T=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),r=e.pos[1]+(i.offsetTop||0),s=x.tickFormat()(f.x()(e.point,e.pointIndex)),o=(2==e.series.yAxis?k:w).tickFormat()(f.y()(e.point,e.pointIndex)),l=d(e.series.key,s,o,e,t);n.tooltip.show([a,r],l,void 0,void 0,i.offsetParent)};return f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),b.dispatch.on("tooltipShow",function(t){return Math.round(100*b.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void D.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),b.dispatch.on("tooltipHide",function(t){D.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){return Math.round(100*y.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void D.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),y.dispatch.on("tooltipHide",function(t){D.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),D.on("tooltipHide",function(){u&&n.tooltip.cleanup()}),t.dispatch=D,t.lines1=f,t.lines2=g,t.bars1=m,t.bars2=v,t.stack1=b,t.stack2=y,t.xAxis=x,t.yAxis1=w,t.yAxis2=k,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,f.x(e),m.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,f.y(e),m.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(i=e,t):i},t.yDomain2=function(e){return arguments.length?(a=e,t):a},t.margin=function(e){return arguments.length?(r=e,t):r},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(s=e,C.color(e),t):s},t.showLegend=function(e){return arguments.length?(c=e,t):c},t.tooltips=function(e){return arguments.length?(u=e,t):u},t.tooltipContent=function(e){return arguments.length?(d=e,t):d},t},n.models.ohlcBar=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,k=l-s.top-s.bottom,D=d3.select(this);u.domain(e||d3.extent(t[0].values.map(h).concat(b))),u.range(x?a||[.5*n/t[0].values.length,n*(t[0].values.length-.5)/t[0].values.length]:a||[0,n]),d.domain(i||[d3.min(t[0].values.map(v).concat(y)),d3.max(t[0].values.map(m).concat(y))]).range(r||[k,0]),u.domain()[0]===u.domain()[1]&&u.domain(u.domain()[0]?[u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var T=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),S=T.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),_=S.append("defs"),A=S.append("g"),E=T.select("g");A.append("g").attr("class","nv-ticks"),T.attr("transform","translate("+s.left+","+s.top+")"),D.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:c})}),_.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),T.select("#nv-chart-clip-path-"+c+" rect").attr("width",n).attr("height",k),E.attr("clip-path",w?"url(#nv-chart-clip-path-"+c+")":"");var M=T.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});M.exit().remove();M.enter().append("path").attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(e,i){var a=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-a/2+",0l"+a/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+a/2+",0l"+-a/2+",0z"}).attr("transform",function(t,e){return"translate("+u(h(t,e))+","+d(m(t,e))+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),C.elementMouseover({point:e,series:t[0],pos:[u(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),C.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(t,e){C.elementClick({value:p(t,e),data:t,index:e,pos:[u(h(t,e)),d(p(t,e))],e:d3.event,id:c}),d3.event.stopPropagation()}).on("dblclick",function(t,e){C.elementDblClick({value:p(t,e),data:t,index:e,pos:[u(h(t,e)),d(p(t,e))],e:d3.event,id:c}),d3.event.stopPropagation()});M.attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(M).attr("transform",function(t,e){return"translate("+u(h(t,e))+","+d(m(t,e))+")"}).attr("d",function(e,i){var a=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-a/2+",0l"+a/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+a/2+",0l"+-a/2+",0z"})}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,c=Math.floor(1e4*Math.random()),u=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},v=function(t){return t.low},b=[],y=[],x=!1,w=!0,k=n.utils.defaultColor(),C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=C,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.open=function(e){return arguments.length?(f=e,t):f},t.close=function(e){return arguments.length?(g=e,t):g},t.high=function(e){return arguments.length?(m=e,t):m},t.low=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceX=function(e){return arguments.length?(b=e,t):b},t.forceY=function(e){return arguments.length?(y=e,t):y},t.padData=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(w=e,t):w},t.color=function(e){return arguments.length?(k=n.utils.getColor(e),t):k},t.id=function(e){
return arguments.length?(c=e,t):c},t},n.models.pie=function(){"use strict";function t(n){return n.each(function(t){function n(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return M(e(t))}}var o=i-e.left-e.right,u=a-e.top-e.bottom,C=Math.min(o,u)/2,D=C-C/5,T=d3.select(this),S=T.selectAll(".nv-wrap.nv-pie").data(t),_=S.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+l),A=_.append("g"),E=S.select("g");A.append("g").attr("class","nv-pie"),A.append("g").attr("class","nv-pieLabels"),S.attr("transform","translate("+e.left+","+e.top+")"),E.select(".nv-pie").attr("transform","translate("+o/2+","+u/2+")"),E.select(".nv-pieLabels").attr("transform","translate("+o/2+","+u/2+")"),T.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:l})});var M=d3.svg.arc().outerRadius(D);y&&M.startAngle(y),x&&M.endAngle(x),v&&M.innerRadius(C*w);var P=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:s(t)}),I=S.select(".nv-pie").selectAll(".nv-slice").data(P),N=S.select(".nv-pieLabels").selectAll(".nv-label").data(P);I.exit().remove(),N.exit().remove();var $=I.enter().append("g").attr("class","nv-slice").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({label:r(t.data),value:s(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:l})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({label:r(t.data),value:s(t.data),point:t.data,index:e,id:l})}).on("click",function(t,e){k.elementClick({label:r(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()}).on("dblclick",function(t,e){k.elementDblClick({label:r(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()});I.attr("fill",function(t,e){return c(t,e)}).attr("stroke",function(t,e){return c(t,e)});$.append("path").each(function(t){this._current=t});if(I.select("path").transition().attr("d",M).attrTween("d",n),h){var O=d3.svg.arc().innerRadius(0);p&&(O=M),f&&(O=d3.svg.arc().outerRadius(M.outerRadius())),N.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t){if(b){t.outerRadius=D+10,t.innerRadius=D+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+O.centroid(t)+") rotate("+e+")"}return t.outerRadius=C+10,t.innerRadius=C+15,"translate("+O.centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var F={},B=14,L=140,R=function(t){return Math.floor(t[0]/L)*L+","+Math.floor(t[1]/B)*B};N.transition().attr("transform",function(t){if(b){t.outerRadius=D+10,t.innerRadius=D+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+O.centroid(t)+") rotate("+e+")"}t.outerRadius=C+10,t.innerRadius=C+15;var n=O.centroid(t),i=R(n);return F[i]&&(n[1]-=B),F[R(n)]=!0,"translate("+n+")"}),N.select(".nv-label text").style("text-anchor",b?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t,e){var n=(t.endAngle-t.startAngle)/(2*Math.PI),i={key:r(t.data),value:s(t.data),percent:d3.format("%")(n)};return t.value&&n>m?i[g]:""})}}),t}var e={top:0,right:0,bottom:0,left:0},i=500,a=500,r=function(t){return t.x},s=function(t){return t.y},o=function(t){return t.description},l=Math.floor(1e4*Math.random()),c=n.utils.defaultColor(),u=d3.format(",.2f"),h=!0,p=!0,f=!1,g="key",m=.02,v=!1,b=!1,y=!1,x=!1,w=.5,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=k,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.values=function(e){return n.log("pie.values() is no longer supported."),t},t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(s=d3.functor(e),t):s},t.description=function(e){return arguments.length?(o=e,t):o},t.showLabels=function(e){return arguments.length?(h=e,t):h},t.labelSunbeamLayout=function(e){return arguments.length?(b=e,t):b},t.donutLabelsOutside=function(e){return arguments.length?(f=e,t):f},t.pieLabelsOutside=function(e){return arguments.length?(p=e,t):p},t.labelType=function(e){return arguments.length?(g=e,g=g||"key",t):g},t.donut=function(e){return arguments.length?(v=e,t):v},t.donutRatio=function(e){return arguments.length?(w=e,t):w},t.startAngle=function(e){return arguments.length?(y=e,t):y},t.endAngle=function(e){return arguments.length?(x=e,t):x},t.id=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),t):c},t.valueFormat=function(e){return arguments.length?(u=e,t):u},t.labelThreshold=function(e){return arguments.length?(m=e,t):m},t},n.models.pieChart=function(){"use strict";function t(n){return n.each(function(n){var l=d3.select(this),c=(r||parseInt(l.style("width"))||960)-a.left-a.right,u=(s||parseInt(l.style("height"))||400)-a.top-a.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,d.disabled=n.map(function(t){return!!t.disabled}),!h){var g;h={};for(g in d)h[g]=d[g]instanceof Array?d[g].slice(0):d[g]}if(!n||!n.length){var m=l.selectAll(".nv-noData").data([p]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",a.left+c/2).attr("y",a.top+u/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var v=l.selectAll("g.nv-wrap.nv-pieChart").data([n]),b=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),y=v.select("g");b.append("g").attr("class","nv-pieWrap"),b.append("g").attr("class","nv-legendWrap"),o&&(i.width(c).key(e.x()),v.select(".nv-legendWrap").datum(n).call(i),a.top!=i.height()&&(a.top=i.height(),u=(s||parseInt(l.style("height"))||400)-a.top-a.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-a.top+")")),v.attr("transform","translate("+a.left+","+a.top+")"),e.width(c).height(u);var x=y.select(".nv-pieWrap").datum([n]);d3.transition(x).call(e),i.dispatch.on("stateChange",function(e){d=e,f.stateChange(d),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){f.tooltipHide(t)}),f.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),d.disabled=e.disabled),t.update()})}),t}var e=n.models.pie(),i=n.models.legend(),a={top:30,right:20,bottom:20,left:20},r=null,s=null,o=!0,l=n.utils.defaultColor(),c=!0,u=function(t,e,n,i){return"<h3>"+t+"</h3><p>"+e+"</p>"},d={},h=null,p="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),g=function(i,a){var r=e.description()(i.point)||e.x()(i.point),s=i.pos[0]+(a&&a.offsetLeft||0),o=i.pos[1]+(a&&a.offsetTop||0),l=e.valueFormat()(e.y()(i.point)),c=u(r,l,i,t);n.tooltip.show([s,o],c,i.value<0?"n":"s",null,a)};return e.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],f.tooltipShow(t)}),f.on("tooltipShow",function(t){c&&g(t)}),f.on("tooltipHide",function(){c&&n.tooltip.cleanup()}),t.legend=i,t.dispatch=f,t.pie=e,d3.rebind(t,e,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(s=e,t):s},t.color=function(a){return arguments.length?(l=n.utils.getColor(a),i.color(l),e.color(l),t):l},t.showLegend=function(e){return arguments.length?(o=e,t):o},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(u=e,t):u},t.state=function(e){return arguments.length?(d=e,t):d},t.defaultState=function(e){return arguments.length?(h=e,t):h},t.noData=function(e){return arguments.length?(p=e,t):p},t},n.models.scatter=function(){"use strict";function t(j){return j.each(function(t){function j(){if(!k)return!1;var e=d3.merge(t.map(function(t,e){return t.values.map(function(t,n){var i=f(t,n),a=g(t,n);return[d(i)+1e-7*Math.random(),h(a)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return D(t[4],e)})}));if(L===!0){if(A){var n=H.select("defs").selectAll(".nv-point-clips").data([u]).enter();n.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var i=H.select("#nv-points-clip-"+u).selectAll("circle").data(e);i.enter().append("circle").attr("r",E),i.exit().remove(),i.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),H.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}e.length&&(e.push([d.range()[0]-20,h.range()[0]-20,null,null]),e.push([d.range()[1]+20,h.range()[1]+20,null,null]),e.push([d.range()[0]-20,h.range()[0]+20,null,null]),e.push([d.range()[1]+20,h.range()[1]-20,null,null]));var a=d3.geom.polygon([[-10,-10],[-10,l+10],[o+10,l+10],[o+10,-10]]),r=d3.geom.voronoi(e).map(function(t,n){return{data:a.clip(t),series:e[n][2],point:e[n][3]}}),c=H.select(".nv-point-paths").selectAll("path").data(r);c.enter().append("path").attr("class",function(t,e){return"nv-path-"+e}),c.exit().remove(),c.attr("d",function(t){return 0===t.data.length?"M 0 0":"M"+t.data.join("L")+"Z"});var p=function(e,n){if(R)return 0;var i=t[e.series];if("undefined"!=typeof i){var a=i.values[e.point];n({point:a,series:i,pos:[d(f(a,e.point))+s.left,h(g(a,e.point))+s.top],seriesIndex:e.series,pointIndex:e.point})}};c.on("click",function(t){p(t,B.elementClick)}).on("mouseover",function(t){p(t,B.elementMouseover)}).on("mouseout",function(t,e){p(t,B.elementMouseout)})}else H.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],a=i.values[n];B.elementClick({point:a,series:i,pos:[d(f(a,n))+s.left,h(g(a,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],a=i.values[n];B.elementMouseover({point:a,series:i,pos:[d(f(a,n))+s.left,h(g(a,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,n){if(R||!t[e.series])return 0;var i=t[e.series],a=i.values[n];B.elementMouseout({point:a,series:i,seriesIndex:e.series,pointIndex:n})});R=!1}var z=o-s.left-s.right,V=l-s.top-s.bottom,W=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var U=M&&P&&$?[]:d3.merge(t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),size:m(t,e)}})}));d.domain(M||d3.extent(U.map(function(t){return t.x}).concat(y))),d.range(T&&t[0]?I||[(z*S+z)/(2*t[0].values.length),z-z*(1+S)/(2*t[0].values.length)]:I||[0,z]),h.domain(P||d3.extent(U.map(function(t){return t.y}).concat(x))).range(N||[V,0]),p.domain($||d3.extent(U.map(function(t){return t.size}).concat(w))).range(O||[16,256]),(d.domain()[0]===d.domain()[1]||h.domain()[0]===h.domain()[1])&&(F=!0),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),isNaN(h.domain()[0])&&h.domain([-1,1]),e=e||d,i=i||h,a=a||p;var H=W.selectAll("g.nv-wrap.nv-scatter").data([t]),Y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(F?" nv-single-point":"")),q=Y.append("defs"),G=Y.append("g"),X=H.select("g");G.append("g").attr("class","nv-groups"),G.append("g").attr("class","nv-point-paths"),H.attr("transform","translate("+s.left+","+s.top+")"),q.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),H.select("#nv-edge-clip-"+u+" rect").attr("width",z).attr("height",V>0?V:0),X.attr("clip-path",_?"url(#nv-edge-clip-"+u+")":""),R=!0;var K=H.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});if(K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().remove(),K.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),K.transition().style("fill",function(t,e){return c(t,e)}).style("stroke",function(t,e){return c(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5),b){var Z=K.selectAll("circle.nv-point").data(function(t){return t.values},C);Z.enter().append("circle").style("fill",function(t,e){return t.color}).style("stroke",function(t,e){return t.color}).attr("cx",function(t,i){return n.utils.NaNtoZero(e(f(t,i)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(i(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)}),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)})}else{var Z=K.selectAll("path.nv-point").data(function(t){return t.values});Z.enter().append("path").style("fill",function(t,e){return t.color}).style("stroke",function(t,e){return t.color}).attr("transform",function(t,n){return"translate("+e(f(t,n))+","+i(g(t,n))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))})),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))}))}clearTimeout(r),r=setTimeout(j,300),e=d.copy(),i=h.copy(),a=p.copy()}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,c=n.utils.defaultColor(),u=Math.floor(1e5*Math.random()),d=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.size||1},v=function(t){return t.shape||"circle"},b=!0,y=[],x=[],w=[],k=!0,C=null,D=function(t){return!t.notActive},T=!1,S=.1,_=!1,A=!0,E=function(){return 25},M=null,P=null,I=null,N=null,$=null,O=null,F=!1,B=d3.dispatch("elementClick","elementMouseover","elementMouseout"),L=!0,R=!1;return t.clearHighlights=function(){d3.selectAll(".nv-chart-"+u+" .nv-point.hover").classed("hover",!1)},t.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+u+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)},B.on("elementMouseover.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),B.on("elementMouseout.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),t.dispatch=B,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=d3.functor(e),t):f},t.y=function(e){return arguments.length?(g=d3.functor(e),t):g},t.size=function(e){return arguments.length?(m=d3.functor(e),t):m},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(h=e,t):h},t.zScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(M=e,t):M},t.yDomain=function(e){return arguments.length?(P=e,t):P},t.sizeDomain=function(e){return arguments.length?($=e,t):$},t.xRange=function(e){return arguments.length?(I=e,t):I},t.yRange=function(e){return arguments.length?(N=e,t):N},t.sizeRange=function(e){return arguments.length?(O=e,t):O},t.forceX=function(e){return arguments.length?(y=e,t):y},t.forceY=function(e){return arguments.length?(x=e,t):x},t.forceSize=function(e){return arguments.length?(w=e,t):w},t.interactive=function(e){return arguments.length?(k=e,t):k},t.pointKey=function(e){return arguments.length?(C=e,t):C},t.pointActive=function(e){return arguments.length?(D=e,t):D},t.padData=function(e){return arguments.length?(T=e,t):T},t.padDataOuter=function(e){return arguments.length?(S=e,t):S},t.clipEdge=function(e){return arguments.length?(_=e,t):_},t.clipVoronoi=function(e){return arguments.length?(A=e,t):A},t.useVoronoi=function(e){return arguments.length?(L=e,L===!1&&(A=!1),t):L},t.clipRadius=function(e){return arguments.length?(E=e,t):E},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),t):c},t.shape=function(e){return arguments.length?(v=e,t):v},t.onlyCircles=function(e){return arguments.length?(b=e,t):b},t.id=function(e){return arguments.length?(u=e,t):u},t.singlePoint=function(e){return arguments.length?(F=e,t):F},t},n.models.scatterChart=function(){"use strict";function t(n){return n.each(function(n){function _(){if(T)return Y.select(".nv-point-paths").style("pointer-events","all"),!1;Y.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(D).focus(t[0]),f.distortion(D).focus(t[1]),Y.select(".nv-scatterWrap").call(e),x&&Y.select(".nv-x.nv-axis").call(i),w&&Y.select(".nv-y.nv-axis").call(a),Y.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),Y.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var A=d3.select(this),E=this,R=(u||parseInt(A.style("width"))||960)-c.left-c.right,j=(d||parseInt(A.style("height"))||400)-c.top-c.bottom;if(t.update=function(){A.transition().duration($).call(t)},t.container=this,M.disabled=n.map(function(t){return!!t.disabled}),!P){var z;P={};for(z in M)P[z]=M[z]instanceof Array?M[z].slice(0):M[z]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var V=A.selectAll(".nv-noData").data([N]);return V.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",c.left+R/2).attr("y",c.top+j/2).text(function(t){return t}),t}A.selectAll(".nv-noData").remove(),O=O||p,F=F||f;var W=A.selectAll("g.nv-wrap.nv-scatterChart").data([n]),U=W.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),H=U.append("g"),Y=W.select("g");if(H.append("rect").attr("class","nvd3 nv-background"),H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-scatterWrap"),H.append("g").attr("class","nv-distWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-controlsWrap"),y){var q=C?R/2:R;r.width(q),W.select(".nv-legendWrap").datum(n).call(r),c.top!=r.height()&&(c.top=r.height(),j=(d||parseInt(A.style("height"))||400)-c.top-c.bottom),W.select(".nv-legendWrap").attr("transform","translate("+(R-q)+","+-c.top+")")}if(C&&(s.width(180).color(["#444"]),Y.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-c.top+")").call(s)),W.attr("transform","translate("+c.left+","+c.top+")"),k&&Y.select(".nv-y.nv-axis").attr("transform","translate("+R+",0)"),e.width(R).height(j).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),0!==g&&e.xDomain(null),0!==m&&e.yDomain(null),W.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),0!==g){var G=p.domain()[1]-p.domain()[0];e.xDomain([p.domain()[0]-g*G,p.domain()[1]+g*G])}if(0!==m){var X=f.domain()[1]-f.domain()[0];e.yDomain([f.domain()[0]-m*X,f.domain()[1]+m*X])}(0!==m||0!==g)&&W.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),x&&(i.scale(p).ticks(i.ticks()&&i.ticks().length?i.ticks():R/100).tickSize(-j,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),w&&(a.scale(f).ticks(a.ticks()&&a.ticks().length?a.ticks():j/36).tickSize(-R,0),Y.select(".nv-y.nv-axis").call(a)),v&&(o.getData(e.x()).scale(p).width(R).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),Y.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),b&&(l.getData(e.y()).scale(f).width(j).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),Y.select(".nv-distributionY").attr("transform","translate("+(k?R:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(Y.select(".nv-background").attr("width",R).attr("height",j),Y.select(".nv-background").on("mousemove",_),Y.select(".nv-background").on("click",function(){T=!T}),e.dispatch.on("elementClick.freezeFisheye",function(){T=!T})),s.dispatch.on("legendClick",function(n,r){n.disabled=!n.disabled,D=n.disabled?0:2.5,Y.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),Y.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(D).focus(0),f.distortion(D).focus(0),Y.select(".nv-scatterWrap").call(e),Y.select(".nv-x.nv-axis").call(i),Y.select(".nv-y.nv-axis").call(a)):T=!1,t.update()}),r.dispatch.on("stateChange",function(e){M.disabled=e.disabled,I.stateChange(M),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",function(e,n){return t.pos[1]-j}),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],I.tooltipShow(t)}),I.on("tooltipShow",function(t){S&&B(t,E.parentNode)}),I.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),M.disabled=e.disabled),t.update()}),O=p.copy(),F=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),a=n.models.axis(),r=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),c={top:30,right:20,bottom:50,left:75},u=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=0,m=0,v=!1,b=!1,y=!0,x=!0,w=!0,k=!1,C=!!d3.fisheye,D=0,T=!1,S=!0,_=function(t,e,n){return"<strong>"+e+"</strong>"},A=function(t,e,n){return"<strong>"+n+"</strong>"},E=null,M={},P=null,I=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N="No Data Available.",$=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),a.orient(k?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var O,F,B=function(r,s){var o=r.pos[0]+(s.offsetLeft||0),l=r.pos[1]+(s.offsetTop||0),u=r.pos[0]+(s.offsetLeft||0),d=f.range()[0]+c.top+(s.offsetTop||0),h=p.range()[0]+c.left+(s.offsetLeft||0),g=r.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(r.point,r.pointIndex)),v=a.tickFormat()(e.y()(r.point,r.pointIndex));null!=_&&n.tooltip.show([u,d],_(r.series.key,m,v,r,t),"n",1,s,"x-nvtooltip"),null!=A&&n.tooltip.show([h,g],A(r.series.key,m,v,r,t),"e",1,s,"y-nvtooltip"),null!=E&&n.tooltip.show([o,l],E(r.series.key,m,v,r,t),r.value<0?"n":"s",null,s)},L=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){I.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),I.on("tooltipHide",function(){S&&n.tooltip.cleanup()}),t.dispatch=I,t.scatter=e,t.legend=r,t.controls=s,t.xAxis=i,t.yAxis=a,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),r.color(h),o.color(h),l.color(h),t):h},t.showDistX=function(e){return arguments.length?(v=e,t):v},t.showDistY=function(e){return arguments.length?(b=e,t):b},t.showControls=function(e){return arguments.length?(C=e,t):C},t.showLegend=function(e){return arguments.length?(y=e,t):y},t.showXAxis=function(e){return arguments.length?(x=e,t):x},t.showYAxis=function(e){return arguments.length?(w=e,t):w},t.rightAlignYAxis=function(e){return arguments.length?(k=e,a.orient(e?"right":"left"),t):k},t.fisheye=function(e){return arguments.length?(D=e,t):D},t.xPadding=function(e){return arguments.length?(g=e,t):g},t.yPadding=function(e){return arguments.length?(m=e,t):m},t.tooltips=function(e){return arguments.length?(S=e,t):S},t.tooltipContent=function(e){return arguments.length?(E=e,t):E},t.tooltipXContent=function(e){return arguments.length?(_=e,t):_},t.tooltipYContent=function(e){return arguments.length?(A=e,t):A},t.state=function(e){return arguments.length?(M=e,t):M},t.defaultState=function(e){return arguments.length?(P=e,t):P},t.noData=function(e){return arguments.length?(N=e,t):N},t.transitionDuration=function(e){return arguments.length?($=e,t):$},t},n.models.scatterPlusLineChart=function(){"use strict";function t(n){return n.each(function(n){function T(){if(C)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(k).focus(t[0]),f.distortion(k).focus(t[1]),U.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),b&&U.select(".nv-x.nv-axis").call(i),y&&U.select(".nv-y.nv-axis").call(a),U.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),U.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var S=d3.select(this),_=this,B=(u||parseInt(S.style("width"))||960)-c.left-c.right,L=(d||parseInt(S.style("height"))||400)-c.top-c.bottom;if(t.update=function(){S.transition().duration(I).call(t)},t.container=this,A.disabled=n.map(function(t){return!!t.disabled}),!E){var R;E={};for(R in A)E[R]=A[R]instanceof Array?A[R].slice(0):A[R]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var j=S.selectAll(".nv-noData").data([P]);return j.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),j.attr("x",c.left+B/2).attr("y",c.top+L/2).text(function(t){return t}),t}S.selectAll(".nv-noData").remove(),p=e.xScale(),f=e.yScale(),N=N||p,$=$||f;var z=S.selectAll("g.nv-wrap.nv-scatterChart").data([n]),V=z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),W=V.append("g"),U=z.select("g");W.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-scatterWrap"),W.append("g").attr("class","nv-regressionLinesWrap"),W.append("g").attr("class","nv-distWrap"),W.append("g").attr("class","nv-legendWrap"),W.append("g").attr("class","nv-controlsWrap"),z.attr("transform","translate("+c.left+","+c.top+")"),x&&U.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)"),v&&(r.width(B/2),z.select(".nv-legendWrap").datum(n).call(r),c.top!=r.height()&&(c.top=r.height(),L=(d||parseInt(S.style("height"))||400)-c.top-c.bottom),z.select(".nv-legendWrap").attr("transform","translate("+B/2+","+-c.top+")")),w&&(s.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-c.top+")").call(s)),e.width(B).height(L).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),z.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),z.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var H=z.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});H.enter().append("g").attr("class","nv-regLines");{var Y=H.selectAll(".nv-regLine").data(function(t){return[t]});Y.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}Y.transition().attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(t,e){return f(p.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return f(p.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return h(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),b&&(i.scale(p).ticks(i.ticks()?i.ticks():B/100).tickSize(-L,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),y&&(a.scale(f).ticks(a.ticks()?a.ticks():L/36).tickSize(-B,0),U.select(".nv-y.nv-axis").call(a)),g&&(o.getData(e.x()).scale(p).width(B).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),W.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),m&&(l.getData(e.y()).scale(f).width(L).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),W.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(x?B:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(U.select(".nv-background").attr("width",B).attr("height",L),U.select(".nv-background").on("mousemove",T),U.select(".nv-background").on("click",function(){C=!C}),e.dispatch.on("elementClick.freezeFisheye",function(){C=!C})),s.dispatch.on("legendClick",function(n,r){n.disabled=!n.disabled,k=n.disabled?0:2.5,U.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(k).focus(0),f.distortion(k).focus(0),U.select(".nv-scatterWrap").call(e),U.select(".nv-x.nv-axis").call(i),U.select(".nv-y.nv-axis").call(a)):C=!1,t.update()}),r.dispatch.on("stateChange",function(e){A=e,M.stateChange(A),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-L),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],
M.tooltipShow(t)}),M.on("tooltipShow",function(t){D&&O(t,_.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),A.disabled=e.disabled),t.update()}),N=p.copy(),$=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),a=n.models.axis(),r=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),c={top:30,right:20,bottom:50,left:75},u=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=!1,m=!1,v=!0,b=!0,y=!0,x=!1,w=!!d3.fisheye,k=0,C=!1,D=!0,T=function(t,e,n){return"<strong>"+e+"</strong>"},S=function(t,e,n){return"<strong>"+n+"</strong>"},_=function(t,e,n,i){return"<h3>"+t+"</h3><p>"+i+"</p>"},A={},E=null,M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),P="No Data Available.",I=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),a.orient(x?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var N,$,O=function(r,s){var o=r.pos[0]+(s.offsetLeft||0),l=r.pos[1]+(s.offsetTop||0),u=r.pos[0]+(s.offsetLeft||0),d=f.range()[0]+c.top+(s.offsetTop||0),h=p.range()[0]+c.left+(s.offsetLeft||0),g=r.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(r.point,r.pointIndex)),v=a.tickFormat()(e.y()(r.point,r.pointIndex));null!=T&&n.tooltip.show([u,d],T(r.series.key,m,v,r,t),"n",1,s,"x-nvtooltip"),null!=S&&n.tooltip.show([h,g],S(r.series.key,m,v,r,t),"e",1,s,"y-nvtooltip"),null!=_&&n.tooltip.show([o,l],_(r.series.key,m,v,r.point.tooltip,r,t),r.value<0?"n":"s",null,s)},F=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),M.on("tooltipHide",function(){D&&n.tooltip.cleanup()}),t.dispatch=M,t.scatter=e,t.legend=r,t.controls=s,t.xAxis=i,t.yAxis=a,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),r.color(h),o.color(h),l.color(h),t):h},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(m=e,t):m},t.showControls=function(e){return arguments.length?(w=e,t):w},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.showXAxis=function(e){return arguments.length?(b=e,t):b},t.showYAxis=function(e){return arguments.length?(y=e,t):y},t.rightAlignYAxis=function(e){return arguments.length?(x=e,a.orient(e?"right":"left"),t):x},t.fisheye=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(D=e,t):D},t.tooltipContent=function(e){return arguments.length?(_=e,t):_},t.tooltipXContent=function(e){return arguments.length?(T=e,t):T},t.tooltipYContent=function(e){return arguments.length?(S=e,t):S},t.state=function(e){return arguments.length?(A=e,t):A},t.defaultState=function(e){return arguments.length?(E=e,t):E},t.noData=function(e){return arguments.length?(P=e,t):P},t.transitionDuration=function(e){return arguments.length?(I=e,t):I},t},n.models.sparkline=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,c=l-s.top-s.bottom,g=d3.select(this);u.domain(e||d3.extent(t,h)).range(a||[0,n]),d.domain(i||d3.extent(t,p)).range(r||[c,0]);{var m=g.selectAll("g.nv-wrap.nv-sparkline").data([t]),v=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");v.append("g"),m.select("g")}m.attr("transform","translate("+s.left+","+s.top+")");var b=m.selectAll("path").data(function(t){return[t]});b.enter().append("path"),b.exit().remove(),b.style("stroke",function(t,e){return t.color||f(t,e)}).attr("d",d3.svg.line().x(function(t,e){return u(h(t,e))}).y(function(t,e){return d(p(t,e))}));var y=m.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),i=e(n.lastIndexOf(d.domain()[1])),a=e(n.indexOf(d.domain()[0])),r=e(n.length-1);return[a,i,r].filter(function(t){return null!=t})});y.enter().append("circle"),y.exit().remove(),y.attr("cx",function(t,e){return u(h(t,t.pointIndex))}).attr("cy",function(t,e){return d(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return h(t,t.pointIndex)==u.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var e,i,a,r,s={top:2,right:0,bottom:2,left:0},o=400,l=32,c=!0,u=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=n.utils.getColor(["#000"]);return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(h=d3.functor(e),t):h},t.y=function(e){return arguments.length?(p=d3.functor(e),t):p},t.xScale=function(e){return arguments.length?(u=e,t):u},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.animate=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(f=n.utils.getColor(e),t):f},t},n.models.sparklinePlus=function(){"use strict";function t(n){return n.each(function(h){function m(){if(!c){var t=S.selectAll(".nv-hoverValue").data(l),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(a.x()(h[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(n.append("line").attr("x1",0).attr("y1",-r.top).attr("x2",0).attr("y2",x),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-r.top).attr("text-anchor","end").attr("dy",".9em"),S.select(".nv-hoverValue .nv-xValue").text(u(a.x()(h[l[0]],l[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-r.top).attr("text-anchor","start").attr("dy",".9em"),S.select(".nv-hoverValue .nv-yValue").text(d(a.y()(h[l[0]],l[0]))))}}function v(){function t(t,e){for(var n=Math.abs(a.x()(t[0],0)-e),i=0,r=0;r<t.length;r++)Math.abs(a.x()(t[r],r)-e)<n&&(n=Math.abs(a.x()(t[r],r)-e),i=r);return i}if(!c){var n=d3.mouse(this)[0]-r.left;l=[t(h,Math.round(e.invert(n)))],m()}}var b=d3.select(this),y=(s||parseInt(b.style("width"))||960)-r.left-r.right,x=(o||parseInt(b.style("height"))||400)-r.top-r.bottom;if(t.update=function(){t(n)},t.container=this,!h||!h.length){var w=b.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",r.left+y/2).attr("y",r.top+x/2).text(function(t){return t}),t}b.selectAll(".nv-noData").remove();var k=a.y()(h[h.length-1],h.length-1);e=a.xScale(),i=a.yScale();var C=b.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),T=D.append("g"),S=C.select("g");T.append("g").attr("class","nv-sparklineWrap"),T.append("g").attr("class","nv-valueWrap"),T.append("g").attr("class","nv-hoverArea"),C.attr("transform","translate("+r.left+","+r.top+")");var _=S.select(".nv-sparklineWrap");a.width(y).height(x),_.call(a);var A=S.select(".nv-valueWrap"),E=A.selectAll(".nv-currentValue").data([k]);E.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),E.attr("x",y+(f?r.right:0)).attr("y",p?function(t){return i(t)}:0).style("fill",a.color()(h[h.length-1],h.length-1)).text(d(k)),T.select(".nv-hoverArea").append("rect").on("mousemove",v).on("click",function(){c=!c}).on("mouseout",function(){l=[],m()}),S.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-r.left+","+-r.top+")"}).attr("width",y+r.left+r.right).attr("height",x+r.top)}),t}var e,i,a=n.models.sparkline(),r={top:15,right:100,bottom:10,left:50},s=null,o=null,l=[],c=!1,u=d3.format(",r"),d=d3.format(",.2f"),h=!0,p=!0,f=!1,g="No Data Available.";return t.sparkline=a,d3.rebind(t,a,"x","y","xScale","yScale","color"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.xTickFormat=function(e){return arguments.length?(u=e,t):u},t.yTickFormat=function(e){return arguments.length?(d=e,t):d},t.showValue=function(e){return arguments.length?(h=e,t):h},t.alignValue=function(e){return arguments.length?(p=e,t):p},t.rightAlignValue=function(e){return arguments.length?(f=e,t):f},t.noData=function(e){return arguments.length?(g=e,t):g},t},n.models.stackedArea=function(){"use strict";function t(n){return n.each(function(n){var d=r-a.left-a.right,b=s-a.top-a.bottom,y=d3.select(this);e=m.xScale(),i=m.yScale();var x=n;n.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var w=n.filter(function(t){return!t.disabled});n=d3.layout.stack().order(p).offset(h).values(function(t){return t.values}).x(c).y(u).out(function(t,e,n){var i=0===u(t)?0:n;t.display={y:i,y0:e}})(w);var k=y.selectAll("g.nv-wrap.nv-stackedarea").data([n]),C=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),D=C.append("defs"),T=C.append("g"),S=k.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+a.left+","+a.top+")"),m.width(d).height(b).x(c).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(n.map(function(t,e){return t.color||o(t,t.seriesIndex)}));var _=S.select(".nv-scatterWrap").datum(n);_.call(m),D.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),k.select("#nv-edge-clip-"+l+" rect").attr("width",d).attr("height",b),S.attr("clip-path",g?"url(#nv-edge-clip-"+l+")":"");var A=d3.svg.area().x(function(t,n){return e(c(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y+t.display.y0)}).interpolate(f),E=d3.svg.area().x(function(t,n){return e(c(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y0)}),M=S.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});M.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return E(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),v.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),M.exit().remove(),M.style("fill",function(t,e){return t.color||o(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||o(t,t.seriesIndex)}),M.transition().attr("d",function(t,e){return A(t.values,e)}),m.dispatch.on("elementMouseover.area",function(t){S.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(t){S.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,i,a=t.length,r=t[0].length,s=1/a,o=[];for(n=0;r>n;++n){for(e=0,i=0;e<x.length;e++)i+=u(x[e].values[n]);if(i)for(e=0;a>e;e++)t[e][n][1]/=i;else for(e=0;a>e;e++)t[e][n][1]=s}for(n=0;r>n;++n)o[n]=0;return o}}),t}var e,i,a={top:0,right:0,bottom:0,left:0},r=960,s=500,o=n.utils.defaultColor(),l=Math.floor(1e5*Math.random()),c=function(t){return t.x},u=function(t){return t.y},d="stack",h="zero",p="default",f="linear",g=!1,m=n.models.scatter(),v=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return m.size(2.2).sizeDomain([2.2,2.2]),m.dispatch.on("elementClick.area",function(t){v.areaClick(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],v.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){v.tooltipHide(t)}),t.dispatch=v,t.scatter=m,d3.rebind(t,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(c=d3.functor(e),t):c},t.y=function(e){return arguments.length?(u=d3.functor(e),t):u},t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(s=e,t):s},t.clipEdge=function(e){return arguments.length?(g=e,t):g},t.color=function(e){return arguments.length?(o=n.utils.getColor(e),t):o},t.offset=function(e){return arguments.length?(h=e,t):h},t.order=function(e){return arguments.length?(p=e,t):p},t.style=function(e){if(!arguments.length)return d;switch(d=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}return t},t.interpolate=function(e){return arguments.length?(f=e,t):f},t},n.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var I=d3.select(this),N=this,$=(d||parseInt(I.style("width"))||960)-u.left-u.right,O=(h||parseInt(I.style("height"))||400)-u.top-u.bottom;if(t.update=function(){I.transition().duration(M).call(t)},t.container=this,C.disabled=w.map(function(t){return!!t.disabled}),!D){var F;D={};for(F in C)D[F]=C[F]instanceof Array?C[F].slice(0):C[F]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var B=I.selectAll(".nv-noData").data([T]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",u.left+$/2).attr("y",u.top+O/2).text(function(t){return t}),t}I.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var L=I.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),R=L.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),j=L.select("g");if(R.append("rect").style("opacity",0),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-stackedWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),R.append("g").attr("class","nv-interactive"),j.select("rect").attr("width",$).attr("height",O),g){var z=f?$-_:$;o.width(z),j.select(".nv-legendWrap").datum(w).call(o),u.top!=o.height()&&(u.top=o.height(),O=(h||parseInt(I.style("height"))||400)-u.top-u.bottom),j.select(".nv-legendWrap").attr("transform","translate("+($-z)+","+-u.top+")")}if(f){var V=[{key:E.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=a.style(),style:"stack"},{key:E.stream||"Stream",metaKey:"Stream",disabled:"stream"!=a.style(),style:"stream"},{key:E.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=a.style(),style:"expand"},{key:E.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=a.style(),style:"stack_percent"}];_=A.length/3*260,V=V.filter(function(t){return-1!==A.indexOf(t.metaKey)}),l.width(_).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(V).call(l),u.top!=Math.max(l.height(),o.height())&&(u.top=Math.max(l.height(),o.height()),O=(h||parseInt(I.style("height"))||400)-u.top-u.bottom),j.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}L.attr("transform","translate("+u.left+","+u.top+")"),b&&j.select(".nv-y.nv-axis").attr("transform","translate("+$+",0)"),y&&(c.width($).height(O).margin({left:u.left,top:u.top}).svgContainer(I).xScale(e),L.select(".nv-interactive").call(c)),a.width($).height(O);var W=j.select(".nv-stackedWrap").datum(w);W.transition().call(a),m&&(r.scale(e).ticks($/100).tickSize(-O,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+O+")"),j.select(".nv-x.nv-axis").transition().duration(0).call(r)),v&&(s.scale(i).ticks("wiggle"==a.offset()?0:O/36).tickSize(-$,0).setTickFormat("expand"==a.style()||"stack_percent"==a.style()?d3.format("%"):k),j.select(".nv-y.nv-axis").transition().duration(0).call(s)),a.dispatch.on("areaClick.toggle",function(e){w.forEach(1===w.filter(function(t){return!t.disabled}).length?function(t){t.disabled=!1}:function(t,n){t.disabled=n!=e.seriesIndex}),C.disabled=w.map(function(t){return!!t.disabled}),S.stateChange(C),t.update()}),o.dispatch.on("stateChange",function(e){C.disabled=e.disabled,S.stateChange(C),t.update()}),l.dispatch.on("legendClick",function(e,n){e.disabled&&(V=V.map(function(t){return t.disabled=!0,t}),e.disabled=!1,a.style(e.style),C.style=a.style(),S.stateChange(C),t.update())}),c.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,o,l,d=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,s){o=n.interactiveBisect(r.values,e.pointXValue,t.x()),a.highlightPoint(s,o,!0);var c=r.values[o];if("undefined"!=typeof c){"undefined"==typeof i&&(i=c),"undefined"==typeof l&&(l=t.xScale()(t.x()(c,o)));var u="expand"==a.style()?c.display.y:t.y()(c,o);d.push({key:r.key,value:u,color:p(r,r.seriesIndex),stackedValue:c.display})}}),d.reverse(),d.length>2){var h=t.yScale().invert(e.mouseY),f=null;d.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);return h>=n&&i+n>=h?void(f=e):void 0}),null!=f&&(d[f].highlight=!0)}var g=r.tickFormat()(t.x()(i,o)),m="expand"==a.style()?function(t,e){return d3.format(".1%")(t)}:function(t,e){return s.tickFormat()(t)};c.tooltip.position({left:l+u.left,top:e.mouseY+u.top}).chartContainer(N.parentNode).enabled(x).valueFormatter(m).data({value:g,series:d})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(t){S.tooltipHide(),a.clearHighlights()}),S.on("tooltipShow",function(t){x&&P(t,N.parentNode)}),S.on("changeState",function(e){"undefined"!=typeof e.disabled&&w.length===e.disabled.length&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),"undefined"!=typeof e.style&&a.style(e.style),t.update()})}),t}var e,i,a=n.models.stackedArea(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),c=n.interactiveGuideline(),u={top:30,right:25,bottom:50,left:60},d=null,h=null,p=n.utils.defaultColor(),f=!0,g=!0,m=!0,v=!0,b=!1,y=!1,x=!0,w=function(t,e,n,i,a){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k=d3.format(",.2f"),C={style:a.style()},D=null,T="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),_=250,A=["Stacked","Stream","Expanded"],E={},M=250;r.orient("bottom").tickPadding(7),s.orient(b?"right":"left"),l.updateState(!1);var P=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),c=r.tickFormat()(a.x()(e.point,e.pointIndex)),u=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=w(e.series.key,c,u,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],S.tooltipShow(t)}),a.dispatch.on("tooltipHide",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){x&&n.tooltip.cleanup()}),t.dispatch=S,t.stacked=a,t.legend=o,t.controls=l,t.xAxis=r,t.yAxis=s,t.interactiveLayer=c,d3.rebind(t,a,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),o.color(p),a.color(p),t):p},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(b=e,s.orient(e?"right":"left"),t):b},t.useInteractiveGuideline=function(e){return arguments.length?(y=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):y},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(C=e,t):C},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(T=e,t):T},t.transitionDuration=function(e){return arguments.length?(M=e,t):M},t.controlsData=function(e){return arguments.length?(A=e,t):A},t.controlLabels=function(e){return arguments.length?"object"!=typeof e?E:(E=e,t):E},s.setTickFormat=s.tickFormat,s.tickFormat=function(t){return arguments.length?(k=t,s):k},t}}()},{}],45:[function(t,e,n){e.exports=function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),r=i(a);e["default"]=function(t){var e={log:r["default"](t),err:r["default"](t),warn:r["default"](t),onDebug:r["default"](t)};return e.err.log=console.error.bind(console),e.warn.log=console.warn.bind(console),e.onDebug.log=function(t,e,n,i){i()},e},t.exports=e["default"]},function(t,e,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function a(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var i="color: "+this.color;t=[t[0],i,"color: inherit"].concat(Array.prototype.slice.call(t,1));var a=0,r=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(a++,"%c"===t&&(r=a))}),t.splice(r,0,i),t}function r(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function o(){var t;try{t=e.storage.debug}catch(n){}return t}function l(){try{return window.localStorage}catch(t){}}e=t.exports=n(2),e.log=r,e.formatArgs=a,e.save=s,e.load=o,e.useColors=i,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(o())},function(t,e,n){function i(){return e.colors[u++%e.colors.length]}function a(t){function n(){}function a(){var t=a,n=+new Date,r=n-(c||n);t.diff=r,t.prev=c,t.curr=n,c=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=i());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var o=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;o++;var a=e.formatters[i];if("function"==typeof a){var r=s[o];n=a.call(t,r),s.splice(o,1),o--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var l=a.log||e.log||console.log.bind(console);l.apply(t,s)}n.enabled=!1,a.enabled=!0;var r=e.enabled(t)?a:n;return r.namespace=t,r}function r(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),i=n.length,a=0;i>a;a++)n[a]&&(t=n[a].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function o(t){var n,i;for(n=0,i=e.skips.length;i>n;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;i>n;n++)if(e.names[n].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=a,e.coerce=l,e.disable=s,e.enable=r,e.enabled=o,e.humanize=n(3),e.names=[],e.skips=[],e.formatters={};var c,u=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*o;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=c?Math.round(t/c)+"d":t>=l?Math.round(t/l)+"h":t>=o?Math.round(t/o)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function a(t){return r(t,c,"day")||r(t,l,"hour")||r(t,o,"minute")||r(t,s,"second")||t+" ms"}function r(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,o=60*s,l=60*o,c=24*l,u=365.25*c;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?a(t):i(t)}}])},{}],46:[function(t,e,n){function i(){this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone"),s=t("jquery");(void 0==window.$||$.fn.jquery.split(" ")[0].split(".")[0]<2)&&(window.jQuery=window.$=r.$=s);var o="function"==typeof $().modal;o&&t("bootstrap/dist/js/bootstrap");var l=t("./src/views/menu-view.js"),c=t("./src/views/header-footer-view.js"),u=t("amp-translate");a.extend(i.prototype,r.Events,{initialize:function(t){t=a.defaults(t,{showFooterAdmin:!0,showDGFooter:!0,showLogin:!0}),a.has(t,"sync")&&(r.sync=t.sync);var e=JSON.parse('{\n"amp.common:footer": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and DGF",\n"amp.common:title": "AMP Toolbar",\n"amp.common:title-help": "Help",\n"amp.common:subtitle-amp-help": "AMP Help",\n"amp.common:subtitle-glossary": "Glossary",\n"amp.common:subtitle-email-support-team": "Email Support Team",\n"amp.common:title-logout": "Log Out",\n"amp.common:platform": "Aid Management Platform (AMP)",\n"[title]amp.common:platform": "Aid Management Platform",\n"amp.common:platform-short": "AMP",\n"amp.common:title-login": "Login",\n"amp.dashboard:close": "Close",\n"amp.about:modal.title": "About AMP",\n"amp.about:credits": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and Development Gateway Foundation.",\n"amp.about:trademark": "The Development Gateway and the The Development Gateway logo are trademarks for The Development Gateway Foundation",\n"amp.about:rights": "All Rights Reserved",\n"amp.about:version": "Version"\n}\n\n');this.translator=new u({defaultKeys:e}),t.translator=this.translator,this.menu=new l(t),this.headerFooter=new c(t),this.listenTo(this.headerFooter,"all",function(){this.trigger.apply(this,arguments)}),this.listenTo(this.menu,"all",function(){this.trigger.apply(this,arguments)});var n=this;$.when(this.menu.menuRendered,this.headerFooter.layoutFetched).then(function(){n.headerFooter.refreshUserSection(),n.translator.translateDOM(document),void 0!==$.fn.dropdown&&$(".dropdown-toggle").dropdown()})}}),e.exports={layout:i},window.boilerplate=i},{"./src/views/header-footer-view.js":52,"./src/views/menu-view.js":53,"amp-translate":76,backbone:"backbone","bootstrap/dist/js/bootstrap":47,jquery:"jquery",underscore:"underscore"}],47:[function(t,e,n){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof e&&a[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t(r);e&&e.preventDefault(),s.length||(s=a.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.button"),r="object"==typeof e&&e;a||i.data("bs.button",a=new n(this,r)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();

e+="Text",null==r.resetText&&i.data("resetText",i[a]()),setTimeout(t.proxy(function(){i[a](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;a||i.data("bs.carousel",a=new n(this,r)),"number"==typeof e?a.to(e):s?a[s]():r.interval&&a.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var a="prev"==t?-1:1,r=(n+a)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var a=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,a),s=this.interval,o="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:o});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:c,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(o),r.addClass(o),a.one("bsTransitionEnd",function(){r.removeClass([e,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(h)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var a=function(n){var i,a=t(this),r=t(a.attr("data-target")||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),a.data()),o=a.attr("data-slide-to");o&&(s.interval=!1),e.call(r,s),o&&r.data("bs.carousel").to(o),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),a=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!a&&r.toggle&&"show"==e&&(r.toggle=!1),a||n.data("bs.collapse",a=new i(this,r)),"string"==typeof e&&a[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.2",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),e||a.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION):a.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var a=t(i);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var a=t(this);a.attr("data-target")||i.preventDefault();var r=e(a),s=r.data("bs.collapse"),o=s?"toggle":t.extend({},a.data(),{trigger:this});n.call(r,o)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(a).remove(),t(r).each(function(){var i=t(this),a=n(i),r={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.2",s.prototype.toggle=function(i){var a=t(this);if(!a.is(".disabled, :disabled")){var r=n(a),s=r.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var o={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",o)),i.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),s=a.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&a.find(r).trigger("focus"),i.trigger("click");var o=" li:not(.divider):visible a",l=a.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var a=t(this),r=a.data("bs.modal"),s=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);r||a.data("bs.modal",r=new n(this,s)),"string"==typeof e?r[e](i):s.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),a&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),a=i.attr("href"),r=t(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tooltip"),r="object"==typeof e&&e;(a||"destroy"!=e)&&(a||i.data("bs.tooltip",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var s=a[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var a=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(o);c&&(o=o.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),d=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var p=o,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);o="bottom"==o&&u.bottom+h>g.bottom?"top":"top"==o&&u.top-h<g.top?"bottom":"right"==o&&u.right+d>g.width?"left":"left"==o&&u.left-d<g.left?"right":o,r.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,u,d,h);this.applyPlacement(m,o);var v=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),e.top=e.top+s,e.left=e.left+o,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-a+l:2*u.top-r+c,p=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,r=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var r=i?{top:0,left:0}:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},o=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,s,o,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-r-s.scroll,l=e.top+r-s.scroll+i;o<s.top?a.top=s.top-o:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var c=e.left-r,u=e.left+r+n;c<s.left?a.left=s.left-c:u>s.width&&(a.left=s.left+s.width-u)}return a},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.popover"),r="object"==typeof e&&e;(a||"destroy"!=e)&&(a||i.data("bs.popover",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){var a=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&t(a);return r&&r.length&&r.is(":visible")&&[[r[e]().top+n,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)s!=r[t]&&e>=a[t]&&(!a[t+1]||e<=a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new n(this)),"string"==typeof e&&a[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=t(i);this.activate(e.closest("li"),n),this.activate(o,o.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(e,i,a){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var s=i.find("> .active"),o=a&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var a=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.affix"),r="object"==typeof e&&e;a||i.data("bs.affix",a=new n(this,r)),"string"==typeof e&&a[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.2",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var a=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>a?"top":!1;if("bottom"==this.affixed)return null!=n?a+this.unpin<=r.top?!1:"bottom":t-i>=a+s?!1:"bottom";var o=null==this.affixed,l=o?a:r.top,c=o?s:e;return null!=n&&n>=a?"top":null!=i&&l+c>=t-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,a=i.top,r=i.bottom,s=t("body").height();"object"!=typeof i&&(r=a=i),"function"==typeof a&&(a=i.top(this.$element)),
"function"==typeof r&&(r=i.bottom(this.$element));var o=this.getState(s,e,a,r);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var l="affix"+(o?"-"+o:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:s-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery)},{}],48:[function(t,e,n){var i=t("backbone"),a=t("../models/amp-menus-model.js");e.exports=i.Collection.extend({url:"/rest/security/menus",model:a,fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{"../models/amp-menus-model.js":50,backbone:"backbone"}],49:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/layout",defaults:{email:void 0},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],50:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({url:"/rest/security/menus",defaults:{name:"Default",children:[]},fetch:function(t){return t=t||{},t.cache=!1,i.Model.prototype.fetch.call(this,t)}})},{backbone:"backbone"}],51:[function(t,e,n){var i=(t("jquery"),t("backbone")),a=t("underscore"),r='<div class="modal fade" id="about-popup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n<div class="modal-dialog">\r\n <div class="modal-content">\r\n <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\r\n        <h4 class="modal-title text-primary" data-i18n="amp.about:modal.title">About AMP</h4>\r\n </div>\r\n<table width="474" border="0" style="margin:15px;">\r\n	<tbody><tr>\r\n		<td width="257">\r\n		<p align="center" style="font-size: 16px;"><strong>&nbsp;<span data-i18n="amp.common:platform">Aid Management Platform (AMP)</span></strong></p>\r\n		<p align="center"> Version <%= ampVersion %></p>\r\n		</td>\r\n		<td width="220"><img width="220" height="100" src="/TEMPLATE/ampTemplate/img_2/logo-development-gateway.png"></td>\r\n	</tr>\r\n	<tr>\r\n		<td colspan="2">\r\n		<p  style="font-size: 12px;">&nbsp;<span data-i18n="amp.common:platform">Aid Management Platform (AMP)</span>\r\n		 <span data-i18n="amp.about:version">Version</span> <%= ampVersion %> <%= buildDate %>\r\n		<span data-i18n="amp.about:credits">Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and Development Gateway Foundation</span>.\r\n		</p>\r\n		</td>\r\n	</tr>\r\n	<tr>\r\n		<td colspan="2">\r\n		<p style="font-size: 12px;">\r\n		<span data-i18n="amp.about:trademark">The Development Gateway and the The Development Gateway logo are trademarks for The Development Gateway Foundation</span>.<span data-i18n="amp.about:rights">All Rights Reserved</span>.</p>\r\n		</td>\r\n	</tr>\r\n</tbody></table>\r\n</div>\r\n</div>\r\n</div>';e.exports=i.View.extend({template:a.template(r),id:"aboutModal",initialize:function(t){this.app=t.app,a.bindAll(this,"render")},render:function(){var t=this;return a.defaults(window,{ampVersion:"0",buildDate:"0"}),this.$el.html(t.template({ampVersion:window.ampVersion,buildDate:window.buildDate})),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],52:[function(t,e,n){var i=t("jquery"),a=t("backbone"),r=t("underscore"),s='<style>\r\n    .footerText {\r\n    padding: 0;\r\n    font-family: arial;\r\n    font-size: 11px;\r\n    border: 0px;\r\n    }\r\n    .footer {\r\n    background-color: #8B8B8B;\r\n    color: #FFF;\r\n    margin-top: 0;\r\n    padding-bottom: 10px;\r\n    padding-top: 10px;\r\n    text-align: center;\r\n    }\r\n    .dgf_footer {\r\n    color: #8B8B8B;\r\n    line-height: 18px;\r\n    text-align: center;\r\n    background-color:white;\r\n    padding-top:10px;\r\n    }\r\n    .dgf_footer img {\r\n    line-height: 18px;\r\n    margin-bottom: 5px;\r\n    }\r\n</style>\r\n\r\n<div class="footer footerText">\r\n    AMP <b><%=  properties.ampVersion %></b> build <b><%=  properties.buildDate %></b> - <%= properties.footerText %>\r\n    <% if(showAdminLinks == true  && properties.adminLinks != undefined) { %>\r\n    <a href=\'<%=  properties.adminLinks[0].url %>\'><%=  properties.adminLinks[0].name %></a>\r\n    <a href=\'<%=  properties.adminLinks[1].url %>\'><%=  properties.adminLinks[1].name %></digi:trn></a>\r\n    <% } %>\r\n</div>\r\n<% if(showDGFooter == true)  { %>\r\n<div class="dgf_footer footerText">\r\n    <img src="/TEMPLATE/ampTemplate/img_2/dgf_logo_bottom.gif" class="dgf_logo_footer">\r\n    <br/>\r\n    Development Gateway\r\n    <br/>\r\n    1110 Vermont Ave, NW, Suite 500\r\n    <br/>\r\n    Washington, DC 20005 USA\r\n    <br/>\r\n    info@developmentgateway.org, Tel: +1.202.572.9200, Fax: +1 202.572.9290\r\n</div>\r\n<% } %>\r\n\r\n<% if(properties.trackingEnabled == true) { %>\r\n<!-- Piwik\r\nSite id can be checked here: http://stats.ampsite.net/index.php?module=SitesManager&action=index&idSite=1&period=range&date=last30\r\nAlso,the wiki for piwik: https://wiki.dgfoundation.org/display/AMPDOC/Integrating+AMP+with+Piwik\r\n-->\r\n<script type="text/javascript">\r\n	  var _paq = _paq || [];\r\n	  _paq.push(["trackPageView"]);\r\n	  _paq.push(["enableLinkTracking"]);\r\n	\r\n	  (function() {\r\n	    var u="<%=  properties.trackingUrl %>";\r\n	    _paq.push(["setTrackerUrl", u+"piwik.php"]);\r\n	    _paq.push(["setSiteId", "<%=properties.siteId %>"]);\r\n	    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";\r\n	    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);\r\n	  })();\r\n	</script>\r\n<!-- End Piwik Code -->\r\n<% } %>\r\n',o=t("../models/amp-layout-model.js");e.exports=a.View.extend({model:null,template:r.template(s),el:"#amp-footer",layoutFetched:new i.Deferred,showAdminFooter:!0,showDGFooter:!0,initialize:function(t){this.showAdminFooter=t.showAdminFooter,this.showDGFooter=t.showDGFooter;var e=new o,n=this;e.fetch().then(function(t){n.model=t,window.buildDate=t.buildDate,window.ampVersion=t.ampVersion,n.render(),n.layoutFetched.resolve()}),this.layoutFetched.done(function(){n.render()}),r.bindAll(this,"render","refreshUserSection")},render:function(){if(this.model){this.refreshUserSection();var t=this;this.$el.html(this.template({properties:t.model,showAdminLinks:t.showAdminFooter,showDGFooter:t.showDGFooter}))}return this},refreshUserSection:function(){this.model.logged===!0&&i(".container-fluid",i("#amp-header")).toggleClass("ampUserLoggedIn"),this.model.email&&(i(".user-url").attr("href","javascript:showUserProfile("+this.model.userId+")"),i("#header-workspace",i("#amp-header")).text(this.model.workspace),i("#header-workspace",i("#amp-header")).prop("title",this.model.workspace),i("#header-name #header-first-name",i("#amp-header")).text(this.model.firstName),i("#header-name #header-last-name",i("#amp-header")).text(this.model.lastName))}})},{"../models/amp-layout-model.js":49,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],53:[function(t,e,n){var i=t("backbone");t("bootstrap/dist/js/bootstrap");var a=t("underscore"),r='\n<style>\n  #amp-header .navbar-header>button.navbar-toggle {\n    /* fix contracted menu icon to not block map*/\n    padding: 2px;\n    margin: 4px;\n  }\n\n  #amp-header .container-fluid.ampUserLoggedIn ul.ampPublic {\n    display: none !important;\n  }\n\n  #amp-header .container-fluid.ampUserLoggedIn ul.ampUserLoggedIn {\n    display: inherit !important;\n  }\n\n  #amp-header .container-fluid ul.ampPublic {\n    display: inherit !important;\n  }\n\n  #amp-header .container-fluid ul.ampUserLoggedIn {\n    display: none !important;\n  }\n\n  div#amp-header nav div.container-fluid, div#amp-header nav div.navbar-collapse a {\n    font-size: 12px;\n  }\n\n  .nav>li>a, div#amp-header nav div.navbar-collapse a{\n    padding: 4px 6px;\n    /* bootstrap sets pad: 10px, 15px\n     4px 6px allows 1024px viewport with 8 menus.\n     */\n  }\n\n  /* Ensure that translated title is not too long for a 1024px viewport*/\n  /* TODO: verify that this max-width still holds when menu is API driven */\n  /*****/\n  div#amp-header a.navbar-brand {\n    overflow-y: hidden;\n    max-height: 40px;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  @media ( max-width : 1151px) {\n    div#amp-header ul.navbar-right #header-workspace-li {\n      overflow-y: hidden !important;\n      max-width: 11em;\n      max-height: 30px;\n      overflow-wrap: break-word;\n      min-width: 10em;\n    }\n    div#amp-header ul.navbar-right #header-name {\n      overflow-y: hidden !important;\n      max-width: 7em;\n      max-height: 30px;\n      overflow-wrap: break-word;\n      min-width: 5em;\n    }\n  }\n  /*If there is slightly more space, allow name and Workspace to be written out.*/\n  @media ( min-width : 1152px) {\n    div#amp-header ul.navbar-right #header-workspace-li {\n      overflow-y: hidden !important;\n      max-width: 20em;\n      max-height: 30px;\n      overflow-wrap: break-word;\n      min-width: 10em;\n    }\n    div#amp-header ul.navbar-right #header-name {\n      overflow-y: hidden !important;\n      max-width: 20em;\n      max-height: 30px;\n      overflow-wrap: break-word;\n      min-width: 5em;\n    }\n  }\n  /******/\n  .scrollable-menu {\n    height: auto;\n    max-height: 400px;\n    overflow-x: hidden;\n  }\n\n  .dropdown-submenu {\n    position: relative;\n  }\n\n  .dropdown-submenu>.dropdown-menu {\n    top: 0;\n    left: 100%;\n    margin-top: -6px;\n    margin-left: -1px;\n    -webkit-border-radius: 0 6px 6px 6px;\n    -moz-border-radius: 0 6px 6px 6px;\n    border-radius: 0 6px 6px 6px;\n  }\n\n  .dropdown-submenu:hover>.dropdown-menu {\n    display: block;\n  }\n\n  .dropdown-submenu>a:after {\n    display: block;\n    content: " ";\n    float: right;\n    width: 0;\n    height: 0;\n    border-color: transparent;\n    border-style: solid;\n    border-width: 5px 0 5px 5px;\n    border-left-color: #cccccc;\n    margin-top: 5px;\n    margin-right: -10px;\n  }\n\n  .dropdown-submenu:hover>a:after {\n    border-left-color: #ffffff;\n  }\n\n  .dropdown-submenu.pull-left {\n    float: none;\n  }\n\n  .dropdown-submenu.pull-left>.dropdown-menu {\n    left: -100%;\n    margin-left: 10px;\n    -webkit-border-radius: 6px 0 6px 6px;\n    -moz-border-radius: 6px 0 6px 6px;\n    border-radius: 6px 0 6px 6px;\n  }\n\n  @media ( max-width : 991px) {\n    #amp-header #header-name {\n      display: none;\n    }\n  }\n  .workspace-name {\n    max-width: 140px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n</style>\n<script type="text/javascript">\n  function switchTranslation (url) {\n    $(\'#backUrl\').val(document.location.href);\n    document.modeSwitchForm.action = url;\n    document.modeSwitchForm.submit();\n  }\n</script>\n<form name="modeSwitchForm" method="post" action="/translation/switchMode.do" style="display:none;">\n  <input type="hidden" name="backUrl" id="backUrl" value="">\n</form>\n<nav class="navbar navbar-default" role="navigation">\n  <div class="container-fluid">\n    <div class="row">\n      <!-- .ampUserLoggedIn hides public version-->\n\n      <!-- Brand and toggle get grouped for better mobile display -->\n      <div class="navbar-header col-sm-3">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n        <a class="navbar-brand" href="/" data-i18n="[title]amp.common:platform">\n          <img class="flag" src="/aim/default/displayFlag.do" height="20" width="30">&nbsp; &nbsp;\n          <span data-i18n="amp.common:platform-short">AMP</span></a>\n      </div>\n\n      <div class="col-sm-9">\n        <div class="collapse navbar-collapse row" id="bs-example-navbar-collapse-1">\n          <div class="col-sm-9">\n            <ul id="AmpMenus" class="nav navbar-nav menus">\n\n              <!-- File -->\n\n            </ul>\n            <div class="clearfix"></div>\n          </div>\n          <div class="col-sm-3">\n            <ul class="nav navbar-nav ampUserLoggedIn">\n              <li id="header-workspace-li"><a title="Workspace" class="workspace-name" id="header-workspace">&nbsp;</a></li>\n              <li id="header-name">\n                <a class="user-url">\n                  <span id="header-first-name">&nbsp;</span>&nbsp;<span id="header-last-name">&nbsp;</span>\n                </a>\n              </li>\n              <li id="header-logout"><a data-i18n="amp.common:title-logout" href="/aim/j_spring_logout" >Logout</a></li>\n            </ul>\n            <% if(showLogin){ %>\n              <div class="login_here" id="show_login_pop">\n                <div class="login_here_cont">\n                  <a data-i18n="amp.common:title-login" href="javascript:void(0)">Login</a>\n                </div>\n              </div>\n            <% } %>\n          </div>\n        </div>\n      </div>\n\n    </div>\n    <!-- Collect the nav links, forms, and other content for toggling -->\n  </div><!-- /.container-fluid -->\n</nav>\n\n',s=t("../collections/amp-menus-collection.js"),o=(t("../models/amp-menus-model.js"),t("./submenu-compositeview.js")),l=t("./about-view.js");e.exports=i.View.extend({el:"#amp-header",appendEl:"#AmpMenus",template:a.template(r),menuRendered:new $.Deferred,events:{"click #show_login_pop":"openLoginBox"},initialize:function(t){this.collection=new s,this.translator=t.translator,this.showLogin=t.showLogin;var e=this;this.collection.fetch().then(function(){e.render()}),this.firstRender=!0,this.about=new l(t),a.bindAll(this,"addOne","addAll","showAbout")},addAll:function(){this.collection.each(this.addOne),this.menuRendered.resolve()},addOne:function(t){view=new o({model:t}),this.listenTo(view,"showAbout",this.showAbout);var e=this;this.listenTo(view,"switchLanguage",function(t){e.translator.setLanguage(t.language).always(function(){location.reload()})}),view.render(),$(this.appendEl).append(view.el)},render:function(){var t=this;return this.firstRender&&(this.$el.html(this.template({showLogin:t.showLogin})),this.addAll(),this.firstRender=!1,$("#show_login_pop_box").insertBefore("#show_login_pop"),$("#logincontainer").insertAfter("#show_login_pop")),this},showAbout:function(){return 0==$("#about-popup").length&&this.$el.parent().append(this.about.render().el),"function"!=typeof $().modal&&$.noConflict(),$("#about-popup").modal({show:!0,backdrop:!1}),this.translator.translateDOM($("#about-popup")[0]),!1},openLoginBox:function(){$("div#show_login_pop_box").show(),$("#j_username").focus()}})},{"../collections/amp-menus-collection.js":48,"../models/amp-menus-model.js":50,"./about-view.js":51,"./submenu-compositeview.js":54,backbone:"backbone","bootstrap/dist/js/bootstrap":47,underscore:"underscore"}],54:[function(t,e,n){var i=t("backbone"),a=t("underscore"),r='<%\n  /* Prepare the A tag at top level menus */\n  if (!obj.url) {\n      obj.url = \'#\';\n      obj.className = \'dropdown-toggle\';\n      obj.dataToggle = \'data-toggle="dropdown"\';\n    }\n    else {\n      obj.className = \'\';\n      obj.dataToggle = \'\';\n    }\n\n    if (obj.tab) {\n      obj.tabTarget = \'target="_blank"\';\n    }\n    else {\n      obj.tabTarget = \'\';\n    }\n    %>\n\n<a href="<%= url %>" class="<%= className %>" <%= dataToggle %> <%= obj.tabTarget %> >\n<%= obj.name.trim() %>&nbsp;<% if (obj.children && obj.children.length > 0) { %><span class="caret"></span><% } %>\n</a>\n<% if (obj.children && obj.children.length !== 0) { %>\n  <ul class="children dropdown-menu" role="menu">\n  <% _.each(obj.children, function(model) { %>\n\n    <%\n      /* Prepare the A tag at second level menus */\n      if (model.children && model.children.length !== 0) {\n        model.dropdownSubmenu = \'dropdown-submenu\';\n       };\n\n       if (!model.tooltip) {\n         model.tooltip = \'\';\n       };\n       var elementClass = \'2nd-level-item\';\n       if (model.language) {\n			 elementClass = elementClass+ \' language\';\n	   }\n       if (model.popup) {\n       	 elementClass = elementClass + \' popup\';\n       }\n       if (model.tab) {\n         model.tabTarget = \'target="_blank"\';\n       } else {\n         model.tabTarget = \'\';\n       }\n       var elementUrl = model.url;\n       if (model.post === true) {\n         elementUrl = \'javascript:switchTranslation ("\'+elementUrl+\'")\';\n      \n       }\n       if (!model.url) {\n        elementUrl = \'javascript:;\';\n       }\n       /* if it doesn\'t have children, nor url. then it is the About */\n       if (!model.url && !model.children) {\n       elementClass = elementClass + \' about-amp\';\n       }\n    %>\n\n    <li class=\'dropdown <%= model.dropdownSubmenu %>\' >\n    <a href=\'<%=  elementUrl %>\' title="<%= model.tooltip %>" onclick="return canExit()" class="<%= elementClass %>" <%= model.tabTarget %> ><%= model.name %></a>\n\n    <%\n      if (model.children && model.children.length !== 0) {\n     %>\n\n      <ul class="children dropdown-menu scrollable-menu" role="menu">\n      <% _.each(model.children, function(submodel) { %>\n\n        <%\n          /* Prepare the A tag at third level menus */\n          if (!submodel.url) {\n            submodel.url = \'#\';\n          };\n		  var itemClass = \'3rd-level-item\';\n		  if (submodel.language) {\n			 itemClass = itemClass+ \' language\';\n		   }\n		  if (!submodel.tooltip) {\n            submodel.tooltip = \'\';\n          };\n\n          if (submodel.tab) {\n            submodel.tabTarget=\'target="_blank"\';\n          } else {\n            submodel.tabTarget = \'\';\n          };\n        %>\n\n        <li class="menu-item"><a href="<%= submodel.url %>" onclick="return canExit()" class="<%= itemClass %>" <%= submodel.tabTarget %> title="<%= submodel.tooltip %>"><%= submodel.name %></a></li>\n\n      <% }) %>\n      </ul>\n    <% } %>\n\n    </li>\n\n  <% }); %>\n  </ul>\n<% }%>\n<!--\n<li class="menu-item dropdown dropdown-submenu"><a class="dropdown-toggle" data-toggle="dropdown">\n<ul class="children dropdown-menu scrollable-menu" role="menu">\n      <li class="menu-item first-of-type" id="yui-gen4" groupindex="0" index="0">\n  <a class="yuiampmenuitemlabel yuimenuitemlabel" href="/selectTeam.do?id=680" onclick="return canExit()">\n    Academy of Sciences\n  </a>\n</li>--!>\n\n';e.exports=i.View.extend({tagName:"li",className:"dropdown",events:{"click .language":"switchLanguage","click .popup":"openPopup","click .about-amp":"about"},template:a.template(r),initialize:function(t){a.bindAll(this,"render","switchLanguage","about")},render:function(){var t=this;return this.$el.html(this.template(t.model.attributes)),this},switchLanguage:function(t){var e=t.currentTarget.href.lastIndexOf("/"),n=t.currentTarget.href.substr(e+1);if("undefined"!=typeof SwitchLanguageMenu&&$.isFunction(SwitchLanguageMenu)){t.preventDefault();var i="/translation/switchLanguage.do?code="+n+"&rfr=";SwitchLanguageMenu(i)}else this.trigger("switchLanguage",{language:n})},openPopup:function(t){window.name="opener"+(new Date).getTime();var e=768,n=1024,i=(screen.width-768)/2,a=(screen.height-1024)/2,r="height="+n+",width="+e+",top="+a+",left="+i+",menubar=no,scrollbars=yes";return popupPointer=window.open(t.currentTarget.href,"forumPopup",r),t.preventDefault(),popupPointer},about:function(t){return this.trigger("showAbout",{}),!1}})},{backbone:"backbone",underscore:"underscore"}],55:[function(t,e,n){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof e&&a[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.0",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t(r);e&&e.preventDefault(),s.length||(s=a.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.button"),r="object"==typeof e&&e;a||i.data("bs.button",a=new n(this,r)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[a]()),setTimeout(t.proxy(function(){i[a](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus","focus"==e.type)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;a||i.data("bs.carousel",a=new n(this,r)),"number"==typeof e?a.to(e):s?a[s]():r.interval&&a.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n="prev"==t?-1:1,i=this.getItemIndex(e),a=(i+n)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var a=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,a),s=this.interval,o="next"==e?"left":"right",l="next"==e?"first":"last",c=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[l]()}if(r.hasClass("active"))return this.sliding=!1;var u=r[0],d=t.Event("slide.bs.carousel",{relatedTarget:u,direction:o});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:u,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(o),r.addClass(o),a.one("bsTransitionEnd",function(){r.removeClass([e,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var a=function(n){var i,a=t(this),r=t(a.attr("data-target")||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),a.data()),o=a.attr("data-slide-to");o&&(s.interval=!1),e.call(r,s),o&&r.data("bs.carousel").to(o),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),a=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!a&&r.toggle&&"show"==e&&(r.toggle=!1),a||n.data("bs.collapse",a=new i(this,r)),"string"==typeof e&&a[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.0",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),e||a.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION):a.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var a=t(i);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var a=t(this);a.attr("data-target")||i.preventDefault();var r=e(a),s=r.data("bs.collapse"),o=s?"toggle":t.extend({},a.data(),{trigger:this});n.call(r,o)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(a).remove(),t(r).each(function(){var i=t(this),a=n(i),r={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.0",
s.prototype.toggle=function(i){var a=t(this);if(!a.is(".disabled, :disabled")){var r=n(a),s=r.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var o={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",o)),i.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),s=a.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&a.find(r).trigger("focus"),i.trigger("click");var o=" li:not(.divider):visible a",l=a.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var a=t(this),r=a.data("bs.modal"),s=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);r||a.data("bs.modal",r=new n(this,s)),"string"==typeof e?r[e](i):s.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),a&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),a=i.attr("href"),r=t(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tooltip"),r="object"==typeof e&&e,s=r&&r.selector;(a||"destroy"!=e)&&(s?(a||i.data("bs.tooltip",a={}),a[s]||(a[s]=new n(this,r))):a||i.data("bs.tooltip",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var s=a[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var a=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(o);c&&(o=o.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),d=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var p=o,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);o="bottom"==o&&u.bottom+h>g.bottom?"top":"top"==o&&u.top-h<g.top?"bottom":"right"==o&&u.right+d>g.width?"left":"left"==o&&u.left-d<g.left?"right":o,r.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,u,d,h);this.applyPlacement(m,o);var v=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),e.top=e.top+s,e.left=e.left+o,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-a+l:2*u.top-r+c,p=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,r=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var r=i?{top:0,left:0}:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},o=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,s,o,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-r-s.scroll,l=e.top+r-s.scroll+i;o<s.top?a.top=s.top-o:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var c=e.left-r,u=e.left+r+n;c<s.left?a.left=s.left-c:u>s.width&&(a.left=s.left+s.width-u)}return a},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.popover"),r="object"==typeof e&&e,s=r&&r.selector;(a||"destroy"!=e)&&(s?(a||i.data("bs.popover",a={}),a[s]||(a[s]=new n(this,r))):a||i.data("bs.popover",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.0",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){var a=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})}e.VERSION="3.3.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&t(a);return r&&r.length&&r.is(":visible")&&[[r[e]().top+n,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)s!=r[t]&&e>=a[t]&&(!a[t+1]||e<=a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new n(this)),"string"==typeof e&&a[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=t(i);this.activate(e.closest("li"),n),this.activate(o,o.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(e,i,a){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var s=i.find("> .active"),o=a&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var a=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.affix"),r="object"==typeof e&&e;a||i.data("bs.affix",a=new n(this,r)),"string"==typeof e&&a[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var a=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>a?"top":!1;if("bottom"==this.affixed)return null!=n?a+this.unpin<=r.top?!1:"bottom":t-i>=a+s?!1:"bottom";var o=null==this.affixed,l=o?a:r.top,c=o?s:e;return null!=n&&n>=l?"top":null!=i&&l+c>=t-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,a=i.top,r=i.bottom,s=t("body").height();"object"!=typeof i&&(r=a=i),"function"==typeof a&&(a=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var o=this.getState(s,e,a,r);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var l="affix"+(o?"-"+o:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:s-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery)},{}],56:[function(t,e,n){var i=t("jquery");!function(t,e){function n(e,n){var a,r,s,o=e.nodeName.toLowerCase();return"area"===o?(a=e.parentNode,r=a.name,e.href&&r&&"map"===a.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var a=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,a,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(e,!a)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function a(e,n,i,a){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?o["inner"+i].call(this):this.each(function(){t(this).css(s,a(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(s,a(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var a,r=t.ui[e].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return e[i]>0?!0:(e[i]=1,a=e[i]>0,e[i]=0,a)}})}(i)},{jquery:"jquery"}],57:[function(t,e,n){var i=t("jquery");t("./core"),function(t,e){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(r.inline?e.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function a(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var r,s="datepicker";t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,a,r;i=e.nodeName.toLowerCase(),a="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),a),r.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,r):a&&this._inlineDatepicker(e,r)},_newInst:function(e,n){var a=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:a,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,s,n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,a,r,s=this._get(n,"appendText"),o=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[o?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&e.focus(this._showDatepicker),("button"===i||"both"===i)&&(a=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:a,title:a}):a)),e[o?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){
var e,n,i,a,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(n=0,i=0,a=0;a<t.length;a++)t[a].length>n&&(n=t[a].length,i=a);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,o){var l,c,u,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],s,p)),a(p.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(e){var n,i=t(e),a=t.data(e,s);i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,s),"input"===n?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,s);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,s);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,s)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,r){var s,o,l,c,u=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):u?"all"===i?t.extend({},u.settings):this._get(u,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=r),void(u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),a(u.settings,s),null!==l&&s.dateFormat!==e&&s.minDate===e&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&s.dateFormat!==e&&s.maxDate===e&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(t(n),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,a,r=t.datepicker._getInst(e.target),s=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return a=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),a[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,a[0]),n=t.datepicker._get(r,"onSelect"),n?(i=t.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,a=t.datepicker._getInst(e.target);return t.datepicker._get(a,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(a){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,i,r,s,o,l,c;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),i=t.datepicker._get(n,"beforeShow"),r=i?i.apply(e,[e,n]):{},r!==!1&&(a(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),o=t.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),c=t.datepicker._get(n,"duration"),n.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(e),a=i[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var a=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?a-s:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+o?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+a>l&&l>a?Math.abs(n.left+a-l):0),n.top-=Math.min(n.top,n.top+r>c&&c>r?Math.abs(r+o):0),n},_findPos:function(e){for(var n,i=this._getInst(e),a=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,a,r,o=this._curInst;!o||e&&o!==t.data(e,s)||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),a=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[n]||t.effects[n])?o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),i,a):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,a),n||a(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var a=t(e),r=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var n,i=t(e),a=this._getInst(i[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(n=new Date,a.selectedDay=n.getDate(),a.drawMonth=a.selectedMonth=n.getMonth(),a.drawYear=a.selectedYear=n.getFullYear()),this._notifyChange(a),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var a=t(e),r=this._getInst(a[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(a)},_selectDay:function(e,n,i,a){var r,s=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",a).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,a=t(e),r=this._getInst(a[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,a,r=this._get(e,"altField");r&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),a=this.formatDate(n,i,this._getFormatConfig(e)),t(r).each(function(){t(this).val(a)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var a,r,s,o,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,b=-1,y=!1,x=function(t){var n=a+1<e.length&&e.charAt(a+1)===t;return n&&a++,n},w=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,a=new RegExp("^\\d{1,"+i+"}"),r=n.substring(l).match(a);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},k=function(e,i,a){var r=-1,s=t.map(x(e)?a:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var i=e[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(r=e[0],l+=i.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==e.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<e.length;a++)if(y)"'"!==e.charAt(a)||x("'")?C():y=!1;else switch(e.charAt(a)){case"d":v=w("d");break;case"D":k("D",d,h);break;case"o":b=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":o=new Date(w("@")),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"!":o=new Date((w("!")-this._ticksTo1970)/1e4),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"'":x("'")?C():y=!0;break;default:C()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),b>-1)for(m=1,v=b;;){if(r=this._getDaysInMonth(g,m-1),r>=v)break;m++,v-=r}if(o=this._daylightSavingAdjust(new Date(g,m-1,v)),o.getFullYear()!==g||o.getMonth()+1!==m||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,a=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},c=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},u=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),a,r);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),s,o);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=!1,a=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||a("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":a("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,n){return t.settings[n]!==e?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),r=a,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||a}catch(o){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,i){var a=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var a=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=a.getFullYear(),s=a.getMonth(),o=a.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":o+=parseInt(c[1],10);break;case"w":case"W":o+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(c[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s))}c=l.exec(n)}return new Date(r,s,o)},s=null==n||""===n?i:"string"==typeof n?r(n):"number"==typeof n?isNaN(n)?i:a(n):new Date(n.getTime());return s=s&&"Invalid Date"===s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,a=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),a===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,a,r,s,o,l,c,u,d,h,p,f,g,m,v,b,y,x,w,k,C,D,T,S,_,A,E,M,P,I,N,$,O,F,B,L,R,j=new Date,z=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),V=this._get(t,"isRTL"),W=this._get(t,"showButtonPanel"),U=this._get(t,"hideIfNoPrevNext"),H=this._get(t,"navigationAsDateFormat"),Y=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),X=1!==Y[0]||1!==Y[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-q,tt=t.drawYear;if(0>J&&(J+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-Y[0]*Y[1]+1,Q.getDate())),e=Z&&Z>e?Z:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)J--,0>J&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,n=this._get(t,"prevText"),n=H?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>",a=this._get(t,"nextText"),a=H?this.formatDate(a,this._daylightSavingAdjust(new Date(tt,J+G,1)),this._getFormatConfig(t)):a,r=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+a+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+a+"</span></a>",s=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?K:z,s=H?this.formatDate(s,o,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?l:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(V?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),x="",k=0;k<Y[0];k++){for(C="",this.maxRows=4,D=0;D<Y[1];D++){if(T=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),S=" ui-corner-all",_="",X){if(_+="<div class='ui-datepicker-group",Y[1]>1)switch(D){case 0:_+=" ui-datepicker-group-first",S=" ui-corner-"+(V?"right":"left");break;case Y[1]-1:_+=" ui-datepicker-group-last",S=" ui-corner-"+(V?"left":"right");break;default:_+=" ui-datepicker-group-middle",S=""}_+="'>"}for(_+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===k?V?r:i:"")+(/all|right/.test(S)&&0===k?V?i:r:"")+this._generateMonthYearHeader(t,J,tt,Z,Q,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)E=(w+u)%7,A+="<th"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[E]+"'>"+p[E]+"</span></th>";for(_+=A+"</tr></thead><tbody>",M=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,M)),P=(this._getFirstDayOfMonth(tt,J)-u+7)%7,I=Math.ceil((P+M)/7),N=X&&this.maxRows>I?this.maxRows:I,this.maxRows=N,$=this._daylightSavingAdjust(new Date(tt,J,1-P)),O=0;N>O;O++){for(_+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")($)+"</td>":"",w=0;7>w;w++)B=m?m.apply(t.input?t.input[0]:null,[$]):[!0,""],L=$.getMonth()!==J,R=L&&!b||!B[0]||Z&&Z>$||Q&&$>Q,F+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+($.getTime()===T.getTime()&&J===t.selectedMonth&&t._keyEvent||y.getTime()===$.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+B[1]+($.getTime()===K.getTime()?" "+this._currentClass:"")+($.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+$.getMonth()+"' data-year='"+$.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+$.getDate()+"</span>":"<a class='ui-state-default"+($.getTime()===z.getTime()?" ui-state-highlight":"")+($.getTime()===K.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+$.getDate()+"</a>")+"</td>",$.setDate($.getDate()+1),$=this._daylightSavingAdjust($);_+=F+"</tr>"}J++,J>11&&(J=0,tt++),_+="</tbody></table>"+(X?"</div>"+(Y[0]>0&&D===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=_}x+=C}return x+=c,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,i,a,r,s,o){var l,c,u,d,h,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(r||!m)x+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,c=a&&a.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=i.getMonth())&&(!c||u<=a.getMonth())&&(x+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+o[u]+"</option>");x+="</select>"}if(b||(y+=x+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(d[0]),g=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=a?Math.min(g,a.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),b&&(y+=(!r&&m&&v?"":"&#xa0;")+x),y+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),a=t.drawMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,a))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,a,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),a=n&&n>e?n:e;return i&&a>i?i:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var a=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(0>e?e:a[0]*a[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,o=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!a||e.getTime()>=a.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!o||e.getFullYear()<=o)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(i)},{"./core":56,jquery:"jquery"}],58:[function(t,e,n){var i=t("jquery");t("./core"),t("./mouse"),t("./widget"),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",
position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,a=this.options;return a.containment?"window"===a.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),n=t(a.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,a,r,s=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,c=e.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(a=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-s.grid[1]:a+s.grid[1]:a,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),a=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(a.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),a=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,a))})},drag:function(e,n){var i=t(this).data("ui-draggable"),a=this;t.each(i.sortables,function(){var r=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("opacity")&&(a._opacity=i.css("opacity")),i.css("opacity",a.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,a=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),a!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,a,r,s,o,l,c,u,d,h,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,b=n.offset.top,y=b+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)o=p.snapElements[d].left,l=o+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,o-g>v||m>l+g||c-g>y||b>u+g||!t.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(c-y)<=g,a=Math.abs(u-b)<=g,r=Math.abs(o-v)<=g,s=Math.abs(l-m)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||a||r||s,"outer"!==f.snapMode&&(i=Math.abs(c-b)<=g,a=Math.abs(u-y)<=g,r=Math.abs(o-m)<=g,s=Math.abs(l-v)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(i||a||r||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=i||a||r||s||h)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("zIndex")&&(a._zIndex=i.css("zIndex")),i.css("zIndex",a.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(i)},{"./core":56,"./mouse":59,"./widget":60,jquery:"jquery"}],59:[function(t,e,n){var i=t("jquery");t("./widget"),function(t,e){var n=!1;t(document).mouseup(function(){n=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,a=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return a&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(i)},{"./widget":60,jquery:"jquery"}],60:[function(t,e,n){var i=t("jquery");!function(t,e){var n=0,i=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}a(e)},t.widget=function(e,n,i){var a,r,s,o,l={},c=e.split(".")[0];e=e.split(".")[1],a=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[c]=t[c]||{},r=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),o=new n,o.options=t.widget.extend({},o.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},a=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=a,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||e:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:a}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var a,r,s=i.call(arguments,1),o=0,l=s.length;l>o;o++)for(a in s[o])r=s[o][a],s[o].hasOwnProperty(a)&&r!==e&&(n[a]=t.isPlainObject(r)?t.isPlainObject(n[a])?t.widget.extend({},n[a],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,a){var r=a.prototype.widgetFullName||n;t.fn[n]=function(s){var o="string"==typeof s,l=i.call(arguments,1),c=this;return s=!o&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(o?function(){var i,a=t.data(this,r);return a?t.isFunction(a[s])&&"_"!==s.charAt(0)?(i=a[s].apply(a,l),i!==a&&i!==e?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new a(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var a,r,s,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},a=n.split("."),n=a.shift(),a.length){for(r=o[n]=t.widget.extend({},this.options[n]),s=0;s<a.length-1;s++)r[a[s]]=r[a[s]]||{},r=r[a[s]];if(n=a.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var a,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=a=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),t.each(i,function(i,s){function o(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?a.delegate(u,c,o):n.bind(c,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var a,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,a,r){"string"==typeof a&&(a={effect:a});var s,o=a?a===!0||"number"==typeof a?n:a.effect||n:e;a=a||{},"number"==typeof a&&(a={duration:a}),s=!t.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),s&&t.effects&&t.effects.effect[o]?i[e](a):o!==e&&i[o]?i[o](a.duration,a.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(i)},{jquery:"jquery"}],61:[function(t,e,n){var i=t("backbone"),a=t("underscore"),r=t("jquery"),s=t("../models/generic-filter-model"),o=t("../models/org-role-filter-model"),l=t("../models/years-filter-model");e.exports=i.Collection.extend({url:"/rest/filters",_loaded:null,_allDeferreds:[],orgCollection:null,orgGroupCollection:null,orgTypeCollection:null,componentCaller:null,initialize:function(t,e){this.on("add",this._cleanUpAfterAdd),this.load(),e.caller&&(componentCaller=e.caller)},load:function(){var t=this;return this._loaded||(this._loaded=new r.Deferred,this._allDeferreds.push(this._createOrgFilters()),this.fetch({remove:!1}).then(function(){r.when.apply(r,t._allDeferreds).done(t._loaded.resolve).fail(t._loaded.reject)}).fail(t._loaded.reject)),this._loaded},_cleanUpAfterAdd:function(t){var e=this;if(t.get("ui")||e.remove(t),t.get("filterType")){var n=a.some(t.get("filterType"),function(t){return t===componentCaller||"ALL"===t});n||e.remove(t)}this.componentCaller=componentCaller},parse:function(t){return t=a.filter(t,function(t){return t.ui}),t=a.filter(t,function(t){return"/rest/filters/org-groups"!==t.endpoint&&"/rest/filters/org-types"!==t.endpoint&&"/rest/filters/org-roles"!==t.endpoint&&"/rest/filters/orgs"!==t.endpoint})},model:function(t,e){var n=null,a=e.collection;switch(t.id){case"Programs":case"Sectors":a._allDeferreds.push(a._goOneDeeper(a,t)),n=new i.Model({ui:!1});break;default:"Dates"==t.id||t.id.length>4&&"Date"==t.id.substring(t.id.length-4)?n=new l(t):(n=new s(t),a._allDeferreds.push(n.getTree()))}return n},_goOneDeeper:function(t,e){var n=e.endpoint,o=r.Deferred(),l=[],c=new i.Collection;return c.url=n,c.fetch().then(function(i){if(a.each(i,function(i){var a=new s({url:n+"/"+i.id,name:i.name,ui:!0,group:e.id,empty:!1});t.add(a),l.push(a.getTree())}),a.isEmpty(i)){console.warn("Filters API returned empty",n);var c=new s({url:n,name:e.name,ui:!0,group:e.id,empty:!0});t.add(c),l.push(c.getTree())}r.when.apply(r,l).then(function(){o.resolve()})}),o},_createOrgFilters:function(){var t=this;return this._fetchOrgCollections().then(function(){t.makeTreeHelper(t.orgGroupCollection,t.orgCollection,"orgIds","children"),t.orgRolesCollection.each(function(e){var n=e.toJSON();if("Donor"===e.get("name")?(t.makeTreeHelper(t.orgTypeCollection,t.orgGroupCollection,"groupIds","children"),a.extend(n,{ui:!0,group:"Donor",data:t.orgTypeCollection.toJSON()}),n.data=t._filterDonorOrgs(n.data,e.id)):(a.extend(n,{ui:!0,group:"Role",data:t.orgGroupCollection.toJSON()}),n.data=t._filterOrgs(n.data,e.id)),n.data.length>0){var i=e.get("name")+" Id";n.data=t._setFilterId(n.data,i),t.add(new o(n))}})})},_setFilterId:function(t,e){var n=this;return a.each(t,function(t){t.rolesIds&&(t.filterId=e),t.children&&(t.children=n._setFilterId(t.children,e))}),t},_filterOrgs:function(t,e){return t=a.filter(t,function(t){return t.children=a.filter(t.children,function(t){return t.rolesIds.indexOf(e)>-1}),t.isSelectable=!1,t.children.length>0})},_filterDonorOrgs:function(t,e){var n=this;return t=a.filter(t,function(t){t.children=n._filterOrgs(t.children,e);for(var i=0;i<t.children.length;i++)t.children[i].children=a.filter(t.children[i].children,function(t){return t.hasFundings===!0});return a.each(t.children,function(t){t.filterId="Donor Group"}),t.filterId="Donor Type",t.isSelectable=!1,t.children.length>0})},_fetchOrgCollections:function(){var t=[];return this.orgCollection=new i.Collection,this.orgCollection.url="/rest/filters/orgs",t.push(this.orgCollection.fetch()),this.orgGroupCollection=new i.Collection,this.orgGroupCollection.url="/rest/filters/org-groups",t.push(this.orgGroupCollection.fetch()),this.orgTypeCollection=new i.Collection,this.orgTypeCollection.url="/rest/filters/org-types",t.push(this.orgTypeCollection.fetch()),this.orgRolesCollection=new i.Collection,this.orgRolesCollection.url="/rest/filters/org-roles",t.push(this.orgRolesCollection.fetch({})),r.when.apply(r,t)},joinHelper:function(t,e,n,i){t.each(function(t){var r=t.get(n),s=e.filter(function(t){return a.indexOf(r,t.get("id"))>=0});t.set(i,s)})},makeTreeHelper:function(t,e,n,i){var r=this,s=a.filter(r.orgRolesCollection.models,function(t){return"Donor"===t.get("name")})[0];t.each(function(t){var r=t.get(n),o=[];a.each(r,function(t){if(0!==t){var n=e.get({id:t});if(n){if(n.get("hasFundings")===!0){var i=n.get("rolesIds");void 0!=i&&(i.push(s.get("id")),n.set("rolesIds",i))}o.push(n.toJSON())}}}),t.set(i,o)})}})},{"../models/generic-filter-model":65,"../models/org-role-filter-model":66,"../models/years-filter-model":67,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],62:[function(t,e,n){!function(t){function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error("(Link) '"+e+"' can't match '"+n+"'.'")}function n(n){if(void 0===n&&(n={}),"object"!=typeof n)throw Error("(Format) 'format' option must be an object.");var i={};t(a).each(function(t,e){if(void 0===n[e])i[e]=r[t];else{if(typeof n[e]!=typeof r[t])throw Error("(Format) 'format."+e+"' must be a "+typeof r[t]+".");if("decimals"===e&&(0>n[e]||7<n[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");i[e]=n[e]}}),e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),this.r=i}function i(e,n){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new i.prototype.p(e.target||function(){},e.method,e.format||{},n)}var a="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),r=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];n.prototype.a=function(t){
return this.r[t]},n.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var n=this.a("decimals"),i="",a="",r="",s="";return 0===parseFloat(t.toFixed(n))&&(t="0"),0>t&&(i=this.a("negative"),a=this.a("negativeBefore")),t=Math.abs(t).toFixed(n).toString(),t=t.split("."),this.a("thousand")?(r=e(t[0]).match(/.{1,3}/g),r=e(r.join(e(this.a("thousand"))))):r=t[0],this.a("mark")&&1<t.length&&(s=this.a("mark")+t[1]),this.a("to")(a+this.a("prefix")+i+r+s+this.a("postfix"))},n.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var n;return null===t||void 0===t?!1:(t=this.a("from")(t),t=t.toString(),n=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==n?(t=n,n="-"):n="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(n="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(n+t)),isNaN(t)?!1:t)},i.prototype.K=function(e,n){this.method=n||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},i.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},i.prototype.G=function(e){function n(t,e){return[e?null:t,e?t:null]}var i=this;this.method="val",this.target=e.on("change",function(e){i.B.val(n(t(e.target).val(),i.t),{link:i,set:!0})})},i.prototype.p=function(e,n,i,a){if(this.g=i,this.update=!a,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,n);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!n){if(e.is("input, select, textarea"))return void this.G(e);n="html"}if("function"==typeof n||"string"==typeof n&&e[n])return this.method=n,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},i.prototype.write=function(t,e,n,i){this.update&&!1===i||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,e,n):this.target[this.method](t,e,n))},i.prototype.q=function(e){this.g=new n(t.extend({},e,this.g instanceof n?this.g.r:this.g))},i.prototype.J=function(t){this.B=t},i.prototype.I=function(t){this.t=t},i.prototype.format=function(t){return this.g.L(t)},i.prototype.A=function(t){return this.g.w(t)},i.prototype.p.prototype=i.prototype,t.Link=i}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(e){return t.isArray(e)?e:[e]}function i(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function a(t,e){return 100*e/(t[1]-t[0])}function r(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var n,i,r,s=1;e>=t.d[s];)s++;return n=t.d[s-1],i=t.d[s],r=t.c[s-1],n=[n,i],r+a(n,0>n[0]?e+Math.abs(n[0]):e-n[0])/(100/(t.c[s]-r))}function s(t,e){if(e>=100)return t.d.slice(-1)[0];for(var n,i,a,r=1;e>=t.c[r];)r++;return n=t.d[r-1],i=t.d[r],a=t.c[r-1],n=[n,i],100/(t.c[r]-a)*(e-a)*(n[1]-n[0])/100+n[0]}function o(t,e){for(var n,i=1;(t.dir?100-e:e)>=t.c[i];)i++;return t.m?(n=t.c[i-1],i=t.c[i],e-n>(i-n)/2?i:n):(t.h[i-1]?(n=t.h[i-1],i=t.c[i-1]+Math.round((e-t.c[i-1])/n)*n):i=e,i)}function l(t,n){if(!e(n))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=n}function c(n,i){if("object"!=typeof i||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.each(i,function(i,a){var r;if("number"==typeof a&&(a=[a]),!t.isArray(a))throw Error("noUiSlider: 'range' contains invalid value.");if(r="min"===i?0:"max"===i?100:parseFloat(i),!e(r)||!e(a[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.c.push(r),n.d.push(a[0]),r?n.h.push(isNaN(a[1])?!1:a[1]):isNaN(a[1])||(n.h[0]=a[1])}),t.each(n.h,function(t,e){return e?void(n.h[t]=a([n.d[t],n.d[t+1]],e)/(100/(n.c[t+1]-n.c[t]))):!0})}function u(e,n){if("number"==typeof n&&(n=[n]),!t.isArray(n)||!n.length||2<n.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=n.length,e.start=n}function d(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function h(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function p(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function f(t,n){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=a(t.d,n),!e(n))throw Error("noUiSlider: 'margin' option must be numeric.")}function g(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function m(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||n,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:n}}function v(e,n,i){e.o=[n.lower,n.upper],e.g=n.format,t.each(e.o,function(e,a){if(!t.isArray(a))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(a,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(i),this.q(n.format)})}),e.dir&&1<e.b&&e.o.reverse()}function b(e,n){var i,a={c:[],d:[],h:[!1],margin:0};return i={step:{e:!1,f:l},start:{e:!0,f:u},connect:{e:!0,f:h},direction:{e:!0,f:g},range:{e:!0,f:c},snap:{e:!1,f:d},orientation:{e:!1,f:p},margin:{e:!1,f:f},behaviour:{e:!0,f:m},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(i,function(t,i){if(void 0===e[t]){if(i.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}i.f(a,e[t],n)}),a.style=a.k?"top":"left",a}function y(e,n){var i=t("<div><div/></div>").addClass(I[2]),a=["-lower","-upper"];return e.dir&&a.reverse(),i.children().addClass(I[3]+" "+I[3]+a[n]),i}function x(e,n){return n.j&&(n=new t.Link({target:t(n.j).clone().appendTo(e),method:n.method,format:n.g},!0)),n}function w(e,n){var i,a=[];for(i=0;i<e.b;i++){var r=a,s=i,o=e.o[i],l=n[i].children(),c=e.g,u=void 0,d=[],u=new t.Link({},!0);for(u.q(c),d.push(u),u=0;u<o.length;u++)d.push(x(l,o[u]));r[s]=d}return a}function k(t,e,n){switch(t){case 1:e.addClass(I[7]),n[0].addClass(I[6]);break;case 3:n[1].addClass(I[6]);case 2:n[0].addClass(I[7]);case 0:e.addClass(I[6])}}function C(t,e){var n,i=[];for(n=0;n<t.b;n++)i.push(y(t,n).appendTo(e));return i}function D(e,n){return n.addClass([I[0],I[8+e.dir],I[4+e.k]].join(" ")),t("<div/>").appendTo(n).addClass(I[1])}function T(e,a,l){function c(){return y[["width","height"][a.k]]()}function u(t){var e,n=[S.val()];for(e=0;e<t.length;e++)S.trigger(t[e],n)}function d(e,n,i){var r=e[0]!==T[0][0]?1:0,l=_[0]+a.margin,c=_[1]-a.margin;return i&&1<T.length&&(n=r?Math.max(n,l):Math.min(n,c)),100>n&&(n=o(a,n)),n=Math.max(Math.min(parseFloat(n.toFixed(7)),100),0),n===_[r]?1===T.length?!1:n===l||n===c?0:!1:(e.css(a.style,n+"%"),e.is(":first-child")&&e.toggleClass(I[17],n>50),_[r]=n,a.dir&&(n=100-n),t(x[r]).each(function(){this.write(s(a,n),e.children(),S)}),!0)}function h(t,e,n){n||i(S,I[14]),d(t,e,!1),u(["slide","set","change"])}function p(t,e,n,i){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=S.attr("disabled");if(S.hasClass(I[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var r,s,e=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),c=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(r=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY),(o||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),r=t.clientX+window.pageXOffset,s=t.clientY+window.pageYOffset),c.C=[r,s],c.cursor=o,t=c,t.l=t.C[a.k],n(t,i)})}function f(t,e){var n,i=e.b||T,a=!1,a=100*(t.l-e.start)/c(),r=i[0][0]!==T[0][0]?1:0,s=e.D;n=a+s[0],a+=s[1],1<i.length?(0>n&&(a+=Math.abs(n)),a>100&&(n-=a-100),n=[Math.max(Math.min(n,100),0),Math.max(Math.min(a,100),0)]):n=[n,a],a=d(i[0],n[r],1===i.length),1<i.length&&(a=d(i[1],n[r?0:1],!1)||a),a&&u(["slide"])}function g(e){t("."+I[15]).removeClass(I[15]),e.cursor&&t("body").css("cursor","").off(".nui"),E.off(".nui"),S.removeClass(I[12]),u(["set","change"])}function m(e,n){1===n.b.length&&n.b[0].children().addClass(I[15]),e.stopPropagation(),p(P.move,E,f,{start:e.l,b:n.b,D:[_[0],_[T.length-1]]}),p(P.end,E,g,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<T.length&&S.addClass(I[12]),t("body").on("selectstart.nui",!1))}function v(e){var n=e.l,i=0;e.stopPropagation(),t.each(T,function(){i+=this.offset()[a.style]}),i=i/2>n||1===T.length?0:1,n-=y.offset()[a.style],n=100*n/c(),h(T[i],n,a.n.m),a.n.m&&m(e,{b:[T[i]]})}function b(t){var e=(t=t.l<y.offset()[a.style])?0:100;t=t?0:T.length-1,h(T[t],e,!1)}var y,x,T,S=t(e),_=[-1,-1];if(S.hasClass(I[0]))throw Error("Slider was already initialized.");y=D(a,S),T=C(a,y),x=w(a,T),k(a.i,S,T),function(t){var e;if(!t.fixed)for(e=0;e<T.length;e++)p(P.start,T[e].children(),m,{b:[T[e]]});t.s&&p(P.start,y,v,{b:T}),t.extend&&(S.addClass(I[16]),t.s&&p(P.start,S,b,{b:T})),t.v&&(e=y.find("."+I[7]).addClass(I[10]),t.fixed&&(e=e.add(y.children().not(e).children())),p(P.start,e,m,{b:T}))}(a.n),e.vSet=function(){var e,s,o,l,c,h,p=Array.prototype.slice.call(arguments,0),f=n(p[0]);for("object"==typeof p[1]?(e=p[1].set,s=p[1].link,o=p[1].update,l=p[1].animate):!0===p[1]&&(e=!0),a.dir&&1<a.b&&f.reverse(),l&&i(S,I[14]),p=1<T.length?3:1,1===f.length&&(p=1),c=0;p>c;c++)l=s||x[c%2][0],l=l.A(f[c%2]),!1!==l&&(l=r(a,l),a.dir&&(l=100-l),!0!==d(T[c%2],l,!0)&&t(x[c%2]).each(function(t){return t?void this.write(h,T[c%2].children(),S,o):(h=this.u,!0)}));return!0===e&&u(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<a.b;t++)e[t]=x[t][0].F;return 1===e.length?e[0]:a.dir?e.reverse():e},e.destroy=function(){return t.each(x,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(I.join(" ")).empty(),l},S.val(a.start)}function S(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=b(t,this);return this.each(function(){T(this,e,t)})}function _(e){return this.each(function(){var n=t(this).val(),i=this.destroy(),a=t.extend({},i,e);t(this).noUiSlider(a),i.start===a.start&&t(this).val(n)})}function A(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var E=t(document),M=t.fn.val,P=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},I="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.fn.val=function(){var e=arguments,n=t(this[0]);return arguments.length?this.each(function(){(t(this).hasClass(I[0])?A:M).apply(t(this),e)}):(n.hasClass(I[0])?A:M).call(n)},t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?_:S).call(this,t)}}(window.jQuery||window.Zepto)},{}],63:[function(t,e,n){function i(){this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone"),s=t("jquery");(void 0==window.$||$.fn.jquery.split(" ")[0].split(".")[0]<2)&&(window.jQuery=window.$=r.$=s),t("jquery-ui/draggable"),t("bootstrap/dist/js/bootstrap");var o=t("./views/filters-view");a.extend(i.prototype,r.Events,{initialize:function(t){t=a.defaults(t,{draggable:!0}),a.has(t,"sync")&&(r.sync=t.sync),this.view=new o(t),this._cachedAllFilters=null,this.loaded=this.view._loaded.promise(),this.listenTo(this.view,"all",function(){this.trigger.apply(this,arguments)})},setElement:function(){this.view.setElement(arguments)},showFilters:function(){this.view.showFilters()},getAllFilters:function(){var t=this;return this.loaded.then(function(){return this._cachedAllFilters||(this._cachedAllFilters=t.view.serialize({includeUnselected:!0,wholeModel:!0})),this._cachedAllFilters})},serializeToModels:function(){return this.view.serialize({wholeModel:!0})},serialize:function(){return this.view.serialize({})},deserialize:function(t,e){return this.view.deserialize(t,e)},reset:function(t){this.view.resetFilters(),t&&t.silent||this.view.applyFilters()},extractDates:function(t,e,n,i){e.otherFilters=e.otherFilters||{},e.otherFilters.date=e.otherFilters.date||{start:"",end:""};var r=a.find(t,function(t){return t.get("id")===n});void 0!==r&&""!==r.get("name")&&(e.otherFilters.date.start=r.get("name"));var s=a.find(t,function(t){return t.get("id")===i});void 0!==s&&""!==s.get("name")&&(e.otherFilters.date.end=s.get("name"))}}),e.exports=i},{"./views/filters-view":71,backbone:"backbone","bootstrap/dist/js/bootstrap":55,jquery:"jquery","jquery-ui/draggable":58,underscore:"underscore"}],64:[function(t,e,n){var i=t("backbone");e.exports=i.Model.extend({defaults:{name:"Filter Name",method:"GET",totalCount:0,activeCount:0,_loaded:!1,empty:!1},initialize:function(t){this.set("name",t.name),this.set("group",t.group||t.id),this.set("method",t.method),this.set("column",t.column),this.set("empty",t.empty||!1),this.url=t.url||t.endpoint}})},{backbone:"backbone"}],65:[function(t,e,n){var i=t("underscore"),a=t("../models/base-filter-model"),r=t("../tree/tree-node-model");e.exports=a.extend({initialize:function(t){a.prototype.initialize.apply(this,[t]),this.getTree()},getTree:function(){var t=this,e=this.get("_loaded");return e||t.set("_loaded",this._createTree().then(function(){return void 0!=t.get("tree")&&t.get("tree").on("change:numSelected",function(e,n){t.set("numSelected",n),t.set("numPossible",t.get("tree").get("numPossible"))}),t.get("tree")})),this.get("_loaded")},getNumSelected:function(){var t=this.get("numSelected");return t&&this.get("numSelected")!==this.get("numPossible")?t:0},serialize:function(t){var e=this.get("tree");if(e){var n=e.serialize(t);return n}return{}},deserialize:function(t){var e=this,n=this.get("tree");if(t){if(!n)return console.warn("deserialize no tree found",e),!1;n.deserialize(t)}},reset:function(){var t=this.get("tree");t&&(t.set("selected",!0),t.set("selected",!1))},_createTree:function(){return this.url||(this.url=this.get("endpoint")),this.fetch({type:this.get("method"),data:"{}"}).fail(function(t,e,n){console.error("failed to get filter ",t,e,n)})},parse:function(t){var e=this;if(i.isArray(t)||(t=[t]),i.isArray(t)&&t.length>0){var n=null;1===t.length?(t[0].filterId&&!t[0].name&&(t[0].name=t[0].filterId),t[0].values&&(t[0].children=t[0].values),t[0].isSelectable=!1,n=t[0]):n={id:-1,code:"-1",name:e.get("name"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!0};var a=new r(n);e.set("tree",a)}}})},{"../models/base-filter-model":64,"../tree/tree-node-model":68,underscore:"underscore"}],66:[function(t,e,n){var i=t("jquery"),a=t("../models/generic-filter-model"),r=t("../tree/tree-node-model");e.exports=a.extend({initialize:function(t){this.loaded=i.Deferred(),this._createTree(t.data),a.prototype.initialize.apply(this,[t])},getTree:function(){return this.loaded},_createTree:function(t){var e=this,n={};n=1===t.length?t[0]:{id:-1,code:"-1",name:e.get("displayName"),filterId:e.get("filterId"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!1};var i=new r(n);this.set("tree",i),e.get("tree").on("change:numSelected",function(t,n){e.set("numSelected",n),e.set("numPossible",e.get("tree").get("numPossible"))}),this.loaded.resolve(i)}})},{"../models/generic-filter-model":65,"../tree/tree-node-model":68,jquery:"jquery"}],67:[function(t,e,n){var i=t("jquery"),a=t("../models/base-filter-model");e.exports=a.extend({defaults:{selectedStart:null,selectedEnd:null,startYear:"",endYear:""},sync:function(){return i.when(!0)},initialize:function(t){a.prototype.initialize.apply(this,[t]),this.url=t.endpoint,this.set("_loaded",i.Deferred())},parse:function(t){return console.log("years-filter-model.parse: data = "+JSON.stringify(t)),t.startYear=t.startYear&&-1!==t.startYear?t.startYear+"-01-01":this.defaults.startYear,t.endYear=t.endYear&&-1!==t.endYear?t.endYear+"-12-31":this.defaults.endYear,t.selectedStart||(t.selectedStart=t.startYear,t.selectedEnd=t.endYear),this.get("_loaded").resolve(),t},serialize:function(){if(this.get("selectedStart")){var t="N/A"!=this.get("column")?this.get("column"):"date",e={};return e[t]={start:this.get("selectedStart"),end:this.get("selectedEnd")},e}return null},postprocess:function(){this.get("selectedStart")||(this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear")))},deserialize:function(t){var e="N/A"!=this.get("column")?this.get("column"):"date";t&&t[e]&&(this.set("selectedStart",this._dateConvert(t[e].start)),this.set("selectedEnd",this._dateConvert(t[e].end)),this.postprocess())},reset:function(){this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear"))},_dateConvert:function(t){console.log("asked to convert input: "+t);var e=null;return t&&t.indexOf("/")>-1&&(t=t.split("/"),e=t[2]+"-"+t[1]+"-"+t[0]),e}})},{"../models/base-filter-model":64,jquery:"jquery"}],68:[function(t,e,n){var i,a=t("underscore"),r=t("backbone"),s=r.Collection.extend({model:i});i=r.Model.extend({defaults:{selected:void 0,expanded:!0,visible:!0,numSelected:0,numPossible:0,children:null,isSelectable:!1},initialize:function(t){var e=this,n=new s;if(this.set("children",n),Array.isArray(t.children)&&a.each(t.children,function(t){var e=new i(t);n.add(e)}),!n.isEmpty()&&this.get("isSelectable")){var r=new i(e.toJSON());r.set("name","unkown: "+this.get("name")),n.add(r)}this._addListenersToChildren(),this.on("change:selected",e._onSelectChange),this._updateCount()},serialize:function(t){var e={},n=this.get("children");return t.includeUnselected?(this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id],this._serializeChildren(e,n,t)):n.length>0?this.get("numSelected")>=this.get("numPossible")&&this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:this._serializeChildren(e,n,t):this.get("selected")&&(this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id]),this._mergeUnassigned(e),e},_serializeChildren:function(t,e,n){e.each(function(e){var i=e.serialize(n);a.each(i,function(e,n){e&&(t[n]=t[n]?t[n].concat(e):e)})})},_mergeUnassigned:function(t){if(this.get("filterId")){var e=this.get("filterId");t[e]&&t.unassigned?(t[e]=t[e].concat(t.unassigned),delete t.unassigned):t.unassigned&&(t[e]=t.unassigned,delete t.unassigned)}},deserialize:function(t){var e=this,n=this.get("children");n.length>0&&n.each(function(n){!n.get("filterId")&&e.get("filterId")&&n.set("filterId",e.get("filterId")),n.deserialize(t)}),t[this.get("filterId")]&&(a(t[this.get("filterId")]).indexOf(this.id)>-1?this.set("selected",!0,{propagation:!0}):0===n.length&&this.set("selected",!1,{propagation:!0}))},_onSelectChange:function(t,e,n){var i=this,a=this.get("children");this.get("selected")?this.set("numSelected",this.get("numPossible")):this.set("numSelected",0),a.isEmpty()||i._updateChildNodes(n.propagation),n.propagation&&i.trigger("updateCount")},_addListenersToChildren:function(){var t=this,e=this.get("children");e.each(function(n){n.on("change:visible",function(){t.set(e.findWhere({visible:!0})?{visible:!0}:{visible:!1})}),n.on("updateCount",function(){t._updateCount(),t.trigger("updateCount")})})},_updateCount:function(){var t=this.get("children"),e={selected:0,possible:0};t.isEmpty()?e={selected:this.get("selected")?1:0,possible:1}:t.each(function(t){e.selected+=t.get("numSelected"),e.possible+=t.get("numPossible")}),this.set("numSelected",e.selected),this.set("numPossible",e.possible)},_updateChildNodes:function(t){var e=this,n=this.get("children");n.isEmpty()||n.each(function(n){n.set("selected",e.get("selected"),{propagation:t})})},filterText:function(t){var e=this.get("children");e.isEmpty()?this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1?this.set("visible",!0):this.set("visible",!1):(this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1&&this.set("visible",!0),e.each(function(e){e.filterText(t)}))}}),e.exports=i},{backbone:"backbone",underscore:"underscore"}],69:[function(t,e,n){var i=t("underscore"),a=t("backbone"),r=t("jquery"),s='<div class="node small">\n  <div class="selectable"></div>\n  <div class="toggle-nav">\n    <% if(name.length > 63){ %>\n      <span title="<%= name %>"><%= name.substring(0,60) %>...</span>\n    <% } else { %>\n      <%= name %>\n    <% } %>\n\n\n    <span class="count">(<%= numSelected %> / <%= numPossible %>)</span>\n    <span class="expanded">+</span>\n  </div>\n\n  <% /*TODO: fix hardcode of \'unkown\' */\n  if (obj.name && obj.name.indexOf("unkown")>-1) { %>\n    &nbsp;<a href="#"\n      data-toggle="popover"\n      data-container="body"\n      data-placement="right"\n      data-trigger="click"\n      data-content="projects that aren\'t tagged to a specific child.">\n      <span class="glyphicon glyphicon-info-sign"></span>\n    </a>\n  <%}%>\n</div>\n',o=a.View.extend({tagName:"li",className:"parent_li",template:i.template(s),initialize:function(){},render:function(t){return this.model=t,t&&(this.$el.html(this.template(t.toJSON())),this.renderChildren()),this},renderChildren:function(){var t=r("<ul>");this.$el.append(t);var e=this.model.get("children");e.isEmpty()?(this.$(".expanded").remove(),this.$("> .node > .toggle-nav > .count").text("")):e.each(function(e){var n=new o;t.append(n.render(e).$el)}),this._addModelListeners(),this._addUIListeners(),this._updateSelection(),this._updateExpanded(t)},_addModelListeners:function(){var t=this;this.model.on("change:selected",function(){t._updateSelection()}),this.model.on("change:expanded",function(){t._updateExpanded()}),this.model.on("change:numSelected",function(){t._updateCountUI()}),this.model.on("change:visible",function(){t._updateVisibility()})},_addUIListeners:function(){var t=this;this.$("> .node > .selectable").on("click",function(){t.clickBox()}),this.$("> .node > .toggle-nav").on("click",function(){t.clickName()})},_updateSelection:function(){this._updateCheckboxFill()},_updateCountUI:function(){this.model.get("children").isEmpty()||(this.$("> .node > .toggle-nav > .count").text("("+this.model.get("numSelected")+" / "+this.model.get("numPossible")+")"),this._updateCheckboxFill())},_updateVisibility:function(){this.model.get("visible")?this.$el.show():this.$el.hide()},_updateCheckboxFill:function(){this.model.get("children").isEmpty()?this.model.get("selected")?this.$("> .node > .selectable").addClass("selected"):this.$("> .node > .selectable").removeClass("selected"):this.model.get("numSelected")>0?this.model.get("numSelected")<this.model.get("numPossible")?(this.$("> .node > .selectable").addClass("half-fill"),this.$("> .node > .selectable").removeClass("selected")):(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").addClass("selected")):0===this.model.get("numSelected")&&(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").removeClass("selected"))},_updateExpanded:function(t){var e=this.$("> .node > .toggle-nav > .expanded");this.model.get("expanded")?(this.expand(),e.text("-"),e.addClass("open").removeClass("closed")):(this.collapse(),t&&t.find("> li").hide(),e.text("+"),e.addClass("closed").removeClass("open"))},clickBox:function(){this.model.set("selected",!this.model.get("selected"),{propagation:!0})},clickName:function(){this.model.get("children").isEmpty()?this.clickBox():this.model.set("expanded",!this.model.get("expanded"))},collapse:function(){var t=this.$el.find(" > ul > li");t.hide("fast")},expand:function(){var t=this.$el.find(" > ul > li");t.show("fast")}});e.exports=o},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],70:[function(t,e,n){var i=t("underscore"),a=t("jquery"),r=t("backbone"),s="<li>\n	<a href=\"#\">\n		<span data-i18n=\"amp.gis:pane-subfilters-<%= name.replace(/ /g,'') %>\">\n			<%= name %>\n		</span>   \n		<span class='filter-count small pull-right'></span>\n	</a>\n</li>",o='<%\n  // this renders the "big" filter list (the tabs)\n%>\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n';e.exports=r.View.extend({className:"filter-type",titleTemplate:i.template(s),contentTemplate:i.template(o),initialize:function(t){this.app=t.app},renderFilters:function(){},renderTitle:function(){var t=this;return this.titleEl=this.titleTemplate(this.model.toJSON()),this.$titleEl=a(this.titleEl),this.$titleEl.on("click",function(e){return a(this).siblings().removeClass("active"),a(this).addClass("active"),t.$el.html(""),t.renderFilters(),!1}),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],71:[function(t,e,n){var i=t("jquery"),a=t("underscore"),r=t("backbone"),s=t("amp-translate"),o=t("../views/top-level-filter-view"),l=t("../collections/all-filters-collection"),c='<%\n  // this renders the "big" filter list (the tabs)\n%>\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n',u='<%\n// renders the title of a tab \n%>\n<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',d=t("../../../../module/amp-log")("filters:top-level:view");e.exports=r.View.extend({id:"tool-filters",name:"Filters",apiURL:"/rest/filters",events:{"click .apply":"applyFilters","click .cancel":"cancel","click .reset":"resetFilters"},filterViewsInstances:{},template:a.template(c),titleTemplate:a.template(u),initialize:function(t){var e=this;this.draggable=t.draggable,void 0===t.translator?this.createTranslator():this.translator=t.translator,this.firstRender=!0,this._createTopLevelFilterViews(),this.allFilters=new l([],t),this._loaded=this.allFilters._loaded,this._getFilterList().then(function(){return e.allFilters.each(function(t){e._createFilterViews(t)}),this})},_createTopLevelFilterViews:function(){this.filterViewsInstances={donors:new o({name:"Funding Organizations",translator:this.translator,translate:this.translate}),sectors:new o({name:"Sector",translator:this.translator,translate:this.translate}),programs:new o({name:"Programs",translator:this.translator,translate:this.translate}),activity:new o({name:"Activity",translator:this.translator,translate:this.translate}),allAgencies:new o({name:"All Agencies",translator:this.translator,translate:this.translate}),financials:new o({name:"Financial",translator:this.translator,translate:this.translate}),locations:new o({name:"Location",translator:this.translator,translate:this.translate}),others:new o({name:"Other",translator:this.translator,translate:this.translate})}},render:function(){var t=this;return this.$el.addClass("panel panel-primary"),this.draggable&&this.$el.draggable({cancel:".panel-body, .panel-footer",cursor:"move"}),this.firstRender?(this.$el.html(this.template({})),this.$el.show(),this._getFilterList().done(function(){t.renderFilters()}),i(document).on("shown.bs.tab click","ul.nav.filter-titles>li>a[data-toggle='tab']",function(t){var e=i(t.target.parentElement).index(),n=t.relatedTarget?i(t.relatedTarget.parentElement).index():-1;d.log("switching from filters tab",n,"to tab",e),i(t.target).closest("ul.filter-titles").attr("active-tab-number",e);var a=i(t.target).attr("href"),r=i(a).find("ul.sub-filters-titles>li:first a");r&&r.click()}),this.firstRender=!1):t.translate(),this},createTranslator:function(t){var e=this,n=JSON.parse('{\n  "amp.gis:title-Country": "Country",\n  "amp.gis:title-Region": "Region",\n  "amp.gis:title-Zone": "Zone",\n  "amp.gis:title-District": "District",\n  "amp.gis:title-filters": "Filter",\n  "amp.gis:title-filters": "Filter",\n  "amp.gis:pane-filters-search": "Go",\n  "amp.gis:pane-filters-select": "select all",\n  "amp.gis:pane-filters-deselect": "deselect all",\n  "[placeholder]amp.gis:pane-filters-search-placeholder": "Search...",\n  "amp.gis:pane-filters-FundingOrganizations": "Funding Organizations",\n  "amp.gis:pane-filters-Sector": "Sector",\n  "amp.gis:pane-filters-Programs": "Programs",\n  "amp.gis:pane-filters-Activity": "Activity",\n  "amp.gis:pane-filters-AllAgencies": "All Agencies",\n  "amp.gis:pane-filters-Financial": "Financial",\n  "amp.gis:pane-filters-Location": "Location",\n  "amp.gis:pane-filters-Other": "Other",\n  "amp.gis:pane-subfilters-Donor": "Donor",\n  "amp.gis:pane-subfilters-Primary": "Primary",\n  "amp.gis:pane-subfilters-Secondary": "Secondary",\n  "amp.gis:pane-subfilters-NationalPlanObjective": "National Plan Objective",\n  "amp.gis:pane-subfilters-ActivityStatus": "Activity Status",\n  "amp.gis:pane-subfilters-ApprovalStatus": "Approval Status",\n  "amp.gis:pane-subfilters-ImplementingAgency": "Implementing Agency",\n  "amp.gis:pane-subfilters-ExecutingAgency": "Executing Agency",\n  "amp.gis:pane-subfilters-BeneficiaryAgency": "Beneficiary Agency",\n  "amp.gis:pane-subfilters-ContractingAgency": "Contracting Agency",\n  "amp.gis:pane-subfilters-AidModality": "Aid Modality",\n  "amp.gis:pane-subfilters-TypeOfAssistance": "Type Of Assistance",\n  "amp.gis:pane-subfilters-ResponsibleOrganization": "Responsible Organization",\n  "amp.gis:pane-subfilters-Dates": "Dates",\n  "amp.gis:pane-filters-all": "all",\n  "amp.gis:button-reset": "Reset",\n  "amp.gis:button-cancel": "Cancel",\n  "amp.gis:button-apply": "Apply",\n  "amp.gis:pane-subfilters-startdate": "Start Date:",\n  "amp.gis:pane-subfilters-enddate": "End Date:",\n  "amp.gis:pane-subfilters-empty": "No data for this filter"\n}\n');

e.popovers=e.$('[data-toggle="popover"]'),e.popovers.popover(),(t===!0||void 0===e.translator)&&(d.onDebug(function(){d.log("Creating translator for filters because",t===!0?"I was forced":"there is no translator")}),e.translator=new s({defaultKeys:n}))},translate:function(t){var e=this;void 0!==t&&(e=t),this.translator.translateDOM(void 0!==e.el?e.el:e)},renderFilters:function(){this.$(".filter-options").html("");var t=-1,e=this.$(".filter-titles").attr("active-tab-number")||0;for(var n in this.filterViewsInstances)if(this.filterViewsInstances.hasOwnProperty(n)){var i=this.filterViewsInstances[n];t+=1,this.$(".filter-titles").append(i.renderTitle().titleEl);var a=t==e;this.$(".filter-options").append(i.renderFilters(a).el)}this.$(".filter-titles a:first").tab("show")},_getFilterList:function(){return this.allFilters.load()},_createFilterViews:function(t){switch(t.get("group")){case"ActivityBudgetList":case"TypeOfAssistanceList":case"ModeOfPaymentList":case"FinancingInstrumentsList":this.filterViewsInstances.financials.filterCollection.add(t);break;case"ActivityStatusList":case"ActivityApprovalStatus":this.filterViewsInstances.activity.filterCollection.add(t);break;case"Programs":this.filterViewsInstances.programs.filterCollection.add(t);break;case"Sectors":this.filterViewsInstances.sectors.filterCollection.add(t);break;case"Donor":this.filterViewsInstances.donors.filterCollection.add(t);break;case"Role":this.filterViewsInstances.allAgencies.filterCollection.add(t);break;case"LocationList":this.filterViewsInstances.locations.filterCollection.add(t);break;default:this.filterViewsInstances.others.filterCollection.add(t)}},serialize:function(t){var e={columnFilters:{},otherFilters:{}};return this.allFilters.each(function(n){if(n.get("id")||n.url)if(-1!=n.get("name").indexOf("Date")||void 0!=n.get("column")&&-1!=n.get("column").indexOf("Date"))a.extend(e.otherFilters,n.serialize(t));else{var i=n.serialize(t);if(t.wholeModel===!0){var r=[];for(var s in i)r.push(s);void 0!==r[0]&&void 0!==i[r[0]]&&(i[r[0]].filterName=n.get("displayName")||n.get("name"))}a.extend(e.columnFilters,i)}}),a.each(e,function(t,n){(!t||a.isEmpty(t))&&delete e[n]}),e},deserialize:function(t,e){if(t){var n=this;n.allFilters.each(function(e){(e.get("id")||e.url)&&e.deserialize(-1!=e.get("name").indexOf("Date")||void 0!=e.get("column")&&-1!=e.get("column").indexOf("Date")?t.otherFilters:t.columnFilters)})}else console.warn("could not deserialize blob:",t);e&&e.silent||this.applyFilters()},showFilters:function(){this.render(),this.filterStash=null,this._loaded.done(a.bind(function(){this.filterStash=this.serialize({})},this))},resetFilters:function(){this.allFilters.each(function(t){t.reset()})},applyFilters:function(){this._loaded.done(a.bind(function(){var t=this.serialize({});this.trigger("apply",t)},this))},cancel:function(){this.filterStash&&this.deserialize(this.filterStash,{silent:!0}),this.trigger("cancel",this.filterStash)}})},{"../../../../module/amp-log":45,"../collections/all-filters-collection":61,"../views/top-level-filter-view":73,"amp-translate":76,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],72:[function(t,e,n){var i=t("underscore"),a=t("../tree/tree-node-view"),r=t("../views/base-filter-view"),s='<% if (!empty) { %>\n	<div class="search-form">\n	  <div class="input-group form-group">\n	    <input type="text" data-i18n="[placeholder]amp.gis:pane-filters-search-placeholder" class="form-control search-text" placeholder="Search...">\n	    <span class="input-group-btn">\n	      <button data-i18n="amp.gis:pane-filters-search" class="btn btn-success">Go</button>\n	    </span>\n	  </div><!-- /input-group -->\n	</div>\n	<div class="toggle-all">\n	  <em>\n	    <a href="#" data-i18n="amp.gis:pane-filters-select" class="select-all" >select all</a> /\n	    <a href="#"  data-i18n="amp.gis:pane-filters-deselect" class="select-none" >deselect all</a>\n	  </em>\n	</div>\n	\n	<div class="tree tree-container" style=""></div><!--display:none;-->\n<% } else { %>\n	<span data-i18n=\'amp.gis:pane-subfilters-empty\'></span>\n<% } %>\n';e.exports=r.extend({className:r.prototype.className+" filter-generic",template:i.template(s),_loaded:null,events:{},initialize:function(t){var e=this;r.prototype.initialize.apply(this,[t]),this.model=t.model,this.translator=t.translator,this.translate=t.translate,this.treeView=new a,this.model.getTree().then(function(t){t?(e._updateCountInMenu(),t.on("change:numSelected",function(){e._updateCountInMenu()})):console.warn("no tree for: ",e.model)})},searchKeyUp:function(t){(13===t.keyCode||""===this.$(".search-text").val()||this.$(".search-text").val().length>1)&&this.model.get("tree").filterText(this.$(".search-text").val().toLowerCase())},_updateCountInMenu:function(){this.$titleEl&&this.model.get("tree")&&(this.model.get("tree").get("numSelected")===this.model.get("tree").get("numPossible")||0===this.model.get("tree").get("numSelected")?(this.$titleEl.find(".filter-count").attr("data-i18n","amp.gis:pane-filters-all"),this.$el.removeClass("active"),this.translate($(this.el).parent().find("ul .active"))):(this.$titleEl.find(".filter-count").text(this.model.get("tree").get("numSelected")+"/"+this.model.get("tree").get("numPossible")),this.$el.addClass("active"),this.$titleEl.find(".filter-count").attr("data-i18n","")))},renderTitle:function(){return r.prototype.renderTitle.apply(this),this._updateCountInMenu(),this},renderFilters:function(){var t=this;return r.prototype.renderFilters.apply(this),this.model.getTree().then(function(e){t.$el.html(t.template(t.model.toJSON())),t.$(".select-none").on("click",function(){return t._selectNone(),!1}),t.$(".select-all").on("click",function(){return t._selectAll(),!1}),t.$("input.search-text").on("keyup",function(e){t.searchKeyUp(e)}),e?(t.$(".tree-container").append(t.treeView.render(t.model.get("tree")).$el),e.set("expanded",!0),e.filterText("")):t.$(".tree-container").append("")}).done(function(){t.translate(t)}).fail(function(){console.error("renderFilters failed :(")}),this},_selectAll:function(){this.model.get("tree").set("selected",!1),this.model.get("tree").set("selected",!0)},_selectNone:function(){this.model.get("tree").set("selected",!0),this.model.get("tree").set("selected",!1)}})},{"../tree/tree-node-view":69,"../views/base-filter-view":70,underscore:"underscore"}],73:[function(t,e,n){var i=t("underscore"),a=t("jquery"),r=t("backbone"),s='<%\n// renders the title of a tab \n%>\n<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',o='<%\n // renders the contents of a filter\'s tab (e.g. for example the "Contracting / Implementing / Executing / Primary Beneficiary / Secondary Beneficiary Agency" list of the "All Agencies" tab)\n // <h6>mde  %- Math.random() </h6>\n%>\n<ul class="sub-filters-titles nav nav-pills nav-stacked">\n</ul>\n<div class="sub-filters-content">\n  <img src="img_2/loading-icon.gif" />\n</div>\n',l=t("../views/generic-filter-view"),c=t("../views/years-filter-view"),u=t("../models/years-filter-model"),d=t("../../../../module/amp-log")("filters:top-level:view");e.exports=r.View.extend({className:"tab-pane",titleTemplate:i.template(s),contentTemplate:i.template(o),filterCollection:null,viewList:[],name:"tbd",initialize:function(t){var e=this;this.name=t.name,this.translator=t.translator,this.translate=t.translate,this.filterCollection=new r.Collection,this.filterCollection.on("change:numSelected",function(){e._refreshTitle()})},renderFilters:function(t){var e=this,n=null,i=!0;return this.$el.attr("id","filter-pane-"+this.name.replace(/ /g,"")),this.$el.html(this.contentTemplate()),this.filterCollection.each(function(a){d.onDebug(function(){}),a instanceof u?(n=new c({model:a,el:e.$(".sub-filters-content"),translator:e.translator,translate:e.translate}),e.viewList.push(n)):(n=new l({model:a,el:e.$(".sub-filters-content"),translator:e.translator,translate:e.translate}),e.viewList.push(n));var r=n.renderTitle().$titleEl;e.$(".sub-filters-titles").append(r),i&&t&&(i=!1,n.renderFilters(),e.$(".sub-filters-titles li:first").addClass("active"))}),e.translate(this),this},_refreshTitle:function(){var t=0,e="";this.filterCollection.each(function(e){e.getNumSelected&&(t+=e.getNumSelected())}),0!==t&&(e=t),a("#"+this.name.replace(/ /g,"")+" .title-count").text(e)},renderTitle:function(){return this.titleEl=this.titleTemplate({name:this.name}),this}})},{"../../../../module/amp-log":45,"../models/years-filter-model":67,"../views/generic-filter-view":72,"../views/years-filter-view":74,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],74:[function(t,e,n){var i=t("underscore"),a=t("../views/base-filter-view");t("../lib/jquery.nouislider.min.js"),t("jquery-ui/datepicker");var r='\n  <h3 class="title text-center"><span class="start-year">dummy</span> <strong>-</strong> <span class="end-year">dummy</span></h3>\n   <div class="year-slider"></div>\n\n   <span data-i18n="amp.gis:pane-subfilters-startdate">Start Date:</span>&nbsp<p><input type="text" id="start-date" class="date-picker"></p>\n   <span data-i18n="amp.gis:pane-subfilters-enddate">End Date:</span>&nbsp<p><input type="text" id="end-date" class="date-picker"></p>\n';e.exports=a.extend({className:a.prototype.className+" filter-years",template:i.template(r),_loaded:null,initialize:function(t){a.prototype.initialize.apply(this,[t]),this.model=t.model,this.translator=t.translator,this.translate=t.translate,this._loaded=this.model.fetch().then(function(){}),this.listenTo(this.model,"change",this._updateTitle)},renderFilters:function(){var t=this;return a.prototype.renderFilters.apply(this),this.$el.html(this.template(this.model.toJSON())),this._loaded.then(function(){t._renderDatePickers(),t._updateTitle(),t.translate(t)}),this},_renderDatePickers:function(){var t=this;this.$("#start-date").datepicker({defaultDate:this.model.get("selectedStart"),dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#end-date").datepicker("option","minDate",e),t.model.set("selectedStart",e)}}),this.$("#end-date").datepicker({defaultDate:this.model.get("selectedEnd"),dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#start-date").datepicker("option","maxDate",e),t.model.set("selectedEnd",e)}}),this.$("#start-date").val(this.model.get("selectedStart")),this.$("#end-date").val(this.model.get("selectedEnd"))},renderTitle:function(){return a.prototype.renderTitle.apply(this),this._updateTitle(),this},_updateTitle:function(){this.$titleEl.find(".filter-count").text(this.model.get("selectedStart")+" - "+this.model.get("selectedEnd")),this.$(".start-year").text(this.model.get("selectedStart")),this.$(".end-year").text(this.model.get("selectedEnd"))},_renderSlider:function(){var t=this;this.slider=window.jQuery(this.$(".year-slider")).noUiSlider({start:[t.model.get("selectedStart"),t.model.get("selectedEnd")],step:1,connect:!0,range:{min:t.model.get("startYear"),max:t.model.get("endYear")},serialization:{lower:[window.jQuery.Link({target:window.jQuery(".start-year")})],upper:[window.jQuery.Link({target:window.jQuery(".end-year")})],format:{decimals:0}}}),this.slider.on("change",function(){t.model.set("selectedStart",parseInt(t.$(".start-year").text(),10))}),this.slider.on("change",function(){t.model.set("selectedEnd",parseInt(t.$(".end-year").text(),10))})}})},{"../lib/jquery.nouislider.min.js":62,"../views/base-filter-view":70,"jquery-ui/datepicker":57,underscore:"underscore"}],75:[function(t,e,n){function i(t,e){return this instanceof i?(this.message=t,this.original=e,this.toString=function(){return this.message},this):new SateLoadError(t,e)}function a(){"use strict";if(!(this instanceof a))throw new Error("State needs to be created with the `new` keyword.");this.initialize.apply(this,arguments)}var r=t("underscore"),s=t("backbone");r.extend(a.prototype,s.Events,{initialize:function(t){this.saved=t.saved,this._stateRegistry={},this._unclaimed={},t.url&&this.listenToURL(r(t).pick("url","prefix","autoinit"))},listenToURL:function(t){this._url=t.url,this._urlPrefixes=t.prefix||["saved/"],this._urlPrefixes.constructor!==Array&&(this._urlPrefixes=[this._urlPrefixes]),this.listenTo(this._url,"change",this.urlMaybeLoad),t.autoinit&&this._url.hash()&&this.urlMaybeLoad(this._url.hash())},urlMaybeLoad:function(t){var e=this,n=!1;t=t||this._url.hash(),r.each(this._urlPrefixes,function(i){if(0===t.indexOf(i)){var a=t.split(i)[1];a&&(n=!0,e[e.saved?"loadById":"load"](a,i))}}),n||""!==t||e.reset()},toHash:function(t){return r(this).has("_url")?this._urlPrefixes[0]+t:void console.error("Cannot generate URL hash without being initialized with URL instance")},loadById:function(t,e){this.loadPromise=this.saved.load(t,e),this.loadPromise.done(r(function(t){this.load(t.get("stateBlob"))}).bind(this)).fail(function(){throw new i("Could not load state by id: "+t)})},load:function(t){var e=this.parse(t),n=!1;r.each(e,function(t,e){var i=this._stateRegistry[e];r.isUndefined(i)?this._unclaimed[e]=t:r.isEqual(i.get(),t)||(i.set(t),n=!0)},this),this.trigger("load"),n&&this.trigger("change")},parse:function(t){var e;try{e=JSON.parse(t)}catch(n){throw n instanceof SyntaxError?new i("Could not parse state",n):n}return e},reset:function(){var t=!1;r.each(this._stateRegistry,function(e){var n=e.get();r.isEqual(n,e.empty)||(e.set(e.empty),t=!0)},this),this.trigger("reset"),t&&this.trigger("change")},freeze:function(t){t=t||{};var e={};r.each(this._stateRegistry,function(t,n){var i=t.get();e[n]=r.clone(i)});var n=JSON.stringify(e);return t.toURL&&(this._url||console.error("State cannot change URL if it does have a ref to it"),this._url.hash(this._urlPrefixes[0]+encodeURIComponent(n))),this.trigger("freeze",n),n},register:function(t,e,n){if(e in this._stateRegistry)throw new Error("Attempted registration of duplicate state id "+e);this._stateRegistry[e]={get:r.bind(n.get,t),set:r.bind(n.set,t),empty:n.empty},e in this._unclaimed?(this._stateRegistry[e].set(this._unclaimed[e]),delete this._unclaimed[e]):this._stateRegistry[e].set(n.empty),this.trigger("register")}}),a.StateLoadError=i,e.exports=a},{backbone:"backbone",underscore:"underscore"}],76:[function(t,e,n){function i(t){"use strict";if(!(this instanceof i))throw new Error("Translator needs to be created with the `new` keyword.");var e={defaultKeys:{},availableLanguages:null,translations:{locales:{en:null}},ajax:r.ajax};t&&a.defaults(this,t,e),this._promise=null,this._currentLng="tmp",this._firstGet=null,this.initTranslations=function(){var t=this;this._promise=this.getTranslations(t.defaultKeys).fail(function(t,e,n){console.error("failed ",t,e,n)}),this.promise=this._promise.promise()},this.addTranslatorOptions=function(t){a.defaults(this.defaultKeys,t.defaultKeys),this._firstGet=null},this.getAvailableLanguages=function(){var t=r.Deferred();return this.availableLanguages?t.resolve(this.availableLanguages):this._initAvailableLanguages().then(function(){t.resolve(this.availableLanguages)}),t},this._initAvailableLanguages=function(){return this.availableLanguages=new s.Collection([]),this.availableLanguages.url="/rest/translations/languages",this.availableLanguages.fetch()},this.setLanguage=function(t){return this._currentLng=t,this._apiCall("/rest/translations/languages/"+t,null,"GET")},this.translateDOM=function(t){var e=r(t);return this.getTranslations().then(function(t){return r.each(t,function(t,n){t.indexOf("[placeholder]")>-1?r('[data-i18n="'+t+'"]',e).attr("placeholder",n):t.indexOf("[title]")>-1?r('[data-i18n="'+t+'"]',e).attr("title",n):r('[data-i18n="'+t+'"]',e).text(n)}),e})},this.translateList=function(t){var e=function(t,e){return a.each(t,function(t,n,i){i[n]=e[n]?e[n]:n[t]}),t};return this.getTranslations().then(function(n){var i=e(t,n);return i})},this.translateSync=function(t,e){"resolved"!==this.getTranslations().state()&&console.error("translateSync was called when getTranslations is not successfully resolved");var n=this.translations.locales[this._currentLng][t];return void 0===n&&(console.warn("No translation has been loaded for",t),n=e||t),n},this.getTranslations=function(){return this._firstGet||(this._firstGet=this._getTranslationsFromAPI(this.defaultKeys,this._currentLng)),this._firstGet},this._getTranslationsFromAPI=function(t,e){var n=this,i="/rest/translations/label-translations";return this._apiCall(i,t,"POST").then(function(t){return e?n.translations.locales[e]=t:(e=this._currentLng,n.translations.locales[e]=t),t})},this._apiCall=function(t,e,n){var i={headers:{Accept:"application/json","Content-Type":"application/json"},type:n,url:t,dataType:"json"};return e&&(i.data=JSON.stringify(e)),this.ajax(i)},this.initTranslations()}var a=t("underscore"),r=t("jquery"),s=t("backbone");e.exports=i},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],77:[function(t,e,n){function i(){"use strict";if(!(this instanceof i))throw new Error("URL needs to be created with the `new` keyword.");if(window._ampUrler)throw new Error("Another instance of URL is already managing window.location");window._ampUrler=!0,this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone");a.extend(i.prototype,r.Events,{initialize:function(t){t=t||{},this.root=t.root||window.location.host+window.location.pathname,a.bindAll(this,"change"),window.addEventListener("hashchange",this.change)},hash:function(t,e){return arguments.length?(e.silent&&window.removeEventListener("hashchange",this.change),window.location.hash=t,e.silent&&window.addEventListener("hashchange",this.change),void 0):window.location.hash.slice(1)},full:function(){return""+window.location},change:function(){this.trigger("change",this.hash())}}),e.exports=i},{backbone:"backbone",underscore:"underscore"}]},{},[1]);