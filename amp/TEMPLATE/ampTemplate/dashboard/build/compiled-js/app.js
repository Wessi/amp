!function t(e,n,i){function a(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return a(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(t){t("./ugly/lib-load-hacks");var e=t("./app/app-class"),n=new e({el:"#amp-dashboard"});window.app=n,n.render()},{"./app/app-class":2,"./ugly/lib-load-hacks":36}],2:[function(t,e){function n(){if(!(this instanceof n))throw new Error("App needs to be instantiated with the `new` keyword.");this.initialize.apply(this,arguments)}var i=t("underscore"),a=t("jquery").Deferred,r=t("./backbone-dash"),s=t("./check-support"),o=t("amp-url/index"),l=t("amp-state/index"),u=t("amp-translate"),c=t("amp-filter/src/main"),d=t("./models/settings-collection"),h=t("./models/saved-dashes-collection.js"),p=t("./views/main"),f=t("./views/fail");i.extend(n.prototype,r.Events,{initialize:function(t){var e,n=new a;this.initialized=n.promise();try{if(this.browserIssues=s(),i(this.browserIssues).chain().groupBy("severity").each(function(t,n){if(e=i(t).pluck("feature").join(", "),"critical"===n)throw{name:"Incompatible Web Browser",message:"Dashboards cannot work without these features, which are not supported by your web browser: "+e+'. Any <a href="http://browsehappy.com/">modern browser</a> will work.',toString:function(){return this.name+": "+this.message}};"major"===n?this.report("Limited support for old web browsers",["Your browser does not provide some features used by Dashboards: "+e+".",'Some features may not work correctly, however any <a href="http://browsehappy.com/">modern browser</a> will provide a better experience.']):"minor"===n&&console.warn("This browser is missing support for",e)},this),this.hasIssue("download")&&!this.hasIssue("flash")){var g=document.createElement("script"),m=document.createElement("script");g.src="/TEMPLATE/ampTemplate/commonJs/swfobject-2.2.js",m.src="/TEMPLATE/ampTemplate/commonJs/downloadify-0.2.js",document.body.appendChild(g),document.body.appendChild(m)}this.url=new o,this.settings=new d([],{app:this}),this.savedDashes=new h([],{app:this}),this.state=new l({url:this.url,saved:this.savedDashes});var v=JSON.parse('{\n"amp.common:footer": "Developed in partnership with OECD, UNDP, WB, Government of Ethiopia and DGF",\n\n"amp.common:title": "AMP",\n"amp.common:title-desktop": "Desktop",\n"amp.common:subtitle-my-desktop": "My Desktop",\n"amp.common:subtitle-add-tab": "Add Tab",\n"amp.common:subtitle-tab-manager": "Tab Manager",\n"amp.common:title-reports": "Reports",\n"amp.common:subtitle-all-reports": "All Reports",\n"amp.common:subtitle-fav-reports": "Favourite Reports",\n"amp.common:subtitle-report-generator": "Report Generator",\n"amp.common:subtitle-saiku": "Saiku",\n"amp.common:title-documents": "Documents",\n"amp.common:title-dashboards": "Dashboards",\n"amp.common:subtitle-gis": "New GIS (BETA)",\n"amp.common:subtitle-dashboards": "New Dashboard (BETA)",\n"amp.common:subtitle-dashboard-generator": "Dashboard Generator",\n"amp.common:subtitle-donor-profile": "Donor Profile",\n"amp.common:subtitle-region-profile": "Region Profile",\n"amp.common:subtitle-sector-profile": "Sector Profile",\n"amp.common:subtitle-executing-profile": "Executing Agency Profile",\n"amp.common:subtitle-beneficiary-profile": "Beneficiary Ministry Profile",\n"amp.common:title-tools": "Tools",\n"amp.common:subtitle-workspace-setup": "Workspace Setup",\n"amp.common:subtitle-advanced-mode": "Advanced Mode",\n"amp.common:subtitle-search": "Search",\n"amp.common:subtitle-addressbook": "Address Book",\n"amp.common:title-help": "Help",\n"amp.common:subtitle-amp-help": "AMP Help",\n"amp.common:subtitle-glossary": "Glossary",\n"amp.common:subtitle-email-support-team": "Email Support Team",\n"amp.common:title-logout": "Logout",\n"amp.common:filters-loading": "Loading...",\n"amp.dashboard:page-title":"AMP Dashboards",\n"amp.dashboard:loading": "Loading...",\n"amp.dashboard:title-projectdata": "Project Data",\n"amp.dashboard:sub-title-projectdata": "View where projects are being implemented throughout the country.",\n"amp.dashboard:title-Country": "Country",\n"amp.dashboard:title-Region": "Region",\n"amp.dashboard:title-Zone": "Zone",\n"amp.dashboard:title-District": "District",\n"amp.dashboard:chart-reset": "reset others",\n"amp.dashboard:chart-radioui-commitments": "Commitments",\n"amp.dashboard:chart-radioui-disbursements": "Disbursements",\n"amp.dashboard:filters-none-applied": "No filters applied",\n"amp.dashboard:close": "Close",\n"amp.dashboard:modal-sorry": "Sorry for any inconvenience",\n"amp.dashboard:share-dashboard-top": "Share dashboard",\n"amp.dashboard:share-dashboard": "Share this dashboard view",\n"amp.dashboard:share-link": "Link",\n"amp.dashboard:of": "of",\n"amp.dashboard:tooltip-predict-otherseries": "TRANSLATEME",\n"amp.dashboard:total": "total",\n"amp.common:title": "AMP Toolbar",\n"amp.common:title-filters": "Filters",\n"amp.dashboard:chart-TopDonorAgencies": "Top Donor Agencies",\n"amp.dashboard:chart-TopRegions": "Top Regions",\n"amp.dashboard:chart-TopSectors": "Top Sectors",\n"amp.dashboard:chart-AidPredictability": "Aid Predictability",\n"amp.dashboard:chart-FundingType": "Funding Type",\n"amp.dashboard:predictability-planned": "Planned",\n"amp.dashboard:predictability-actual": "Actual",\n"amp.dashboard:chart-FundingType-Grant": "Grant",\n"amp.dashboard:chart-FundingType-Loan": "Loan",\n"amp.dashboard:chart-FundingType-others": "Others",\n"amp.dashboard:chart-TopRegions-DistrictUndefined": "District: U",\n"amp.dashboard:chart-TopRegions-others": "Others",\n"amp.dashboard:chart-TopSectors-others": "Others",\n"amp.dashboard:chart-TopDonorAgencies-others": "Others",\n"amp.dashboard:filters-edit":"edit filters",\n"amp.dashboard:dashboard-settings":"Settings",\n"amp.dashboard:settings-edit":"edit settings",\n"amp.dashboard:download-preview":"Preview:",\n"amp.dashboard:download-rendering":"Rendering...",\n"amp.dashboard:download-download-chart":"Download chart",\n"amp.dashboard:download-download-data":"Download data",\n"amp.dashboard:chart-no-data-available":"No Data Available",\n"amp.dashboard:chart-loading-saved-settings":"Loading saved settings...",\n"amp.dashboard:filters-show-settings":"Show filter settings",\n"amp.dashboard:filters-chart-legends-Grouped":"Grouped",\n"amp.dashboard:filters-chart-legends-Stacked":"Stacked",\n"amp.dashboard:of-total": "of total"\n}\n\n');this.translator=new u({defaultKeys:v,ajax:r.wrappedAjax}),this.filter=new c({draggable:!0,sync:t.sync||r.sync,caller:"DASHBOARD"}),this.view=new p({app:this,el:t.el}),n.resolve(this)}catch(y){i.defer(function(){throw y}),this.view=new f({app:this,el:t.el,err:y}),this.err=y,n.reject(this)}},render:function(){this.tryAfter(this.translator.promise,this.view.render,this.view),this.translator.translateDOM(document)},hasIssue:function(t){return!!i(this.browserIssues).findWhere({feature:t})},viewFail:function(t,e){t.$el.html(new f({app:this,err:e}).render().el)},tryTo:function(t,e){try{return t.call(e)}catch(n){i.defer(function(){throw n}),this.viewFail(e,n)}},tryAfter:function(t,e,n){t.done(i(function(){this.tryTo(e,n)}).bind(this)).fail(i(function(){this.viewFail(n,"failed to load")}).bind(this))},report:function(t,e){this.initialized.done(function(n){n.modal(t,{messages:e,tone:"warning"})}).fail(function(){console.warn("REPORT:",t,e)})},modal:function(t,e){e=i({}).extend(e,{tone:"primary"});var n=new a;return this.initialized.done(function(i){var a=i.view.modal(t,e);n.resolve(a)}).fail(function(){console.warn("failed to show modal because the app views did not initialize",t),n.reject("app views did not init")}),n.promise()}}),e.exports=n},{"./backbone-dash":3,"./check-support":11,"./models/saved-dashes-collection.js":18,"./models/settings-collection":20,"./views/fail":28,"./views/main":32,"amp-filter/src/main":52,"amp-state/index":64,"amp-translate":65,"amp-url/index":66,jquery:"jquery",underscore:"underscore"}],3:[function(t,e){function n(t){this.instance=t,this.toString=function(){return"Module initialization error"}}function i(t){return t.extend({constructor:function(){var e=t.apply(this,arguments);if(!this.app)throw new n(this);return e},sync:u})}var a=t("underscore"),r=t("backbone"),s=window&&"localhost:3000"===window.location.host,o=["/rest/dashboard"],l=function(t){return t=a({}).extend(t,{url:(s?"http://localhost:8080":"")+t.url,headers:{Accept:"application/json","Content-Type":"application/json"}})},u=function(t){function e(e,n,i,r){return r=a({}).extend(r,{url:e}),r=l(r),t.call(this,n,i,r)}function n(t,n,a,r){var s=t+"+POST:"+r.data;if(i[s])return i[s]();var o=e(t,n,a,r);return i[s]=function(){return o.done(r.success).always(r.complete)},o.fail(function(){delete i[s]}),o}var i={};return function(t,i,s){var l=s.url||a(i).result("url")||r.Model.prototype.url.call(i),u=!1;return"POST"===s.type&&a.some(o,function(t){return 0===l.indexOf(t)})&&(u=!0),(u?n:e)(l,t,i,s)}}(r.sync);e.exports=a({}).extend(r,{InitError:n,Model:i(r.Model),Collection:i(r.Collection),View:i(r.View),sync:u,wrappedAjax:function(t){return r.ajax(l(t))}})},{backbone:"backbone",underscore:"underscore"}],4:[function(t,e){function n(t){return t}function i(t){return t[0].values.length-1}function a(t){var e=s.models.discreteBarChart().valueFormat(t.shortFormatter).showValues(!0).showYAxis(!1).showXAxis(!1).margin({top:5,right:10,bottom:10,left:10});return e}function r(t,e,n,i,a){var r,u=s.models.legend().width(a||t.clientWidth).margin({left:20,right:20}).rightAlign(!1).color(l.categoryColours(n[0].values.length)).key(function(t){return i?l.formatShortText(12)(t.x):t.x});o.select(t).datum(n).append("g").attr("class","legend").datum(n[0].values).call(u),r=t.querySelector(".legend").getBBox().height,e.margin({top:r+15})}var s=window.nv,o=t("d3-browserify"),l=t("../../ugly/util");e.exports={dispatchName:"discretebar",countCategories:i,addLegend:r,dataToNv:n,chart:a}},{"../../ugly/util":40,"d3-browserify":"d3-browserify"}],5:[function(t,e){function n(t){return t}function i(t){return t.length}function a(t,e){e[0]&&(e[0].values.length<5||t.staggerLabels(!0).margin({bottom:40}))}function r(t){var e=10,n=s.models.customizedMultiBarChart().forceY([0,e]).reduceXTicks(!1).margin({top:5,right:10,bottom:20,left:50});return t.nvControls||n.showControls(!1),n.yAxis.tickFormat(t.shortFormatter).showMaxMin(!1),n}{var s=window.nv;t("./customized/multiBarChart.js")}e.exports={dispatchName:"multibar",countCategories:i,dataToNv:n,staggerX:a,chart:r}},{"./customized/multiBarChart.js":10}],6:[function(t,e){function n(t){return 1!==t.length&&u.fail("Pie charts can only show one series of data. got",t.length),l.isArray(t[0].values)||u.fail('Data series did not have a "values" array. Instead',t[0].values),t[0].values}function i(t){return t[0].values.length}function a(t){var e=o.models.pieChart().valueFormat(t.shortFormatter).labelType("percent").donut(!0).donutRatio(.35);return e}function r(t){t.showLegend(!1)}function s(t,e,n){return[void 0,t,e,n]}var o=window.nv,l=t("underscore"),u=t("./common");e.exports={dispatchName:"pie",normalizeNvTTArgs:s,countCategories:i,removeLegend:r,dataToNv:n,chart:a}},{"./common":9,underscore:"underscore"}],7:[function(t,e){function n(t,e){var n=t.target,i=parseInt(s.data(n,"seriesIndex"),10)||0,a=parseInt(s.data(n,"xIndex"),10);return{label:a&&e[i].values[a].x,seriesIndex:i,pointIndex:a,point:a&&e[i].values[a]}}function i(t,e,i){t.addEventListener("click",function(t){var a=n(t,e),r=o.getNiceContext(a,e,t.target.innerText);i.clickHandler(r)})}function a(t,e){var n=r(t).pluck("key"),a=r(t).chain().map(function(t){return t.values}).transpose().value(),s=l({keys:n,values:a,moneyFormat:e.shortFormatter}),o=document.createElement("div");return o.innerHTML=s,i(o,t,e),o}var r=t("underscore"),s=t("../../ugly/util"),o=t("./common"),l=r.template('<div class="table-responsive">\n  <table class="table table-striped table-condensed">\n\n    <% if (_(keys).some()) { %>\n      <thead>\n        <tr>\n          <td></td>\n          <% _(keys).each(function(key, colIndex) { %>\n            <th data-series-index="<%= colIndex %>">\n              <%= key %>\n            </th>\n          <% }); %>\n        </tr>\n      </thead>\n    <% } %>\n\n    <tbody>\n      <% _(values).each(function(row, rowIndex) { %>\n        <tr>\n          <th data-x-index="<%= rowIndex %>">\n            <%= row[0].x %>\n          </th>\n          <% _(row).each(function(datum, colIndex) { %>\n            <td data-x-index="<%= rowIndex %>" data-series-index="<%= colIndex %>">\n              <%= moneyFormat(datum.y) %>\n            </td>\n          <% }) %>\n        </tr>\n      <% }) %>\n    </tbody>\n\n  </table>\n</div>\n');e.exports={charter:a}},{"../../ugly/util":40,"./common":9,underscore:"underscore"}],8:[function(t,e){function n(t,e,n){n=n||{},n=i(i(n).clone()).defaults({height:void 0,width:void 0,numberFormatter:a.format(","),shortFormatter:n.numberFormatter||r.formatKMB(3),addLegend:!0,trimLabels:!0,getTTContent:s.defaultGetTTContent,ttTemplate:d,clickHandler:s.defaultClickHandler,nvControls:!0});var o=h[t]||s.fail("unrecognized chart type",t);return{el:o(e,n)}}var i=t("underscore"),a=t("d3-browserify"),r=t("../../ugly/util"),s=t("./common"),o=t("./_bar"),l=t("./_multibar"),u=t("./_pie"),c=t("./_table"),d=i.template('<div class="panel panel-primary panel-popover">\n  <% if (tt.heading) { %>\n    <div class="panel-heading"><%= tt.heading %></div>\n  <% } %>\n  <div class="panel-body">\n    <span class="dollaz">\n      <% if (tt.bodyText) { %>\n        <%= tt.bodyText %>\n      <% } %>\n      <% if (tt.bodyList) { %>\n        <ul class="list-unstyled">\n          <% _(tt.bodyList).each(function(item) { %>\n            <li><b><%= item.k %></b> <%= item.v %></li>\n          <% }) %>\n        </ul>\n      <% } %>\n    </span>\n  </div>\n  <% if (tt.footerText) { %>\n    <div class="panel-footer">\n      <%= tt.footerText %>\n    </div>\n  <% } %>\n</div>\n'),h={bar:s.nvCharter(o),pie:s.nvCharter(u),multibar:s.nvCharter(l),table:c.charter};e.exports=n},{"../../ugly/util":40,"./_bar":4,"./_multibar":5,"./_pie":6,"./_table":7,"./common":9,"d3-browserify":"d3-browserify",underscore:"underscore"}],9:[function(t,e){function n(){throw{name:"Chart Error",message:Array.prototype.join.call(arguments,", "),toString:function(){return this.name+": "+this.message}}}function i(t,e){return t.x(function(t){return m.formatShortText(19)(t.x)}).color(m.categoryColours(e))}function a(t,e){var n=document.getElementById("super-secret-render-area-shh");return n||(n=document.createElement("div"),n.id="super-secret-render-area-shh",n.style.position="absolute",n.style.left="-9999em",n.style.top="-9999em",document.body.appendChild(n)),t&&(n.style.height=t+"px"),e&&(n.style.width=e+"px"),n}function r(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","dash-chart"),a(t,e).appendChild(n),n}function s(t,e,n,i,a,r,s){return a&&e.x(function(t){return m.formatShortText(19)(t.x)}),r&&i.addLegend?i.addLegend(n,e,t,a,s):!r&&i.removeLegend&&i.removeLegend(e),i.staggerX&&i.staggerX(e,t),g.select(n).datum(t).call(e),f.utils.windowResize(e.update),window.setTimeout(e.update,0),f.addGraph(function(){return e}),n}function o(t,e,n){var i=n.countCategories(e);return t.color(m.categoryColours(i)),t}function l(t){return{tt:{heading:t.x.raw,bodyText:t.y.raw}}}function u(t,e,n){var i=t.seriesIndex||0;return{data:e,series:{key:e[i].key,index:i,values:e[i].values},x:{raw:t.point.x,fmt:t.label,index:t.pointIndex||t.index||0},y:{raw:t.point.y,fmt:n||t.point.y}}}function c(t,e,n,i,a){var r=function(t,n,r,s){return i(a(u(s,e,r)))};n.normalizeNvTTArgs&&(r=m.transformArgs(n.normalizeNvTTArgs,r)),t.tooltipContent(r)}function d(){}function h(t,e,n,i){t[n.dispatchName].dispatch.on("elementClick",function(t){i(u(t,e))})}function p(t){return function(e,n){var i=r(n.height,n.width),a=t.chart(n),l=t.dataToNv(e);return o(a,e,t),c(a,e,t,n.ttTemplate,n.getTTContent),s(l,a,i,t,n.trimLabels,n.addLegend,n.width),h(a,e,t,n.clickHandler),i}}var f=window.nv,g=t("d3-browserify"),m=t("../../ugly/util");!function(t){var e=t.utils.calcApproxTextWidth;t.utils.calcApproxTextWidth=function(t){var n,i=t.text(),a=i,r=(i.match(/\./g)||[]).length;if(i.toUpperCase()===i){for(var s=0;s<i.length/5;s++)a+=" ";t.text(a),n=e(t),t.text(i)}else n=e(t);return n-=n/a.length*(r/3),n+=6}}(f),e.exports={fail:n,nvChartCommon:i,getNiceContext:u,defaultGetTTContent:l,defaultClickHandler:d,mkChartSVG:r,nvBoiler:s,nvCharter:p}},{"../../ugly/util":40,"d3-browserify":"d3-browserify"}],10:[function(){nv.models.customizedMultiBarChart=function(){"use strict";function t(w){return w.each(function(w){var M=d3.select(this),E=this,P=(u||parseInt(M.style("width"))||960)-l.left-l.right,I=(c||parseInt(M.style("height"))||400)-l.top-l.bottom;if(t.update=function(){M.transition().duration(T).call(t)},t.container=this,k.disabled=w.map(function(t){return!!t.disabled}),!C){var N;C={};for(N in k)C[N]=k[N]instanceof Array?k[N].slice(0):k[N]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var F=M.selectAll(".nv-noData").data([D]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",l.left+P/2).attr("y",l.top+I/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),e=i.xScale(),n=i.yScale();var B=M.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([w]),L=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),O=B.select("g");L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),p&&(s.width(P-S()),i.barColor()&&w.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),O.select(".nv-legendWrap").datum(w).call(s),l.top!=s.height()&&(l.top=s.height(),I=(c||parseInt(M.style("height"))||400)-l.top-l.bottom),O.select(".nv-legendWrap").attr("transform","translate("+S()+","+-l.top+")"));var R=app.translator.translateSync("amp.dashboard:filters-chart-legends-Grouped","Grouped"),z=app.translator.translateSync("amp.dashboard:filters-chart-legends-Stacked","Stacked");if(h){var $=[{key:R,disabled:i.stacked()},{key:z,disabled:!i.stacked()}];o.width(S()).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum($).attr("transform","translate(0,"+-l.top+")").call(o)}B.attr("transform","translate("+l.left+","+l.top+")"),m&&O.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),i.disabled(w.map(function(t){return t.disabled})).width(P).height(I).color(w.map(function(t,e){return t.color||d(t,e)}).filter(function(t,e){return!w[e].disabled}));var V=O.select(".nv-barsWrap").datum(w.filter(function(t){return!t.disabled}));if(V.transition().call(i),f){a.scale(e).ticks(P/100).tickSize(-I,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(a);var W=O.select(".nv-x.nv-axis > g").selectAll("g");if(W.selectAll("line, text").style("opacity",1),y){var j=function(t,e){return"translate("+t+","+e+")"},Y=5,H=17;W.selectAll("text").attr("transform",function(t,e,n){return j(0,n%2==0?Y:H)});var U=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;O.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return j(0,0===e||U%2!==0?H:Y)})}v&&W.filter(function(t,e){return e%Math.ceil(w[0].values.length/(P/100))!==0}).selectAll("text, line").style("opacity",0),b&&W.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),O.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}g&&(r.scale(n).ticks(I/36).tickSize(-P,0),O.select(".nv-y.nv-axis").transition().call(r)),s.dispatch.on("stateChange",function(e){k=e,_.stateChange(k),t.update()}),o.dispatch.on("legendClick",function(e){if(e.disabled){switch($=$.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case R:i.stacked(!1);break;case z:i.stacked(!0)}k.stacked=i.stacked(),_.stateChange(k),t.update()}}),_.on("tooltipShow",function(t){x&&A(t,E.parentNode)}),_.on("changeState",function(e){"undefined"!=typeof e.disabled&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),"undefined"!=typeof e.stacked&&(i.stacked(e.stacked),k.stacked=e.stacked),t.update()})}),t}var e,n,i=nv.models.multiBar(),a=nv.models.axis(),r=nv.models.axis(),s=nv.models.legend(),o=nv.models.legend(),l={top:30,right:20,bottom:50,left:60},u=null,c=null,d=nv.utils.defaultColor(),h=!0,p=!0,f=!0,g=!0,m=!1,v=!0,y=!1,b=0,x=!0,w=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k={stacked:!1},C=null,D="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=function(){return h?300:0},T=250;i.stacked(!1),a.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),r.orient(m?"right":"left").tickFormat(d3.format(",.1f")),o.updateState(!1);var A=function(e,n){var s=e.pos[0]+(n.offsetLeft||0),o=e.pos[1]+(n.offsetTop||0),l=a.tickFormat()(i.x()(e.point,e.pointIndex)),u=r.tickFormat()(i.y()(e.point,e.pointIndex)),c=w(e.series.key,l,u,e,t);nv.tooltip.show([s,o],c,e.value<0?"n":"s",null,n)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],_.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){x&&nv.tooltip.cleanup()}),t.dispatch=_,t.multibar=i,t.legend=s,t.controls=o,t.xAxis=a,t.yAxis=r,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=nv.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.color=function(e){return arguments.length?(d=nv.utils.getColor(e),s.color(d),t):d},t.showControls=function(e){return arguments.length?(h=e,t):h},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,r.orient(e?"right":"left"),t):m},t.reduceXTicks=function(e){return arguments.length?(v=e,t):v},t.rotateLabels=function(e){return arguments.length?(b=e,t):b},t.staggerLabels=function(e){return arguments.length?(y=e,t):y},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(k=e,t):k},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(D=e,t):D},t.transitionDuration=function(e){return arguments.length?(T=e,t):T},t}},{}],11:[function(t,e){function n(){return!!document.querySelector}function i(){try{return document.createElementNS("http://w3.org/2000/svg","svg"),!0}catch(t){return!1}}function a(){return!!document.createElement("canvas").getContext}function r(){if(!a())return!1;var t=document.createElement("canvas").getContext("2d").fillText;return"function"==typeof t}function s(){return!l()}function o(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin}}var l=function(){var t=!!function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],"MSIE "+(t[1]||"")):"Chrome"===n[1]&&(t=e.match(/\bOPR\/(\d+)/))?"Opera "+t[1]:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=!!e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}().match(/^MSIE/);return function(){return t}}();e.exports=function(){var t=[];return n()||t.push({feature:"querySelector",severity:"critical"}),i()||t.push({feature:"SVG",severity:"critical"}),r()||t.push({feature:"canvas",severity:"major"}),s()||t.push({feature:"download",severity:o()?"minor":"major"}),o()||t.push({feature:"flash",severity:l()?"major":"minor"}),t}},{}],12:[function(t,e){var n=t("underscore"),i=t("./chart-model-base");e.exports=i.extend({defaults:{title:""},_prepareTranslations:function(){var t=this,e={};e["amp.dashboard:predictability-planned"]="Planned",e["amp.dashboard:predictability-actual"]="Actual",this.localizedPredictability=this.app.translator.translateList(e).then(function(e){t.localizedPredictabilityList=e})},parse:function(t){function e(t){return function(e){return{x:e.year,y:e[t]}}}return this.set("title",t.title),t.processed=[{key:this.localizedPredictabilityList["amp.dashboard:predictability-planned"],values:n(t.years).map(e("planned"))},{key:this.localizedPredictabilityList["amp.dashboard:predictability-actual"],values:n(t.years).map(e("actual"))}],t}})},{"./chart-model-base":14,underscore:"underscore"}],13:[function(t,e){var n=t("underscore"),i=t("./chart-model-base");e.exports=i.extend({defaults:{typed:!0,limit:3,title:""},_prepareTranslations:function(){var t=this,e={},n=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join("");"Funding Type"===this.get("name")&&(e[n+"Grant"]="Grant",e[n+"Loan"]="Loan",e[n+"others"]="Others"),this.localizedFType=this.app.translator.translateList(e).then(function(e){t.localizedLookup=e})},parse:function(t){this.set("title",t.title);var e,i=this;e=t.values.length>0&&!isNaN(parseInt(t.values[0].Year,10))?n.sortBy(t.values,function(t){return parseInt(t.Year,10)}):n(t.values).sortBy("Year");var a=["amp.dashboard:chart-",this.get("name").replace(/ /g,""),"-"].join(""),r=i.localizedLookup[a+"others"];if(t.processed=n(e).chain().reduce(function(t,e){return t.push.apply(t,n(e.values).pluck("type")),t},[]).uniq().map(function(t){var r=t.replace(/[ :.]/g,""),s=t;return i.localizedLookup[a+r]&&(s=i.localizedLookup[a+r]),{key:s,values:n(e).map(function(e){var i=n(e.values).findWhere({type:t});return{x:e.Year,y:i&&i.amount||0}})}}).value(),this.get("limit")<t.processed.length){var s=n(t.processed).chain().map(function(t){return{key:t.key,total:n(t.values).reduce(function(t,e){return t+e.y},0)}}).sortBy("total").reverse().rest(this.get("limit")-2).pluck("key").value(),o={key:r,color:"#777",special:"others",values:n(t.processed).chain().filter(function(t){return n(s).contains(t.key)}).map(function(t){return t.values}).transpose().map(function(t){return{x:t[0].x,y:n(t).reduce(function(t,e){return t+e.y},0)}}).value()};t.processed=t.processed.slice(0,this.get("limit")),t.processed.push(o)}return t}})},{"./chart-model-base":14,underscore:"underscore"}],14:[function(t,e){var n=t("underscore"),i=t("../backbone-dash");e.exports=i.Model.extend({defaults:{},initialize:function(t,e){this.app=e.app,this.url=e.url,this._prepareTranslations()},hasData:function(){return n(this.get("processed")).chain().pluck("values").reduce(function(t,e){return e.length&&!0||t},!1).value()},fetch:function(t){var e=JSON.parse(t.data);return e.settings=this.app.settings.toAPI(),this.get("adjtype")&&(e.settings=n({}).extend(e.settings,{0:this.get("adjtype")})),t.data=JSON.stringify(e),i.Model.prototype.fetch.call(this,t)}})},{"../backbone-dash":3,underscore:"underscore"}],15:[function(t,e){var n=t("jquery").param,i=t("underscore"),a=t("./chart-model-base");e.exports=a.extend({defaults:{limit:5,title:""},_prepareTranslations:function(){var t={};this.chartName="amp.dashboard:chart-"+this.get("name").replace(/ /g,""),"Top Regions"===this.get("name")&&(t[this.chartName+"-DistrictUndefined"]="Districts: Undefined"),t[this.chartName+"-others"]="Others",this.localizedTopChart=this.app.translator.translateList(t).done(i(function(t){this.localizedLookup=t}).bind(this))},parse:function(t){this.set("title",t.title),this.localizedLookup||this.app.report("Loading error",["Translations for the application were not loaded before rendering"]),this.localizedOthers=this.localizedLookup[this.chartName+"-others"];var e=i(t.values.slice()).map(function(t){var e=t.name.replace(/[ :.]/g,""),n=this.localizedLookup[this.chartName+"-"+e]||t.name;return{x:n,y:t.amount}},this);return t.maxLimit>e.length&&e.push({x:this.localizedOthers,y:t.total-i.chain(e).pluck("y").reduce(function(t,e){return t+e},0).value(),color:"#777",special:"others"}),t.processed=[{values:e}],t},fetch:function(t){return t=i.defaults(t||{},{url:this.url+"?"+n(this.pick("limit"))}),a.prototype.fetch.call(this,t)}})},{"./chart-model-base":14,jquery:"jquery",underscore:"underscore"}],16:[function(t,e){var n=t("../backbone-dash");e.exports=n.Collection.extend({initialize:function(t,e){this.app=e.app}})},{"../backbone-dash":3}],17:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a="mapId";e.exports=i.Model.extend({defaults:{name:void 0,description:void 0,stateBlob:void 0},parse:function(t){return n(t).has(a)&&(t.id=t[a],delete t[a]),t},initialize:function(t,e){this.app=e.app,this.url=e.url},toJSON:function(){var t=i.Model.prototype.toJSON.apply(this,arguments);return n(t).has("id")&&(t[a]=t.id,delete t.id),t}},{fromId:function(t,e){return new this({id:t},e)}})},{"../backbone-dash":3,underscore:"underscore"}],18:[function(t,e){var n=t("underscore"),i=t("jquery").Deferred,a=t("../backbone-dash"),r=t("./saved-dash");e.exports=a.Collection.extend({url:"/rest/dashboard/saved-charts",model:r,initialize:function(t,e){this.app=e.app},load:function(t){var e=new i,a=this.get(t);if(a)e.resolve(a);else{var r=this.model.fromId(t,{app:this.app});this.add(r),r.fetch().done(function(){e.resolve(r)}).fail(n(function(){this.app.report("Failed to load saved dashboard",["Could not retrieve the saved state."]),e.reject()}).bind(this))}return e.promise()}})},{"../backbone-dash":3,"./saved-dash":17,jquery:"jquery",underscore:"underscore"}],19:[function(t,e){var n=t("underscore"),i=t("../backbone-dash");e.exports=i.Model.extend({initialize:function(t,e){this.app=e.app,this.url=e.url},select:function(t){var e=n(this.attributes.options).findWhere({selected:!0});delete e.selected;var i=n(this.attributes.options).findWhere({id:t});i.selected=!0,this.trigger("change")}})},{"../backbone-dash":3,underscore:"underscore"}],20:[function(t,e){function n(t){return!isNaN(parseInt(t,10))}function i(t,e){return function(n){return t(n)&&(n[e]=!0),n}}var a=t("jquery").Deferred,r=t("underscore"),s=t("../backbone-dash"),o=t("./setting");e.exports=s.Collection.extend({url:"/rest/amp/settings",model:o,comparator:"id",initialize:function(t,e){this.app=e.app,this._loaded=null,r.bindAll(this,"toAPI","fromState")},parse:function(t){return r(t).chain().map(i(function(t){return!n(t.id)},"ignore")).map(i(function(t){return"0"===t.id},"ignore")).map(i(function(t){return"0"===t.id},"ftype")).map(function(t){return r(t).extend({options:r(t.options).map(i(function(e){return e.id===t.defaultId},"selected"))})}).value()},load:function(){return this._loaded?this._loaded.promise():(this._loaded=new a,this.fetch({app:this.app}).then(r(function(){this._loaded.resolve()}).bind(this)).fail(r(function(){this.app.report("Failed to load dashboard settings",["Could not connect to the server."]),this._loaded.reject()}).bind(this)),this._loaded.promise())},toAPI:function(t){return 0===this.length?{}:this.chain().map(function(t){return t.toJSON()}).filter(function(t){return!t.ignore
}).reduce(function(t,e){return t[e.id]=r(e.options).findWhere({selected:!0}).id,t},{}).extend(t||{}).value()},fromState:function(t){r(t).each(function(t,e){this.get(e).select(t)},this)},getVisible:function(){return this.filter(function(t){return!t.get("ignore")})}})},{"../backbone-dash":3,"./setting":19,jquery:"jquery",underscore:"underscore"}],21:[function(t,e){var n=t("d3-browserify"),i=t("./chart-view-base");e.exports=i.extend({uiDefaults:{big:!1,view:"multibar"},chartViews:["multibar","table"],chartOptions:{nvControls:!1},downloadChartOptions:{nvControls:!1,trimLabels:!1},getTTContent:function(t){var e,i=app.translator.translateSync("amp.dashboard:of","of"),a=app.translator.translateSync("amp.dashboard:total","total"),r=t.data[1-t.series.index],s=r.values[t.x.index];return e=s.y>0?"<b>"+n.format("%")(t.y.raw/s.y)+"</b>&nbsp<span>"+i+"</span>&nbsp"+t.x.raw+"&nbsp<span>"+a+"</span>":t.x.raw+" "+r.key+": <b>"+s.y+"</b>",{tt:{heading:t.x.raw+" "+t.series.key,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency"),footerText:e}}}})},{"./chart-view-base":24,"d3-browserify":"d3-browserify"}],22:[function(t,e){var n=t("d3-browserify"),i=t("./chart-view-base");e.exports=i.extend({uiDefaults:{big:!0,adjtype:"Actual Commitments",view:"multibar"},chartViews:["multibar","table"],downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of","of"),i=app.translator.translateSync("amp.dashboard:total","total");return{tt:{heading:t.x.raw+" "+t.series.key,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency"),footerText:"<b>"+n.format("%")(t.y.raw/this.model.get("total"))+"</b>&nbsp<span>"+e+"</span>&nbsp"+t.x.raw+"&nbsp<span>"+i+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].special&&this.model.set("limit",this.model.get("limit")+1)}})},{"./chart-view-base":24,"d3-browserify":"d3-browserify"}],23:[function(t,e){var n=t("d3-browserify"),i=t("./chart-view-base");e.exports=i.extend({uiDefaults:{big:!1,adjtype:"Actual Commitments",view:"bar"},downloadChartOptions:{trimLabels:!1},getTTContent:function(t){var e=app.translator.translateSync("amp.dashboard:of-total","of total");return{tt:{heading:t.x.raw,bodyText:"<b>"+t.y.fmt+"</b> "+this.model.get("currency"),footerText:"<b>"+n.format("%")(t.y.raw/this.model.get("total"))+"</b>&nbsp<span>"+e+"</span>"}}},chartClickHandler:function(t){"others"===t.data[t.series.index].values[t.x.index].special&&(this.model.set("limit",this.model.get("limit")+5),this.model.get("limit")>10&&this.model.set("big",!0))}})},{"./chart-view-base":24,"d3-browserify":"d3-browserify"}],24:[function(t,e){var n=t("jquery").Deferred,i=t("underscore"),a=t("../backbone-dash"),r=t("../charts/chart"),s=t("../../ugly/util"),o=t("./download"),l=i.template('<div class="col-xs-12 <% if (!model.get(\'big\')) { %>col-md-6<% } else { %> big-chart<% } %>">\n\n  <div class="panel panel-chart">\n    <div class="panel-heading">\n      <span class="pull-right big-number">\n        <b class="chart-total"></b>\n        <span class="chart-currency"></span>\n      </span>\n      <h2 data-i18n="amp.dashboard:chart-<%= model.get(\'name\').replace(/ /g,\'\') %>"><%= model.get(\'title\') %></h2>\n    </div>\n\n    <div class="panel-body">\n      <div class="chart-container">\n        <h3 class="dash-chart-diagnostic text-center"></h3>\n        <div class="dash-chart-wrap">\n        </div>\n        <button type="button" class="btn btn-link btn-xs pull-right reset" style="display:none" data-i18n="amp.dashboard:chart-reset">reset others</button>\n      </div>\n    </div>\n\n    <div class="panel-footer clearfix">\n\n      <div class="pull-right">\n\n        <div class="btn-group">\n          <% _(views).each(function(view) { %>\n            <button type="button" data-view="<%= view %>"\n                class="chart-view btn btn-sm btn-<%= (view === model.get(\'view\')) ? \'primary\' : \'default\' %>">\n              <span class="glyphicon glyphicon-<%= {\n                bar: \'signal\',\n                multibar: \'signal\',\n                pie: \'adjust\',\n                table: \'th-list\'\n              }[view] %>"></span>\n            </button>\n          <% }) %>\n        </div>\n\n        <div class="btn-group">\n          <a\n            class="btn btn-sm btn-default download"\n            download="AMP <%= model.get(\'title\') %> - <%= (new Date()).toISOString().split(\'T\')[0] %>.png"\n            target="_blank">\n            <span class="glyphicon glyphicon-cloud-download"></span>\n          </a>\n          <button type="button" class="btn btn-sm btn-<%= model.get(\'big\') ? \'primary\' : \'default\' %> expand hidden-xs hidden-sm">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n          </button>\n        </div>\n\n      </div><!-- buttons in .pull-right -->\n\n      <% if (model.get(\'adjtype\')) { %>\n        <form class="form-inline dash-form dash-adj-type" role="form">\n          <select class="form-control like-btn-sm ftype-options">\n            <option>...</option>\n            <!-- gets populated after settings load -->\n          </select>\n          <span class="cheat-lineheight"></span>\n        </form>\n      <% } %>\n\n    </div>\n  </div>\n\n  <div class="export-modal"></div>\n</div>\n\n'),u=i.template('<option value="<%=opt.id%>" <%= current ? selected="selected" : \'\' %>><%=opt.name%></option>');e.exports=a.View.extend({uiDefaults:{big:!1,view:"bar"},events:{"change .dash-adj-type select":"changeAdjType","click .reset":"resetLimit","click .chart-view":"changeChartView","click .download":"download","click .expand":"big","click .retry":"render"},chartViews:["bar","pie","table"],initialize:function(t){this.app=t.app,this.model.set(this.uiDefaults),this.rendered=!1,this._stateWait=new n,this.message=null,this.app.savedDashes.length?this.app.state.loadPromise.always(this._stateWait.resolve):this._stateWait.resolve(),this.listenTo(this.app.filter,"apply",this.updateData),this.listenTo(this.app.settings,"change",this.updateData),this.listenTo(this.model,"change:adjtype",this.render),this.listenTo(this.model,"change:limit",this.updateData),this.listenTo(this.model,"change:view",this.render),this.app.state.register(this,"chart:"+this.model.url,{get:i.partial(i(this.model.pick).bind(this.model),"limit","adjtype","view","big"),set:i(this.model.set).bind(this.model),empty:null}),i.bindAll(this,"showChart","failLoading"),this.getTTContent&&i.bindAll(this,"getTTContent"),this.chartClickHandler&&i.bindAll(this,"chartClickHandler")},render:function(){this.rendered=!0;var t={views:this.chartViews,model:this.model,chart:this.chartEl,util:s};return this.$el.html(l(t)),this.message=this.$(".dash-chart-diagnostic"),this.chartContainer=this.$(".dash-chart-wrap"),void 0!==this.model.get("adjtype")&&this.app.settings.load().done(i(function(){var t=this.app.settings.get("0");t||this.app.report("Could not find Funding Type settings"),this.$(".ftype-options").html(i(t.get("options")).map(function(t){return u({opt:t,current:t.id===this.model.get("adjtype")})},this))}).bind(this)),"pending"!==this._stateWait.state()&&this.updateData(),this.app.translator.translateDOM(this.el),this},updateData:function(){if(this.rendered){if("pending"===this._stateWait.state()||"pending"===this.app.settings.load().state())return this.message.html("Loading saved settings...").attr("data-i18n","amp.dashboard:chart-loading-saved-settings"),void app.translator.translateDOM($(".chart-container"));this.chartContainer.empty(),this.message.html('<span data-i18n="amp.dashboard:loading">...</span>').fadeIn(100),this.app.translator.getTranslations().done(i(function(){this.model.fetch({type:"POST",data:JSON.stringify(this.app.filter.serialize())}).always(i(function(){}).bind(this)).done(this.showChart).fail(this.failLoading)}).bind(this)).fail(i(function(){this.app.report("Could not load translations",["Refreshing the page may fix the issue."])}).bind(this))}},showChart:function(){if(!this.model.hasData())return this.message.html("No Data Available").attr("data-i18n","amp.dashboard:chart-no-data-available"),app.translator.translateDOM($(".chart-container")),void this.resetNumbers();var t=r(this.model.get("view"),this.model.get("processed"),this.getChartOptions());this.chartContainer.html(t.el),this.renderNumbers();var e=this.model.get("limit");e&&this.$(".reset")[e===this.model.defaults.limit?"hide":"show"](),this.message.stop().fadeOut(200)},getChartOptions:function(){var t=i(i(this.chartOptions).clone()||{}).defaults({trimLabels:!this.model.get("big"),getTTContent:this.getTTContent,clickHandler:this.chartClickHandler,width:this.$(".panel-body").width(),height:this.$(".panel-body").height()});return t},failLoading:function(){this.message.html("Failed to load data <small>"+arguments[2]+' <button type="button" class="retry btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Retry</button></small>').show(),console.error("failed loading chart :(",arguments)},renderNumbers:function(){this.model.get("total")&&this.$(".chart-total").html(s.formatKMB()(this.model.get("total"))),this.$(".chart-currency").html(this.model.get("currency"))},resetNumbers:function(){this.$(".chart-total").html(""),this.$(".chart-currency").html("")},resetLimit:function(){this.model.set("limit",this.model.defaults.limit)},changeAdjType:function(t){var e=t.currentTarget.value;this.model.set("adjtype",e)},changeChartView:function(t){var e=s.data(t.currentTarget,"view");this.model.set("view",e)},big:function(){this.model.set("big",!this.model.get("big"))},setClear:function(t){this.$el[t?"addClass":"removeClass"]("clearfix")},download:function(){var t=new o({app:this.app,model:this.model,chartOptions:i(this.getChartOptions()).omit("height","width")}),e="dash-download-modal";this.app.modal("Download chart",{bodyEl:t.render().el,specialClass:e,i18nTitle:"amp.dashboard:download-download-chart"}),app.translator.translateDOM($("."+e))}})},{"../../ugly/util":40,"../backbone-dash":3,"../charts/chart":8,"./download":27,jquery:"jquery",underscore:"underscore"}],25:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=t("../models/chart-tops"),r=t("../models/chart-aid-predictability"),s=t("../models/chart-funding-type"),o=t("./chart-tops"),l=t("./chart-aid-predictability"),u=t("./chart-funding-type");e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app,this.chartViews=this.collection.map(function(t){var e=t instanceof a?o:t instanceof r?l:t instanceof s?u:null;return new e({model:t,app:this.app})},this),this.listenToOnce(this.app.filter,"apply",this.applyFilter),this.listenTo(this.collection,"change:big",this.injectBreaks)},render:function(){return this.$el.html(n(this.chartViews).map(function(t){return t.render().el})),this.injectBreaks(),this},injectBreaks:function(t){if(n(this.chartViews).reduce(function(t,e){return e.setClear(t),t?!1:e.model.get("big")?!1:!0},!1),t){var e=n(this.chartViews).find(function(e){return e.model===t});e&&e.render()}}})},{"../backbone-dash":3,"../models/chart-aid-predictability":12,"../models/chart-funding-type":13,"../models/chart-tops":15,"./chart-aid-predictability":21,"./chart-funding-type":22,"./chart-tops":23,underscore:"underscore"}],26:[function(t,e){var n=t("../backbone-dash"),i=t("./filters"),a=t("./settings"),r=t("./share");e.exports=n.View.extend({className:"row",initialize:function(t){this.app=t.app,this.filters=new i({app:this.app}),this.settings=new a({app:this.app}),this.share=new r({app:this.app})},render:function(){return this.$el.html([this.filters.render().el,this.settings.render().el,this.share.render().el]),this}})},{"../backbone-dash":3,"./filters":29,"./settings":34,"./share":35}],27:[function(t,e){var n=t("underscore"),i=t("babyparse"),a=t("../../ugly/lib-load-hacks").canvg,r=t("../../ugly/util"),n=t("underscore"),s=t("../backbone-dash"),o=t("../charts/chart"),r=t("../../ugly/util"),l=n.template('<h4 data-i18n="amp.dashboard:download-preview">Preview:</h4>\n\n<div class="preview-area">\n  <div class="svg-wrap hidden">\n  </div>\n  <div class="canvas-wrap hidden">\n  </div>\n  <div class="table-wrap hidden">\n  </div>\n</div>\n\n<div class="text-center">\n  <a class="btn btn-success download-chart disabled">\n    <span class="glyphicon glyphicon-download"></span>\n    <span data-i18n="amp.dashboard:download-rendering" class="word">Rendering...</span>\n  </a>\n</div>\n');e.exports=s.View.extend({initialize:function(t){this.app=t.app,this.dashChartOptions=n({}).extend(t.chartOptions,{height:450,width:970,trimLabels:!1})},render:function(){return this.$el.html(l()),"table"===this.model.get("view")?this.renderCSV(this.$(".preview-area .table-wrap").removeClass("hidden")):window.setTimeout(n(function(){this.renderChart(this.$(".preview-area .svg-wrap").removeClass("hidden"),this.$(".preview-area .canvas-wrap"))}).bind(this),500),this},renderChart:function(t,e){n(this.app.browserIssues).findWhere({feature:"canvas"})&&this.app.viewFail(this,"Chart export requires a modern web browser");var i=this.model.get("view"),a=this.model.get("processed"),r=document.createElement("canvas"),s=o(i,a,n({}).extend(this.dashChartOptions,{height:this.dashChartOptions.height-42})).el;t.html(s),this.prepareCanvas(r,this.dashChartOptions.height,this.dashChartOptions.width),this.chartToCanvas(s,r,function(){t.hide();var n=new Image;n.src=r.toDataURL("image/png"),e.html(n),$(e).removeClass("hidden"),this.makeDownloadable(n.src,"chart",".png")})},prepareCanvas:function(t,e,i){var a=t.getContext("2d"),r=this.model.get("currency"),s=this.model.get("adjtype");if(s){var o=this.app.settings.get("0");o||this.app.report("Could not find Funding Type settings");var l=n(o.get("options")).find(function(t){return t.id===s}).name;r=l+" ("+r+")"}t.setAttribute("width",i),t.setAttribute("height",e),a.beginPath(),a.rect(0,0,i,e),a.fillStyle="#fff",a.fill(),a.fillStyle="#163f66",a.font='bold 22px "Open Sans"';var u=this.app.translator.translateSync("amp.dashboard:chart-"+this.model.get("name").replace(/ /g,""),this.model.get("name"));a.fillText(u.toUpperCase(),10,32),a.fillStyle="#333",a.textAlign="right",a.fillText(r,i-10,32),a.textAlign="left",a.font='normal 12px "sans-serif"'},chartToCanvas:function(t,e,i){var r=n(i).bind(this);window.setTimeout(function(){this.app.tryTo(function(){a(e,t.parentNode.innerHTML,{offsetY:42,ignoreDimensions:!0,ignoreClear:!0,ignoreMouse:!0,renderCallback:r})},this)}.bind(this),1500)},renderCSV:function(t){var e,a,s,o,l=this.model.get("processed"),u=this.model.get("currency"),c=this.model.get("adjtype")||!1;e=n(l).chain().pluck("values").transpose().map(function(t){return n(t).reduce(function(t,e){return t.push(e.y),t},[t[0].x])}).map(function(t){return t.push(u||""),c&&t.push(c),t}).value(),a=[""],a=a.concat(n(l).map(function(t){return t.key||""})),a.push("Currency"),c&&a.push("Type"),e.unshift(a),s=i.unparse(e),o=document.createElement("textarea"),o.setAttribute("class","csv-preview"),o.value=s,t.html(o),this.app.hasIssue("download")||(s=r.textAsDataURL(s)),window.setTimeout(n(function(){this.makeDownloadable(s,"data",".csv")}).bind(this),100)},makeDownloadable:function(t,e,n){var i=this.model.get("name")+n,a=this.$(".download-chart").removeClass("disabled");a.find(".word").text("Download "+e).attr("data-i18n","amp.dashboard:download-download-"+e),app.translator.translateDOM(a),this.app.hasIssue("download")?this.app.hasIssue("flash")?this.app.report("Your browser is missing features to initiate the download",['You might be able to save this chart manually by right-clicking the preview and selecting "Save Picture As...']):this.app.tryTo(function(){window.Downloadify.create(a[0],{swf:"/TEMPLATE/ampTemplate/commonMedia/downloadify.swf",downloadImage:"/TEMPLATE/ampTemplate/commonMedia/download-button-states.png?rev=4",transparent:!0,width:176,height:34,filename:i,data:t.replace("data:text/plain;base64,//","").replace("data:image/png;base64,",""),dataType:".csv"===n?"string":"base64",append:!0,onError:function(){this.app.report("Could not download the file.")}})},this):this.$(".download-chart").attr("href",t).attr("download",i)}})},{"../../ugly/lib-load-hacks":36,"../../ugly/util":40,"../backbone-dash":3,"../charts/chart":8,babyparse:41,underscore:"underscore"}],28:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<div class="container">\n  <header class="spaced text-center">\n    <h2>\n      The application encountered an\n      <span class="text-danger">error</span>\n      <small>:(</small>\n    </h2>\n    <p><%= err %></p>\n  </header>\n</div>\n');e.exports=i.View.extend({initialize:function(t){this.app=t.app,this.err=t.err},render:function(){return this.$el.html(a({err:this.err})),this}})},{"../backbone-dash":3,underscore:"underscore"}],29:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<div class="col-xs-12 col-md-5">\n  <div class="panel">\n    <div class="panel-body">\n      <button type="button" class="btn btn-sm btn-default pull-right show-filters">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:filters-edit">Edit filters</span>\n      </button>\n      <h3 class="inline-heading" data-i18n="amp.common:title-filters">Filters</h3>\n      <div class="applied-filters">\n        <em data-i18n="amp.common:filters-loading">Loading...</em>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="filter-popup"></div>\n'),r=n.template('<% if (!countApplied) { %>\n  <em data-i18n="amp.dashboard:filters-none-applied">No filters applied</em>\n<% } else { %>\n  <span>\n    <button class="btn btn-default btn-sm show-filter-details">\n      <span class="glyphicon glyphicon-eye-open"></span>\n      <span data-i18n="amp.dashboard:filters-show-settings">Show filter settings</span>\n      (<b><%= countApplied %></b>)\n    </button>\n  </span>\n<% } %>\n'),s=n.template('<% _(applied).each(function(filter) { %>\n  <h5>\n    <a href="#filter-detail-<%= filter.id %>" data-toggle="collapse" aria-expanded="false"><%= filter.name %></a>\n    (<%= filter.detail.length %>)\n  </h5>\n  <ul id="filter-detail-<%= filter.id %>" class="collapse">\n    <% _(filter.detail).each(function(detail) { %>\n      <li><%= detail %></li>\n    <% }) %>\n  </ul>\n<% }) %>\n\n<div>\n  <button type="button" class="btn btn-sm btn-default hide-filter-details">\n    <span class="glyphicon glyphicon-eye-close"></span>\n    <span data-i18n="amp.dashboard:filters-hide-details">Hide filter details</span>\n  </button>\n</div>\n');e.exports=i.View.extend({events:{"click .show-filters":"showFilter","click .show-filter-details":"showFilterDetails","click .hide-filter-details":"hideFilterDetails"},initialize:function(t){this.app=t.app,this.listenTo(this.app.filter,"cancel",this.hideFilter),this.listenTo(this.app.filter,"apply",this.applyFilter),this.app.filter.loaded.done(n(function(){this.app.state.register(this,"filters",{get:n(function(){return{filter:this.app.filter.serialize()}}).bind(this),set:n(function(t){this.app.filter.deserialize(t.filter)}).bind(this),empty:{filter:{}}})}).bind(this))},render:function(){return this.$el.html(a()),this.app.filter.setElement(this.el.querySelector("#filter-popup")),this.hideFilter(),this.app.filter.loaded.done(n(this.renderApplied).bind(this)).fail(n(function(){this.$(".applied-filters").html('<strong class="text-danger filters-err">Failed to load filters</strong> <a href="" class="btn btn-warning btn-sm"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a>'),this.$("button").addClass("disabled")}).bind(this)),this},renderApplied:function(){var t=this.app.filter.serializeToModels(),e=n(t.columnFilters).keys().length;e+=!!t.otherFilters,this.$(".applied-filters").html(r({countApplied:e})),this.app.translator.translateDOM(this.el)},showFilter:function(){this.app.filter.showFilters(),this.$("#filter-popup").show()},hideFilter:function(){this.$("#filter-popup").hide()},applyFilter:function(){this.hideFilter(),this.renderApplied()},showFilterDetails:function(){var t=this.app.filter.serializeToModels(),e=n(t.columnFilters).map(function(t,e){return{name:e,id:e.replace(/[^\w]/g,""),detail:n(t).map(function(t){return t.get("name")})}});if(t.otherFilters){var i=t.otherFilters.date;e.push({name:"Date Range",detail:[i.start+"&mdash;"+i.end]})}this.$(".applied-filters").html(s({applied:e}))},hideFilterDetails:function(){this.renderApplied()}})},{"../backbone-dash":3,underscore:"underscore"}],30:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<style>\n.footerText {\n  padding: 0;\n  font-family: arial;\n  font-size: 11px;\n  border: 1px solid rgb(221, 221, 221);\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n}\n.footer {\n  background-color: #8B8B8B;\n  color: #FFF;\n  margin-top: 0;\n  padding-bottom: 10px;\n  padding-top: 10px;\n  text-align: center;\n}\n.dgf_footer {\n  color: #8B8B8B;\n  line-height: 18px;\n  margin: 15px 0;\n  text-align: center;\n}\n.dgf_footer img {\n  line-height: 18px;\n  margin-bottom: 5px;\n}\n</style>\n\n<div class="col-xs-12">\n  <div class="panel dash-row footerText">\n    <div class="dgf_footer">\n      <img src="/TEMPLATE/ampTemplate/img_2/dgf_logo_bottom.gif" class="dgf_logo_footer"><br>\n      1110 Vermont Ave NW, Washington, D.C. 20005, USA<br>\n      info@developmentgateway.org, Tel: +1.202.572.9200, Fax: +1 202.572.9290\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app},render:function(){return this.$el.html(a()),this}})},{"../backbone-dash":3,underscore:"underscore"}],31:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<div class="col-xs-12">\n  <div class="panel dash-row footerText">\n    <div class="panel-body dash-header">\n      <h1 data-i18n="amp.common:title" class="inline-heading">\n        AMP\n        <small data-i18n="amp.common:title-dashboards">Dashboards</small>\n      </h1>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({className:"row",initialize:function(t){this.app=t.app},render:function(){return this.$el.html(a()),this}})},{"../backbone-dash":3,underscore:"underscore"}],32:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=t("amp-state/index").StateLoadError,r=t("./header"),s=t("./controls"),o=t("./charts"),l=t("../models/charts-collection"),u=t("./footer"),c=t("../models/chart-tops"),d=t("../models/chart-aid-predictability"),h=t("../models/chart-funding-type"),p=n.template('<div class="container">\n</div>\n'),f=n.template('<div class="modal fade" id="<%= m.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog <%= m.specialClass %>">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <h4 class="modal-title text-<%= m.tone %>" data-i18n="<%= m.i18nTitle %>"><%= m.title %></h4>\n      </div>\n      <div class="modal-body">\n        <% if (m.content) { %>\n          <%= m.content %>\n        <% } %>\n        <% if (m.messages) { %>\n          <% _(m.messages).each(function(message) { %>\n            <p><%= message %></p>\n          <% }) %>\n        <% } %>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-<%= m.tone %>" data-i18n="amp.dashboard:close" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({initialize:function(t){this.app=t.app;try{this.app.state.urlMaybeLoad()}catch(e){if(!(e instanceof a))throw e;this.app.report("Could not load saved dashboard",["If you are trying to load a shared link, please make sure the entire URL was copied"]),this.app.url.hash("")}this.header=new r({app:this.app}),this.controls=new s({app:this.app}),this.app.settings.load(),this.charts=new o({app:this.app,collection:new l([new c({name:"Top Donor Agencies"},{app:this.app,url:"/rest/dashboard/tops/do"}),new c({name:"Top Regions"},{app:this.app,url:"/rest/dashboard/tops/re"}),new c({name:"Top Sectors"},{app:this.app,url:"/rest/dashboard/tops/ps"}),new d({name:"Aid Predictability"},{app:this.app,url:"/rest/dashboard/aid-predictability"}),new h({name:"Funding Type"},{app:this.app,url:"/rest/dashboard/ftype"})],{app:this.app})}),this.footer=new u({app:this.app})},render:function(){return this.$el.html(p()),this.$(".container").html([this.header.render().el,this.controls.render().el,this.charts.render().el,this.footer.render().el]),this},modal:function(t,e){e=n({title:t,id:n.uniqueId("modal")}).extend(e),this.$el.parent().append(f({m:e}));var i=this.$el.parent().find("#"+e.id);return e.bodyEl&&i.find(".modal-body").html(e.bodyEl),i.modal(),i[0]}})},{"../backbone-dash":3,"../models/chart-aid-predictability":12,"../models/chart-funding-type":13,"../models/chart-tops":15,"../models/charts-collection":16,"./charts":25,"./controls":26,"./footer":30,"./header":31,"amp-state/index":64,underscore:"underscore"}],33:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<div class="tab-content filter-options">\n  <div class="tab-pane active">\n    <ul class="sub-filters-titles nav nav-pills nav-stacked">\n      <% _(settings.getVisible()).each(function(setting) { %>\n        <li <%= setting.id === current.id ? \'class="active"\' : \'\' %>>\n          <a class="setting-select" href="#<%= setting.id %>"><span><%= setting.get(\'name\') %></span></a>\n        </li>\n      <% }) %>\n    </ul>\n    <div class="sub-filters-content">\n      <select class="form-control setting-value">\n        <% _(current.get(\'options\')).each(function(option) { %>\n          <option value="<%= option.value %>" <%= option.selected ? \'selected="selected"\' : \'\' %>><%= option.name %></option>\n        <% }) %>\n      </select>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({events:{"click .setting-select":"selectSetting","change .setting-value":"changeSetting"},initialize:function(t){this.app=t.app},render:function(){return this.current||(this.current=this.app.settings.getVisible()[0]),this.$el.html(a({settings:this.app.settings,current:this.current})),this},selectSetting:function(t){t.preventDefault();var e=t.currentTarget.hash.slice(1);this.current=this.app.settings.get(e),this.render()},changeSetting:function(t){var e=t.currentTarget.value;this.current.select(e)}})},{"../backbone-dash":3,underscore:"underscore"}],34:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=t("./settings-modal"),r=n.template('<div class="col-xs-12 col-sm-6 col-md-3">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:dashboard-settings" class="inline-heading">Settings</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-settings-button">\n        <span class="glyphicon glyphicon-edit"></span>\n        <span data-i18n="amp.dashboard:settings-edit">edit settings</span>\n      </button>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({events:{"click .dash-settings-button":"editSettings"},initialize:function(t){this.app=t.app,this.modalView=new a({app:this.app,collection:this.collection}),this.app.settings.load().done(n(function(){this.app.state.register(this,"settings",{get:this.app.settings.toAPI,set:this.app.settings.fromState})}).bind(this))},render:function(){return this.$el.html(r()),this},editSettings:function(){var t="dash-settings-modal";this.app.modal("Settings",{specialClass:t,bodyEl:this.modalView.render().el,i18nTitle:"amp.dashboard:dashboard-settings"}),app.translator.translateDOM($("."+t))}})},{"../backbone-dash":3,"./settings-modal":33,underscore:"underscore"}],35:[function(t,e){var n=t("underscore"),i=t("../backbone-dash"),a=n.template('<div class="col-xs-12 col-sm-6 col-md-4">\n  <div class="panel">\n    <div class="panel-body">\n      <h3 data-i18n="amp.dashboard:share-dashboard-top" class="inline-heading">Share</h3>\n      <button type="button" class="btn btn-sm btn-default pull-right dash-share-button">\n        <span class="glyphicon glyphicon-link"></span>\n        <span data-i18n="amp.dashboard:share-link">link</span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="dash-share-modal modal fade" id="<%= details.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="panel panel-primary">\n      <div class="panel-heading">\n        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span data-i18n="amp.dashboard:close" class="sr-only">Close</span></button>\n        <span data-i18n="amp.dashboard:share-dashboard">Share this dashboard view</span>\n      </div>\n      <div class="panel-body">\n        <form role="form">\n          <label data-i18n="amp.dashboard:share-link" for="dash-share-url">Link</label>\n          <input type="url" class="form-control" id="dash-share-url" />\n        </form>\n      </div>\n      <div class="panel-footer">\n        <button type="button" class="btn btn-primary" data-i18n="amp.dashboard:close" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n');e.exports=i.View.extend({events:{"click .dash-share-button":"share"},initialize:function(t){this.app=t.app},render:function(){return this.$el.html(a({details:{}})),this},share:function(){this.$("#dash-share-url").attr("disabled","disabled").val("Saving dashboard state, please wait...");var t=this.app.state.freeze();this.listenToOnce(this.app.savedDashes,"request",function(t,e){e.done(n(function(){var e=t.get("id");this.app.url.hash(this.app.state.toHash(e),{silent:!0}),this.$("#dash-share-url").removeAttr("disabled").val(this.app.url.full())}).bind(this)).fail(n(function(){this.$("#dash-share-url").val("Error: could not save dashboard for sharing.")}).bind(this))}),this.app.savedDashes.create({title:"Dashboard",description:"Saved dashboard",stateBlob:t},{app:this.app}),this.$(".dash-share-modal").modal()}})},{"../backbone-dash":3,underscore:"underscore"}],36:[function(t,e){t("nvd3"),window.nv.dev=!1,t("./underscore-transpose"),window.RGBColor=t("./lib-src/rgbcolor"),t("./lib-src/canvg"),e.exports={canvg:window.canvg}},{"./lib-src/canvg":37,"./lib-src/rgbcolor":38,"./underscore-transpose":39,nvd3:42}],37:[function(){!function(){function t(t){var e={opts:t};e.FRAMERATE=30,e.MAX_VIRTUAL_PIXELS=3e4,e.log=function(){},1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(t){console.log(t)}),e.init=function(t){var n=0;e.UniqueId=function(){return n++,"canvg"+n},e.Definitions={},e.Styles={},e.Animations=[],e.Images=[],e.ctx=t,e.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},e.init(),e.ImagesLoaded=function(){for(var t=0;t<e.Images.length;t++)if(!e.Images[t].loaded)return!1;return!0},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},e.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},e.parseXml=function(t){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,n=new Windows.Data.Xml.Dom.XmlLoadSettings;return n.prohibitDtd=!1,e.loadXml(t,n),e}if(window.DOMParser){var i=new DOMParser;
return i.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},e.Property=function(t,e){this.name=t,this.value=e},e.Property.prototype.getValue=function(){return this.value},e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},e.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},e.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},e.Property.prototype.addOpacity=function(t){var n=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new e.Property(this.name,n)},e.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),e.Definitions[t]},e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},e.Property.prototype.getFillStyleDefinition=function(t,n){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(e.ctx,t,n);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var a=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),a.hasValue()&&(i.attribute("patternTransform",!0).value=a.value)}return i.createPattern(e.ctx,t)}return null},e.Property.prototype.getDPI=function(){return 96},e.Property.prototype.getEM=function(t){var n=12,i=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(t)),n},e.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},e.Property.prototype.toPixels=function(t,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(t);var a=this.numValue();return n&&1>a?a*e.ViewPort.ComputeSize(t):a},e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var n={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return e.Property.prototype.toTextBaseline=function(){return this.hasValue()?n[this.value]:null},e.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,n,i,a,r,s){var o=null!=s?this.Parse(s):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:r||o.fontFamily,fontSize:a||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:i||o.fontWeight,fontVariant:n||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(n){for(var i={},a=e.trim(e.compressSpaces(n||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},s="",o=0;o<a.length;o++)r.fontStyle||-1==t.Styles.indexOf(a[o])?r.fontVariant||-1==t.Variants.indexOf(a[o])?r.fontWeight||-1==t.Weights.indexOf(a[o])?r.fontSize?"inherit"!=a[o]&&(s+=a[o]):("inherit"!=a[o]&&(i.fontSize=a[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=a[o]&&(i.fontWeight=a[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=a[o]&&(i.fontVariant=a[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=a[o]&&(i.fontStyle=a[o]),r.fontStyle=!0);return""!=s&&(i.fontFamily=s),i}},e.ToNumberArray=function(t){for(var n=e.trim(e.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},e.Point=function(t,e){this.x=t,this.y=e},e.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},e.CreatePoint=function(t){var n=e.ToNumberArray(t);return new e.Point(n[0],n[1])},e.CreatePath=function(t){for(var n=e.ToNumberArray(t),i=[],a=0;a<n.length;a+=2)i.push(new e.Point(n[a],n[a+1]));return i},e.BoundingBox=function(t,e,n,a){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,n,i,a,r){var s=t+2/3*(n-t),o=e+2/3*(i-e),l=s+1/3*(a-t),u=o+1/3*(r-e);this.addBezierCurve(t,e,s,l,o,u,a,r)},this.addBezierCurve=function(t,e,n,a,r,s,o,l){var u=[t,e],c=[n,a],d=[r,s],h=[o,l];for(this.addPoint(u[0],u[1]),this.addPoint(h[0],h[1]),i=0;i<=1;i++){var p=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*d[i]+Math.pow(t,3)*h[i]},f=6*u[i]-12*c[i]+6*d[i],g=-3*u[i]+9*c[i]-9*d[i]+3*h[i],m=3*c[i]-3*u[i];if(0!=g){var v=Math.pow(f,2)-4*m*g;if(!(0>v)){var y=(-f+Math.sqrt(v))/(2*g);y>0&&1>y&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var b=(-f-Math.sqrt(v))/(2*g);b>0&&1>b&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)))}}else{if(0==f)continue;var x=-m/f;x>0&&1>x&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,a)},e.Transform=function(t){var n=this;this.Type={},this.Type.translate=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var n=e.ToNumberArray(t);this.angle=new e.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=e.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=e.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],n=this.m[2],i=this.m[4],a=this.m[1],r=this.m[3],s=this.m[5],o=0,l=0,u=1,c=1/(e*(r*u-s*l)-n*(a*u-s*o)+i*(a*l-r*o));t.transform(c*(r*u-s*l),c*(s*o-a*u),c*(i*l-n*u),c*(e*u-i*o),c*(n*s-i*r),c*(i*a-e*s))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=n.Type.matrix,this.base(t),this.angle=new e.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;e>=0;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=e.trim(e.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),a=0;a<i.length;a++){var r=e.trim(i[a].split("(")[0]),s=i[a].split("(")[1].replace(")",""),o=new this.Type[r](s);o.type=r,this.transforms.push(o)}},e.AspectRatio=function(t,n,i,a,r,s,o,l,u,c){n=e.compressSpaces(n),n=n.replace(/^defer\s/,"");var d=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",p=i/a,f=r/s,g=Math.min(p,f),m=Math.max(p,f);"meet"==h&&(a*=g,s*=g),"slice"==h&&(a*=m,s*=m),u=new e.Property("refX",u),c=new e.Property("refY",c),u.hasValue()&&c.hasValue()?t.translate(-g*u.toPixels("x"),-g*c.toPixels("y")):(d.match(/^xMid/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i/2-a/2,0),d.match(/YMid$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,r/2-s/2),d.match(/^xMax/)&&("meet"==h&&g==f||"slice"==h&&m==f)&&t.translate(i-a,0),d.match(/YMax$/)&&("meet"==h&&g==p||"slice"==h&&m==p)&&t.translate(0,r-s)),"none"==d?t.scale(p,f):"meet"==h?t.scale(g,g):"slice"==h&&t.scale(m,m),t.translate(null==o?0:-o,null==l?0:-l)},e.Element={},e.EmptyProperty=new e.Property("EMPTY",""),e.Element.ElementBase=function(t){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,n){var i=this.attributes[t];return null!=i?i:(1==n&&(i=new e.Property(t,""),this.attributes[t]=i),i||e.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if(t.match(/:href$/))return this.attributes[t];return e.EmptyProperty},this.style=function(t,n,i){var a=this.styles[t];if(null!=a)return a;var r=this.attribute(t);if(null!=r&&r.hasValue())return this.styles[t]=r,r;if(1!=i){var s=this.parent;if(null!=s){var o=s.style(t);if(null!=o&&o.hasValue())return o}}return 1==n&&(a=new e.Property(t,""),this.styles[t]=a),a||e.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,n){var i=t;n&&(i=e.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},null!=t&&1==t.nodeType){for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];this.attributes[i.nodeName]=new e.Property(i.nodeName,i.nodeValue)}var a=e.Styles[t.nodeName];if(null!=a)for(var r in a)this.styles[r]=a[r];if(this.attribute("class").hasValue())for(var s=e.compressSpaces(this.attribute("class").value).split(" "),o=0;o<s.length;o++){if(a=e.Styles["."+s[o]],null!=a)for(var r in a)this.styles[r]=a[r];if(a=e.Styles[t.nodeName+"."+s[o]],null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("id").hasValue()){var a=e.Styles["#"+this.attribute("id").value];if(null!=a)for(var r in a)this.styles[r]=a[r]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),n=0;n<a.length;n++)if(""!=e.trim(a[n])){var l=a[n].split(":"),r=e.trim(l[0]),u=e.trim(l[1]);this.styles[r]=new e.Property(r,u)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(var n=0;n<t.childNodes.length;n++){var c=t.childNodes[n];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var d=c.nodeValue||c.text||"";""!=e.trim(e.compressSpaces(d))&&this.addChild(new e.Element.tspan(c),!1)}}}},e.Element.RenderedElementBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.setContext=function(t){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(t.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new e.Property("fill",t.fillStyle);i=i.addOpacity(this.style("fill-opacity")),t.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(t.strokeStyle=n)}else if(this.style("stroke").hasValue()){var a=this.style("stroke");"currentColor"==a.value&&(a.value=this.style("color").value),t.strokeStyle="none"==a.value?"rgba(0,0,0,0)":a.value}if(this.style("stroke-opacity").hasValue()){var a=new e.Property("stroke",t.strokeStyle);a=a.addOpacity(this.style("stroke-opacity")),t.strokeStyle=a.value}if(this.style("stroke-width").hasValue()){var r=this.style("stroke-width").toPixels();t.lineWidth=0==r?.001:r}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var s=e.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof t.setLineDash?t.setLineDash(s):"undefined"!=typeof t.webkitLineDash?t.webkitLineDash=s:"undefined"==typeof t.mozDash||1==s.length&&0==s[0]||(t.mozDash=s);var o=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof t.lineDashOffset?t.lineDashOffset=o:"undefined"!=typeof t.webkitLineDashOffset?t.webkitLineDashOffset=o:"undefined"!=typeof t.mozDashOffset&&(t.mozDashOffset=o)}if("undefined"!=typeof t.font&&(t.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var l=new e.Transform(this.attribute("transform").value);l.apply(t)}if(this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},e.Element.RenderedElementBase.prototype=new e.Element.ElementBase,e.Element.PathElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new e.BoundingBox},this.renderChildren=function(t){this.path(t),e.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(t,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),a=1;a<n.length-1;a++)i.render(t,n[a][0],n[a][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(t,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase,e.Element.svg=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),e.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,"undefined"!=typeof t.font&&"undefined"!=typeof window.getComputedStyle&&(t.font=window.getComputedStyle(t.canvas).getPropertyValue("font")),this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=e.ViewPort.width(),i=e.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var a=0,r=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(a=-this.attribute("refX").toPixels("x"),r=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(a,r),t.lineTo(n,r),t.lineTo(n,i),t.lineTo(a,i),t.closePath(),t.clip())}if(e.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var s=e.ToNumberArray(this.attribute("viewBox").value),o=s[0],l=s[1];n=s[2],i=s[3],e.AspectRatio(t,this.attribute("preserveAspectRatio").value,e.ViewPort.width(),n,e.ViewPort.height(),i,o,l,this.attribute("refX").value,this.attribute("refY").value),e.ViewPort.RemoveCurrent(),e.ViewPort.SetCurrent(s[2],s[3])}}},e.Element.svg.prototype=new e.Element.RenderedElementBase,e.Element.rect=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),s=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=s),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(s=o),s=Math.min(s,a/2),o=Math.min(o,r/2),null!=t&&(t.beginPath(),t.moveTo(n+s,i),t.lineTo(n+a-s,i),t.quadraticCurveTo(n+a,i,n+a,i+o),t.lineTo(n+a,i+r-o),t.quadraticCurveTo(n+a,i+r,n+a-s,i+r),t.lineTo(n+s,i+r),t.quadraticCurveTo(n,i+r,n,i+r-o),t.lineTo(n,i+o),t.quadraticCurveTo(n,i,n+s,i),t.closePath()),new e.BoundingBox(n,i,n+a,i+r)}},e.Element.rect.prototype=new e.Element.PathElementBase,e.Element.circle=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),a=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),t.closePath()),new e.BoundingBox(n-a,i-a,n+a,i+a)}},e.Element.circle.prototype=new e.Element.PathElementBase,e.Element.ellipse=function(t){this.base=e.Element.PathElementBase,this.base(t),this.path=function(t){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y"),r=this.attribute("cx").toPixels("x"),s=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(r,s-a),t.bezierCurveTo(r+n*i,s-a,r+i,s-n*a,r+i,s),t.bezierCurveTo(r+i,s+n*a,r+n*i,s+a,r,s+a),t.bezierCurveTo(r-n*i,s+a,r-i,s+n*a,r-i,s),t.bezierCurveTo(r-i,s-n*a,r-n*i,s-a,r,s-a),t.closePath()),new e.BoundingBox(r-i,s-a,r+i,s+a)}},e.Element.ellipse.prototype=new e.Element.PathElementBase,e.Element.line=function(t){this.base=e.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var n=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y)),new e.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},e.Element.line.prototype=new e.Element.PathElementBase,e.Element.polyline=function(t){this.base=e.Element.PathElementBase,this.base(t),this.points=e.CreatePath(this.attribute("points").value),this.path=function(t){var n=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},e.Element.polyline.prototype=new e.Element.PathElementBase,e.Element.polygon=function(t){this.base=e.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},e.Element.polygon.prototype=new e.Element.polyline,e.Element.path=function(t){this.base=e.Element.PathElementBase,this.base(t);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=e.compressSpaces(n),n=e.trim(n),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new e.Point(0,0),this.control=new e.Point(0,0),this.current=new e.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var t=new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(t){var n=this.PathParser;n.reset();var i=new e.BoundingBox;for(null!=t&&t.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var a=n.getAsCurrentPoint();for(n.addMarker(a),i.addPoint(a.x,a.y),null!=t&&t.moveTo(a.x,a.y),n.start=n.current;!n.isCommandOrEnd();){var a=n.getAsCurrentPoint();n.addMarker(a,n.start),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var r=n.current,a=n.getAsCurrentPoint();n.addMarker(a,r),i.addPoint(a.x,a.y),null!=t&&t.lineTo(a.x,a.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var s=new e.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var s=new e.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(s,n.current),n.current=s,i.addPoint(n.current.x,n.current.y),null!=t&&t.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(o.x,o.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var o=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(o.x,o.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var o=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,c.x,c.y),null!=t&&t.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var o=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(o.x,o.y,u.x,u.y,c.x,c.y),null!=t&&t.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var o=n.current,d=n.getScalar(),h=n.getScalar(),p=n.getScalar()*(Math.PI/180),f=n.getScalar(),g=n.getScalar(),c=n.getAsCurrentPoint(),m=new e.Point(Math.cos(p)*(o.x-c.x)/2+Math.sin(p)*(o.y-c.y)/2,-Math.sin(p)*(o.x-c.x)/2+Math.cos(p)*(o.y-c.y)/2),v=Math.pow(m.x,2)/Math.pow(d,2)+Math.pow(m.y,2)/Math.pow(h,2);v>1&&(d*=Math.sqrt(v),h*=Math.sqrt(v));var y=(f==g?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(h,2)-Math.pow(d,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(d,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));isNaN(y)&&(y=0);var b=new e.Point(y*d*m.y/h,y*-h*m.x/d),x=new e.Point((o.x+c.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(o.y+c.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},C=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},D=C([1,0],[(m.x-b.x)/d,(m.y-b.y)/h]),_=[(m.x-b.x)/d,(m.y-b.y)/h],S=[(-m.x-b.x)/d,(-m.y-b.y)/h],T=C(_,S);k(_,S)<=-1&&(T=Math.PI),k(_,S)>=1&&(T=0);var A=1-g?1:-1,M=D+A*(T/2),E=new e.Point(x.x+d*Math.cos(M),x.y+h*Math.sin(M));if(n.addMarkerAngle(E,M-A*Math.PI/2),n.addMarkerAngle(c,M-A*Math.PI),i.addPoint(c.x,c.y),null!=t){var k=d>h?d:h,P=d>h?1:d/h,I=d>h?h/d:1;t.translate(x.x,x.y),t.rotate(p),t.scale(P,I),t.arc(0,0,k,D,D+T,1-g),t.scale(1/P,1/I),t.rotate(-p),t.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=t&&t.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},e.Element.path.prototype=new e.Element.PathElementBase,e.Element.pattern=function(t){this.base=e.Element.ElementBase,this.base(t),this.createPattern=function(t){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new e.Property("width",n+"px"),a.attributes.height=new e.Property("height",i+"px"),a.attributes.transform=new e.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var r=document.createElement("canvas");r.width=n,r.height=i;var s=r.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&s.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var o=-1;1>=o;o++)for(var l=-1;1>=l;l++)s.save(),s.translate(o*r.width,l*r.height),a.render(s),s.restore();var u=t.createPattern(r,"repeat");return u}},e.Element.pattern.prototype=new e.Element.ElementBase,e.Element.marker=function(t){this.base=e.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,n,i){t.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var a=new e.Element.svg;a.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value),a.attributes.refX=new e.Property("refX",this.attribute("refX").value),a.attributes.refY=new e.Property("refY",this.attribute("refY").value),a.attributes.width=new e.Property("width",this.attribute("markerWidth").value),a.attributes.height=new e.Property("height",this.attribute("markerHeight").value),a.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black")),a.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none")),a.children=this.children,a.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-n.x,-n.y)}},e.Element.marker.prototype=new e.Element.ElementBase,e.Element.defs=function(t){this.base=e.Element.ElementBase,this.base(t),this.render=function(){}},e.Element.defs.prototype=new e.Element.ElementBase,e.Element.GradientBase=function(t){this.base=e.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(t,n,i){var a=this;this.getHrefAttribute().hasValue()&&(a=this.getHrefAttribute().getDefinition());var r=function(t){if(i.hasValue()){var n=new e.Property("color",t);return n.addOpacity(i).value}return t},s=this.getGradient(t,n);if(null==s)return r(a.stops[a.stops.length-1].color);for(var o=0;o<a.stops.length;o++)s.addColorStop(a.stops[o].offset,r(a.stops[o].color));if(this.attribute("gradientTransform").hasValue()){var l=e.ViewPort.viewPorts[0],u=new e.Element.rect;u.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),u.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS);var c=new e.Element.g;c.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var d=new e.Element.svg;d.attributes.x=new e.Property("x",0),d.attributes.y=new e.Property("y",0),d.attributes.width=new e.Property("width",l.width),d.attributes.height=new e.Property("height",l.height),d.children=[c];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;
var p=h.getContext("2d");return p.fillStyle=s,d.render(p),p.createPattern(h,"no-repeat")}return s}},e.Element.GradientBase.prototype=new e.Element.ElementBase,e.Element.linearGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n="objectBoundingBox"==this.gradientUnits?e.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==r&&a==s?null:t.createLinearGradient(i,a,r,s)}},e.Element.linearGradient.prototype=new e.Element.GradientBase,e.Element.radialGradient=function(t){this.base=e.Element.GradientBase,this.base(t),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),a="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),r=i,s=a;this.attribute("fx").hasValue()&&(r="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(s="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var o="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(r,s,0,i,a,o)}},e.Element.radialGradient.prototype=new e.Element.GradientBase,e.Element.stop=function(t){this.base=e.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity"))),this.color=n.value},e.Element.stop.prototype=new e.Element.ElementBase,e.Element.AnimateBase=function(t){this.base=e.Element.ElementBase,this.base(t),e.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=t.progress*(this.values.value.length-1),i=Math.floor(n),a=Math.ceil(n);t.from=new e.Property("from",parseFloat(this.values.value[i])),t.to=new e.Property("to",parseFloat(this.values.value[a])),t.progress=(n-i)/(a-i)}else t.from=this.from,t.to=this.to;return t}},e.Element.AnimateBase.prototype=new e.Element.ElementBase,e.Element.animate=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},e.Element.animate.prototype=new e.Element.AnimateBase,e.Element.animateColor=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,a=e.g+(n.g-e.g)*t.progress,r=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(a,10)+","+parseInt(r,10)+")"}return this.attribute("from").value}},e.Element.animateColor.prototype=new e.Element.AnimateBase,e.Element.animateTransform=function(t){this.base=e.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),n=e.ToNumberArray(t.from.value),i=e.ToNumberArray(t.to.value),a="",r=0;r<n.length;r++)a+=n[r]+(i[r]-n[r])*t.progress+" ";return a}},e.Element.animateTransform.prototype=new e.Element.animate,e.Element.font=function(t){this.base=e.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(e.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},e.Element.font.prototype=new e.Element.ElementBase,e.Element.fontface=function(t){this.base=e.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},e.Element.fontface.prototype=new e.Element.ElementBase,e.Element.missingglyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=0},e.Element.missingglyph.prototype=new e.Element.path,e.Element.glyph=function(t){this.base=e.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},e.Element.glyph.prototype=new e.Element.path,e.Element.text=function(t){this.captureTextNodes=!0,this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(t,n-i,t+Math.floor(2*i/3)*this.children[0].getText().length,n)},this.renderChildren=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(t,this,0);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.getAnchorDelta=function(t,e,n){var i=this.style("text-anchor").valueOrDefault("start");if("start"!=i){for(var a=0,r=n;r<e.children.length;r++){var s=e.children[r];if(r>n&&s.attribute("x").hasValue())break;a+=s.measureTextRecursive(t)}return-1*("end"==i?a:a/2)}return 0},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?(i.x=i.attribute("x").toPixels("x")+this.getAnchorDelta(t,e,n),i.attribute("dx").hasValue()&&(i.x+=i.attribute("dx").toPixels("x"))):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x),this.x=i.x+i.measureText(t),i.attribute("y").hasValue()?(i.y=i.attribute("y").toPixels("y"),i.attribute("dy").hasValue()&&(i.y+=i.attribute("dy").toPixels("y"))):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},e.Element.text.prototype=new e.Element.RenderedElementBase,e.Element.TextElementBase=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,n){var i=e[n],a=null;if(t.isArabic){var r="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(r="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(r="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(r="initial"),"undefined"!=typeof t.glyphs[i]&&(a=t.glyphs[i][r],null==a&&"glyph"==t.glyphs[i].type&&(a=t.glyphs[i]))}else a=t.glyphs[i];return null==a&&(a=t.missingGlyph),a},this.renderChildren=function(t){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=t.fillStyle&&t.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(e.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var l=this.getGlyph(n,r,o),u=i/n.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(u,-u);var c=t.lineWidth;t.lineWidth=t.lineWidth*n.fontFace.unitsPerEm/i,"italic"==a&&t.transform(1,0,.4,1,0,0),l.render(t),"italic"==a&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(this.x+=s[o])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),n=0;n<this.children.length;n++)e+=this.children[n].measureTextRecursive(t);return e},this.measureText=function(t){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),a=0,r=this.getText();n.isRTL&&(r=r.split("").reverse().join(""));for(var s=e.ToNumberArray(this.parent.attribute("dx").value),o=0;o<r.length;o++){var l=this.getGlyph(n,r,o);a+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof s[o]||isNaN(s[o])||(a+=s[o])}return a}var u=e.compressSpaces(this.getText());if(!t.measureText)return 10*u.length;t.save(),this.setContext(t);var c=t.measureText(u).width;return t.restore(),c}},e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase,e.Element.tspan=function(t){this.captureTextNodes=!0,this.base=e.Element.TextElementBase,this.base(t),this.text=t.nodeValue||t.text||"",this.getText=function(){return this.text}},e.Element.tspan.prototype=new e.Element.TextElementBase,e.Element.tref=function(t){this.base=e.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},e.Element.tref.prototype=new e.Element.TextElementBase,e.Element.a=function(t){this.base=e.Element.TextElementBase,this.base(t),this.hasText=!0;for(var n=0;n<t.childNodes.length;n++)3!=t.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var n=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,new e.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(t),this.y))}else{var i=new e.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}},e.Element.a.prototype=new e.Element.TextElementBase,e.Element.image=function(t){this.base=e.Element.RenderedElementBase,this.base(t);var n=this.getHrefAttribute().value;if(""!=n){var i=n.match(/\.svg$/);if(e.Images.push(this),this.loaded=!1,i)this.img=e.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var a=this;this.img.onload=function(){a.loaded=!0},this.img.onerror=function(){e.log('ERROR: image "'+n+'" not found'),a.loaded=!0},this.img.src=n}this.renderChildren=function(t){var n=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");0!=r&&0!=s&&(t.save(),i?t.drawSvg(this.img,n,a,r,s):(t.translate(n,a),e.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,s,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y");return new e.BoundingBox(t,n,t+i,n+a)}}},e.Element.image.prototype=new e.Element.RenderedElementBase,e.Element.g=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(){for(var t=new e.BoundingBox,n=0;n<this.children.length;n++)t.addBoundingBox(this.children[n].getBoundingBox());return t}},e.Element.g.prototype=new e.Element.RenderedElementBase,e.Element.symbol=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.render=function(){}},e.Element.symbol.prototype=new e.Element.RenderedElementBase,e.Element.style=function(t){this.base=e.Element.ElementBase,this.base(t);for(var n="",i=0;i<t.childNodes.length;i++)n+=t.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=e.compressSpaces(n);for(var a=n.split("}"),i=0;i<a.length;i++)if(""!=e.trim(a[i]))for(var r=a[i].split("{"),s=r[0].split(","),o=r[1].split(";"),l=0;l<s.length;l++){var u=e.trim(s[l]);if(""!=u){for(var c={},d=0;d<o.length;d++){var h=o[d].indexOf(":"),p=o[d].substr(0,h),f=o[d].substr(h+1,o[d].length-h);null!=p&&null!=f&&(c[e.trim(p)]=new e.Property(e.trim(p),e.trim(f)))}if(e.Styles[u]=c,"@font-face"==u)for(var g=c["font-family"].value.replace(/"/g,""),m=c.src.value.split(","),v=0;v<m.length;v++)if(m[v].indexOf('format("svg")')>0)for(var y=m[v].indexOf("url"),b=m[v].indexOf(")",y),x=m[v].substr(y+5,b-y-6),w=e.parseXml(e.ajax(x)),k=w.getElementsByTagName("font"),C=0;C<k.length;C++){var D=e.CreateElement(k[C]);e.Definitions[g]=D}}}},e.Element.style.prototype=new e.Element.ElementBase,e.Element.use=function(t){this.base=e.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var n=this.getHrefAttribute().getDefinition();this.path=function(t){null!=n&&n.path(t)},this.getBoundingBox=function(){return null!=n?n.getBoundingBox():void 0},this.renderChildren=function(t){if(null!=n){var i=n;"symbol"==n.type&&(i=new e.Element.svg,i.type="svg",i.attributes.viewBox=new e.Property("viewBox",n.attribute("viewBox").value),i.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",n.attribute("preserveAspectRatio").value),i.attributes.overflow=new e.Property("overflow",n.attribute("overflow").value),i.children=n.children),"svg"==i.type&&(this.attribute("width").hasValue()&&(i.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(i.attributes.height=new e.Property("height",this.attribute("height").value)));var a=i.parent;i.parent=null,i.render(t),i.parent=a}}},e.Element.use.prototype=new e.Element.RenderedElementBase,e.Element.mask=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,n){var i=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y");if(0==r&&0==s){for(var o=new e.BoundingBox,l=0;l<this.children.length;l++)o.addBoundingBox(this.children[l].getBoundingBox());var i=Math.floor(o.x1),a=Math.floor(o.y1),r=Math.floor(o.width()),s=Math.floor(o.height())}var u=n.attribute("mask").value;n.attribute("mask").value="";var c=document.createElement("canvas");c.width=i+r,c.height=a+s;var d=c.getContext("2d");this.renderChildren(d);var h=document.createElement("canvas");h.width=i+r,h.height=a+s;var p=h.getContext("2d");n.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=d.createPattern(c,"no-repeat"),p.fillRect(0,0,i+r,a+s),t.fillStyle=p.createPattern(h,"no-repeat"),t.fillRect(0,0,i+r,a+s),n.attribute("mask").value=u},this.render=function(){}},e.Element.mask.prototype=new e.Element.ElementBase,e.Element.clipPath=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t){var n=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var i=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){},n.call(t);for(var a=0;a<this.children.length;a++){var r=this.children[a];if("undefined"!=typeof r.path){var s=null;r.attribute("transform").hasValue()&&(s=new e.Transform(r.attribute("transform").value),s.apply(t)),r.path(t),CanvasRenderingContext2D.prototype.closePath=i,s&&s.unapply(t)}}i.call(t),t.clip(),CanvasRenderingContext2D.prototype.beginPath=n,CanvasRenderingContext2D.prototype.closePath=i},this.render=function(){}},e.Element.clipPath.prototype=new e.Element.ElementBase,e.Element.filter=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),a=Math.floor(n.y1),r=Math.floor(n.width()),s=Math.floor(n.height()),o=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var d=this.children[c].extraFilterDistance||0;l=Math.max(l,d),u=Math.max(u,d)}var h=document.createElement("canvas");h.width=r+2*l,h.height=s+2*u;var p=h.getContext("2d");p.translate(-i+l,-a+u),e.render(p);for(var c=0;c<this.children.length;c++)this.children[c].apply(p,0,0,r+2*l,s+2*u);t.drawImage(h,0,0,r+2*l,s+2*u,i-l,a-u,r+2*l,s+2*u),e.style("filter",!0).value=o},this.render=function(){}},e.Element.filter.prototype=new e.Element.ElementBase,e.Element.feMorphology=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(){}},e.Element.feMorphology.prototype=new e.Element.ElementBase,e.Element.feComposite=function(t){this.base=e.Element.ElementBase,this.base(t),this.apply=function(){}},e.Element.feComposite.prototype=new e.Element.ElementBase,e.Element.feColorMatrix=function(t){function n(t,e,n,i,a,r){return t[n*i*4+4*e+r]}function i(t,e,n,i,a,r,s){t[n*i*4+4*e+r]=s}function a(t,e){var n=r[t];return n*(0>n?e-255:e)}this.base=e.Element.ElementBase,this.base(t);var r=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var s=r[0];r=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=r[0]*Math.PI/180,l=function(t,e,n){return t+Math.cos(o)*e+Math.sin(o)*n};r=[l(.213,.787,-.213),l(.715,-.715,-.715),l(.072,-.072,.928),0,0,l(.213,-.213,.143),l(.715,.285,.14),l(.072,-.072,-.283),0,0,l(.213,-.213,-.787),l(.715,-.715,.715),l(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(t,e,r,s,o){for(var l=t.getImageData(0,0,s,o),r=0;o>r;r++)for(var e=0;s>e;e++){var u=n(l.data,e,r,s,o,0),c=n(l.data,e,r,s,o,1),d=n(l.data,e,r,s,o,2),h=n(l.data,e,r,s,o,3);i(l.data,e,r,s,o,0,a(0,u)+a(1,c)+a(2,d)+a(3,h)+a(4,1)),i(l.data,e,r,s,o,1,a(5,u)+a(6,c)+a(7,d)+a(8,h)+a(9,1)),i(l.data,e,r,s,o,2,a(10,u)+a(11,c)+a(12,d)+a(13,h)+a(14,1)),i(l.data,e,r,s,o,3,a(15,u)+a(16,c)+a(17,d)+a(18,h)+a(19,1))}t.clearRect(0,0,s,o),t.putImageData(l,0,0)}},e.Element.feColorMatrix.prototype=new e.Element.ElementBase,e.Element.feGaussianBlur=function(t){this.base=e.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,n,i,a,r){return"undefined"==typeof stackBlurCanvasRGBA?void e.log("ERROR: StackBlur.js must be included for blur to work"):(t.canvas.id=e.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),stackBlurCanvasRGBA(t.canvas.id,n,i,a,r,this.blurRadius),void document.body.removeChild(t.canvas))}},e.Element.feGaussianBlur.prototype=new e.Element.ElementBase,e.Element.title=function(){},e.Element.title.prototype=new e.Element.ElementBase,e.Element.desc=function(){},e.Element.desc.prototype=new e.Element.ElementBase,e.Element.MISSING=function(t){e.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},e.Element.MISSING.prototype=new e.Element.ElementBase,e.CreateElement=function(t){var n=t.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return i="undefined"!=typeof e.Element[n]?new e.Element[n](t):new e.Element.MISSING(t),i.type=t.nodeName,i},e.load=function(t,n){e.loadXml(t,e.ajax(n))},e.loadXml=function(t,n){e.loadXmlDoc(t,e.parseXml(n))},e.loadXmlDoc=function(t,n){e.init(t);var i=function(e){for(var n=t.canvas;n;)e.x-=n.offsetLeft,e.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(e.x+=window.scrollX),window.scrollY&&(e.y+=window.scrollY),e};1!=e.opts.ignoreMouse&&(t.canvas.onclick=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onclick(n.x,n.y)},t.canvas.onmousemove=function(t){var n=i(new e.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));e.Mouse.onmousemove(n.x,n.y)});var a=e.CreateElement(n.documentElement);a.root=!0;var r=!0,s=function(){e.ViewPort.Clear(),t.canvas.parentNode&&e.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=e.opts.ignoreDimensions&&(a.style("width").hasValue()&&(t.canvas.width=a.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),a.style("height").hasValue()&&(t.canvas.height=a.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px"));var i=t.canvas.clientWidth||t.canvas.width,s=t.canvas.clientHeight||t.canvas.height;if(1==e.opts.ignoreDimensions&&a.style("width").hasValue()&&a.style("height").hasValue()&&(i=a.style("width").toPixels("x"),s=a.style("height").toPixels("y")),e.ViewPort.SetCurrent(i,s),null!=e.opts.offsetX&&(a.attribute("x",!0).value=e.opts.offsetX),null!=e.opts.offsetY&&(a.attribute("y",!0).value=e.opts.offsetY),null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var o=null,l=null,u=e.ToNumberArray(a.attribute("viewBox").value);null!=e.opts.scaleWidth&&(a.attribute("width").hasValue()?o=a.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(u[2])||(o=u[2]/e.opts.scaleWidth)),null!=e.opts.scaleHeight&&(a.attribute("height").hasValue()?l=a.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(u[3])||(l=u[3]/e.opts.scaleHeight)),null==o&&(o=l),null==l&&(l=o),a.attribute("width",!0).value=e.opts.scaleWidth,a.attribute("height",!0).value=e.opts.scaleHeight,a.attribute("transform",!0).value+=" scale("+1/o+","+1/l+")"}1!=e.opts.ignoreClear&&t.clearRect(0,0,i,s),a.render(t),r&&(r=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(n))},o=!0;e.ImagesLoaded()&&(o=!1,s()),e.intervalID=setInterval(function(){var t=!1;if(o&&e.ImagesLoaded()&&(o=!1,t=!0),1!=e.opts.ignoreMouse&&(t|=e.Mouse.hasEvents()),1!=e.opts.ignoreAnimation)for(var n=0;n<e.Animations.length;n++)t|=e.Animations[n].update(1e3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(t=!0),t&&(s(),e.Mouse.runEvents())},1e3/e.FRAMERATE)},e.stop=function(){e.intervalID&&clearInterval(e.intervalID)},e.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var n=this.events[t],i=this.eventElements[t];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},e}this.canvg=function(e,n,i){if(null!=e||null!=n||null!=i){"string"==typeof e&&(e=document.getElementById(e)),null!=e.svg&&e.svg.stop();var a=t(i||{});(1!=e.childNodes.length||"OBJECT"!=e.childNodes[0].nodeName)&&(e.svg=a);var r=e.getContext("2d");"undefined"!=typeof n.documentElement?a.loadXmlDoc(r,n):"<"==n.substr(0,1)?a.loadXml(r,n):a.load(r,n)}else for(var s=document.querySelectorAll("svg"),o=0;o<s.length;o++){var l=s[o],u=document.createElement("canvas");u.width=l.clientWidth,u.height=l.clientHeight,l.parentNode.insertBefore(u,l),l.parentNode.removeChild(l);var c=document.createElement("div");c.appendChild(l),canvg(u,c.innerHTML)}}}(),"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,n,i,a){canvg(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:n,scaleWidth:i,scaleHeight:a})})},{}],38:[function(t,e){function n(t){this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in e)t==i&&(t=e[i]);for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<a.length;r++){var s=a[r].re,o=a[r].process,l=s.exec(t);l&&(channels=o(l),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<a.length;i++)for(var r=a[i].example,s=0;s<r.length;s++)t[t.length]=r[s];for(var o in e)t[t.length]=o;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(var i=0;i<t.length;i++)try{var u=document.createElement("li"),c=new n(t[i]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),d.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[i]+" -> "+c.toRGB()+" -> "+c.toHex());u.appendChild(d),u.appendChild(h),l.appendChild(u)}catch(p){}return l}}e.exports=n},{}],39:[function(t){var e=t("underscore");e.mixin({transpose:function(t){return e.zip.apply(e,t)}})},{underscore:"underscore"}],40:[function(t,e){function n(t,e){return function(){var n=t.apply(null,arguments);return e.apply(null,n)}}function i(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function a(t,e,n){return void 0===n?t.getAttribute("data-"+i(e)):void t.setAttribute("data-"+i(e),n)}var r=t("d3-browserify"),s=function(t){var e=r.format("."+(t||3)+"s");return function(t){return e(t).replace("G","B")}},o=function(t){var e=1;return function(n){return n.length-e>t&&(n=n.slice(0,t-e)+"..."),n}},l=function(t){var e=r.scale["category"+(t>10?"20":"10")]().range();return function(t,n){return t.color||t.data&&t.data.color||e[n%e.length]
}},u=function(t){var e,n=String.fromCharCode(255)+String.fromCharCode(254);return n+=Array.prototype.reduce.call(t,function(t,n){return e=n.charCodeAt(0),t+String.fromCharCode(255&e)+String.fromCharCode(e>>8)},""),btoa(n)},c=function(t){return"data:text/plain;base64,"+u(t)};e.exports={formatKMB:s,formatShortText:o,categoryColours:l,u16le64:u,textAsDataURL:c,transformArgs:n,data:a}},{"d3-browserify":"d3-browserify"}],41:[function(t,e){!function(t){function n(t,e){var n=s(e),i=new a(n),r=i.parse(t);return l(n.complete)&&n.complete(r),r}function i(t,e){function n(){"object"==typeof e&&("string"==typeof e.delimiter&&1==e.delimiter.length&&-1==c.BAD_DELIMITERS.indexOf(e.delimiter)&&(l=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(o=e.quotes),"string"==typeof e.newline&&(u=e.newline))}function i(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function a(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var i=t instanceof Array&&t.length>0,a=!(e[0]instanceof Array);if(i){for(var s=0;s<t.length;s++)s>0&&(n+=l),n+=r(t[s],s);e.length>0&&(n+=u)}for(var o=0;o<e.length;o++){for(var c=i?t.length:e[o].length,d=0;c>d;d++){d>0&&(n+=l);var h=i&&a?t[d]:d;n+=r(e[o][h],d)}o<e.length-1&&(n+=u)}return n}function r(t,e){if("undefined"==typeof t)return"";t=t.toString().replace(/"/g,'""');var n="boolean"==typeof o&&o||o instanceof Array&&o[e]||s(t,c.BAD_DELIMITERS)||t.indexOf(l)>-1||" "==t.charAt(0)||" "==t.charAt(t.length-1);return n?'"'+t+'"':t}function s(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}var o=!1,l=",",u="\r\n";if(n(),"string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return a(null,t);if("object"==typeof t[0])return a(i(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.data[0]instanceof Array?t.fields:i(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),a(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"}function a(t){function e(){return g&&h&&(d("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to comma"),h=!1),n()&&i(),a()}function n(){return t.header&&0==f.length}function i(){if(g){for(var t=0;n()&&t<g.data.length;t++)for(var e=0;e<g.data[t].length;e++)f.push(g.data[t][e]);g.data.splice(0,1)}}function a(){if(!g||!t.header&&!t.dynamicTyping)return g;for(var e=0;e<g.data.length;e++){for(var n={},i=0;i<g.data[e].length;i++){if(t.dynamicTyping){var a=g.data[e][i];g.data[e][i]="true"==a?!0:"false"==a?!1:u(a)}t.header&&(i>=f.length&&(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(g.data[e][i])),n[f[i]]=g.data[e][i])}t.header&&(g.data[e]=n,i>f.length?d("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+i,e):i<f.length&&d("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+i,e))}return t.header&&g.meta,g.meta.fields=f,g}function s(e){for(var n,i,a,s=[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP],o=0;o<s.length;o++){var l=s[o],u=0,d=0;a=void 0;for(var h=new r({delimiter:l,preview:10}).parse(e),p=0;p<h.data.length;p++){var f=h.data[p].length;d+=f,"undefined"!=typeof a?f>1&&(u+=Math.abs(f-a),a=f):a=f}d/=h.data.length,("undefined"==typeof i||i>u)&&d>1.99&&(i=u,n=l)}return t.delimiter=n,{successful:!!n,bestDelimiter:n}}function u(t){var e=p.test(t);return e?parseFloat(t):t}function d(t,e,n,i){g.errors.push({type:t,code:e,message:n,row:i})}var h,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,f=[],g={data:[],errors:[],meta:{}};t=o(t),this.parse=function(i){if(h=!1,!t.delimiter){var a=s(i);a.successful?t.delimiter=a.bestDelimiter:(h=!0,t.delimiter=","),g.meta.delimiter=t.delimiter}if(l(t.step)){var o=t.step;t.step=function(t,i){g=t,n()?e():o(e(),i)}}return g=new r(t).parse(i),e()}}function r(t){function e(){for(;P<_.length&&!V&&!(M>0&&R>=M);){if(W)return i();'"'==E?a():I?r():s(),n()}return i()}function n(){P++,E=_[P]}function i(){return V&&w("Abort","ParseAbort","Parsing was aborted by the user's step function"),I&&w("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),l(A)?void 0:D()}function a(){b()&&!y()?I=!I:(d(),I&&y()?P++:w("Quotes","UnexpectedQuotes","Unexpected quotes"))}function r(){(m(P)||v(P))&&N++,d()}function s(){E==S?h():m(P)?(p(),n()):v(P)?p():o()?u():d()}function o(){if(!T)return!1;var t=0==P||v(P-1)||m(P-2);return t&&_[P]===T}function u(){for(;!m(P)&&!v(P)&&P<_.length;)n()}function d(){F[L][O]+=E}function h(){F[L].push(""),O=F[L].length-1}function p(){f(),N++,R++,F.push([]),L=F.length-1,h()}function f(){g(),l(A)&&(F[L]&&A(D(),z),C())}function g(){1==F[L].length&&$.test(F[L][0])&&(t.keepEmptyRows?F[L].splice(0,1):F.splice(L,1),L=F.length-1)}function m(t){return t<_.length-1&&("\r"==_[t]&&"\n"==_[t+1]||"\n"==_[t]&&"\r"==_[t+1])}function v(t){return"\r"==_[t]||"\n"==_[t]}function y(){return!b()&&P<_.length-1&&'"'==_[P+1]}function b(){return!I&&x(P-1)||x(P+1)}function x(t){"number"!=typeof t&&(t=P);var e=_[t];return-1>=t||t>=_.length||e==S||"\r"==e||"\n"==e}function w(t,e,n){B.push({type:t,code:e,message:n,line:N,row:L,index:P})}function k(t){_=t,I=!1,P=0,R=0,N=1,C(),F=[[""]],E=_[P]}function C(){F=[],B=[],L=0,O=0}function D(){return{data:F,errors:B,meta:{lines:N,delimiter:S,aborted:V}}}var _,S,T,A,M,E,P,I,N,F,B,L,O,R,z=this,$=/^\s*$/,V=!1,W=!1;t=t||{},S=t.delimiter,T=t.comments,A=t.step,M=t.preview,("string"!=typeof S||1!=S.length||c.BAD_DELIMITERS.indexOf(S)>-1)&&(S=","),T===!0?T="#":("string"!=typeof T||1!=T.length||c.BAD_DELIMITERS.indexOf(T)>-1||T==S)&&(T=!1),this.parse=function(t){if("string"!=typeof t)throw"Input must be a string";return k(t),e()},this.abort=function(){V=!0}}function s(t){"object"!=typeof t&&(t={});var e=o(t);return("string"!=typeof e.delimiter||1!=e.delimiter.length||c.BAD_DELIMITERS.indexOf(e.delimiter)>-1)&&(e.delimiter=u.delimiter),"boolean"!=typeof e.header&&(e.header=u.header),"boolean"!=typeof e.dynamicTyping&&(e.dynamicTyping=u.dynamicTyping),"number"!=typeof e.preview&&(e.preview=u.preview),"function"!=typeof e.step&&(e.step=u.step),"function"!=typeof e.complete&&(e.complete=u.complete),"boolean"!=typeof e.keepEmptyRows&&(e.keepEmptyRows=u.keepEmptyRows),e}function o(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=o(t[n]);return e}function l(t){return"function"==typeof t}var u={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,comments:!1,complete:void 0,keepEmptyRows:!1},c={};c.parse=n,c.unparse=i,c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="﻿",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],"undefined"!=typeof e&&e.exports?e.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t.Baby=c}("undefined"!=typeof window?window:this)},{}],42:[function(t){(function(e){e.d3=t("d3-browserify"),t("./nv.d3.js")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./nv.d3.js":43,"d3-browserify":"d3-browserify"}],43:[function(){!function(){function t(t,e){return new Date(e,t+1,0).getDate()}function e(t,e,n){return function(i,a,r){var s=t(i),o=[];if(i>s&&e(s),r>1)for(;a>s;){var l=new Date(+s);n(l)%r===0&&o.push(l),e(s)}else for(;a>s;)o.push(new Date(+s)),e(s);return o}}var n=window.nv||{};n.version="1.1.15b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev&&(n.dispatch.on("render_start",function(){n.logs.startTime=+new Date}),n.dispatch.on("render_end",function(){n.logs.endTime=+new Date,n.logs.totalTime=n.logs.endTime-n.logs.startTime,n.log("total",n.logs.totalTime)})),n.log=function(){if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},n.render=function(t){t=t||1,n.render.active=!0,n.dispatch.render_start(),setTimeout(function(){for(var e,i,a=0;t>a&&(i=n.render.queue[a]);a++)e=i.generate(),typeof i.callback==typeof Function&&i.callback(e),n.graphs.push(e);n.render.queue.splice(0,a),n.render.queue.length?setTimeout(arguments.callee,0):(n.dispatch.render_end(),n.render.active=!1)},0)},n.render.active=!1,n.render.queue=[],n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),n.render.queue.push(t),n.render.active||n.render()},n.identity=function(t){return t},n.strip=function(t){return t.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(t){return new Date(t.getFullYear(),t.getMonth(),0)},d3.time.monthEnds=e(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(t){return t.getMonth()}),n.interactiveGuideline=function(){"use strict";function t(d){d.each(function(d){function h(){var n=d3.mouse(this),i=n[0],a=n[1],l=!0,u=!1;if(c&&(i=d3.event.offsetX,a=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),l&&(i-=r.left,a-=r.top),0>i||0>a||i>f||a>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(e.nvPointerEventsClass))return;return o.elementMouseout({mouseX:i,mouseY:a}),void t.renderGuideLine(null)}var d=s.invert(i);o.elementMousemove({mouseX:i,mouseY:a,pointXValue:d}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:i,mouseY:a,pointXValue:d})}var p=d3.select(this),f=i||960,g=a||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]),v=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("mousemove",h,!0).on("mouseout",h,!0).on("dblclick",h),t.renderGuideLine=function(t){if(l){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[n.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}})})}var e=n.models.tooltip(),i=null,a=null,r={left:0,top:0},s=d3.scale.linear(),o=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),l=!0,u=null,c=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=o,t.tooltip=e,t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.xScale=function(e){return arguments.length?(s=e,t):s},t.showGuideLine=function(e){return arguments.length?(l=e,t):l},t.svgContainer=function(e){return arguments.length?(u=e,t):u},t},n.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t){return t.x});var i=d3.bisector(n).left,a=d3.max([0,i(t,e)-1]),r=n(t[a],a);if("undefined"==typeof r&&(r=a),r===e)return a;var s=d3.min([a+1,t.length-1]),o=n(t[s],s);return"undefined"==typeof o&&(o=s),Math.abs(o-e)>=Math.abs(r-e)?a:s},n.nearestValueIndex=function(t,e,n){"use strict";var i=1/0,a=null;return t.forEach(function(t,r){var s=Math.abs(e-t);i>=s&&n>s&&(i=s,a=r)}),a},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(d){var t=d3.select(d);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];p.left=p.left*n,p.top=p.top*n}}}function e(t){var e;e=d3.select(d?d:"body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(c?c:"xy-tooltip")).attr("id",g)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(m,!0),n.classed(m,!0),n.node()}function i(){if(f&&x(r)){t();var a=p.left,c=null!=u?u:p.top,g=e(b(r));if(h=g,d){var m=d.getElementsByTagName("svg")[0],v=(m?m.getBoundingClientRect():d.getBoundingClientRect(),{left:0,top:0});if(m){var y=m.getBoundingClientRect(),w=d.getBoundingClientRect(),k=y.top;if(0>k){var C=d.getBoundingClientRect();k=Math.abs(k)>C.height?0:k}v.top=Math.abs(k-w.top),v.left=Math.abs(y.left-w.left)}a+=d.offsetLeft+v.left-2*d.scrollLeft,c+=d.offsetTop+v.top-2*d.scrollTop}return l&&l>0&&(c=Math.floor(c/l)*l),n.tooltip.calcTooltipPosition([a,c],s,o,g),i}}var a=null,r=null,s="w",o=50,l=25,u=null,c=null,d=null,h=null,p={left:null,top:null},f=!0,g="nvtooltip-"+Math.floor(1e5*Math.random()),m="nv-pointer-events-none",v=function(t){return t},y=function(t){return t},b=function(t){if(null!=a)return a;if(null==t)return"";var e=d3.select(document.createElement("table")),n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value));var i=e.selectAll("tbody").data([t]).enter().append("tbody"),r=i.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).html(function(t){return t.key}),r.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var s=e.node().outerHTML;return void 0!==t.footer&&(s+="<div class='footer'>"+t.footer+"</div>"),s},x=function(t){return t&&t.series&&t.series.length>0?!0:!1};return i.nvPointerEventsClass=m,i.content=function(t){return arguments.length?(a=t,i):a},i.tooltipElem=function(){return h},i.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(b=t),i):b},i.data=function(t){return arguments.length?(r=t,i):r},i.gravity=function(t){return arguments.length?(s=t,i):s},i.distance=function(t){return arguments.length?(o=t,i):o},i.snapDistance=function(t){return arguments.length?(l=t,i):l},i.classes=function(t){return arguments.length?(c=t,i):c},i.chartContainer=function(t){return arguments.length?(d=t,i):d},i.position=function(t){return arguments.length?(p.left="undefined"!=typeof t.left?t.left:p.left,p.top="undefined"!=typeof t.top?t.top:p.top,i):p},i.fixedTop=function(t){return arguments.length?(u=t,i):u},i.enabled=function(t){return arguments.length?(f=t,i):f},i.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),i):v},i.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(y=t),i):y},i.id=function(){return g},i},n.tooltip.show=function(t,e,i,a,r,s){var o=document.createElement("div");o.className="nvtooltip "+(s?s:"xy-tooltip");var l=r;(!r||r.tagName.match(/g|svg/i))&&(l=document.getElementsByTagName("body")[0]),o.style.left=0,o.style.top=0,o.style.opacity=0,o.innerHTML=e,l.appendChild(o),r&&(t[0]=t[0]-r.scrollLeft,t[1]=t[1]-r.scrollTop),n.tooltip.calcTooltipPosition(t,i,a,o)},n.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;return t},n.tooltip.findTotalOffsetTop=function(t,e){var n=e;do isNaN(t.offsetTop)||(n+=t.offsetTop);while(t=t.offsetParent);return n},n.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do isNaN(t.offsetLeft)||(n+=t.offsetLeft);while(t=t.offsetParent);return n},n.tooltip.calcTooltipPosition=function(t,e,i,a){var r,s,o=parseInt(a.offsetHeight),l=parseInt(a.offsetWidth),u=n.utils.windowSize().width,c=n.utils.windowSize().height,d=window.pageYOffset,h=window.pageXOffset;c=window.innerWidth>=document.body.scrollWidth?c:c-16,u=window.innerHeight>=document.body.scrollHeight?u:u-16,e=e||"s",i=i||20;var p=function(t){return n.tooltip.findTotalOffsetTop(t,s)},f=function(t){return n.tooltip.findTotalOffsetLeft(t,r)};switch(e){case"e":r=t[0]-l-i,s=t[1]-o/2;var g=f(a),m=p(a);h>g&&(r=t[0]+i>h?t[0]+i:h-g+r),d>m&&(s=d-m+s),m+o>d+c&&(s=d+c-m+s-o);break;case"w":r=t[0]+i,s=t[1]-o/2;var g=f(a),m=p(a);g+l>u&&(r=t[0]-l-i),d>m&&(s=d+5),m+o>d+c&&(s=d+c-m+s-o);break;case"n":r=t[0]-l/2-5,s=t[1]+i;var g=f(a),m=p(a);h>g&&(r=h+5),g+l>u&&(r=r-l/2+5),m+o>d+c&&(s=d+c-m+s-o);break;case"s":r=t[0]-l/2,s=t[1]-o-i;var g=f(a),m=p(a);h>g&&(r=h+5),g+l>u&&(r=r-l/2+5),d>m&&(s=d);break;case"none":r=t[0],s=t[1]-i;var g=f(a),m=p(a)}return a.style.left=r+"px",a.style.top=s+"px",a.style.opacity=1,a.style.position="absolute",a},n.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),n.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},n.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},n.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:n.utils.defaultColor()},n.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},n.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var i=n.length;return function(a){var r=e(a);return i||(i=n.length),"undefined"!=typeof t[r]?"function"==typeof t[r]?t[r]():t[r]:n[--i]}},n.utils.pjax=function(t,e){function i(i){d3.html(i,function(i){var a=d3.select(e).node();a.parentNode.replaceChild(d3.select(i).select(e).node(),a),n.utils.pjax(t,e)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),i(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&i(d3.event.state)})},n.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px","")),n=t.text().length;return n*e*.5}return 0},n.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||1/0===t?0:t},n.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},n.models.axis=function(){"use strict";function t(n){return n.each(function(t){var n=d3.select(this),r=n.selectAll("g.nv-wrap.nv-axis").data([t]),v=r.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(v.append("g"),r.select("g"));null!==f?e.ticks(f):("top"==e.orient()||"bottom"==e.orient())&&e.ticks(Math.abs(s.range()[1]-s.range()[0])/100),y.transition().call(e),m=m||e.scale();var b=e.tickFormat();null==b&&(b=m.tickFormat());var x=y.selectAll("text.nv-axislabel").data([o||null]);switch(x.exit().remove(),e.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",0).attr("x",w/2),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t){return"translate("+s(t)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate("+s.range()[e]+",0)"})}break;case"bottom":var C=36,D=30,_=y.selectAll("g").select("text");if(c%360){_.each(function(){var t=this.getBBox().width;t>D&&(D=t)});var S=Math.abs(Math.sin(c*Math.PI/180)),C=(S?S*D:D)+30;_.attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(x.attr("text-anchor","middle").attr("y",C).attr("x",w/2),l){var k=r.selectAll("g.nv-axisMaxMin").data([s.domain()[0],s.domain()[s.domain().length-1]]);k.enter().append("g").attr("class","nv-axisMaxMin").append("text"),k.exit().remove(),k.attr("transform",function(t){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c?c%360>0?"start":"end":"middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t){return"translate("+(s(t)+(p?s.rangeBand()/2:0))+",0)"})}h&&_.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?-Math.max(i.right,a)+12:-10).attr("x",d?s.range()[0]/2:e.tickPadding()),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t){return"translate(0,"+s(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?-Math.max(i.left,a)+g:-10).attr("x",d?-s.range()[0]/2:-e.tickPadding()),l){var k=r.selectAll("g.nv-axisMaxMin").data(s.domain());k.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t){return"translate(0,"+m(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),k.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}}if(x.text(function(t){return t}),!l||"left"!==e.orient()&&"right"!==e.orient()||(y.selectAll("g").each(function(t){d3.select(this).select("text").attr("opacity",1),(s(t)<s.range()[1]+10||s(t)>s.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),s.domain()[0]==s.domain()[1]&&0==s.domain()[0]&&r.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===e.orient()||"bottom"===e.orient())){var T=[];r.selectAll("g.nv-axisMaxMin").each(function(t,e){try{T.push(e?s(t)-this.getBBox().width-4:s(t)+this.getBBox().width+4)}catch(n){T.push(e?s(t)-4:s(t)+4)}}),y.selectAll("g").each(function(t){(s(t)<T[0]||s(t)>T[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())})}u&&y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),m=s.copy()}),t}var e=d3.svg.axis(),i={top:0,right:0,bottom:0,left:0},a=75,r=60,s=d3.scale.linear(),o=null,l=!0,u=!0,c=0,d=!0,h=!1,p=!1,f=null,g=12;e.scale(s).orient("bottom").tickFormat(function(t){return t});var m;return t.axis=e,d3.rebind(t,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.ticks=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(r=e,t):r},t.axisLabel=function(e){return arguments.length?(o=e,t):o},t.showMaxMin=function(e){return arguments.length?(l=e,t):l},t.highlightZero=function(e){return arguments.length?(u=e,t):u},t.scale=function(n){return arguments.length?(s=n,e.scale(s),p="function"==typeof s.rangeBands,d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t):s},t.rotateYLabel=function(e){return arguments.length?(d=e,t):d},t.rotateLabels=function(e){return arguments.length?(c=e,t):c},t.staggerLabels=function(e){return arguments.length?(h=e,t):h},t.axisLabelDistance=function(e){return arguments.length?(g=e,t):g},t},n.models.historicalBar=function(){"use strict";function t(w){return w.each(function(t){var w=o-s.left-s.right,k=l-s.top-s.bottom,C=d3.select(this);c.domain(e||d3.extent(t[0].values.map(h).concat(f))),c.range(m?a||[.5*w/t[0].values.length,w*(t[0].values.length-.5)/t[0].values.length]:a||[0,w]),d.domain(i||d3.extent(t[0].values.map(p).concat(g))).range(r||[k,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var D=C.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([t[0].values]),_=D.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),S=_.append("defs"),T=_.append("g"),A=D.select("g");T.append("g").attr("class","nv-bars"),D.attr("transform","translate("+s.left+","+s.top+")"),C.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})}),S.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),D.select("#nv-chart-clip-path-"+u+" rect").attr("width",w).attr("height",k),A.attr("clip-path",v?"url(#nv-chart-clip-path-"+u+")":"");var M=D.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});M.exit().remove();M.enter().append("rect").attr("x",0).attr("y",function(t,e){return n.utils.NaNtoZero(d(Math.max(0,p(t,e))))}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.abs(d(p(t,e))-d(0)))}).attr("transform",function(e,n){return"translate("+(c(h(e,n))-w/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,n){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({point:e,series:t[0],pos:[c(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(e,n){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){x&&(b.elementClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())}).on("dblclick",function(t,e){x&&(b.elementDblClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())});M.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).transition().attr("transform",function(e,n){return"translate("+(c(h(e,n))-w/t[0].values.length*.45)+",0)"}).attr("width",w/t[0].values.length*.9),M.transition().attr("y",function(t,e){var i=p(t,e)<0?d(0):d(0)-d(p(t,e))<1?d(0)-1:d(p(t,e));return n.utils.NaNtoZero(i)}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.max(Math.abs(d(p(t,e))-d(0)),1))})}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=[],g=[0],m=!1,v=!0,y=n.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),x=!0;return t.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=b,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceX=function(e){return arguments.length?(f=e,t):f},t.forceY=function(e){return arguments.length?(g=e,t):g},t.padData=function(e){return arguments.length?(m=e,t):m},t.clipEdge=function(e){return arguments.length?(v=e,t):v},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.id=function(e){return arguments.length?(u=e,t):u},t.interactive=function(){return arguments.length?(x=!1,t):x},t},n.models.bullet=function(){"use strict";function t(n){return n.each(function(t,n){{var i=h-e.left-e.right,f=p-e.top-e.bottom,v=d3.select(this),y=r.call(this,t,n).slice().sort(d3.descending),b=s.call(this,t,n).slice().sort(d3.descending),x=o.call(this,t,n).slice().sort(d3.descending),w=l.call(this,t,n).slice(),k=u.call(this,t,n).slice(),C=c.call(this,t,n).slice(),D=d3.scale.linear().domain(d3.extent(d3.merge([d,y]))).range(a?[i,0]:[0,i]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range())}this.__chart__=D;var _=d3.min(y),S=d3.max(y),T=y[1],A=v.selectAll("g.nv-wrap.nv-bullet").data([t]),M=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),E=M.append("g"),P=A.select("g");E.append("rect").attr("class","nv-range nv-rangeMax"),E.append("rect").attr("class","nv-range nv-rangeAvg"),E.append("rect").attr("class","nv-range nv-rangeMin"),E.append("rect").attr("class","nv-measure"),E.append("path").attr("class","nv-markerTriangle"),A.attr("transform","translate("+e.left+","+e.top+")");var I=function(t){return Math.abs(D(t)-D(0))},N=function(t){return D(0>t?t:0)};P.select("rect.nv-rangeMax").attr("height",f).attr("width",I(S>0?S:_)).attr("x",N(S>0?S:_)).datum(S>0?S:_),P.select("rect.nv-rangeAvg").attr("height",f).attr("width",I(T)).attr("x",N(T)).datum(T),P.select("rect.nv-rangeMin").attr("height",f).attr("width",I(S)).attr("x",N(S)).attr("width",I(S>0?_:S)).attr("x",N(S>0?_:S)).datum(S>0?_:S),P.select("rect.nv-measure").style("fill",g).attr("height",f/3).attr("y",f/3).attr("width",0>x?D(0)-D(x[0]):D(x[0])-D(0)).attr("x",N(x)).on("mouseover",function(){m.elementMouseover({value:x[0],label:C[0]||"Current",pos:[D(x[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:x[0],label:C[0]||"Current"})});var F=f/6;b[0]?P.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+D(b[0])+","+f/2+")"}).attr("d","M0,"+F+"L"+F+","+-F+" "+-F+","+-F+"Z").on("mouseover",function(){m.elementMouseover({value:b[0],label:k[0]||"Previous",pos:[D(b[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:b[0],label:k[0]||"Previous"})
}):P.selectAll("path.nv-markerTriangle").remove(),A.selectAll(".nv-range").on("mouseover",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseover({value:t,label:n,pos:[D(t),f/2]})}).on("mouseout",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseout({value:t,label:n})})}),t}var e={top:0,right:0,bottom:0,left:0},i="left",a=!1,r=function(t){return t.ranges},s=function(t){return t.markers},o=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},d=[0],h=380,p=30,f=null,g=n.utils.getColor(["#1f77b4"]),m=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=m,t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,a="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(r=e,t):r},t.markers=function(e){return arguments.length?(s=e,t):s},t.measures=function(e){return arguments.length?(o=e,t):o},t.forceX=function(e){return arguments.length?(d=e,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.tickFormat=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(g=n.utils.getColor(e),t):g},t},n.models.bulletChart=function(){"use strict";function t(n){return n.each(function(i,p){var v=d3.select(this),y=(u||parseInt(v.style("width"))||960)-r.left-r.right,b=c-r.top-r.bottom,x=this;if(t.update=function(){t(n)},t.container=this,!i||!s.call(this,i,p)){var w=v.selectAll(".nv-noData").data([f]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",r.left+y/2).attr("y",18+r.top+b/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove();var k=s.call(this,i,p).slice().sort(d3.descending),C=o.call(this,i,p).slice().sort(d3.descending),D=l.call(this,i,p).slice().sort(d3.descending),_=v.selectAll("g.nv-wrap.nv-bulletChart").data([i]),S=_.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),T=S.append("g"),A=_.select("g");T.append("g").attr("class","nv-bulletWrap"),T.append("g").attr("class","nv-titles"),_.attr("transform","translate("+r.left+","+r.top+")");var M=d3.scale.linear().domain([0,Math.max(k[0],C[0],D[0])]).range(a?[y,0]:[0,y]),E=this.__chart__||d3.scale.linear().domain([0,1/0]).range(M.range());this.__chart__=M;var P=T.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-r.top-r.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(t){return t.title}),P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(y).height(b);var I=A.select(".nv-bulletWrap");d3.transition(I).call(e);var N=d||M.tickFormat(y/100),F=A.selectAll("g.nv-tick").data(M.ticks(y/50),function(t){return this.textContent||N(t)}),B=F.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+E(t)+",0)"}).style("opacity",1e-6);B.append("line").attr("y1",b).attr("y2",7*b/6),B.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*b/6).text(N);var L=d3.transition(F).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1);L.select("line").attr("y1",b).attr("y2",7*b/6),L.select("text").attr("y",7*b/6),d3.transition(F.exit()).attr("transform",function(t){return"translate("+M(t)+",0)"}).style("opacity",1e-6).remove(),g.on("tooltipShow",function(t){t.key=i.title,h&&m(t,x.parentNode)})}),d3.timer.flush(),t}var e=n.models.bullet(),i="left",a=!1,r={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},o=function(t){return t.markers},l=function(t){return t.measures},u=null,c=55,d=null,h=!0,p=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},f="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide"),m=function(e,i){var a=e.pos[0]+(i.offsetLeft||0)+r.left,s=e.pos[1]+(i.offsetTop||0)+r.top,o=p(e.key,e.label,e.value,e,t);n.tooltip.show([a,s],o,e.value<0?"e":"w",null,i)};return e.dispatch.on("elementMouseover.tooltip",function(t){g.tooltipShow(t)}),e.dispatch.on("elementMouseout.tooltip",function(t){g.tooltipHide(t)}),g.on("tooltipHide",function(){h&&n.tooltip.cleanup()}),t.dispatch=g,t.bullet=e,d3.rebind(t,e,"color"),t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(i=e,a="right"==i||"bottom"==i,t):i},t.ranges=function(e){return arguments.length?(s=e,t):s},t.markers=function(e){return arguments.length?(o=e,t):o},t.measures=function(e){return arguments.length?(l=e,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.tickFormat=function(e){return arguments.length?(d=e,t):d},t.tooltips=function(e){return arguments.length?(h=e,t):h},t.tooltipContent=function(e){return arguments.length?(p=e,t):p},t.noData=function(e){return arguments.length?(f=e,t):f},t},n.models.cumulativeLineChart=function(){"use strict";function t(C){return C.each(function(C){function P(){d3.select(t.container).style("cursor","ew-resize")}function B(){N.x=d3.event.x,N.i=Math.round(I.invert(N.x)),O()}function L(){d3.select(t.container).style("cursor","auto"),_.index=N.i,M.stateChange(_)}function O(){ie.data([N]);var e=t.transitionDuration();t.transitionDuration(0),t.update(),t.transitionDuration(e)}var R=d3.select(this).classed("nv-chart-"+D,!0),z=this,$=(p||parseInt(R.style("width"))||960)-d.left-d.right,V=(f||parseInt(R.style("height"))||400)-d.top-d.bottom;if(t.update=function(){R.transition().duration(E).call(t)},t.container=this,_.disabled=C.map(function(t){return!!t.disabled}),!S){var W;S={};for(W in _)S[W]=_[W]instanceof Array?_[W].slice(0):_[W]}var j=d3.behavior.drag().on("dragstart",P).on("drag",B).on("dragend",L);if(!(C&&C.length&&C.filter(function(t){return t.values.length}).length)){var Y=R.selectAll(".nv-noData").data([T]);return Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Y.attr("x",d.left+$/2).attr("y",d.top+V/2).text(function(t){return t}),t}if(R.selectAll(".nv-noData").remove(),i=r.xScale(),a=r.yScale(),k)r.yDomain(null);else{var H=C.filter(function(t){return!t.disabled}).map(function(t){var e=d3.extent(t.values,r.y());return e[0]<-.95&&(e[0]=-.95),[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),U=[d3.min(H,function(t){return t[0]}),d3.max(H,function(t){return t[1]})];r.yDomain(U)}I.domain([0,C[0].values.length-1]).range([0,$]).clamp(!0);var C=e(N.i,C),q=w?"none":"all",X=R.selectAll("g.nv-wrap.nv-cumulativeLine").data([C]),G=X.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),K=X.select("g");if(G.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-background"),G.append("g").attr("class","nv-linesWrap").style("pointer-events",q),G.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),g&&(l.width($),K.select(".nv-legendWrap").datum(C).call(l),d.top!=l.height()&&(d.top=l.height(),V=(f||parseInt(R.style("height"))||400)-d.top-d.bottom),K.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),x){var Z=[{key:"Re-scale y-axis",disabled:!k}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),K.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-d.top+")").call(u)}X.attr("transform","translate("+d.left+","+d.top+")"),y&&K.select(".nv-y.nv-axis").attr("transform","translate("+$+",0)");var J=C.filter(function(t){return t.tempDisabled});X.select(".tempDisabled").remove(),J.length&&X.append("text").attr("class","tempDisabled").attr("x",$/2).attr("y","-.71em").style("text-anchor","end").text(J.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(c.width($).height(V).margin({left:d.left,top:d.top}).svgContainer(R).xScale(i),X.select(".nv-interactive").call(c)),G.select(".nv-background").append("rect"),K.select(".nv-background rect").attr("width",$).attr("height",V),r.y(function(t){return t.display.y}).width($).height(V).color(C.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!C[e].disabled&&!C[e].tempDisabled}));var Q=K.select(".nv-linesWrap").datum(C.filter(function(t){return!t.disabled&&!t.tempDisabled}));Q.call(r),C.forEach(function(t,e){t.seriesIndex=e});var te=C.filter(function(t){return!t.disabled&&!!A(t)}),ee=K.select(".nv-avgLinesWrap").selectAll("line").data(te,function(t){return t.key}),ne=function(t){var e=a(A(t));return 0>e?0:e>V?V:e};ee.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t){return r.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",$).attr("y1",ne).attr("y2",ne),ee.style("stroke-opacity",function(t){var e=a(A(t));return 0>e||e>V?0:1}).attr("x1",0).attr("x2",$).attr("y1",ne).attr("y2",ne),ee.exit().remove();var ie=Q.selectAll(".nv-indexLine").data([N]);ie.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(j),ie.attr("transform",function(t){return"translate("+I(t.i)+",0)"}).attr("height",V),m&&(s.scale(i).ticks(Math.min(C[0].values.length,$/70)).tickSize(-V,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),d3.transition(K.select(".nv-x.nv-axis")).call(s)),v&&(o.scale(a).ticks(V/36).tickSize(-$,0),d3.transition(K.select(".nv-y.nv-axis")).call(o)),K.select(".nv-background rect").on("click",function(){N.x=d3.mouse(this)[0],N.i=Math.round(I.invert(N.x)),_.index=N.i,M.stateChange(_),O()}),r.dispatch.on("elementClick",function(t){N.i=t.pointIndex,N.x=I(N.i),_.index=N.i,M.stateChange(_),O()}),u.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,k=!e.disabled,_.rescaleY=k,M.stateChange(_),t.update()}),l.dispatch.on("stateChange",function(e){_.disabled=e.disabled,M.stateChange(_),t.update()}),c.dispatch.on("elementMousemove",function(e){r.clearHighlights();var i,a,l,u=[];if(C.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,o){a=n.interactiveBisect(s.values,e.pointXValue,t.x()),r.highlightPoint(o,a,!0);var c=s.values[a];"undefined"!=typeof c&&("undefined"==typeof i&&(i=c),"undefined"==typeof l&&(l=t.xScale()(t.x()(c,a))),u.push({key:s.key,value:t.y()(c,a),color:h(s,s.seriesIndex)}))}),u.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(u.map(function(t){return t.value}),p,g);null!==m&&(u[m].highlight=!0)}var v=s.tickFormat()(t.x()(i,a),a);c.tooltip.position({left:l+d.left,top:e.mouseY+d.top}).chartContainer(z.parentNode).enabled(b).valueFormatter(function(t){return o.tickFormat()(t)}).data({value:v,series:u})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(){M.tooltipHide(),r.clearHighlights()}),M.on("tooltipShow",function(t){b&&F(t,z.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&(C.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),"undefined"!=typeof e.index&&(N.i=e.index,N.x=I(N.i),_.index=e.index,ie.data([N])),"undefined"!=typeof e.rescaleY&&(k=e.rescaleY),t.update()})}),t}function e(t,e){return e.map(function(e){if(!e.values)return e;var n=r.y()(e.values[t],t);return-.95>n&&!P?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(r.y()(t,e)-n)/(1+n)},t}),e)})}var i,a,r=n.models.line(),s=n.models.axis(),o=n.models.axis(),l=n.models.legend(),u=n.models.legend(),c=n.interactiveGuideline(),d={top:30,right:30,bottom:50,left:60},h=n.utils.defaultColor(),p=null,f=null,g=!0,m=!0,v=!0,y=!1,b=!0,x=!0,w=!1,k=!0,C=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},D=r.id(),_={index:0,rescaleY:k},S=null,T="No Data Available.",A=function(t){return t.average},M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),E=250,P=!1;s.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),u.updateState(!1);var I=d3.scale.linear(),N={i:0,x:0},F=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=s.tickFormat()(r.x()(e.point,e.pointIndex)),c=o.tickFormat()(r.y()(e.point,e.pointIndex)),d=C(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,null,null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],M.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=M,t.lines=r,t.legend=l,t.xAxis=s,t.yAxis=o,t.interactiveLayer=c,d3.rebind(t,r,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(p=e,t):p},t.height=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),l.color(h),t):h},t.rescaleY=function(e){return arguments.length?(k=e,t):k},t.showControls=function(e){return arguments.length?(x=e,t):x},t.useInteractiveGuideline=function(e){return arguments.length?(w=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):w},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,o.orient(e?"right":"left"),t):y},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(C=e,t):C},t.state=function(e){return arguments.length?(_=e,t):_},t.defaultState=function(e){return arguments.length?(S=e,t):S},t.noData=function(e){return arguments.length?(T=e,t):T},t.average=function(e){return arguments.length?(A=e,t):A},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t.noErrorCheck=function(e){return arguments.length?(P=e,t):P},t},n.models.discreteBar=function(){"use strict";function t(n){return n.each(function(t){var n=u-l.left-l.right,d=c-l.top-l.bottom,k=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var C=e&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),y0:t.y0}})});h.domain(e||d3.merge(C).map(function(t){return t.x})).rangeBands(a||[0,n],.1),p.domain(i||d3.extent(d3.merge(C).map(function(t){return t.y}).concat(m))),p.range(y?r||[d-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]:r||[d,0]),s=s||h,o=o||p.copy().range([p(0),p(0)]);{var D=k.selectAll("g.nv-wrap.nv-discretebar").data([t]),_=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),S=_.append("g");D.select("g")}S.append("g").attr("class","nv-groups"),D.attr("transform","translate("+l.left+","+l.top+")");var T=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),T.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),T.transition().style("stroke-opacity",1).style("fill-opacity",.75);var A=T.selectAll("g.nv-bar").data(function(t){return t.values});A.exit().remove();var M=A.enter().append("g").attr("transform",function(t,e){return"translate("+(h(f(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),x.elementMouseover({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),x.elementMouseout({value:g(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){x.elementClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){x.elementDblClick({value:g(e,n),point:e,series:t[e.series],pos:[h(f(e,n))+h.rangeBand()*(e.series+.5)/t.length,p(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});M.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/t.length),y?(M.append("text").attr("text-anchor","middle"),A.select("text").text(function(t,e){return b(g(t,e))}).transition().attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?p(g(t,e))-p(0)+12:-4})):A.selectAll("text").remove(),A.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",w).transition().attr("width",.9*h.rangeBand()/t.length),A.transition().attr("transform",function(t,e){var n=h(f(t,e))+.05*h.rangeBand(),i=g(t,e)<0?p(0):p(0)-p(g(t,e))<1?p(0)-1:p(g(t,e));return"translate("+n+", "+i+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(g(t,e))-p(i&&i[0]||0))||1)}),s=h.copy(),o=p.copy()}),t}var e,i,a,r,s,o,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=[0],v=n.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";return t.dispatch=x,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(g=e,t):g},t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceY=function(e){return arguments.length?(m=e,t):m},t.color=function(e){return arguments.length?(v=n.utils.getColor(e),t):v},t.id=function(e){return arguments.length?(d=e,t):d},t.showValues=function(e){return arguments.length?(y=e,t):y},t.valueFormat=function(e){return arguments.length?(b=e,t):b},t.rectClass=function(e){return arguments.length?(w=e,t):w},t},n.models.discreteBarChart=function(){"use strict";function t(n){return n.each(function(n){var c=d3.select(this),m=this,w=(l||parseInt(c.style("width"))||960)-o.left-o.right,k=(u||parseInt(c.style("height"))||400)-o.top-o.bottom;if(t.update=function(){y.beforeUpdate(),c.transition().duration(b).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var C=c.selectAll(".nv-noData").data([v]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",o.left+w/2).attr("y",o.top+k/2).text(function(t){return t}),t}c.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale().clamp(!0);var D=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),_=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),S=_.append("defs"),T=D.select("g");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),_.append("g").attr("class","nv-barsWrap"),T.attr("transform","translate("+o.left+","+o.top+")"),p&&T.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),a.width(w).height(k);var A=T.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(A.transition().call(a),S.append("clipPath").attr("id","nv-x-label-clip-"+a.id()).append("rect"),T.select("#nv-x-label-clip-"+a.id()+" rect").attr("width",e.rangeBand()*(f?2:1)).attr("height",16).attr("x",-e.rangeBand()/(f?1:2)),d){r.scale(e).ticks(w/100).tickSize(-k,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+(i.range()[0]+(a.showValues()&&i.domain()[0]<0?16:0))+")"),T.select(".nv-x.nv-axis").transition().call(r);var M=T.select(".nv-x.nv-axis").selectAll("g");f&&M.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}h&&(s.scale(i).ticks(k/36).tickSize(-w,0),T.select(".nv-y.nv-axis").transition().call(s)),T.select(".nv-zeroLine line").attr("x1",0).attr("x2",w).attr("y1",i(0)).attr("y2",i(0)),y.on("tooltipShow",function(t){g&&x(t,m.parentNode)})}),t}var e,i,a=n.models.discreteBar(),r=n.models.axis(),s=n.models.axis(),o={top:15,right:10,bottom:50,left:60},l=null,u=null,c=n.utils.getColor(),d=!0,h=!0,p=!1,f=!1,g=!0,m=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},v="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),b=250;r.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(p?"right":"left").tickFormat(d3.format(",.1f"));var x=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=r.tickFormat()(a.x()(e.point,e.pointIndex)),c=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=m(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],y.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),y.on("tooltipHide",function(){g&&n.tooltip.cleanup()}),t.dispatch=y,t.discretebar=a,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),a.color(c),t):c},t.showXAxis=function(e){return arguments.length?(d=e,t):d},t.showYAxis=function(e){return arguments.length?(h=e,t):h},t.rightAlignYAxis=function(e){return arguments.length?(p=e,s.orient(e?"right":"left"),t):p},t.staggerLabels=function(e){return arguments.length?(f=e,t):f},t.tooltips=function(e){return arguments.length?(g=e,t):g},t.tooltipContent=function(e){return arguments.length?(m=e,t):m},t.noData=function(e){return arguments.length?(v=e,t):v},t.transitionDuration=function(e){return arguments.length?(b=e,t):b},t},n.models.distribution=function(){"use strict";function t(n){return n.each(function(t){var n=(a-("x"===s?i.left+i.right:i.top+i.bottom),"x"==s?"y":"x"),c=d3.select(this);e=e||u;var d=c.selectAll("g.nv-distribution").data([t]),h=d.enter().append("g").attr("class","nvd3 nv-distribution"),p=(h.append("g"),d.select("g"));d.attr("transform","translate("+i.left+","+i.top+")");var f=p.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});f.enter().append("g"),f.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var g=f.selectAll("line.nv-dist"+s).data(function(t){return t.values});g.enter().append("line").attr(s+"1",function(t,n){return e(o(t,n))}).attr(s+"2",function(t,n){return e(o(t,n))}),f.exit().selectAll("line.nv-dist"+s).transition().attr(s+"1",function(t,e){return u(o(t,e))}).attr(s+"2",function(t,e){return u(o(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+s+" nv-dist"+s+"-"+e}).attr(n+"1",0).attr(n+"2",r),g.transition().attr(s+"1",function(t,e){return u(o(t,e))}).attr(s+"2",function(t,e){return u(o(t,e))}),e=u.copy()}),t}var e,i={top:0,right:0,bottom:0,left:0},a=400,r=8,s="x",o=function(t){return t[s]},l=n.utils.defaultColor(),u=d3.scale.linear();return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(a=e,t):a},t.axis=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(r=e,t):r},t.getData=function(e){return arguments.length?(o=d3.functor(e),t):o},t.scale=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),t):l},t},n.models.historicalBarChart=function(){"use strict";function t(n){return n.each(function(v){var D=d3.select(this),_=this,S=(c||parseInt(D.style("width"))||960)-l.left-l.right,T=(d||parseInt(D.style("height"))||400)-l.top-l.bottom;if(t.update=function(){D.transition().duration(k).call(t)},t.container=this,y.disabled=v.map(function(t){return!!t.disabled}),!b){var A;b={};for(A in y)b[A]=y[A]instanceof Array?y[A].slice(0):y[A]}if(!(v&&v.length&&v.filter(function(t){return t.values.length}).length)){var M=D.selectAll(".nv-noData").data([x]);return M.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),M.attr("x",l.left+S/2).attr("y",l.top+T/2).text(function(t){return t}),t}D.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var E=D.selectAll("g.nv-wrap.nv-historicalBarChart").data([v]),P=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),I=E.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-legendWrap"),h&&(o.width(S),I.select(".nv-legendWrap").datum(v).call(o),l.top!=o.height()&&(l.top=o.height(),T=(d||parseInt(D.style("height"))||400)-l.top-l.bottom),E.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),E.attr("transform","translate("+l.left+","+l.top+")"),g&&I.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)"),a.width(S).height(T).color(v.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!v[e].disabled}));var N=I.select(".nv-barsWrap").datum(v.filter(function(t){return!t.disabled}));N.transition().call(a),p&&(r.scale(e).tickSize(-T,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(r)),f&&(s.scale(i).ticks(T/36).tickSize(-S,0),I.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,v.filter(function(t){return!t.disabled}).length||v.map(function(t){return t.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),t}),y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),n.transition().call(t)}),o.dispatch.on("legendDblclick",function(e){v.forEach(function(t){t.disabled=!0}),e.disabled=!1,y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),t.update()}),w.on("tooltipShow",function(t){m&&C(t,_.parentNode)}),w.on("changeState",function(e){"undefined"!=typeof e.disabled&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),y.disabled=e.disabled),t.update()})}),t}var e,i,a=n.models.historicalBar(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l={top:30,right:90,bottom:50,left:90},u=n.utils.defaultColor(),c=null,d=null,h=!1,p=!0,f=!0,g=!1,m=!0,v=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},y={},b=null,x="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),k=250;r.orient("bottom").tickPadding(7),s.orient(g?"right":"left");var C=function(e,i){if(i){var o=d3.select(i).select("svg"),l=o.node()?o.attr("viewBox"):null;if(l){l=l.split(" ");var u=parseInt(o.style("width"))/l[2];e.pos[0]=e.pos[0]*u,e.pos[1]=e.pos[1]*u}}var c=e.pos[0]+(i.offsetLeft||0),d=e.pos[1]+(i.offsetTop||0),h=r.tickFormat()(a.x()(e.point,e.pointIndex)),p=s.tickFormat()(a.y()(e.point,e.pointIndex)),f=v(e.series.key,h,p,e,t);n.tooltip.show([c,d],f,null,null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],w.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),t.dispatch=w,t.bars=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),o.color(u),t):u},t.showLegend=function(e){return arguments.length?(h=e,t):h},t.showXAxis=function(e){return arguments.length?(p=e,t):p},t.showYAxis=function(e){return arguments.length?(f=e,t):f},t.rightAlignYAxis=function(e){return arguments.length?(g=e,s.orient(e?"right":"left"),t):g},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.state=function(e){return arguments.length?(y=e,t):y},t.defaultState=function(e){return arguments.length?(b=e,t):b},t.noData=function(e){return arguments.length?(x=e,t):x},t.transitionDuration=function(e){return arguments.length?(k=e,t):k},t},n.models.indentedTree=function(){"use strict";function t(e){return e.each(function(e){function n(e,i,a){return d3.event.stopPropagation(),d3.event.shiftKey&&!a?(d3.event.shiftKey=!1,e.values&&e.values.forEach(function(t){(t.values||t._values)&&n(t,0,!0)}),!0):s(e)?(e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),void t.update()):!0}function i(t){return t._values&&t._values.length?p:t.values&&t.values.length?f:""}function r(t){return t._values&&t._values.length}function s(t){var e=t.values||t._values;return e&&e.length}var y=1,b=d3.select(this),x=d3.layout.tree().children(function(t){return t.values}).size([a,c]);t.update=function(){b.transition().duration(600).call(t)},e[0]||(e[0]={key:u});var w=x.nodes(e[0]),k=d3.select(this).selectAll("div").data([[w]]),C=k.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),D=C.append("table"),_=k.select("table").attr("width","100%").attr("class",h);
if(o){var S=D.append("thead"),T=S.append("tr");d.forEach(function(t){T.append("th").attr("width",t.width?t.width:"10%").style("text-align","numeric"==t.type?"right":"left").append("span").text(t.label)})}var A=_.selectAll("tbody").data(function(t){return t});A.enter().append("tbody"),y=d3.max(w,function(t){return t.depth}),x.size([a,y*c]);var M=A.selectAll("tr").data(function(t){return t.filter(function(t){return l&&!t.children?l(t):!0})},function(t){return t.id||t.id||++v});M.exit().remove(),M.select("img.nv-treeicon").attr("src",i).classed("folded",r);var E=M.enter().append("tr");d.forEach(function(t,e){var a=E.append("td").style("padding-left",function(t){return(e?0:t.depth*c+12+(i(t)?0:16))+"px"},"important").style("text-align","numeric"==t.type?"right":"left");0==e&&a.append("img").classed("nv-treeicon",!0).classed("nv-folded",r).attr("src",i).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(t){return i(t)?"inline-block":"none"}).on("click",n),a.each(function(n){!e&&m(n)?d3.select(this).append("a").attr("href",m).attr("class",d3.functor(t.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(t.classes)).text(function(e){return t.format?t.format(e):e[t.key]||"-"})}),t.showCount&&(a.append("span").attr("class","nv-childrenCount"),M.selectAll("span.nv-childrenCount").text(function(t){return t.values&&t.values.length||t._values&&t._values.length?"("+(t.values&&t.values.filter(function(t){return l?l(t):!0}).length||t._values&&t._values.filter(function(t){return l?l(t):!0}).length||0)+")":""}))}),M.order().on("click",function(t){g.elementClick({row:this,data:t,pos:[t.x,t.y]})}).on("dblclick",function(t){g.elementDblclick({row:this,data:t,pos:[t.x,t.y]})}).on("mouseover",function(t){g.elementMouseover({row:this,data:t,pos:[t.x,t.y]})}).on("mouseout",function(t){g.elementMouseout({row:this,data:t,pos:[t.x,t.y]})})}),t}var e={top:0,right:0,bottom:0,left:0},i=960,a=500,r=n.utils.defaultColor(),s=Math.floor(1e4*Math.random()),o=!0,l=!1,u="No Data Available.",c=20,d=[{key:"key",label:"Name",type:"text"}],h=null,p="images/grey-plus.png",f="images/grey-minus.png",g=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),m=function(t){return t.url},v=0;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.color=function(e){return arguments.length?(r=n.utils.getColor(e),scatter.color(r),t):r},t.id=function(e){return arguments.length?(s=e,t):s},t.header=function(e){return arguments.length?(o=e,t):o},t.noData=function(e){return arguments.length?(u=e,t):u},t.filterZero=function(e){return arguments.length?(l=e,t):l},t.columns=function(e){return arguments.length?(d=e,t):d},t.tableClass=function(e){return arguments.length?(h=e,t):h},t.iconOpen=function(e){return arguments.length?(p=e,t):p},t.iconClose=function(e){return arguments.length?(f=e,t):f},t.getUrl=function(e){return arguments.length?(m=e,t):m},t},n.models.legend=function(){"use strict";function t(h){return h.each(function(t){var h=i-e.left-e.right,p=d3.select(this),f=p.selectAll("g.nv-legend").data([t]),g=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var m=g.selectAll(".nv-series").data(function(t){return t}),v=m.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(e,n){d.legendClick(e,n),u&&(c?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){d.legendDblclick(e,n),u&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),m.classed("disabled",function(t){return t.disabled}),m.exit().remove(),m.select("circle").style("fill",function(t,e){return t.color||s(t,e)}).style("stroke",function(t,e){return t.color||s(t,e)}),m.select("text").text(r),o){var y=[];m.each(function(){var t,e=d3.select(this).select("text");try{if(t=e.getComputedTextLength(),0>=t)throw Error()}catch(i){t=n.utils.calcApproxTextWidth(e)}y.push(t+28)});for(var b=0,x=0,w=[];h>x&&b<y.length;)w[b]=y[b],x+=y[b++];for(0===b&&(b=1);x>h&&b>1;){w=[],b--;for(var k=0;k<y.length;k++)y[k]>(w[k%b]||0)&&(w[k%b]=y[k]);x=w.reduce(function(t,e){return t+e})}for(var C=[],D=0,_=0;b>D;D++)C[D]=_,_+=w[D];m.attr("transform",function(t,e){return"translate("+C[e%b]+","+(5+20*Math.floor(e/b))+")"}),l?g.attr("transform","translate("+(i-e.right-x)+","+e.top+")"):g.attr("transform","translate(0,"+e.top+")"),a=e.top+e.bottom+20*Math.ceil(y.length/b)}else{var S,T=5,A=5,M=0;m.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+28;return S=A,i<e.left+e.right+S+t&&(A=S=5,T+=20),A+=t,A>M&&(M=A),"translate("+S+","+T+")"}),g.attr("transform","translate("+(i-e.right-M)+","+e.top+")"),a=e.top+e.bottom+T+15}}),t}var e={top:5,right:0,bottom:5,left:0},i=400,a=20,r=function(t){return t.key},s=n.utils.defaultColor(),o=!0,l=!0,u=!0,c=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=d,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.key=function(e){return arguments.length?(r=e,t):r},t.color=function(e){return arguments.length?(s=n.utils.getColor(e),t):s},t.align=function(e){return arguments.length?(o=e,t):o},t.rightAlign=function(e){return arguments.length?(l=e,t):l},t.updateState=function(e){return arguments.length?(u=e,t):u},t.radioButtonMode=function(e){return arguments.length?(c=e,t):c},t},n.models.line=function(){"use strict";function t(v){return v.each(function(t){var v=s-r.left-r.right,y=o-r.top-r.bottom,b=d3.select(this);e=a.xScale(),i=a.yScale(),g=g||e,m=m||i;var x=b.selectAll("g.nv-wrap.nv-line").data([t]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=w.append("defs"),C=w.append("g"),D=x.select("g");C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+r.left+","+r.top+")"),a.width(v).height(y);var _=x.select(".nv-scatterWrap");_.transition().call(a),k.append("clipPath").attr("id","nv-edge-clip-"+a.id()).append("rect"),x.select("#nv-edge-clip-"+a.id()+" rect").attr("width",v).attr("height",y>0?y:0),D.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":""),_.attr("clip-path",p?"url(#nv-edge-clip-"+a.id()+")":"");var S=x.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});S.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),S.exit().remove(),S.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),S.transition().style("stroke-opacity",1).style("fill-opacity",.5);var T=S.selectAll("path.nv-area").data(function(t){return h(t)?[t]:[]});T.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y0(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))}).y1(function(){return m(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])}),S.exit().selectAll("path.nv-area").remove(),T.transition().attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(u(t,i)))}).y0(function(t,e){return n.utils.NaNtoZero(i(c(t,e)))}).y1(function(){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});var A=S.selectAll("path.nv-line").data(function(t){return[t.values]});A.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))})),A.transition().attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,i){return n.utils.NaNtoZero(e(u(t,i)))}).y(function(t,e){return n.utils.NaNtoZero(i(c(t,e)))})),g=e.copy(),m=i.copy()}),t}var e,i,a=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},s=960,o=500,l=n.utils.defaultColor(),u=function(t){return t.x},c=function(t){return t.y},d=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h=function(t){return t.area},p=!1,f="linear";a.size(16).sizeDomain([16,256]);var g,m;return t.dispatch=a.dispatch,t.scatter=a,d3.rebind(t,a,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.x=function(e){return arguments.length?(u=e,a.x(e),t):u},t.y=function(e){return arguments.length?(c=e,a.y(e),t):c},t.clipEdge=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),a.color(l),t):l},t.interpolate=function(e){return arguments.length?(f=e,t):f},t.defined=function(e){return arguments.length?(d=e,t):d},t.isArea=function(e){return arguments.length?(h=d3.functor(e),t):h},t},n.models.lineChart=function(){"use strict";function t(b){return b.each(function(b){var S=d3.select(this),T=this,A=(d||parseInt(S.style("width"))||960)-u.left-u.right,M=(h||parseInt(S.style("height"))||400)-u.top-u.bottom;if(t.update=function(){S.transition().duration(D).call(t)},t.container=this,x.disabled=b.map(function(t){return!!t.disabled}),!w){var E;w={};for(E in x)w[E]=x[E]instanceof Array?x[E].slice(0):x[E]}if(!(b&&b.length&&b.filter(function(t){return t.values.length}).length)){var P=S.selectAll(".nv-noData").data([k]);return P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),P.attr("x",u.left+A/2).attr("y",u.top+M/2).text(function(t){return t}),t}S.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var I=S.selectAll("g.nv-wrap.nv-lineChart").data([b]),N=I.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),F=I.select("g");N.append("rect").style("opacity",0),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-linesWrap"),N.append("g").attr("class","nv-legendWrap"),N.append("g").attr("class","nv-interactive"),F.select("rect").attr("width",A).attr("height",M>0?M:0),p&&(o.width(A),F.select(".nv-legendWrap").datum(b).call(o),u.top!=o.height()&&(u.top=o.height(),M=(h||parseInt(S.style("height"))||400)-u.top-u.bottom),I.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),I.attr("transform","translate("+u.left+","+u.top+")"),m&&F.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),v&&(l.width(A).height(M).margin({left:u.left,top:u.top}).svgContainer(S).xScale(e),I.select(".nv-interactive").call(l)),a.width(A).height(M).color(b.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!b[e].disabled}));var B=F.select(".nv-linesWrap").datum(b.filter(function(t){return!t.disabled}));B.transition().call(a),f&&(r.scale(e).ticks(A/100).tickSize(-M,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),F.select(".nv-x.nv-axis").transition().call(r)),g&&(s.scale(i).ticks(M/36).tickSize(-A,0),F.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),l.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,o,d,h=[];if(b.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,s){o=n.interactiveBisect(r.values,e.pointXValue,t.x()),a.highlightPoint(s,o,!0);var l=r.values[o];"undefined"!=typeof l&&("undefined"==typeof i&&(i=l),"undefined"==typeof d&&(d=t.xScale()(t.x()(l,o))),h.push({key:r.key,value:t.y()(l,o),color:c(r,r.seriesIndex)}))}),h.length>2){var p=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(h.map(function(t){return t.value}),p,g);null!==m&&(h[m].highlight=!0)}var v=r.tickFormat()(t.x()(i,o));l.tooltip.position({left:d+u.left,top:e.mouseY+u.top}).chartContainer(T.parentNode).enabled(y).valueFormatter(function(t){return s.tickFormat()(t)}).data({value:v,series:h})(),l.renderGuideLine(d)}),l.dispatch.on("elementMouseout",function(){C.tooltipHide(),a.clearHighlights()}),C.on("tooltipShow",function(t){y&&_(t,T.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&b.length===e.disabled.length&&(b.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),t.update()})}),t}var e,i,a=n.models.line(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.interactiveGuideline(),u={top:30,right:20,bottom:50,left:60},c=n.utils.defaultColor(),d=null,h=null,p=!0,f=!0,g=!0,m=!1,v=!1,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D=250;r.orient("bottom").tickPadding(7),s.orient(m?"right":"left");var _=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=r.tickFormat()(a.x()(e.point,e.pointIndex)),c=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=b(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,null,null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],C.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=C,t.lines=a,t.legend=o,t.xAxis=r,t.yAxis=s,t.interactiveLayer=l,d3.rebind(t,a,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),o.color(c),t):c},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,s.orient(e?"right":"left"),t):m},t.useInteractiveGuideline=function(e){return arguments.length?(v=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(D=e,t):D},t},n.models.linePlusBarChart=function(){"use strict";function t(n){return n.each(function(n){var f=d3.select(this),g=this,b=(h||parseInt(f.style("width"))||960)-d.left-d.right,_=(p||parseInt(f.style("height"))||400)-d.top-d.bottom;if(t.update=function(){f.transition().call(t)},x.disabled=n.map(function(t){return!!t.disabled}),!w){var S;w={};for(S in x)w[S]=x[S]instanceof Array?x[S].slice(0):x[S]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var T=f.selectAll(".nv-noData").data([k]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",d.left+b/2).attr("y",d.top+_/2).text(function(t){return t}),t}f.selectAll(".nv-noData").remove();var A=n.filter(function(t){return!t.disabled&&t.bar}),M=n.filter(function(t){return!t.bar});e=M.filter(function(t){return!t.disabled}).length&&M.filter(function(t){return!t.disabled})[0].values.length?r.xScale():s.xScale(),i=s.yScale(),a=r.yScale();var E=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),P=E.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),I=E.select("g");P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y1 nv-axis"),P.append("g").attr("class","nv-y2 nv-axis"),P.append("g").attr("class","nv-barsWrap"),P.append("g").attr("class","nv-linesWrap"),P.append("g").attr("class","nv-legendWrap"),v&&(c.width(b/2),I.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(c),d.top!=c.height()&&(d.top=c.height(),_=(p||parseInt(f.style("height"))||400)-d.top-d.bottom),I.select(".nv-legendWrap").attr("transform","translate("+b/2+","+-d.top+")")),E.attr("transform","translate("+d.left+","+d.top+")"),r.width(b).height(_).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar})),s.width(b).height(_).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar}));var N=I.select(".nv-barsWrap").datum(A.length?A:[{values:[]}]),F=I.select(".nv-linesWrap").datum(M[0]&&!M[0].disabled?M:[{values:[]}]);d3.transition(N).call(s),d3.transition(F).call(r),o.scale(e).ticks(b/100).tickSize(-_,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(I.select(".nv-x.nv-axis")).call(o),l.scale(i).ticks(_/36).tickSize(-b,0),d3.transition(I.select(".nv-y1.nv-axis")).style("opacity",A.length?1:0).call(l),u.scale(a).ticks(_/36).tickSize(A.length?0:-b,0),I.select(".nv-y2.nv-axis").style("opacity",M.length?1:0).attr("transform","translate("+b+",0)"),d3.transition(I.select(".nv-y2.nv-axis")).call(u),c.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),C.on("tooltipShow",function(t){y&&D(t,g.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),t.update()})}),t}var e,i,a,r=n.models.line(),s=n.models.historicalBar(),o=n.models.axis(),l=n.models.axis(),u=n.models.axis(),c=n.models.legend(),d={top:30,right:60,bottom:50,left:60},h=null,p=null,f=function(t){return t.x},g=function(t){return t.y},m=n.utils.defaultColor(),v=!0,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},x={},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");s.padData(!0),r.clipEdge(!1).padData(!0),o.orient("bottom").tickPadding(7).highlightZero(!1),l.orient("left"),u.orient("right");var D=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),s=e.pos[1]+(i.offsetTop||0),c=o.tickFormat()(r.x()(e.point,e.pointIndex)),d=(e.series.bar?l:u).tickFormat()(r.y()(e.point,e.pointIndex)),h=b(e.series.key,c,d,e,t);n.tooltip.show([a,s],h,e.value<0?"n":"s",null,i)};return r.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],C.tooltipShow(t)}),r.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],C.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=C,t.legend=c,t.lines=r,t.bars=s,t.xAxis=o,t.y1Axis=l,t.y2Axis=u,d3.rebind(t,r,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,r.x(e),s.x(e),t):f},t.y=function(e){return arguments.length?(g=e,r.y(e),s.y(e),t):g},t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),c.color(m),t):m},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t},n.models.lineWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function C(t){var e=+("e"==t),n=e?1:-1,i=F/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function A(){p.empty()||p.extent(w),W.data([p.empty()?a.domain():w]).each(function(t){var n=a(t[0])-e.range()[0],i=e.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",0>i?0:i)})}function M(){w=p.empty()?null:p.extent();var t=p.empty()?a.domain():p.extent();if(!(Math.abs(t[0]-t[1])<=1)){_.brush({extent:t,brush:p}),A();var e=R.select(".nv-focus .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}).map(function(e){return{key:e.key,values:e.values.filter(function(e,n){return s.x()(e,n)>=t[0]&&s.x()(e,n)<=t[1]})}}));e.transition().duration(S).call(s),R.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(l),R.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(u)}}var E=d3.select(this),P=this,I=(v||parseInt(E.style("width"))||960)-f.left-f.right,N=(y||parseInt(E.style("height"))||400)-f.top-f.bottom-b,F=b-g.top-g.bottom;if(t.update=function(){E.transition().duration(S).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var B=E.selectAll(".nv-noData").data([D]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",f.left+I/2).attr("y",f.top+N/2).text(function(t){return t}),t}E.selectAll(".nv-noData").remove(),e=s.xScale(),i=s.yScale(),a=o.xScale(),r=o.yScale();var L=E.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),O=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),R=L.select("g");O.append("g").attr("class","nv-legendWrap");var z=O.append("g").attr("class","nv-focus");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-linesWrap");var $=O.append("g").attr("class","nv-context");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-linesWrap"),$.append("g").attr("class","nv-brushBackground"),$.append("g").attr("class","nv-x nv-brush"),x&&(h.width(I),R.select(".nv-legendWrap").datum(n).call(h),f.top!=h.height()&&(f.top=h.height(),N=(y||parseInt(E.style("height"))||400)-f.top-f.bottom-b),R.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),L.attr("transform","translate("+f.left+","+f.top+")"),s.width(I).height(N).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),o.defined(s.defined()).width(I).height(F).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),R.select(".nv-context").attr("transform","translate(0,"+(N+f.bottom+g.top)+")");var V=R.select(".nv-context .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}));d3.transition(V).call(o),l.scale(e).ticks(I/100).tickSize(-N,0),u.scale(i).ticks(N/36).tickSize(-I,0),R.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+N+")"),p.x(a).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),M(),t.transitionDuration(e)}),w&&p.extent(w);var W=R.select(".nv-brushBackground").selectAll("g").data([w||p.extent()]),j=W.enter().append("g");j.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",F),j.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",F);var Y=R.select(".nv-x.nv-brush").call(p);Y.selectAll("rect").attr("height",F),Y.selectAll(".resize").append("path").attr("d",C),M(),c.scale(a).ticks(I/100).tickSize(-F,0),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(R.select(".nv-context .nv-x.nv-axis")).call(c),d.scale(r).ticks(F/36).tickSize(-I,0),d3.transition(R.select(".nv-context .nv-y.nv-axis")).call(d),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),h.dispatch.on("stateChange",function(){t.update()}),_.on("tooltipShow",function(t){k&&T(t,P.parentNode)})}),t}var e,i,a,r,s=n.models.line(),o=n.models.line(),l=n.models.axis(),u=n.models.axis(),c=n.models.axis(),d=n.models.axis(),h=n.models.legend(),p=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},m=n.utils.defaultColor(),v=null,y=null,b=100,x=!0,w=null,k=!0,C=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},D="No Data Available.",_=d3.dispatch("tooltipShow","tooltipHide","brush"),S=250;s.clipEdge(!0),o.interactive(!1),l.orient("bottom").tickPadding(5),u.orient("left"),c.orient("bottom").tickPadding(5),d.orient("left");var T=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),r=e.pos[1]+(i.offsetTop||0),o=l.tickFormat()(s.x()(e.point,e.pointIndex)),c=u.tickFormat()(s.y()(e.point,e.pointIndex)),d=C(e.series.key,o,c,e,t);n.tooltip.show([a,r],d,null,null,i)};return s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],_.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){_.tooltipHide(t)}),_.on("tooltipHide",function(){k&&n.tooltip.cleanup()}),t.dispatch=_,t.legend=h,t.lines=s,t.lines2=o,t.xAxis=l,t.yAxis=u,t.x2Axis=c,t.y2Axis=d,d3.rebind(t,s,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(s.x(e),o.x(e),t):s.x},t.y=function(e){return arguments.length?(s.y(e),o.y(e),t):s.y},t.margin=function(e){return arguments.length?(f.top="undefined"!=typeof e.top?e.top:f.top,f.right="undefined"!=typeof e.right?e.right:f.right,f.bottom="undefined"!=typeof e.bottom?e.bottom:f.bottom,f.left="undefined"!=typeof e.left?e.left:f.left,t):f},t.margin2=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(v=e,t):v},t.height=function(e){return arguments.length?(y=e,t):y},t.height2=function(e){return arguments.length?(b=e,t):b},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),h.color(m),t):m},t.showLegend=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(k=e,t):k},t.tooltipContent=function(e){return arguments.length?(C=e,t):C},t.interpolate=function(e){return arguments.length?(s.interpolate(e),o.interpolate(e),t):s.interpolate()},t.noData=function(e){return arguments.length?(D=e,t):D},t.xTickFormat=function(e){return arguments.length?(l.tickFormat(e),c.tickFormat(e),t):l.tickFormat()},t.yTickFormat=function(e){return arguments.length?(u.tickFormat(e),d.tickFormat(e),t):u.tickFormat()},t.brushExtent=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(S=e,t):S},t},n.models.linePlusBarWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function I(t){var e=+("e"==t),n=e?1:-1,i=j/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)}function O(){x.empty()||x.extent(E),ne.data([x.empty()?a.domain():E]).each(function(t){var e=a(t[0])-a.range()[0],n=a.range()[1]-a(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",a(t[1])).attr("width",0>n?0:n)})}function R(){E=x.empty()?null:x.extent(),e=x.empty()?a.domain():x.extent(),F.brush({extent:e,brush:x}),O(),d.width(V).height(W).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),u.width(V).height(W).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var t=Z.select(".nv-focus .nv-barsWrap").datum(H.length?H.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return d.x()(t,n)>=e[0]&&d.x()(t,n)<=e[1]})}}):[{values:[]}]),o=Z.select(".nv-focus .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return u.x()(t,n)>=e[0]&&u.x()(t,n)<=e[1]})}}));i=H.length?d.xScale():u.xScale(),p.scale(i).ticks(V/100).tickSize(-W,0),p.domain([Math.ceil(e[0]),Math.floor(e[1])]),Z.select(".nv-x.nv-axis").transition().duration(B).call(p),t.transition().duration(B).call(d),o.transition().duration(B).call(u),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),g.scale(r).ticks(W/36).tickSize(-V,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",H.length?1:0),m.scale(s).ticks(W/36).tickSize(H.length?0:-V,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),Z.select(".nv-focus .nv-y1.nv-axis").transition().duration(B).call(g),Z.select(".nv-focus .nv-y2.nv-axis").transition().duration(B).call(m)}var z=d3.select(this),$=this,V=(C||parseInt(z.style("width"))||960)-w.left-w.right,W=(D||parseInt(z.style("height"))||400)-w.top-w.bottom-_,j=_-k.top-k.bottom;if(t.update=function(){z.transition().duration(B).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var Y=z.selectAll(".nv-noData").data([N]);return Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Y.attr("x",w.left+V/2).attr("y",w.top+W/2).text(function(t){return t}),t}z.selectAll(".nv-noData").remove();var H=n.filter(function(t){return!t.disabled&&t.bar}),U=n.filter(function(t){return!t.bar});i=d.xScale(),a=f.scale(),r=d.yScale(),s=u.yScale(),o=h.yScale(),l=c.yScale();var q=n.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:T(t,e)}})}),X=n.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:S(t,e),y:T(t,e)}})});i.range([0,V]),a.domain(d3.extent(d3.merge(q.concat(X)),function(t){return t.x})).range([0,V]);var G=z.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),K=G.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=G.select("g");
K.append("g").attr("class","nv-legendWrap");var J=K.append("g").attr("class","nv-focus");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap");var Q=K.append("g").attr("class","nv-context");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","nv-barsWrap"),Q.append("g").attr("class","nv-linesWrap"),Q.append("g").attr("class","nv-brushBackground"),Q.append("g").attr("class","nv-x nv-brush"),M&&(b.width(V/2),Z.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(b),w.top!=b.height()&&(w.top=b.height(),W=(D||parseInt(z.style("height"))||400)-w.top-w.bottom-_),Z.select(".nv-legendWrap").attr("transform","translate("+V/2+","+-w.top+")")),G.attr("transform","translate("+w.left+","+w.top+")"),h.width(V).height(j).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),c.width(V).height(j).color(n.map(function(t,e){return t.color||A(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var te=Z.select(".nv-context .nv-barsWrap").datum(H.length?H:[{values:[]}]),ee=Z.select(".nv-context .nv-linesWrap").datum(U[0].disabled?[{values:[]}]:U);Z.select(".nv-context").attr("transform","translate(0,"+(W+w.bottom+k.top)+")"),te.transition().call(h),ee.transition().call(c),x.x(a).on("brush",R),E&&x.extent(E);var ne=Z.select(".nv-brushBackground").selectAll("g").data([E||x.extent()]),ie=ne.enter().append("g");ie.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",j),ie.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",j);var ae=Z.select(".nv-x.nv-brush").call(x);ae.selectAll("rect").attr("height",j),ae.selectAll(".resize").append("path").attr("d",I),f.ticks(V/100).tickSize(-j,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),Z.select(".nv-context .nv-x.nv-axis").transition().call(f),v.scale(o).ticks(j/36).tickSize(-V,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",H.length?1:0).attr("transform","translate(0,"+a.range()[0]+")"),Z.select(".nv-context .nv-y1.nv-axis").transition().call(v),y.scale(l).ticks(j/36).tickSize(H.length?0:-V,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",U.length?1:0).attr("transform","translate("+a.range()[1]+",0)"),Z.select(".nv-context .nv-y2.nv-axis").transition().call(y),b.dispatch.on("stateChange",function(){t.update()}),F.on("tooltipShow",function(t){P&&L(t,$.parentNode)}),R()}),t}var e,i,a,r,s,o,l,u=n.models.line(),c=n.models.line(),d=n.models.historicalBar(),h=n.models.historicalBar(),p=n.models.axis(),f=n.models.axis(),g=n.models.axis(),m=n.models.axis(),v=n.models.axis(),y=n.models.axis(),b=n.models.legend(),x=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},k={top:0,right:30,bottom:20,left:60},C=null,D=null,_=100,S=function(t){return t.x},T=function(t){return t.y},A=n.utils.defaultColor(),M=!0,E=null,P=!0,I=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},N="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","brush"),B=0;u.clipEdge(!0),c.interactive(!1),p.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),f.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right");var L=function(i,a){e&&(i.pointIndex+=Math.ceil(e[0]));var r=i.pos[0]+(a.offsetLeft||0),s=i.pos[1]+(a.offsetTop||0),o=p.tickFormat()(u.x()(i.point,i.pointIndex)),l=(i.series.bar?g:m).tickFormat()(u.y()(i.point,i.pointIndex)),c=I(i.series.key,o,l,i,t);n.tooltip.show([r,s],c,i.value<0?"n":"s",null,a)};return u.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],F.tooltipShow(t)}),u.dispatch.on("elementMouseout.tooltip",function(t){F.tooltipHide(t)}),d.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],F.tooltipShow(t)}),d.dispatch.on("elementMouseout.tooltip",function(t){F.tooltipHide(t)}),F.on("tooltipHide",function(){P&&n.tooltip.cleanup()}),t.dispatch=F,t.legend=b,t.lines=u,t.lines2=c,t.bars=d,t.bars2=h,t.xAxis=p,t.x2Axis=f,t.y1Axis=g,t.y2Axis=m,t.y3Axis=v,t.y4Axis=y,d3.rebind(t,u,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(S=e,u.x(e),d.x(e),t):S},t.y=function(e){return arguments.length?(T=e,u.y(e),d.y(e),t):T},t.margin=function(e){return arguments.length?(w.top="undefined"!=typeof e.top?e.top:w.top,w.right="undefined"!=typeof e.right?e.right:w.right,w.bottom="undefined"!=typeof e.bottom?e.bottom:w.bottom,w.left="undefined"!=typeof e.left?e.left:w.left,t):w},t.width=function(e){return arguments.length?(C=e,t):C},t.height=function(e){return arguments.length?(D=e,t):D},t.color=function(e){return arguments.length?(A=n.utils.getColor(e),b.color(A),t):A},t.showLegend=function(e){return arguments.length?(M=e,t):M},t.tooltips=function(e){return arguments.length?(P=e,t):P},t.tooltipContent=function(e){return arguments.length?(I=e,t):I},t.noData=function(e){return arguments.length?(N=e,t):N},t.brushExtent=function(e){return arguments.length?(E=e,t):E},t},n.models.multiBar=function(){"use strict";function t(n){return n.each(function(t){var n=c-u.left-u.right,T=d-u.top-u.bottom,A=d3.select(this);k&&t.length&&(k=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b&&(t=d3.layout.stack().offset(x).values(function(t){return t.values}).y(m)(!t.length&&k?k:t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),b&&t[0].values.map(function(e,n){var i=0,a=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a,a-=e.size):(e.y1=e.size+i,i+=e.size)})});var M=i&&a?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});h.domain(i||d3.merge(M).map(function(t){return t.x})).rangeBands(r||[0,n],_),p.domain(a||d3.extent(d3.merge(M).map(function(t){return b?t.y>0?t.y1:t.y1+t.y:t.y}).concat(v))).range(s||[T,0]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),p.domain()[0]===p.domain()[1]&&p.domain(p.domain()[0]?[p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]:[-1,1]),o=o||h,l=l||p;var E=A.selectAll("g.nv-wrap.nv-multibar").data([t]),P=E.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),I=P.append("defs"),N=P.append("g"),F=E.select("g");N.append("g").attr("class","nv-groups"),E.attr("transform","translate("+u.left+","+u.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),E.select("#nv-edge-clip-"+f+" rect").attr("width",n).attr("height",T),F.attr("clip-path",y?"url(#nv-edge-clip-"+f+")":"");var B=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});B.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),B.exit().transition().selectAll("rect.nv-bar").delay(function(e,n){return n*D/t[0].values.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).remove(),B.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),B.transition().style("stroke-opacity",1).style("fill-opacity",.75);var L=B.selectAll("rect.nv-bar").data(function(e){return k&&!t.length?k.values:e.values});L.exit().remove();L.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,i){return b?0:i*h.rangeBand()/t.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).attr("width",h.rangeBand()/(b?1:t.length)).attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"});L.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),S.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),S.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){S.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){S.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(b?t.length/2:e.series+.5)/t.length,p(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),L.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,e){return"translate("+h(g(t,e))+",0)"}),C&&(e||(e=t.map(function(){return!0})),L.style("fill",function(t,n,i){return d3.rgb(C(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(C(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),b?L.transition().delay(function(e,n){return n*D/t[0].values.length}).attr("y",function(t){return p(b?t.y1:0)}).attr("height",function(t){return Math.max(Math.abs(p(t.y+(b?t.y0:0))-p(b?t.y0:0)),1)}).attr("x",function(e){return b?0:e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/(b?1:t.length)):L.transition().delay(function(e,n){return n*D/t[0].values.length}).attr("x",function(e){return e.series*h.rangeBand()/t.length}).attr("width",h.rangeBand()/t.length).attr("y",function(t,e){return m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(p(m(t,e))-p(0)),1)||0}),o=h.copy(),l=p.copy()}),t}var e,i,a,r,s,o,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=d3.scale.ordinal(),p=d3.scale.linear(),f=Math.floor(1e4*Math.random()),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=!0,b=!1,x="zero",w=n.utils.defaultColor(),k=!1,C=null,D=1200,_=.1,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=S,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(a=e,t):a},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(b=e,t):b},t.stackOffset=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(y=e,t):y},t.color=function(e){return arguments.length?(w=n.utils.getColor(e),t):w},t.barColor=function(e){return arguments.length?(C=n.utils.getColor(e),t):C},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(f=e,t):f},t.hideable=function(e){return arguments.length?(k=e,t):k},t.delay=function(e){return arguments.length?(D=e,t):D},t.groupSpacing=function(e){return arguments.length?(_=e,t):_},t},n.models.multiBarChart=function(){"use strict";function t(n){return n.each(function(n){var k=d3.select(this),E=this,P=(c||parseInt(k.style("width"))||960)-u.left-u.right,I=(d||parseInt(k.style("height"))||400)-u.top-u.bottom;if(t.update=function(){k.transition().duration(A).call(t)},t.container=this,C.disabled=n.map(function(t){return!!t.disabled}),!D){var N;D={};for(N in C)D[N]=C[N]instanceof Array?C[N].slice(0):C[N]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var F=k.selectAll(".nv-noData").data([_]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",u.left+P/2).attr("y",u.top+I/2).text(function(t){return t}),t}k.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var B=k.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),L=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),O=B.select("g");if(L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-controlsWrap"),f&&(o.width(P-T()),a.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),O.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),I=(d||parseInt(k.style("height"))||400)-u.top-u.bottom),O.select(".nv-legendWrap").attr("transform","translate("+T()+","+-u.top+")")),p){var R=[{key:"Grouped",disabled:a.stacked()},{key:"Stacked",disabled:!a.stacked()}];l.width(T()).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-u.top+")").call(l)}B.attr("transform","translate("+u.left+","+u.top+")"),v&&O.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)"),a.disabled(n.map(function(t){return t.disabled})).width(P).height(I).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var z=O.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(z.transition().call(a),g){r.scale(e).ticks(P/100).tickSize(-I,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(r);var $=O.select(".nv-x.nv-axis > g").selectAll("g");if($.selectAll("line, text").style("opacity",1),b){var V=function(t,e){return"translate("+t+","+e+")"},W=5,j=17;$.selectAll("text").attr("transform",function(t,e,n){return V(0,n%2==0?W:j)});var Y=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;O.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return V(0,0===e||Y%2!==0?j:W)})}y&&$.filter(function(t,e){return e%Math.ceil(n[0].values.length/(P/100))!==0}).selectAll("text, line").style("opacity",0),x&&$.selectAll(".tick text").attr("transform","rotate("+x+" 0,0)").style("text-anchor",x>0?"start":"end"),O.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(s.scale(i).ticks(I/36).tickSize(-P,0),O.select(".nv-y.nv-axis").transition().call(s)),o.dispatch.on("stateChange",function(e){C=e,S.stateChange(C),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(R=R.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}C.stacked=a.stacked(),S.stateChange(C),t.update()}}),S.on("tooltipShow",function(t){w&&M(t,E.parentNode)}),S.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),"undefined"!=typeof e.stacked&&(a.stacked(e.stacked),C.stacked=e.stacked),t.update()})}),t}var e,i,a=n.models.multiBar(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,y=!0,b=!1,x=0,w=!0,k=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},C={stacked:!1},D=null,_="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T=function(){return p?180:0},A=250;a.stacked(!1),r.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(v?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var M=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=r.tickFormat()(a.x()(e.point,e.pointIndex)),c=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=k(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],S.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){w&&n.tooltip.cleanup()}),t.dispatch=S,t.multibar=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(v=e,s.orient(e?"right":"left"),t):v},t.reduceXTicks=function(e){return arguments.length?(y=e,t):y},t.rotateLabels=function(e){return arguments.length?(x=e,t):x},t.staggerLabels=function(e){return arguments.length?(b=e,t):b},t.tooltip=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.state=function(e){return arguments.length?(C=e,t):C},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(_=e,t):_},t.transitionDuration=function(e){return arguments.length?(A=e,t):A},t},n.models.multiBarHorizontal=function(){"use strict";function t(n){return n.each(function(t){{var n=c-u.left-u.right,h=d-u.top-u.bottom;d3.select(this)}x&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),x&&t[0].values.map(function(e,n){var i=0,a=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=a-e.size,a-=e.size):(e.y1=i,i+=e.size)})});var _=i&&a?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(i||d3.merge(_).map(function(t){return t.x})).rangeBands(r||[0,h],.1),f.domain(a||d3.extent(d3.merge(_).map(function(t){return x?t.y>0?t.y1+t.y:t.y1:t.y}).concat(v))),f.range(w&&!x?s||[f.domain()[0]<0?C:0,n-(f.domain()[1]>0?C:0)]:s||[0,n]),o=o||p,l=l||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);{var T=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),A=T.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),M=(A.append("defs"),A.append("g"));T.select("g")}M.append("g").attr("class","nv-groups"),T.attr("transform","translate("+u.left+","+u.top+")");var E=T.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),E.transition().style("stroke-opacity",1).style("fill-opacity",.75);var P=E.selectAll("g.nv-bar").data(function(t){return t.values});P.exit().remove();var I=P.enter().append("g").attr("transform",function(e,n,i){return"translate("+l(x?e.y0:0)+","+(x?0:i*p.rangeBand()/t.length+p(g(e,n)))+")"});I.append("rect").attr("width",0).attr("height",p.rangeBand()/(x?1:t.length)),P.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),S.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[f(m(e,n)+(x?e.y0:0)),p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),S.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){S.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){S.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(x?t.length/2:e.series+.5)/t.length,f(m(e,n)+(x?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),I.append("text"),w&&!x?(P.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return D(m(t,e))}),P.transition().select("text").attr("x",function(t,e){return m(t,e)<0?-4:f(m(t,e))-f(0)+4})):P.selectAll("text").text(""),k&&!x?(I.append("text").classed("nv-bar-label",!0),P.select("text.nv-bar-label").attr("text-anchor",function(t,e){return m(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return g(t,e)}),P.transition().select("text.nv-bar-label").attr("x",function(t,e){return m(t,e)<0?f(0)-f(m(t,e))+4:-4})):P.selectAll("text.nv-bar-label").text(""),P.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),b&&(e||(e=t.map(function(){return!0})),P.style("fill",function(t,n,i){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()}).style("stroke",function(t,n,i){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[i]).toString()})),x?P.transition().attr("transform",function(t,e){return"translate("+f(t.y1)+","+p(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(f(m(t,e)+t.y0)-f(t.y0))}).attr("height",p.rangeBand()):P.transition().attr("transform",function(e,n){return"translate("+f(m(e,n)<0?m(e,n):0)+","+(e.series*p.rangeBand()/t.length+p(g(e,n)))+")"}).select("rect").attr("height",p.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(f(m(t,e))-f(0)),1)}),o=p.copy(),l=f.copy()}),t}var e,i,a,r,s,o,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,h=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),f=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=n.utils.defaultColor(),b=null,x=!1,w=!1,k=!1,C=60,D=d3.format(",.2f"),_=1200,S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=S,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(p=e,t):p},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(i=e,t):i},t.yDomain=function(e){return arguments.length?(a=e,t):a},t.xRange=function(e){return arguments.length?(r=e,t):r},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(x=e,t):x},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.barColor=function(e){return arguments.length?(b=n.utils.getColor(e),t):b},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(h=e,t):h},t.delay=function(e){return arguments.length?(_=e,t):_},t.showValues=function(e){return arguments.length?(w=e,t):w},t.showBarLabels=function(e){return arguments.length?(k=e,t):k},t.valueFormat=function(e){return arguments.length?(D=e,t):D},t.valuePadding=function(e){return arguments.length?(C=e,t):C},t},n.models.multiBarHorizontalChart=function(){"use strict";function t(n){return n.each(function(n){var v=d3.select(this),b=this,T=(c||parseInt(v.style("width"))||960)-u.left-u.right,A=(d||parseInt(v.style("height"))||400)-u.top-u.bottom;if(t.update=function(){v.transition().duration(_).call(t)},t.container=this,x.disabled=n.map(function(t){return!!t.disabled}),!w){var M;w={};for(M in x)w[M]=x[M]instanceof Array?x[M].slice(0):x[M]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var E=v.selectAll(".nv-noData").data([k]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",u.left+T/2).attr("y",u.top+A/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var P=v.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([n]),I=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),N=P.select("g");if(I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),I.append("g").attr("class","nv-barsWrap"),I.append("g").attr("class","nv-legendWrap"),I.append("g").attr("class","nv-controlsWrap"),f&&(o.width(T-D()),a.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),N.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),A=(d||parseInt(v.style("height"))||400)-u.top-u.bottom),N.select(".nv-legendWrap").attr("transform","translate("+D()+","+-u.top+")")),p){var F=[{key:"Grouped",disabled:a.stacked()},{key:"Stacked",disabled:!a.stacked()}];l.width(D()).color(["#444","#444","#444"]),N.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-u.top+")").call(l)}P.attr("transform","translate("+u.left+","+u.top+")"),a.disabled(n.map(function(t){return t.disabled})).width(T).height(A).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled}));var B=N.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(B.transition().call(a),g){r.scale(e).ticks(A/24).tickSize(-T,0),N.select(".nv-x.nv-axis").transition().call(r);var L=N.select(".nv-x.nv-axis").selectAll("g");L.selectAll("line, text")}m&&(s.scale(i).ticks(T/100).tickSize(-A,0),N.select(".nv-y.nv-axis").attr("transform","translate(0,"+A+")"),N.select(".nv-y.nv-axis").transition().call(s)),N.select(".nv-zeroLine line").attr("x1",i(0)).attr("x2",i(0)).attr("y1",0).attr("y2",-A),o.dispatch.on("stateChange",function(e){x=e,C.stateChange(x),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(F=F.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":a.stacked(!1);break;case"Stacked":a.stacked(!0)}x.stacked=a.stacked(),C.stateChange(x),t.update()}}),C.on("tooltipShow",function(t){y&&S(t,b.parentNode)}),C.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),"undefined"!=typeof e.stacked&&(a.stacked(e.stacked),x.stacked=e.stacked),t.update()})}),t}var e,i,a=n.models.multiBarHorizontal(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend().height(30),l=n.models.legend().height(30),u={top:30,right:20,bottom:50,left:60},c=null,d=null,h=n.utils.defaultColor(),p=!0,f=!0,g=!0,m=!0,v=!1,y=!0,b=function(t,e,n){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},x={stacked:v},w=null,k="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),D=function(){return p?180:0},_=250;a.stacked(v),r.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var S=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=r.tickFormat()(a.x()(e.point,e.pointIndex)),c=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=b(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"e":"w",null,i)};return a.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],C.tooltipShow(t)}),a.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=C,t.multibar=a,t.legend=o,t.xAxis=r,t.yAxis=s,d3.rebind(t,a,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),o.color(h),t):h},t.showControls=function(e){return arguments.length?(p=e,t):p},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.tooltip=function(e){return arguments.length?(b=e,t):b},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(x=e,t):x},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(k=e,t):k},t.transitionDuration=function(e){return arguments.length?(_=e,t):_},t},n.models.multiChart=function(){"use strict";function t(n){return n.each(function(n){var d=d3.select(this),S=this;t.update=function(){d.transition().call(t)},t.container=this;var T=(o||parseInt(d.style("width"))||960)-r.left-r.right,A=(l||parseInt(d.style("height"))||400)-r.top-r.bottom,M=n.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),E=n.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),P=n.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),I=n.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),N=n.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),F=n.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),B=n.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})}),L=n.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})});e.domain(d3.extent(d3.merge(B.concat(L)),function(t){return t.x})).range([0,T]);var O=d.selectAll("g.wrap.multiChart").data([n]),R=O.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");R.append("g").attr("class","x axis"),R.append("g").attr("class","y1 axis"),R.append("g").attr("class","y2 axis"),R.append("g").attr("class","lines1Wrap"),R.append("g").attr("class","lines2Wrap"),R.append("g").attr("class","bars1Wrap"),R.append("g").attr("class","bars2Wrap"),R.append("g").attr("class","stack1Wrap"),R.append("g").attr("class","stack2Wrap"),R.append("g").attr("class","legendWrap");
var z=O.select("g");u&&(C.width(T/2),z.select(".legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(C),r.top!=C.height()&&(r.top=C.height(),A=(l||parseInt(d.style("height"))||400)-r.top-r.bottom),z.select(".legendWrap").attr("transform","translate("+T/2+","+-r.top+")")),f.width(T).height(A).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"line"==n[e].type})),g.width(T).height(A).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"line"==n[e].type})),m.width(T).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"bar"==n[e].type})),v.width(T).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"bar"==n[e].type})),y.width(T).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"area"==n[e].type})),b.width(T).height(A).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"area"==n[e].type})),z.attr("transform","translate("+r.left+","+r.top+")");var $=z.select(".lines1Wrap").datum(M),V=z.select(".bars1Wrap").datum(P),W=z.select(".stack1Wrap").datum(N),j=z.select(".lines2Wrap").datum(E),Y=z.select(".bars2Wrap").datum(I),H=z.select(".stack2Wrap").datum(F),U=N.length?N.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],q=F.length?F.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];h.domain(i||d3.extent(d3.merge(B).concat(U),function(t){return t.y})).range([0,A]),p.domain(a||d3.extent(d3.merge(L).concat(q),function(t){return t.y})).range([0,A]),f.yDomain(h.domain()),m.yDomain(h.domain()),y.yDomain(h.domain()),g.yDomain(p.domain()),v.yDomain(p.domain()),b.yDomain(p.domain()),N.length&&d3.transition(W).call(y),F.length&&d3.transition(H).call(b),P.length&&d3.transition(V).call(m),I.length&&d3.transition(Y).call(v),M.length&&d3.transition($).call(f),E.length&&d3.transition(j).call(g),x.ticks(T/100).tickSize(-A,0),z.select(".x.axis").attr("transform","translate(0,"+A+")"),d3.transition(z.select(".x.axis")).call(x),w.ticks(A/36).tickSize(-T,0),d3.transition(z.select(".y1.axis")).call(w),k.ticks(A/36).tickSize(-T,0),d3.transition(z.select(".y2.axis")).call(k),z.select(".y2.axis").style("opacity",L.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),C.dispatch.on("stateChange",function(){t.update()}),D.on("tooltipShow",function(t){c&&_(t,S.parentNode)})}),t}var e,i,a,r={top:30,right:20,bottom:50,left:60},s=d3.scale.category20().range(),o=null,l=null,u=!0,c=!0,d=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},e=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=n.models.line().yScale(h),g=n.models.line().yScale(p),m=n.models.multiBar().stacked(!1).yScale(h),v=n.models.multiBar().stacked(!1).yScale(p),y=n.models.stackedArea().yScale(h),b=n.models.stackedArea().yScale(p),x=n.models.axis().scale(e).orient("bottom").tickPadding(5),w=n.models.axis().scale(h).orient("left"),k=n.models.axis().scale(p).orient("right"),C=n.models.legend().height(30),D=d3.dispatch("tooltipShow","tooltipHide"),_=function(e,i){var a=e.pos[0]+(i.offsetLeft||0),r=e.pos[1]+(i.offsetTop||0),s=x.tickFormat()(f.x()(e.point,e.pointIndex)),o=(2==e.series.yAxis?k:w).tickFormat()(f.y()(e.point,e.pointIndex)),l=d(e.series.key,s,o,e,t);n.tooltip.show([a,r],l,void 0,void 0,i.offsetParent)};return f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){return Math.round(100*y.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void D.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),y.dispatch.on("tooltipHide",function(t){D.tooltipHide(t)}),b.dispatch.on("tooltipShow",function(t){return Math.round(100*b.y()(t.point))?(t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],void D.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),b.dispatch.on("tooltipHide",function(t){D.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+r.left,t.pos[1]+r.top],D.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){D.tooltipHide(t)}),D.on("tooltipHide",function(){c&&n.tooltip.cleanup()}),t.dispatch=D,t.lines1=f,t.lines2=g,t.bars1=m,t.bars2=v,t.stack1=y,t.stack2=b,t.xAxis=x,t.yAxis1=w,t.yAxis2=k,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,f.x(e),m.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,f.y(e),m.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(i=e,t):i},t.yDomain2=function(e){return arguments.length?(a=e,t):a},t.margin=function(e){return arguments.length?(r=e,t):r},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(s=e,C.color(e),t):s},t.showLegend=function(e){return arguments.length?(u=e,t):u},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(d=e,t):d},t},n.models.ohlcBar=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,k=l-s.top-s.bottom,D=d3.select(this);c.domain(e||d3.extent(t[0].values.map(h).concat(y))),c.range(x?a||[.5*n/t[0].values.length,n*(t[0].values.length-.5)/t[0].values.length]:a||[0,n]),d.domain(i||[d3.min(t[0].values.map(v).concat(b)),d3.max(t[0].values.map(m).concat(b))]).range(r||[k,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var _=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),S=_.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),T=S.append("defs"),A=S.append("g"),M=_.select("g");A.append("g").attr("class","nv-ticks"),_.attr("transform","translate("+s.left+","+s.top+")"),D.on("click",function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:u})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),_.select("#nv-chart-clip-path-"+u+" rect").attr("width",n).attr("height",k),M.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var E=_.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});E.exit().remove();E.enter().append("path").attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(e,i){var a=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-a/2+",0l"+a/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+a/2+",0l"+-a/2+",0z"}).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+d(m(t,e))+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),C.elementMouseover({point:e,series:t[0],pos:[c(h(e,n)),d(p(e,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),C.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(t,e){C.elementClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(t,e){C.elementDblClick({value:p(t,e),data:t,index:e,pos:[c(h(t,e)),d(p(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()});E.attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(E).attr("transform",function(t,e){return"translate("+c(h(t,e))+","+d(m(t,e))+")"}).attr("d",function(e,i){var a=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,i))-d(m(e,i)))+"l"+-a/2+",0l"+a/2+",0l0,"+(d(v(e,i))-d(f(e,i)))+"l0,"+(d(g(e,i))-d(v(e,i)))+"l"+a/2+",0l"+-a/2+",0z"})}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},v=function(t){return t.low},y=[],b=[],x=!1,w=!0,k=n.utils.defaultColor(),C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=C,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(h=e,t):h},t.y=function(e){return arguments.length?(p=e,t):p},t.open=function(e){return arguments.length?(f=e,t):f},t.close=function(e){return arguments.length?(g=e,t):g},t.high=function(e){return arguments.length?(m=e,t):m},t.low=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.forceX=function(e){return arguments.length?(y=e,t):y},t.forceY=function(e){return arguments.length?(b=e,t):b},t.padData=function(e){return arguments.length?(x=e,t):x},t.clipEdge=function(e){return arguments.length?(w=e,t):w},t.color=function(e){return arguments.length?(k=n.utils.getColor(e),t):k},t.id=function(e){return arguments.length?(u=e,t):u},t},n.models.pie=function(){"use strict";function t(n){return n.each(function(t){function n(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return E(e(t))}}var o=i-e.left-e.right,c=a-e.top-e.bottom,C=Math.min(o,c)/2,D=C-C/5,_=d3.select(this),S=_.selectAll(".nv-wrap.nv-pie").data(t),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+l),A=T.append("g"),M=S.select("g");A.append("g").attr("class","nv-pie"),A.append("g").attr("class","nv-pieLabels"),S.attr("transform","translate("+e.left+","+e.top+")"),M.select(".nv-pie").attr("transform","translate("+o/2+","+c/2+")"),M.select(".nv-pieLabels").attr("transform","translate("+o/2+","+c/2+")"),_.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:l})});var E=d3.svg.arc().outerRadius(D);b&&E.startAngle(b),x&&E.endAngle(x),v&&E.innerRadius(C*w);var P=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:s(t)}),I=S.select(".nv-pie").selectAll(".nv-slice").data(P),N=S.select(".nv-pieLabels").selectAll(".nv-label").data(P);I.exit().remove(),N.exit().remove();var F=I.enter().append("g").attr("class","nv-slice").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({label:r(t.data),value:s(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:l})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({label:r(t.data),value:s(t.data),point:t.data,index:e,id:l})}).on("click",function(t,e){k.elementClick({label:r(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()}).on("dblclick",function(t,e){k.elementDblClick({label:r(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()});I.attr("fill",function(t,e){return u(t,e)}).attr("stroke",function(t,e){return u(t,e)});F.append("path").each(function(t){this._current=t});if(I.select("path").transition().attr("d",E).attrTween("d",n),h){var B=d3.svg.arc().innerRadius(0);p&&(B=E),f&&(B=d3.svg.arc().outerRadius(E.outerRadius())),N.enter().append("g").classed("nv-label",!0).each(function(t){var e=d3.select(this);e.attr("transform",function(t){if(y){t.outerRadius=D+10,t.innerRadius=D+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+B.centroid(t)+") rotate("+e+")"}return t.outerRadius=C+10,t.innerRadius=C+15,"translate("+B.centroid(t)+")"}),e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),e.append("text").style("text-anchor",y?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var L={},O=14,R=140,z=function(t){return Math.floor(t[0]/R)*R+","+Math.floor(t[1]/O)*O};N.transition().attr("transform",function(t){if(y){t.outerRadius=D+10,t.innerRadius=D+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+B.centroid(t)+") rotate("+e+")"}t.outerRadius=C+10,t.innerRadius=C+15;var n=B.centroid(t),i=z(n);return L[i]&&(n[1]-=O),L[z(n)]=!0,"translate("+n+")"}),N.select(".nv-label text").style("text-anchor",y?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t){var e=(t.endAngle-t.startAngle)/(2*Math.PI),n={key:r(t.data),value:s(t.data),percent:d3.format("%")(e)};return t.value&&e>m?n[g]:""})}}),t}var e={top:0,right:0,bottom:0,left:0},i=500,a=500,r=function(t){return t.x},s=function(t){return t.y},o=function(t){return t.description},l=Math.floor(1e4*Math.random()),u=n.utils.defaultColor(),c=d3.format(",.2f"),h=!0,p=!0,f=!1,g="key",m=.02,v=!1,y=!1,b=!1,x=!1,w=.5,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=k,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(i=e,t):i},t.height=function(e){return arguments.length?(a=e,t):a},t.values=function(){return n.log("pie.values() is no longer supported."),t},t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(s=d3.functor(e),t):s},t.description=function(e){return arguments.length?(o=e,t):o},t.showLabels=function(e){return arguments.length?(h=e,t):h},t.labelSunbeamLayout=function(e){return arguments.length?(y=e,t):y},t.donutLabelsOutside=function(e){return arguments.length?(f=e,t):f},t.pieLabelsOutside=function(e){return arguments.length?(p=e,t):p},t.labelType=function(e){return arguments.length?(g=e,g=g||"key",t):g},t.donut=function(e){return arguments.length?(v=e,t):v},t.donutRatio=function(e){return arguments.length?(w=e,t):w},t.startAngle=function(e){return arguments.length?(b=e,t):b},t.endAngle=function(e){return arguments.length?(x=e,t):x},t.id=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.valueFormat=function(e){return arguments.length?(c=e,t):c},t.labelThreshold=function(e){return arguments.length?(m=e,t):m},t},n.models.pieChart=function(){"use strict";function t(n){return n.each(function(n){var l=d3.select(this),u=(r||parseInt(l.style("width"))||960)-a.left-a.right,c=(s||parseInt(l.style("height"))||400)-a.top-a.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,d.disabled=n.map(function(t){return!!t.disabled}),!h){var g;h={};for(g in d)h[g]=d[g]instanceof Array?d[g].slice(0):d[g]}if(!n||!n.length){var m=l.selectAll(".nv-noData").data([p]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",a.left+u/2).attr("y",a.top+c/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var v=l.selectAll("g.nv-wrap.nv-pieChart").data([n]),y=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),b=v.select("g");y.append("g").attr("class","nv-pieWrap"),y.append("g").attr("class","nv-legendWrap"),o&&(i.width(u).key(e.x()),v.select(".nv-legendWrap").datum(n).call(i),a.top!=i.height()&&(a.top=i.height(),c=(s||parseInt(l.style("height"))||400)-a.top-a.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-a.top+")")),v.attr("transform","translate("+a.left+","+a.top+")"),e.width(u).height(c);var x=b.select(".nv-pieWrap").datum([n]);d3.transition(x).call(e),i.dispatch.on("stateChange",function(e){d=e,f.stateChange(d),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){f.tooltipHide(t)}),f.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),d.disabled=e.disabled),t.update()})}),t}var e=n.models.pie(),i=n.models.legend(),a={top:30,right:20,bottom:20,left:20},r=null,s=null,o=!0,l=n.utils.defaultColor(),u=!0,c=function(t,e){return"<h3>"+t+"</h3><p>"+e+"</p>"},d={},h=null,p="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),g=function(i,a){var r=e.description()(i.point)||e.x()(i.point),s=i.pos[0]+(a&&a.offsetLeft||0),o=i.pos[1]+(a&&a.offsetTop||0),l=e.valueFormat()(e.y()(i.point)),u=c(r,l,i,t);n.tooltip.show([s,o],u,i.value<0?"n":"s",null,a)};return e.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],f.tooltipShow(t)}),f.on("tooltipShow",function(t){u&&g(t)}),f.on("tooltipHide",function(){u&&n.tooltip.cleanup()}),t.legend=i,t.dispatch=f,t.pie=e,d3.rebind(t,e,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(s=e,t):s},t.color=function(a){return arguments.length?(l=n.utils.getColor(a),i.color(l),e.color(l),t):l},t.showLegend=function(e){return arguments.length?(o=e,t):o},t.tooltips=function(e){return arguments.length?(u=e,t):u},t.tooltipContent=function(e){return arguments.length?(c=e,t):c},t.state=function(e){return arguments.length?(d=e,t):d},t.defaultState=function(e){return arguments.length?(h=e,t):h},t.noData=function(e){return arguments.length?(p=e,t):p},t},n.models.scatter=function(){"use strict";function t($){return $.each(function(t){function $(){if(!k)return!1;var e=d3.merge(t.map(function(t,e){return t.values.map(function(t,n){var i=f(t,n),a=g(t,n);return[d(i)+1e-7*Math.random(),h(a)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return D(t[4],e)})}));if(R===!0){if(A){var n=H.select("defs").selectAll(".nv-point-clips").data([c]).enter();n.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+c);var i=H.select("#nv-points-clip-"+c).selectAll("circle").data(e);i.enter().append("circle").attr("r",M),i.exit().remove(),i.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),H.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+c+")")}e.length&&(e.push([d.range()[0]-20,h.range()[0]-20,null,null]),e.push([d.range()[1]+20,h.range()[1]+20,null,null]),e.push([d.range()[0]-20,h.range()[0]+20,null,null]),e.push([d.range()[1]+20,h.range()[1]-20,null,null]));var a=d3.geom.polygon([[-10,-10],[-10,l+10],[o+10,l+10],[o+10,-10]]),r=d3.geom.voronoi(e).map(function(t,n){return{data:a.clip(t),series:e[n][2],point:e[n][3]}}),u=H.select(".nv-point-paths").selectAll("path").data(r);u.enter().append("path").attr("class",function(t,e){return"nv-path-"+e}),u.exit().remove(),u.attr("d",function(t){return 0===t.data.length?"M 0 0":"M"+t.data.join("L")+"Z"});var p=function(e,n){if(z)return 0;var i=t[e.series];if("undefined"!=typeof i){var a=i.values[e.point];n({point:a,series:i,pos:[d(f(a,e.point))+s.left,h(g(a,e.point))+s.top],seriesIndex:e.series,pointIndex:e.point})}};u.on("click",function(t){p(t,O.elementClick)}).on("mouseover",function(t){p(t,O.elementMouseover)}).on("mouseout",function(t){p(t,O.elementMouseout)})}else H.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(z||!t[e.series])return 0;var i=t[e.series],a=i.values[n];O.elementClick({point:a,series:i,pos:[d(f(a,n))+s.left,h(g(a,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(z||!t[e.series])return 0;var i=t[e.series],a=i.values[n];O.elementMouseover({point:a,series:i,pos:[d(f(a,n))+s.left,h(g(a,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,n){if(z||!t[e.series])return 0;var i=t[e.series],a=i.values[n];O.elementMouseout({point:a,series:i,seriesIndex:e.series,pointIndex:n})});z=!1}var V=o-s.left-s.right,W=l-s.top-s.bottom,j=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var Y=E&&P&&F?[]:d3.merge(t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),size:m(t,e)}})}));d.domain(E||d3.extent(Y.map(function(t){return t.x}).concat(b))),d.range(_&&t[0]?I||[(V*S+V)/(2*t[0].values.length),V-V*(1+S)/(2*t[0].values.length)]:I||[0,V]),h.domain(P||d3.extent(Y.map(function(t){return t.y}).concat(x))).range(N||[W,0]),p.domain(F||d3.extent(Y.map(function(t){return t.size}).concat(w))).range(B||[16,256]),(d.domain()[0]===d.domain()[1]||h.domain()[0]===h.domain()[1])&&(L=!0),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]:[-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),isNaN(h.domain()[0])&&h.domain([-1,1]),e=e||d,i=i||h,a=a||p;var H=j.selectAll("g.nv-wrap.nv-scatter").data([t]),U=H.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c+(L?" nv-single-point":"")),q=U.append("defs"),X=U.append("g"),G=H.select("g");X.append("g").attr("class","nv-groups"),X.append("g").attr("class","nv-point-paths"),H.attr("transform","translate("+s.left+","+s.top+")"),q.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),H.select("#nv-edge-clip-"+c+" rect").attr("width",V).attr("height",W>0?W:0),G.attr("clip-path",T?"url(#nv-edge-clip-"+c+")":""),z=!0;var K=H.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});if(K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().remove(),K.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),K.transition().style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5),y){var Z=K.selectAll("circle.nv-point").data(function(t){return t.values},C);Z.enter().append("circle").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("cx",function(t,i){return n.utils.NaNtoZero(e(f(t,i)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(i(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)}),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(h(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(p(m(t,e))/Math.PI)})}else{var Z=K.selectAll("path.nv-point").data(function(t){return t.values});Z.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t,n){return"translate("+e(f(t,n))+","+i(g(t,n))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))})),Z.exit().remove(),K.exit().selectAll("path.nv-point").transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+h(g(t,e))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return p(m(t,e))}))}clearTimeout(r),r=setTimeout($,300),e=d.copy(),i=h.copy(),a=p.copy()}),t}var e,i,a,r,s={top:0,right:0,bottom:0,left:0},o=960,l=500,u=n.utils.defaultColor(),c=Math.floor(1e5*Math.random()),d=d3.scale.linear(),h=d3.scale.linear(),p=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.size||1},v=function(t){return t.shape||"circle"},y=!0,b=[],x=[],w=[],k=!0,C=null,D=function(t){return!t.notActive},_=!1,S=.1,T=!1,A=!0,M=function(){return 25},E=null,P=null,I=null,N=null,F=null,B=null,L=!1,O=d3.dispatch("elementClick","elementMouseover","elementMouseout"),R=!0,z=!1;return t.clearHighlights=function(){d3.selectAll(".nv-chart-"+c+" .nv-point.hover").classed("hover",!1)},t.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+c+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)},O.on("elementMouseover.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),O.on("elementMouseout.point",function(e){k&&t.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),t.dispatch=O,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=d3.functor(e),t):f},t.y=function(e){return arguments.length?(g=d3.functor(e),t):g},t.size=function(e){return arguments.length?(m=d3.functor(e),t):m},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(h=e,t):h},t.zScale=function(e){return arguments.length?(p=e,t):p},t.xDomain=function(e){return arguments.length?(E=e,t):E},t.yDomain=function(e){return arguments.length?(P=e,t):P},t.sizeDomain=function(e){return arguments.length?(F=e,t):F},t.xRange=function(e){return arguments.length?(I=e,t):I},t.yRange=function(e){return arguments.length?(N=e,t):N},t.sizeRange=function(e){return arguments.length?(B=e,t):B},t.forceX=function(e){return arguments.length?(b=e,t):b},t.forceY=function(e){return arguments.length?(x=e,t):x},t.forceSize=function(e){return arguments.length?(w=e,t):w},t.interactive=function(e){return arguments.length?(k=e,t):k},t.pointKey=function(e){return arguments.length?(C=e,t):C},t.pointActive=function(e){return arguments.length?(D=e,t):D},t.padData=function(e){return arguments.length?(_=e,t):_},t.padDataOuter=function(e){return arguments.length?(S=e,t):S},t.clipEdge=function(e){return arguments.length?(T=e,t):T},t.clipVoronoi=function(e){return arguments.length?(A=e,t):A},t.useVoronoi=function(e){return arguments.length?(R=e,R===!1&&(A=!1),t):R},t.clipRadius=function(e){return arguments.length?(M=e,t):M},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.shape=function(e){return arguments.length?(v=e,t):v},t.onlyCircles=function(e){return arguments.length?(y=e,t):y},t.id=function(e){return arguments.length?(c=e,t):c},t.singlePoint=function(e){return arguments.length?(L=e,t):L},t},n.models.scatterChart=function(){"use strict";function t(n){return n.each(function(n){function T(){if(_)return U.select(".nv-point-paths").style("pointer-events","all"),!1;U.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(D).focus(t[0]),f.distortion(D).focus(t[1]),U.select(".nv-scatterWrap").call(e),x&&U.select(".nv-x.nv-axis").call(i),w&&U.select(".nv-y.nv-axis").call(a),U.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),U.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var A=d3.select(this),M=this,z=(c||parseInt(A.style("width"))||960)-u.left-u.right,$=(d||parseInt(A.style("height"))||400)-u.top-u.bottom;if(t.update=function(){A.transition().duration(F).call(t)},t.container=this,E.disabled=n.map(function(t){return!!t.disabled}),!P){var V;P={};for(V in E)P[V]=E[V]instanceof Array?E[V].slice(0):E[V]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var W=A.selectAll(".nv-noData").data([N]);return W.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),W.attr("x",u.left+z/2).attr("y",u.top+$/2).text(function(t){return t}),t}A.selectAll(".nv-noData").remove(),B=B||p,L=L||f;var j=A.selectAll("g.nv-wrap.nv-scatterChart").data([n]),Y=j.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),H=Y.append("g"),U=j.select("g");if(H.append("rect").attr("class","nvd3 nv-background"),H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-scatterWrap"),H.append("g").attr("class","nv-distWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-controlsWrap"),b){var q=C?z/2:z;r.width(q),j.select(".nv-legendWrap").datum(n).call(r),u.top!=r.height()&&(u.top=r.height(),$=(d||parseInt(A.style("height"))||400)-u.top-u.bottom),j.select(".nv-legendWrap").attr("transform","translate("+(z-q)+","+-u.top+")")}if(C&&(s.width(180).color(["#444"]),U.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-u.top+")").call(s)),j.attr("transform","translate("+u.left+","+u.top+")"),k&&U.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)"),e.width(z).height($).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),0!==g&&e.xDomain(null),0!==m&&e.yDomain(null),j.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),0!==g){var X=p.domain()[1]-p.domain()[0];e.xDomain([p.domain()[0]-g*X,p.domain()[1]+g*X])}if(0!==m){var G=f.domain()[1]-f.domain()[0];e.yDomain([f.domain()[0]-m*G,f.domain()[1]+m*G])}(0!==m||0!==g)&&j.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),x&&(i.scale(p).ticks(i.ticks()&&i.ticks().length?i.ticks():z/100).tickSize(-$,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),w&&(a.scale(f).ticks(a.ticks()&&a.ticks().length?a.ticks():$/36).tickSize(-z,0),U.select(".nv-y.nv-axis").call(a)),v&&(o.getData(e.x()).scale(p).width(z).color(n.map(function(t,e){return t.color||h(t,e)
}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),y&&(l.getData(e.y()).scale(f).width($).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(k?z:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(U.select(".nv-background").attr("width",z).attr("height",$),U.select(".nv-background").on("mousemove",T),U.select(".nv-background").on("click",function(){_=!_}),e.dispatch.on("elementClick.freezeFisheye",function(){_=!_})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,D=n.disabled?0:2.5,U.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),U.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(D).focus(0),f.distortion(D).focus(0),U.select(".nv-scatterWrap").call(e),U.select(".nv-x.nv-axis").call(i),U.select(".nv-y.nv-axis").call(a)):_=!1,t.update()}),r.dispatch.on("stateChange",function(e){E.disabled=e.disabled,I.stateChange(E),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",function(){return t.pos[1]-$}),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],I.tooltipShow(t)}),I.on("tooltipShow",function(t){S&&O(t,M.parentNode)}),I.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),E.disabled=e.disabled),t.update()}),B=p.copy(),L=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),a=n.models.axis(),r=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=0,m=0,v=!1,y=!1,b=!0,x=!0,w=!0,k=!1,C=!!d3.fisheye,D=0,_=!1,S=!0,T=function(t,e){return"<strong>"+e+"</strong>"},A=function(t,e,n){return"<strong>"+n+"</strong>"},M=null,E={},P=null,I=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N="No Data Available.",F=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),a.orient(k?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var B,L,O=function(r,s){var o=r.pos[0]+(s.offsetLeft||0),l=r.pos[1]+(s.offsetTop||0),c=r.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),h=p.range()[0]+u.left+(s.offsetLeft||0),g=r.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(r.point,r.pointIndex)),v=a.tickFormat()(e.y()(r.point,r.pointIndex));null!=T&&n.tooltip.show([c,d],T(r.series.key,m,v,r,t),"n",1,s,"x-nvtooltip"),null!=A&&n.tooltip.show([h,g],A(r.series.key,m,v,r,t),"e",1,s,"y-nvtooltip"),null!=M&&n.tooltip.show([o,l],M(r.series.key,m,v,r,t),r.value<0?"n":"s",null,s)},R=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){I.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),I.on("tooltipHide",function(){S&&n.tooltip.cleanup()}),t.dispatch=I,t.scatter=e,t.legend=r,t.controls=s,t.xAxis=i,t.yAxis=a,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),r.color(h),o.color(h),l.color(h),t):h},t.showDistX=function(e){return arguments.length?(v=e,t):v},t.showDistY=function(e){return arguments.length?(y=e,t):y},t.showControls=function(e){return arguments.length?(C=e,t):C},t.showLegend=function(e){return arguments.length?(b=e,t):b},t.showXAxis=function(e){return arguments.length?(x=e,t):x},t.showYAxis=function(e){return arguments.length?(w=e,t):w},t.rightAlignYAxis=function(e){return arguments.length?(k=e,a.orient(e?"right":"left"),t):k},t.fisheye=function(e){return arguments.length?(D=e,t):D},t.xPadding=function(e){return arguments.length?(g=e,t):g},t.yPadding=function(e){return arguments.length?(m=e,t):m},t.tooltips=function(e){return arguments.length?(S=e,t):S},t.tooltipContent=function(e){return arguments.length?(M=e,t):M},t.tooltipXContent=function(e){return arguments.length?(T=e,t):T},t.tooltipYContent=function(e){return arguments.length?(A=e,t):A},t.state=function(e){return arguments.length?(E=e,t):E},t.defaultState=function(e){return arguments.length?(P=e,t):P},t.noData=function(e){return arguments.length?(N=e,t):N},t.transitionDuration=function(e){return arguments.length?(F=e,t):F},t},n.models.scatterPlusLineChart=function(){"use strict";function t(n){return n.each(function(n){function _(){if(C)return Y.select(".nv-point-paths").style("pointer-events","all"),!1;Y.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);p.distortion(k).focus(t[0]),f.distortion(k).focus(t[1]),Y.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),y&&Y.select(".nv-x.nv-axis").call(i),b&&Y.select(".nv-y.nv-axis").call(a),Y.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(o),Y.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var S=d3.select(this),T=this,O=(c||parseInt(S.style("width"))||960)-u.left-u.right,R=(d||parseInt(S.style("height"))||400)-u.top-u.bottom;if(t.update=function(){S.transition().duration(I).call(t)},t.container=this,A.disabled=n.map(function(t){return!!t.disabled}),!M){var z;M={};for(z in A)M[z]=A[z]instanceof Array?A[z].slice(0):A[z]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var $=S.selectAll(".nv-noData").data([P]);return $.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),$.attr("x",u.left+O/2).attr("y",u.top+R/2).text(function(t){return t}),t}S.selectAll(".nv-noData").remove(),p=e.xScale(),f=e.yScale(),N=N||p,F=F||f;var V=S.selectAll("g.nv-wrap.nv-scatterChart").data([n]),W=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),j=W.append("g"),Y=V.select("g");j.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-scatterWrap"),j.append("g").attr("class","nv-regressionLinesWrap"),j.append("g").attr("class","nv-distWrap"),j.append("g").attr("class","nv-legendWrap"),j.append("g").attr("class","nv-controlsWrap"),V.attr("transform","translate("+u.left+","+u.top+")"),x&&Y.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),v&&(r.width(O/2),V.select(".nv-legendWrap").datum(n).call(r),u.top!=r.height()&&(u.top=r.height(),R=(d||parseInt(S.style("height"))||400)-u.top-u.bottom),V.select(".nv-legendWrap").attr("transform","translate("+O/2+","+-u.top+")")),w&&(s.width(180).color(["#444"]),Y.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-u.top+")").call(s)),e.width(O).height(R).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),V.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),V.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var H=V.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});H.enter().append("g").attr("class","nv-regLines");{var U=H.selectAll(".nv-regLine").data(function(t){return[t]});U.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}U.transition().attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",function(t){return f(p.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return f(p.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return h(t,n)}).style("stroke-opacity",function(t){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),y&&(i.scale(p).ticks(i.ticks()?i.ticks():O/100).tickSize(-R,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(i)),b&&(a.scale(f).ticks(a.ticks()?a.ticks():R/36).tickSize(-O,0),Y.select(".nv-y.nv-axis").call(a)),g&&(o.getData(e.x()).scale(p).width(O).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),Y.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(o)),m&&(l.getData(e.y()).scale(f).width(R).color(n.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!n[e].disabled})),j.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),Y.select(".nv-distributionY").attr("transform","translate("+(x?O:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(Y.select(".nv-background").attr("width",O).attr("height",R),Y.select(".nv-background").on("mousemove",_),Y.select(".nv-background").on("click",function(){C=!C}),e.dispatch.on("elementClick.freezeFisheye",function(){C=!C})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,k=n.disabled?0:2.5,Y.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),Y.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(p.distortion(k).focus(0),f.distortion(k).focus(0),Y.select(".nv-scatterWrap").call(e),Y.select(".nv-x.nv-axis").call(i),Y.select(".nv-y.nv-axis").call(a)):C=!1,t.update()}),r.dispatch.on("stateChange",function(e){A=e,E.stateChange(A),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-R),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+o.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],E.tooltipShow(t)}),E.on("tooltipShow",function(t){D&&B(t,T.parentNode)}),E.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),A.disabled=e.disabled),t.update()}),N=p.copy(),F=f.copy()}),t}var e=n.models.scatter(),i=n.models.axis(),a=n.models.axis(),r=n.models.legend(),s=n.models.legend(),o=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,h=n.utils.defaultColor(),p=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=!1,m=!1,v=!0,y=!0,b=!0,x=!1,w=!!d3.fisheye,k=0,C=!1,D=!0,_=function(t,e){return"<strong>"+e+"</strong>"},S=function(t,e,n){return"<strong>"+n+"</strong>"},T=function(t,e,n,i){return"<h3>"+t+"</h3><p>"+i+"</p>"},A={},M=null,E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),P="No Data Available.",I=250;e.xScale(p).yScale(f),i.orient("bottom").tickPadding(10),a.orient(x?"right":"left").tickPadding(10),o.axis("x"),l.axis("y"),s.updateState(!1);var N,F,B=function(r,s){var o=r.pos[0]+(s.offsetLeft||0),l=r.pos[1]+(s.offsetTop||0),c=r.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),h=p.range()[0]+u.left+(s.offsetLeft||0),g=r.pos[1]+(s.offsetTop||0),m=i.tickFormat()(e.x()(r.point,r.pointIndex)),v=a.tickFormat()(e.y()(r.point,r.pointIndex));null!=_&&n.tooltip.show([c,d],_(r.series.key,m,v,r,t),"n",1,s,"x-nvtooltip"),null!=S&&n.tooltip.show([h,g],S(r.series.key,m,v,r,t),"e",1,s,"y-nvtooltip"),null!=T&&n.tooltip.show([o,l],T(r.series.key,m,v,r.point.tooltip,r,t),r.value<0?"n":"s",null,s)},L=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){E.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),E.on("tooltipHide",function(){D&&n.tooltip.cleanup()}),t.dispatch=E,t.scatter=e,t.legend=r,t.controls=s,t.xAxis=i,t.yAxis=a,t.distX=o,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),r.color(h),o.color(h),l.color(h),t):h},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(m=e,t):m},t.showControls=function(e){return arguments.length?(w=e,t):w},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.showXAxis=function(e){return arguments.length?(y=e,t):y},t.showYAxis=function(e){return arguments.length?(b=e,t):b},t.rightAlignYAxis=function(e){return arguments.length?(x=e,a.orient(e?"right":"left"),t):x},t.fisheye=function(e){return arguments.length?(k=e,t):k},t.tooltips=function(e){return arguments.length?(D=e,t):D},t.tooltipContent=function(e){return arguments.length?(T=e,t):T},t.tooltipXContent=function(e){return arguments.length?(_=e,t):_},t.tooltipYContent=function(e){return arguments.length?(S=e,t):S},t.state=function(e){return arguments.length?(A=e,t):A},t.defaultState=function(e){return arguments.length?(M=e,t):M},t.noData=function(e){return arguments.length?(P=e,t):P},t.transitionDuration=function(e){return arguments.length?(I=e,t):I},t},n.models.sparkline=function(){"use strict";function t(n){return n.each(function(t){var n=o-s.left-s.right,u=l-s.top-s.bottom,g=d3.select(this);c.domain(e||d3.extent(t,h)).range(a||[0,n]),d.domain(i||d3.extent(t,p)).range(r||[u,0]);{var m=g.selectAll("g.nv-wrap.nv-sparkline").data([t]),v=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");v.append("g"),m.select("g")}m.attr("transform","translate("+s.left+","+s.top+")");var y=m.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||f(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(h(t,e))}).y(function(t,e){return d(p(t,e))}));var b=m.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),i=e(n.lastIndexOf(d.domain()[1])),a=e(n.indexOf(d.domain()[0])),r=e(n.length-1);return[a,i,r].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t){return c(h(t,t.pointIndex))}).attr("cy",function(t){return d(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t){return h(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var e,i,a,r,s={top:2,right:0,bottom:2,left:0},o=400,l=32,u=!0,c=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},f=n.utils.getColor(["#000"]);return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(h=d3.functor(e),t):h},t.y=function(e){return arguments.length?(p=d3.functor(e),t):p},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(a=e,t):a},t.yRange=function(e){return arguments.length?(r=e,t):r},t.animate=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(f=n.utils.getColor(e),t):f},t},n.models.sparklinePlus=function(){"use strict";function t(n){return n.each(function(h){function m(){if(!u){var t=S.selectAll(".nv-hoverValue").data(l),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(a.x()(h[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(n.append("line").attr("x1",0).attr("y1",-r.top).attr("x2",0).attr("y2",x),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-r.top).attr("text-anchor","end").attr("dy",".9em"),S.select(".nv-hoverValue .nv-xValue").text(c(a.x()(h[l[0]],l[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-r.top).attr("text-anchor","start").attr("dy",".9em"),S.select(".nv-hoverValue .nv-yValue").text(d(a.y()(h[l[0]],l[0]))))}}function v(){function t(t,e){for(var n=Math.abs(a.x()(t[0],0)-e),i=0,r=0;r<t.length;r++)Math.abs(a.x()(t[r],r)-e)<n&&(n=Math.abs(a.x()(t[r],r)-e),i=r);return i}if(!u){var n=d3.mouse(this)[0]-r.left;l=[t(h,Math.round(e.invert(n)))],m()}}var y=d3.select(this),b=(s||parseInt(y.style("width"))||960)-r.left-r.right,x=(o||parseInt(y.style("height"))||400)-r.top-r.bottom;if(t.update=function(){t(n)},t.container=this,!h||!h.length){var w=y.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",r.left+b/2).attr("y",r.top+x/2).text(function(t){return t}),t}y.selectAll(".nv-noData").remove();var k=a.y()(h[h.length-1],h.length-1);e=a.xScale(),i=a.yScale();var C=y.selectAll("g.nv-wrap.nv-sparklineplus").data([h]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),_=D.append("g"),S=C.select("g");_.append("g").attr("class","nv-sparklineWrap"),_.append("g").attr("class","nv-valueWrap"),_.append("g").attr("class","nv-hoverArea"),C.attr("transform","translate("+r.left+","+r.top+")");var T=S.select(".nv-sparklineWrap");a.width(b).height(x),T.call(a);var A=S.select(".nv-valueWrap"),M=A.selectAll(".nv-currentValue").data([k]);M.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),M.attr("x",b+(f?r.right:0)).attr("y",p?function(t){return i(t)}:0).style("fill",a.color()(h[h.length-1],h.length-1)).text(d(k)),_.select(".nv-hoverArea").append("rect").on("mousemove",v).on("click",function(){u=!u}).on("mouseout",function(){l=[],m()}),S.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-r.left+","+-r.top+")"}).attr("width",b+r.left+r.right).attr("height",x+r.top)}),t}var e,i,a=n.models.sparkline(),r={top:15,right:100,bottom:10,left:50},s=null,o=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),h=!0,p=!0,f=!1,g="No Data Available.";return t.sparkline=a,d3.rebind(t,a,"x","y","xScale","yScale","color"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(o=e,t):o},t.xTickFormat=function(e){return arguments.length?(c=e,t):c},t.yTickFormat=function(e){return arguments.length?(d=e,t):d},t.showValue=function(e){return arguments.length?(h=e,t):h},t.alignValue=function(e){return arguments.length?(p=e,t):p},t.rightAlignValue=function(e){return arguments.length?(f=e,t):f},t.noData=function(e){return arguments.length?(g=e,t):g},t},n.models.stackedArea=function(){"use strict";function t(n){return n.each(function(n){var d=r-a.left-a.right,y=s-a.top-a.bottom,b=d3.select(this);e=m.xScale(),i=m.yScale();var x=n;n.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var w=n.filter(function(t){return!t.disabled});n=d3.layout.stack().order(p).offset(h).values(function(t){return t.values}).x(u).y(c).out(function(t,e,n){var i=0===c(t)?0:n;t.display={y:i,y0:e}})(w);var k=b.selectAll("g.nv-wrap.nv-stackedarea").data([n]),C=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),D=C.append("defs"),_=C.append("g"),S=k.select("g");_.append("g").attr("class","nv-areaWrap"),_.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+a.left+","+a.top+")"),m.width(d).height(y).x(u).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(n.map(function(t){return t.color||o(t,t.seriesIndex)}));var T=S.select(".nv-scatterWrap").datum(n);T.call(m),D.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),k.select("#nv-edge-clip-"+l+" rect").attr("width",d).attr("height",y),S.attr("clip-path",g?"url(#nv-edge-clip-"+l+")":"");var A=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y+t.display.y0)}).interpolate(f),M=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return i(t.display.y0)}).y1(function(t){return i(t.display.y0)}),E=S.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});E.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t){return M(t.values,t.seriesIndex)}).on("mouseover",function(t){d3.select(this).classed("hover",!0),v.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t){d3.select(this).classed("hover",!1),v.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t){d3.select(this).classed("hover",!1),v.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),E.exit().remove(),E.style("fill",function(t){return t.color||o(t,t.seriesIndex)}).style("stroke",function(t){return t.color||o(t,t.seriesIndex)}),E.transition().attr("d",function(t,e){return A(t.values,e)}),m.dispatch.on("elementMouseover.area",function(t){S.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(t){S.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,i,a=t.length,r=t[0].length,s=1/a,o=[];for(n=0;r>n;++n){for(e=0,i=0;e<x.length;e++)i+=c(x[e].values[n]);if(i)for(e=0;a>e;e++)t[e][n][1]/=i;else for(e=0;a>e;e++)t[e][n][1]=s}for(n=0;r>n;++n)o[n]=0;return o}}),t}var e,i,a={top:0,right:0,bottom:0,left:0},r=960,s=500,o=n.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=function(t){return t.x},c=function(t){return t.y},d="stack",h="zero",p="default",f="linear",g=!1,m=n.models.scatter(),v=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return m.size(2.2).sizeDomain([2.2,2.2]),m.dispatch.on("elementClick.area",function(t){v.areaClick(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],v.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){v.tooltipHide(t)}),t.dispatch=v,t.scatter=m,d3.rebind(t,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(u=d3.functor(e),t):u},t.y=function(e){return arguments.length?(c=d3.functor(e),t):c},t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(s=e,t):s},t.clipEdge=function(e){return arguments.length?(g=e,t):g},t.color=function(e){return arguments.length?(o=n.utils.getColor(e),t):o},t.offset=function(e){return arguments.length?(h=e,t):h},t.order=function(e){return arguments.length?(p=e,t):p},t.style=function(e){if(!arguments.length)return d;switch(d=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}return t},t.interpolate=function(e){return arguments.length?(f=e,t):f},t},n.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var I=d3.select(this),N=this,F=(d||parseInt(I.style("width"))||960)-c.left-c.right,B=(h||parseInt(I.style("height"))||400)-c.top-c.bottom;if(t.update=function(){I.transition().duration(E).call(t)},t.container=this,C.disabled=w.map(function(t){return!!t.disabled}),!D){var L;D={};for(L in C)D[L]=C[L]instanceof Array?C[L].slice(0):C[L]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var O=I.selectAll(".nv-noData").data([_]);return O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),O.attr("x",c.left+F/2).attr("y",c.top+B/2).text(function(t){return t}),t}I.selectAll(".nv-noData").remove(),e=a.xScale(),i=a.yScale();var R=I.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),z=R.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),$=R.select("g");if(z.append("rect").style("opacity",0),z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-stackedWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),z.append("g").attr("class","nv-interactive"),$.select("rect").attr("width",F).attr("height",B),g){var V=f?F-T:F;o.width(V),$.select(".nv-legendWrap").datum(w).call(o),c.top!=o.height()&&(c.top=o.height(),B=(h||parseInt(I.style("height"))||400)-c.top-c.bottom),$.select(".nv-legendWrap").attr("transform","translate("+(F-V)+","+-c.top+")")}if(f){var W=[{key:M.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=a.style(),style:"stack"},{key:M.stream||"Stream",metaKey:"Stream",disabled:"stream"!=a.style(),style:"stream"},{key:M.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=a.style(),style:"expand"},{key:M.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=a.style(),style:"stack_percent"}];T=A.length/3*260,W=W.filter(function(t){return-1!==A.indexOf(t.metaKey)}),l.width(T).color(["#444","#444","#444"]),$.select(".nv-controlsWrap").datum(W).call(l),c.top!=Math.max(l.height(),o.height())&&(c.top=Math.max(l.height(),o.height()),B=(h||parseInt(I.style("height"))||400)-c.top-c.bottom),$.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}R.attr("transform","translate("+c.left+","+c.top+")"),y&&$.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),b&&(u.width(F).height(B).margin({left:c.left,top:c.top}).svgContainer(I).xScale(e),R.select(".nv-interactive").call(u)),a.width(F).height(B);var j=$.select(".nv-stackedWrap").datum(w);j.transition().call(a),m&&(r.scale(e).ticks(F/100).tickSize(-B,0),$.select(".nv-x.nv-axis").attr("transform","translate(0,"+B+")"),$.select(".nv-x.nv-axis").transition().duration(0).call(r)),v&&(s.scale(i).ticks("wiggle"==a.offset()?0:B/36).tickSize(-F,0).setTickFormat("expand"==a.style()||"stack_percent"==a.style()?d3.format("%"):k),$.select(".nv-y.nv-axis").transition().duration(0).call(s)),a.dispatch.on("areaClick.toggle",function(e){w.forEach(1===w.filter(function(t){return!t.disabled}).length?function(t){t.disabled=!1}:function(t,n){t.disabled=n!=e.seriesIndex}),C.disabled=w.map(function(t){return!!t.disabled}),S.stateChange(C),t.update()}),o.dispatch.on("stateChange",function(e){C.disabled=e.disabled,S.stateChange(C),t.update()}),l.dispatch.on("legendClick",function(e){e.disabled&&(W=W.map(function(t){return t.disabled=!0,t}),e.disabled=!1,a.style(e.style),C.style=a.style(),S.stateChange(C),t.update())}),u.dispatch.on("elementMousemove",function(e){a.clearHighlights();var i,o,l,d=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(r,s){o=n.interactiveBisect(r.values,e.pointXValue,t.x()),a.highlightPoint(s,o,!0);var u=r.values[o];if("undefined"!=typeof u){"undefined"==typeof i&&(i=u),"undefined"==typeof l&&(l=t.xScale()(t.x()(u,o)));var c="expand"==a.style()?u.display.y:t.y()(u,o);d.push({key:r.key,value:c,color:p(r,r.seriesIndex),stackedValue:u.display})}}),d.reverse(),d.length>2){var h=t.yScale().invert(e.mouseY),f=null;d.forEach(function(t,e){h=Math.abs(h);var n=Math.abs(t.stackedValue.y0),i=Math.abs(t.stackedValue.y);return h>=n&&i+n>=h?void(f=e):void 0}),null!=f&&(d[f].highlight=!0)}var g=r.tickFormat()(t.x()(i,o)),m="expand"==a.style()?function(t){return d3.format(".1%")(t)}:function(t){return s.tickFormat()(t)};u.tooltip.position({left:l+c.left,top:e.mouseY+c.top}).chartContainer(N.parentNode).enabled(x).valueFormatter(m).data({value:g,series:d})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(){S.tooltipHide(),a.clearHighlights()}),S.on("tooltipShow",function(t){x&&P(t,N.parentNode)}),S.on("changeState",function(e){"undefined"!=typeof e.disabled&&w.length===e.disabled.length&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),"undefined"!=typeof e.style&&a.style(e.style),t.update()})}),t}var e,i,a=n.models.stackedArea(),r=n.models.axis(),s=n.models.axis(),o=n.models.legend(),l=n.models.legend(),u=n.interactiveGuideline(),c={top:30,right:25,bottom:50,left:60},d=null,h=null,p=n.utils.defaultColor(),f=!0,g=!0,m=!0,v=!0,y=!1,b=!1,x=!0,w=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k=d3.format(",.2f"),C={style:a.style()},D=null,_="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T=250,A=["Stacked","Stream","Expanded"],M={},E=250;r.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),l.updateState(!1);var P=function(e,i){var o=e.pos[0]+(i.offsetLeft||0),l=e.pos[1]+(i.offsetTop||0),u=r.tickFormat()(a.x()(e.point,e.pointIndex)),c=s.tickFormat()(a.y()(e.point,e.pointIndex)),d=w(e.series.key,u,c,e,t);n.tooltip.show([o,l],d,e.value<0?"n":"s",null,i)};return a.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],S.tooltipShow(t)}),a.dispatch.on("tooltipHide",function(t){S.tooltipHide(t)}),S.on("tooltipHide",function(){x&&n.tooltip.cleanup()
}),t.dispatch=S,t.stacked=a,t.legend=o,t.controls=l,t.xAxis=r,t.yAxis=s,t.interactiveLayer=u,d3.rebind(t,a,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),o.color(p),a.color(p),t):p},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,s.orient(e?"right":"left"),t):y},t.useInteractiveGuideline=function(e){return arguments.length?(b=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):b},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(C=e,t):C},t.defaultState=function(e){return arguments.length?(D=e,t):D},t.noData=function(e){return arguments.length?(_=e,t):_},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t.controlsData=function(e){return arguments.length?(A=e,t):A},t.controlLabels=function(e){return arguments.length?"object"!=typeof e?M:(M=e,t):M},s.setTickFormat=s.tickFormat,s.tickFormat=function(t){return arguments.length?(k=t,s):k},t}}()},{}],44:[function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var a=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.alert");a||n.data("bs.alert",a=new i(this)),"string"==typeof e&&a[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.0",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){s.detach().trigger("closed.bs.alert").remove()}var a=t(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t(r);e&&e.preventDefault(),s.length||(s=a.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.button"),r="object"==typeof e&&e;a||i.data("bs.button",a=new n(this,r)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,a=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[a]()),setTimeout(t.proxy(function(){i[a](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus","focus"==e.type)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;a||i.data("bs.carousel",a=new n(this,r)),"number"==typeof e?a.to(e):s?a[s]():r.interval&&a.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n="prev"==t?-1:1,i=this.getItemIndex(e),a=(i+n)%this.$items.length;return this.$items.eq(a)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var a=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,a),s=this.interval,o="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[l]()}if(r.hasClass("active"))return this.sliding=!1;var c=r[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:o});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(r)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,a.addClass(o),r.addClass(o),a.one("bsTransitionEnd",function(){r.removeClass([e,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var a=function(n){var i,a=t(this),r=t(a.attr("data-target")||(i=a.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),a.data()),o=a.attr("data-slide-to");o&&(s.interval=!1),e.call(r,s),o&&r.data("bs.carousel").to(o),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),a=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!a&&r.toggle&&"show"==e&&(r.toggle=!1),a||n.data("bs.collapse",a=new i(this,r)),"string"==typeof e&&a[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.0",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(n.call(a,"hide"),e||a.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION):a.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var a=t(i);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var a=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var a=t(this);a.attr("data-target")||i.preventDefault();var r=e(a),s=r.data("bs.collapse"),o=s?"toggle":t.extend({},a.data(),{trigger:this});n.call(r,o)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(a).remove(),t(r).each(function(){var i=t(this),a=n(i),r={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.0",s.prototype.toggle=function(i){var a=t(this);if(!a.is(".disabled, :disabled")){var r=n(a),s=r.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var o={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",o)),i.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),s=a.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&a.find(r).trigger("focus"),i.trigger("click");var o=" li:not(.divider):visible a",l=a.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var u=l.index(e.target);38==e.which&&u>0&&u--,40==e.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var a=t(this),r=a.data("bs.modal"),s=t.extend({},n.DEFAULTS,a.data(),"object"==typeof e&&e);r||a.data("bs.modal",r=new n(this,s)),"string"==typeof e?r[e](i):s.show&&r.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.0",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var a=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),a&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});a?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),a=i.attr("href"),r=t(i.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(r,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tooltip"),r="object"==typeof e&&e,s=r&&r.selector;(a||"destroy"!=e)&&(s?(a||i.data("bs.tooltip",a={}),a[s]||(a[s]=new n(this,r))):a||i.data("bs.tooltip",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var a=this.options.trigger.split(" "),r=a.length;r--;){var s=a[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var a=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(o);u&&(o=o.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var c=this.getPosition(),d=r[0].offsetWidth,h=r[0].offsetHeight;if(u){var p=o,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);o="bottom"==o&&c.bottom+h>g.bottom?"top":"top"==o&&c.top-h<g.top?"bottom":"right"==o&&c.right+d>g.width?"left":"left"==o&&c.left-d<g.left?"right":o,r.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,c,d,h);this.applyPlacement(m,o);var v=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),a=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),e.top=e.top+s,e.left=e.left+o,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=r&&(e.top=e.top+r-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var d=/top|bottom/.test(n),h=d?2*c.left-a+l:2*c.top-r+u,p=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,r=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,a=n.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var r=i?{top:0,left:0}:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},o=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,s,o,r)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-r-s.scroll,l=e.top+r-s.scroll+i;o<s.top?a.top=s.top-o:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var u=e.left-r,c=e.left+r+n;u<s.left?a.left=s.left-u:c>s.width&&(a.left=s.left+s.width-c)}return a},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.popover"),r="object"==typeof e&&e,s=r&&r.selector;(a||"destroy"!=e)&&(s?(a||i.data("bs.popover",a={}),a[s]||(a[s]=new n(this,r))):a||i.data("bs.popover",a=new n(this,r)),"string"==typeof e&&a[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.0",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){var a=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),a=i.data("bs.scrollspy"),r="object"==typeof n&&n;a||i.data("bs.scrollspy",a=new e(this,r)),"string"==typeof n&&a[n]()})}e.VERSION="3.3.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),a=i.data("target")||i.attr("href"),r=/^#./.test(a)&&t(a);return r&&r.length&&r.is(":visible")&&[[r[e]().top+n,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),a=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)s!=r[t]&&e>=a[t]&&(!a[t+1]||e<=a[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this
},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.tab");a||i.data("bs.tab",a=new n(this)),"string"==typeof e&&a[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.0",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=t(i);this.activate(e.closest("li"),n),this.activate(o,o.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},n.prototype.activate=function(e,i,a){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var s=i.find("> .active"),o=a&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var a=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.affix"),r="object"==typeof e&&e;a||i.data("bs.affix",a=new n(this,r)),"string"==typeof e&&a[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var a=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>a?"top":!1;if("bottom"==this.affixed)return null!=n?a+this.unpin<=r.top?!1:"bottom":t-i>=a+s?!1:"bottom";var o=null==this.affixed,l=o?a:r.top,u=o?s:e;return null!=n&&n>=l?"top":null!=i&&l+u>=t-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,a=i.top,r=i.bottom,s=t("body").height();"object"!=typeof i&&(r=a=i),"function"==typeof a&&(a=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var o=this.getState(s,e,a,r);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var l="affix"+(o?"-"+o:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:s-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery)},{}],45:[function(t){var e=t("jquery");!function(t,e){function n(e,n){var a,r,s,o=e.nodeName.toLowerCase();return"area"===o?(a=e.parentNode,r=a.name,e.href&&r&&"map"===a.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var a=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,a,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(a=parseInt(r.css("zIndex"),10),!isNaN(a)&&0!==a))return a;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(e,!a)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function a(e,n,i,a){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),a&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?o["inner"+i].call(this):this.each(function(){t(this).css(s,a(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?o["outer"+i].call(this,e):this.each(function(){t(this).css(s,a(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var a,r=t.ui[e].prototype;for(a in i)r.plugins[a]=r.plugins[a]||[],r.plugins[a].push([n,i[a]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",a=!1;return e[i]>0?!0:(e[i]=1,a=e[i]>0,e[i]=0,a)}})}(e)},{jquery:"jquery"}],46:[function(t){var e=t("jquery");t("./core"),function(t,e){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=i(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){t.datepicker._isDisabledDatepicker(r.inline?e.parent()[0]:r.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function a(e,n){t.extend(e,n);for(var i in n)null==n[i]&&(e[i]=n[i]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var r,s="datepicker";t.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var i,a,r;i=e.nodeName.toLowerCase(),a="div"===i||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),r=this._newInst(t(e),a),r.settings=t.extend({},n||{}),"input"===i?this._connectDatepicker(e,r):a&&this._inlineDatepicker(e,r)},_newInst:function(e,n){var a=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:a,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var i=t(e);n.append=t([]),n.trigger=t([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,s,n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var i,a,r,s=this._get(n,"appendText"),o=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=t("<span class='"+this._appendClass+"'>"+s+"</span>"),e[o?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&e.focus(this._showDatepicker),("button"===i||"both"===i)&&(a=this._get(n,"buttonText"),r=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:r,alt:a,title:a}):t("<button type='button'></button>").addClass(this._triggerClass).html(r?t("<img/>").attr({src:r,alt:a,title:a}):a)),e[o?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,a,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(n=0,i=0,a=0;a<t.length;a++)t[a].length>n&&(n=t[a].length,i=a);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(e,n){var i=t(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),t.data(e,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,i,r,o){var l,u,c,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},t.data(this._dialogInput[0],s,p)),a(p.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+d,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(e){var n,i=t(e),a=t.data(e,s);i.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,s),"input"===n?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,s);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,i,a=t(e),r=t.data(e,s);a.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),"input"===n?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=a.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,s)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,r){var s,o,l,u,c=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):c?"all"===i?t.extend({},c.settings):this._get(c,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=r),void(c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),a(c.settings,s),null!==l&&s.dateFormat!==e&&s.minDate===e&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&s.dateFormat!==e&&s.maxDate===e&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(t(n),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c))))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,i,a,r=t.datepicker._getInst(e.target),s=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),s=!1;break;case 13:return a=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",r.dpDiv),a[0]&&t.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,a[0]),n=t.datepicker._get(r,"onSelect"),n?(i=t.datepicker._formatDate(r),n.apply(r.input?r.input[0]:null,[i,r])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(r,"stepBigMonths"):-t.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,o?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(r,"stepBigMonths"):+t.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,i,a=t.datepicker._getInst(e.target);return t.datepicker._get(a,"constrainInput")?(n=t.datepicker._possibleChars(t.datepicker._get(a,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1):void 0},_doKeyUp:function(e){var n,i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{n=t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i)),n&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(a){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var n,i,r,s,o,l,u;n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),i=t.datepicker._get(n,"beforeShow"),r=i?i.apply(e,[e,n]):{},r!==!1&&(a(n.settings,r),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),s=!1,t(e).parents().each(function(){return s|="fixed"===t(this).css("position"),!s}),o={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),o=t.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(l=t.datepicker._get(n,"showAnim"),u=t.datepicker._get(n,"duration"),n.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?n.dpDiv.show(l,t.datepicker._get(n,"showOptions"),u):n.dpDiv[l||"show"](l?u:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n))}},_updateDatepicker:function(e){this.maxRows=4,r=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(e),a=i[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",s*a+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,i){var a=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:t(document).scrollLeft()),u=document.documentElement.clientHeight+(i?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?a-s:0,n.left-=i&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=i&&n.top===e.input.offset().top+o?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+a>l&&l>a?Math.abs(n.left+a-l):0),n.top-=Math.min(n.top,n.top+r>u&&u>r?Math.abs(r+o):0),n},_findPos:function(e){for(var n,i=this._getInst(e),a=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return n=t(e).offset(),[n.left,n.top]},_hideDatepicker:function(e){var n,i,a,r,o=this._curInst;!o||e&&o!==t.data(e,s)||this._datepickerShowing&&(n=this._get(o,"showAnim"),i=this._get(o,"duration"),a=function(){t.datepicker._tidyDialog(o)},t.effects&&(t.effects.effect[n]||t.effects[n])?o.dpDiv.hide(n,t.datepicker._get(o,"showOptions"),i,a):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,a),n||a(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),i=t.datepicker._getInst(n[0]);(n[0].id!==t.datepicker._mainDivId&&0===n.parents("#"+t.datepicker._mainDivId).length&&!n.hasClass(t.datepicker.markerClassName)&&!n.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||n.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==i)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,i){var a=t(e),r=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(r,n+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var n,i=t(e),a=this._getInst(i[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(n=new Date,a.selectedDay=n.getDate(),a.drawMonth=a.selectedMonth=n.getMonth(),a.drawYear=a.selectedYear=n.getFullYear()),this._notifyChange(a),this._adjustDate(i)},_selectMonthYear:function(e,n,i){var a=t(e),r=this._getInst(a[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(a)},_selectDay:function(e,n,i,a){var r,s=t(e);t(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(r=this._getInst(s[0]),r.selectedDay=r.currentDay=t("a",a).html(),r.selectedMonth=r.currentMonth=n,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var i,a=t(e),r=this._getInst(a[0]);n=null!=n?n:this._formatDate(r),r.input&&r.input.val(n),this._updateAlternate(r),i=this._get(r,"onSelect"),i?i.apply(r.input?r.input[0]:null,[n,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,i,a,r=this._get(e,"altField");r&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),a=this.formatDate(n,i,this._getFormatConfig(e)),t(r).each(function(){t(this).val(a)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,i){if(null==e||null==n)throw"Invalid arguments";if(n="object"==typeof n?n.toString():n+"",""===n)return null;var a,r,s,o,l=0,u=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),d=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,f=(i?i.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,x=function(t){var n=a+1<e.length&&e.charAt(a+1)===t;return n&&a++,n},w=function(t){var e=x(t),i="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,a=new RegExp("^\\d{1,"+i+"}"),r=n.substring(l).match(a);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},k=function(e,i,a){var r=-1,s=t.map(x(e)?a:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(s,function(t,e){var i=e[1];return n.substr(l,i.length).toLowerCase()===i.toLowerCase()?(r=e[0],l+=i.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},C=function(){if(n.charAt(l)!==e.charAt(a))throw"Unexpected literal at position "+l;l++};for(a=0;a<e.length;a++)if(b)"'"!==e.charAt(a)||x("'")?C():b=!1;else switch(e.charAt(a)){case"d":v=w("d");break;case"D":k("D",d,h);break;case"o":y=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":o=new Date(w("@")),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"!":o=new Date((w("!")-this._ticksTo1970)/1e4),g=o.getFullYear(),m=o.getMonth()+1,v=o.getDate();break;case"'":x("'")?C():b=!0;break;default:C()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),y>-1)for(m=1,v=y;;){if(r=this._getDaysInMonth(g,m-1),r>=v)break;m++,v-=r}if(o=this._daylightSavingAdjust(new Date(g,m-1,v)),o.getFullYear()!==g||o.getMonth()+1!==m||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var i,a=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},u=function(t,e,n){var i=""+e;if(l(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return l(t)?i[e]:n[e]},d="",h=!1;if(e)for(i=0;i<t.length;i++)if(h)"'"!==t.charAt(i)||l("'")?d+=t.charAt(i):h=!1;else switch(t.charAt(i)){case"d":d+=u("d",e.getDate(),2);break;case"D":d+=c("D",e.getDay(),a,r);break;case"o":d+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=u("m",e.getMonth()+1,2);break;case"M":d+=c("M",e.getMonth(),s,o);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=t.charAt(i)}return d},_possibleChars:function(t){var e,n="",i=!1,a=function(n){var i=e+1<t.length&&t.charAt(e+1)===n;return i&&e++,i};for(e=0;e<t.length;e++)if(i)"'"!==t.charAt(e)||a("'")?n+=t.charAt(e):i=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":a("'")?n+="'":i=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,n){return t.settings[n]!==e?t.settings[n]:this._defaults[n]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),r=a,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||a}catch(o){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))
},_determineDate:function(e,n,i){var a=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(i){}for(var a=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,r=a.getFullYear(),s=a.getMonth(),o=a.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(n);u;){switch(u[2]||"d"){case"d":case"D":o+=parseInt(u[1],10);break;case"w":case"W":o+=7*parseInt(u[1],10);break;case"m":case"M":s+=parseInt(u[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s));break;case"y":case"Y":r+=parseInt(u[1],10),o=Math.min(o,t.datepicker._getDaysInMonth(r,s))}u=l.exec(n)}return new Date(r,s,o)},s=null==n||""===n?i:"string"==typeof n?r(n):"number"==typeof n?isNaN(n)?i:a(n):new Date(n.getTime());return s=s&&"Invalid Date"===s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,a=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),a===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(i,-n,"M")},next:function(){t.datepicker._adjustDate(i,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(i)},selectDay:function(){return t.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(i,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,a,r,s,o,l,u,c,d,h,p,f,g,m,v,y,b,x,w,k,C,D,_,S,T,A,M,E,P,I,N,F,B,L,O,R,z,$=new Date,V=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth(),$.getDate())),W=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),Y=this._get(t,"hideIfNoPrevNext"),H=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),q=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),G=1!==U[0]||1!==U[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Q=t.drawMonth-q,te=t.drawYear;if(0>Q&&(Q+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Z&&Z>e?Z:e;this._daylightSavingAdjust(new Date(te,Q,1))>e;)Q--,0>Q&&(Q=11,te--);for(t.drawMonth=Q,t.drawYear=te,n=this._get(t,"prevText"),n=H?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Q-X,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,te,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>":Y?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>",a=this._get(t,"nextText"),a=H?this.formatDate(a,this._daylightSavingAdjust(new Date(te,Q+X,1)),this._getFormatConfig(t)):a,r=this._canAdjustMonth(t,1,te,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+a+"</span></a>":Y?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+a+"</span></a>",s=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?K:V,s=H?this.formatDate(s,o,this._getFormatConfig(t)):s,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",u=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(W?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),x="",k=0;k<U[0];k++){for(C="",this.maxRows=4,D=0;D<U[1];D++){if(_=this._daylightSavingAdjust(new Date(te,Q,t.selectedDay)),S=" ui-corner-all",T="",G){if(T+="<div class='ui-datepicker-group",U[1]>1)switch(D){case 0:T+=" ui-datepicker-group-first",S=" ui-corner-"+(W?"right":"left");break;case U[1]-1:T+=" ui-datepicker-group-last",S=" ui-corner-"+(W?"left":"right");break;default:T+=" ui-datepicker-group-middle",S=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===k?W?r:i:"")+(/all|right/.test(S)&&0===k?W?i:r:"")+this._generateMonthYearHeader(t,Q,te,Z,J,k>0||D>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)M=(w+c)%7,A+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[M]+"'>"+p[M]+"</span></th>";for(T+=A+"</tr></thead><tbody>",E=this._getDaysInMonth(te,Q),te===t.selectedYear&&Q===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,E)),P=(this._getFirstDayOfMonth(te,Q)-c+7)%7,I=Math.ceil((P+E)/7),N=G&&this.maxRows>I?this.maxRows:I,this.maxRows=N,F=this._daylightSavingAdjust(new Date(te,Q,1-P)),B=0;N>B;B++){for(T+="<tr>",L=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(F)+"</td>":"",w=0;7>w;w++)O=m?m.apply(t.input?t.input[0]:null,[F]):[!0,""],R=F.getMonth()!==Q,z=R&&!y||!O[0]||Z&&Z>F||J&&F>J,L+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(F.getTime()===_.getTime()&&Q===t.selectedMonth&&t._keyEvent||b.getTime()===F.getTime()&&b.getTime()===_.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+O[1]+(F.getTime()===K.getTime()?" "+this._currentClass:"")+(F.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===V.getTime()?" ui-state-highlight":"")+(F.getTime()===K.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);T+=L+"</tr>"}Q++,Q>11&&(Q=0,te++),T+="</tbody></table>"+(G?"</div>"+(U[0]>0&&D===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),C+=T}x+=C}return x+=u,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,i,a,r,s,o){var l,u,c,d,h,p,f,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",x="";if(r||!m)x+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(l=i&&i.getFullYear()===n,u=a&&a.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=i.getMonth())&&(!u||c<=a.getMonth())&&(x+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+o[c]+"</option>");x+="</select>"}if(y||(b+=x+(!r&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e},f=p(d[0]),g=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,g=a?Math.min(g,a.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&m&&v?"":"&#xa0;")+x),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),a=t.drawMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,a))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,a,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),a=n&&n>e?n:e;return i&&a>i?i:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var a=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(0>e?e:a[0]*a[1]),1));return 0>e&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,o=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!a||e.getTime()>=a.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!o||e.getFullYear()<=o)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new n,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(e)},{"./core":45,jquery:"jquery"}],47:[function(t){var e=t("jquery");t("./core"),t("./mouse"),t("./widget"),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,a=this.options;return a.containment?"window"===a.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),n=t(a.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,a,r,s=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(a=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?a-this.offset.click.top>=n[1]||a-this.offset.click.top>n[3]?a:a-this.offset.click.top>=n[1]?a-s.grid[1]:a+s.grid[1]:a,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),a=i.options,r=t.extend({},n,{item:i.element});i.sortables=[],t(a.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n){var i=t(this).data("ui-draggable"),a=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,a))})},drag:function(e,n){var i=t(this).data("ui-draggable"),a=this;t.each(i.sortables,function(){var r=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("opacity")&&(a._opacity=i.css("opacity")),i.css("opacity",a.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,a=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),a!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,a,r,s,o,l,u,c,d,h,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)o=p.snapElements[d].left,l=o+p.snapElements[d].width,u=p.snapElements[d].top,c=u+p.snapElements[d].height,o-g>v||m>l+g||u-g>b||y>c+g||!t.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(u-b)<=g,a=Math.abs(c-y)<=g,r=Math.abs(o-v)<=g,s=Math.abs(l-m)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||a||r||s,"outer"!==f.snapMode&&(i=Math.abs(u-y)<=g,a=Math.abs(c-b)<=g,r=Math.abs(o-m)<=g,s=Math.abs(l-v)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(i||a||r||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=i||a||r||s||h)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),a=t(this).data("ui-draggable").options;i.css("zIndex")&&(a._zIndex=i.css("zIndex")),i.css("zIndex",a.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(e)},{"./core":45,"./mouse":48,"./widget":49,jquery:"jquery"}],48:[function(t){var e=t("jquery");t("./widget"),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,a=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return a&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)
},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e)},{"./widget":49,jquery:"jquery"}],49:[function(t){var e=t("jquery");!function(t,e){var n=0,i=Array.prototype.slice,a=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}a(e)},t.widget=function(e,n,i){var a,r,s,o,l={},u=e.split(".")[0];e=e.split(".")[1],a=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][a.toLowerCase()]=function(e){return!!t.data(e,a)},t[u]=t[u]||{},r=t[u][e],s=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),o=new n,o.options=t.widget.extend({},o.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},a=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=a,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||e:e},l,{constructor:s,namespace:u,widgetName:e,widgetFullName:a}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var a,r,s=i.call(arguments,1),o=0,l=s.length;l>o;o++)for(a in s[o])r=s[o][a],s[o].hasOwnProperty(a)&&r!==e&&(n[a]=t.isPlainObject(r)?t.isPlainObject(n[a])?t.widget.extend({},n[a],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,a){var r=a.prototype.widgetFullName||n;t.fn[n]=function(s){var o="string"==typeof s,l=i.call(arguments,1),u=this;return s=!o&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(o?function(){var i,a=t.data(this,r);return a?t.isFunction(a[s])&&"_"!==s.charAt(0)?(i=a[s].apply(a,l),i!==a&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new a(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var a,r,s,o=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(o={},a=n.split("."),n=a.shift(),a.length){for(r=o[n]=t.widget.extend({},this.options[n]),s=0;s<a.length-1;s++)r[a[s]]=r[a[s]]||{},r=r[a[s]];if(n=a.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];o[n]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var a,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=a=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,a=this.widget()),t.each(i,function(i,s){function o(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(o.guid=s.guid=s.guid||o.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,o):n.bind(u,o)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var a,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(a in r)a in n||(n[a]=r[a]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,a,r){"string"==typeof a&&(a={effect:a});var s,o=a?a===!0||"number"==typeof a?n:a.effect||n:e;a=a||{},"number"==typeof a&&(a={duration:a}),s=!t.isEmptyObject(a),a.complete=r,a.delay&&i.delay(a.delay),s&&t.effects&&t.effects.effect[o]?i[e](a):o!==e&&i[o]?i[o](a.duration,a.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(e)},{jquery:"jquery"}],50:[function(t,e){var n=t("backbone"),i=t("underscore"),a=t("jquery"),r=t("../models/generic-filter-model"),s=t("../models/org-role-filter-model"),o=t("../models/years-filter-model");e.exports=n.Collection.extend({url:"/rest/filters",_loaded:null,_allDeferreds:[],orgCollection:null,orgGroupCollection:null,orgTypeCollection:null,componentCaller:null,initialize:function(t,e){this.on("add",this._cleanUpAfterAdd),this.load(),e.caller&&(componentCaller=e.caller)},load:function(){var t=this;return this._loaded||(this._loaded=new a.Deferred,this._allDeferreds.push(this._createOrgFilters()),this.fetch({remove:!1}).then(function(){a.when.apply(a,t._allDeferreds).done(t._loaded.resolve).fail(t._loaded.reject)}).fail(t._loaded.reject)),this._loaded},_cleanUpAfterAdd:function(t){var e=this;if(t.get("ui")||e.remove(t),t.get("filterType")){var n=i.some(t.get("filterType"),function(t){return t===componentCaller||"ALL"===t});n||e.remove(t)}},parse:function(t){return t=i.filter(t,function(t){return t.ui}),t=i.filter(t,function(t){return"/rest/filters/org-groups"!==t.endpoint&&"/rest/filters/org-types"!==t.endpoint&&"/rest/filters/org-roles"!==t.endpoint&&"/rest/filters/orgs"!==t.endpoint})},model:function(t,e){var i=null,a=e.collection;switch(t.id){case"Programs":case"Sectors":a._allDeferreds.push(a._goOneDeeper(a,t)),i=new n.Model({ui:!1});break;case"ActualCompletionDate":case"DateOfAgreement":case"PlannedCompletionDate":case"ActualStartDate":case"ProposedStartDate":case"Dates":i=new o(t);break;default:i=new r(t),a._allDeferreds.push(i.getTree())}return i},_goOneDeeper:function(t,e){var s=e.endpoint,o=a.Deferred(),l=[],u=new n.Collection;return u.url=s,u.fetch().then(function(n){i.each(n,function(n){var i=new r({url:s+"/"+n.id,name:n.name,ui:!0,group:e.id});t.add(i),l.push(i.getTree())}),a.when.apply(a,l).then(function(){o.resolve()}),i.isEmpty(n)&&console.warn("Filters API returned empty",n)}),o},_createOrgFilters:function(){var t=this;return this._fetchOrgCollections().then(function(){t.makeTreeHelper(t.orgGroupCollection,t.orgCollection,"orgIds","children"),t.orgRolesCollection.each(function(e){var n=e.toJSON();if("Donor"===e.get("name")?(t.makeTreeHelper(t.orgTypeCollection,t.orgGroupCollection,"groupIds","children"),i.extend(n,{ui:!0,group:"Donor",data:t.orgTypeCollection.toJSON()}),n.data=t._filterDonorOrgs(n.data,e.id)):(i.extend(n,{ui:!0,group:"Role",data:t.orgGroupCollection.toJSON()}),n.data=t._filterOrgs(n.data,e.id)),n.data.length>0){var a=e.get("name")+" Id";n.data=t._setFilterId(n.data,a),t.add(new s(n))}})})},_setFilterId:function(t,e){var n=this;return i.each(t,function(t){t.rolesIds&&(t.filterId=e),t.children&&(t.children=n._setFilterId(t.children,e))}),t},_filterOrgs:function(t,e){return t=i.filter(t,function(t){return t.children=i.filter(t.children,function(t){return t.rolesIds.indexOf(e)>-1}),t.isSelectable=!1,t.children.length>0})},_filterDonorOrgs:function(t,e){var n=this;return t=i.filter(t,function(t){t.children=n._filterOrgs(t.children,e);for(var a=0;a<t.children.length;a++)t.children[a].children=i.filter(t.children[a].children,function(t){return t.hasFundings===!0});return i.each(t.children,function(t){t.filterId="Donor Group"}),t.filterId="Donor Type",t.isSelectable=!1,t.children.length>0})},_fetchOrgCollections:function(){var t=[];return this.orgCollection=new n.Collection,this.orgCollection.url="/rest/filters/orgs",t.push(this.orgCollection.fetch()),this.orgGroupCollection=new n.Collection,this.orgGroupCollection.url="/rest/filters/org-groups",t.push(this.orgGroupCollection.fetch()),this.orgTypeCollection=new n.Collection,this.orgTypeCollection.url="/rest/filters/org-types",t.push(this.orgTypeCollection.fetch()),this.orgRolesCollection=new n.Collection,this.orgRolesCollection.url="/rest/filters/org-roles",t.push(this.orgRolesCollection.fetch({})),a.when.apply(a,t)},joinHelper:function(t,e,n,a){t.each(function(t){var r=t.get(n),s=e.filter(function(t){return i.indexOf(r,t.get("id"))>=0});t.set(a,s)})},makeTreeHelper:function(t,e,n,a){var r=this,s=i.filter(r.orgRolesCollection.models,function(t){return"Donor"===t.get("name")})[0];t.each(function(t){var r=t.get(n),o=[];i.each(r,function(t){if(0!==t){var n=e.get({id:t});if(n){if(n.get("hasFundings")===!0){var i=n.get("rolesIds");void 0!=i&&(i.push(s.get("id")),n.set("rolesIds",i))}o.push(n.toJSON())}}}),t.set(a,o)})}})},{"../models/generic-filter-model":54,"../models/org-role-filter-model":55,"../models/years-filter-model":56,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],51:[function(){!function(t){function e(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw Error("(Link) '"+e+"' can't match '"+n+"'.'")}function n(n){if(void 0===n&&(n={}),"object"!=typeof n)throw Error("(Format) 'format' option must be an object.");var i={};t(a).each(function(t,e){if(void 0===n[e])i[e]=r[t];else{if(typeof n[e]!=typeof r[t])throw Error("(Format) 'format."+e+"' must be a "+typeof r[t]+".");if("decimals"===e&&(0>n[e]||7<n[e]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");i[e]=n[e]}}),e(i,"mark","thousand"),e(i,"prefix","negative"),e(i,"prefix","negativeBefore"),this.r=i}function i(e,n){return"object"!=typeof e&&t.error("(Link) Initialize with an object."),new i.prototype.p(e.target||function(){},e.method,e.format||{},n)}var a="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),r=[2,".","","","",function(t){return t},function(t){return t},"-","",function(t){return t},function(t){return t}];n.prototype.a=function(t){return this.r[t]},n.prototype.L=function(t){function e(t){return t.split("").reverse().join("")}t=this.a("encoder")(t);var n=this.a("decimals"),i="",a="",r="",s="";return 0===parseFloat(t.toFixed(n))&&(t="0"),0>t&&(i=this.a("negative"),a=this.a("negativeBefore")),t=Math.abs(t).toFixed(n).toString(),t=t.split("."),this.a("thousand")?(r=e(t[0]).match(/.{1,3}/g),r=e(r.join(e(this.a("thousand"))))):r=t[0],this.a("mark")&&1<t.length&&(s=this.a("mark")+t[1]),this.a("to")(a+this.a("prefix")+i+r+s+this.a("postfix"))},n.prototype.w=function(t){function e(t){return t.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var n;return null===t||void 0===t?!1:(t=this.a("from")(t),t=t.toString(),n=t.replace(RegExp("^"+e(this.a("negativeBefore"))),""),t!==n?(t=n,n="-"):n="",t=t.replace(RegExp("^"+e(this.a("prefix"))),""),this.a("negative")&&(n="",t=t.replace(RegExp("^"+e(this.a("negative"))),"-")),t=t.replace(RegExp(e(this.a("postfix"))+"$"),"").replace(RegExp(e(this.a("thousand")),"g"),"").replace(this.a("mark"),"."),t=this.a("decoder")(parseFloat(n+t)),isNaN(t)?!1:t)},i.prototype.K=function(e,n){this.method=n||"html",this.j=t(e.replace("-tooltip-","")||"<div/>")[0]},i.prototype.H=function(t){this.method="val",this.j=document.createElement("input"),this.j.name=t,this.j.type="hidden"},i.prototype.G=function(e){function n(t,e){return[e?null:t,e?t:null]}var i=this;this.method="val",this.target=e.on("change",function(e){i.B.val(n(t(e.target).val(),i.t),{link:i,set:!0})})},i.prototype.p=function(e,n,i,a){if(this.g=i,this.update=!a,"string"==typeof e&&0===e.indexOf("-tooltip-"))this.K(e,n);else if("string"==typeof e&&0!==e.indexOf("-"))this.H(e);else{if("function"!=typeof e){if(e instanceof t||t.zepto&&t.zepto.isZ(e)){if(!n){if(e.is("input, select, textarea"))return void this.G(e);n="html"}if("function"==typeof n||"string"==typeof n&&e[n])return this.method=n,void(this.target=e)}throw new RangeError("(Link) Invalid Link.")}this.target=!1,this.method=e}},i.prototype.write=function(t,e,n,i){this.update&&!1===i||(this.u=t,this.F=t=this.format(t),"function"==typeof this.method?this.method.call(this.target[0]||n[0],t,e,n):this.target[this.method](t,e,n))},i.prototype.q=function(e){this.g=new n(t.extend({},e,this.g instanceof n?this.g.r:this.g))},i.prototype.J=function(t){this.B=t},i.prototype.I=function(t){this.t=t},i.prototype.format=function(t){return this.g.L(t)},i.prototype.A=function(t){return this.g.w(t)},i.prototype.p.prototype=i.prototype,t.Link=i}(window.jQuery||window.Zepto),function(t){function e(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function n(e){return t.isArray(e)?e:[e]}function i(t,e){t.addClass(e),setTimeout(function(){t.removeClass(e)},300)}function a(t,e){return 100*e/(t[1]-t[0])}function r(t,e){if(e>=t.d.slice(-1)[0])return 100;for(var n,i,r,s=1;e>=t.d[s];)s++;return n=t.d[s-1],i=t.d[s],r=t.c[s-1],n=[n,i],r+a(n,0>n[0]?e+Math.abs(n[0]):e-n[0])/(100/(t.c[s]-r))}function s(t,e){if(e>=100)return t.d.slice(-1)[0];for(var n,i,a,r=1;e>=t.c[r];)r++;return n=t.d[r-1],i=t.d[r],a=t.c[r-1],n=[n,i],100/(t.c[r]-a)*(e-a)*(n[1]-n[0])/100+n[0]}function o(t,e){for(var n,i=1;(t.dir?100-e:e)>=t.c[i];)i++;return t.m?(n=t.c[i-1],i=t.c[i],e-n>(i-n)/2?i:n):(t.h[i-1]?(n=t.h[i-1],i=t.c[i-1]+Math.round((e-t.c[i-1])/n)*n):i=e,i)}function l(t,n){if(!e(n))throw Error("noUiSlider: 'step' is not numeric.");t.h[0]=n}function u(n,i){if("object"!=typeof i||t.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.each(i,function(i,a){var r;if("number"==typeof a&&(a=[a]),!t.isArray(a))throw Error("noUiSlider: 'range' contains invalid value.");if(r="min"===i?0:"max"===i?100:parseFloat(i),!e(r)||!e(a[0]))throw Error("noUiSlider: 'range' value isn't numeric.");n.c.push(r),n.d.push(a[0]),r?n.h.push(isNaN(a[1])?!1:a[1]):isNaN(a[1])||(n.h[0]=a[1])}),t.each(n.h,function(t,e){return e?void(n.h[t]=a([n.d[t],n.d[t+1]],e)/(100/(n.c[t+1]-n.c[t]))):!0})}function c(e,n){if("number"==typeof n&&(n=[n]),!t.isArray(n)||!n.length||2<n.length)throw Error("noUiSlider: 'start' option is incorrect.");e.b=n.length,e.start=n}function d(t,e){if(t.m=e,"boolean"!=typeof e)throw Error("noUiSlider: 'snap' option must be a boolean.")}function h(t,e){if("lower"===e&&1===t.b)t.i=1;else if("upper"===e&&1===t.b)t.i=2;else if(!0===e&&2===t.b)t.i=3;else{if(!1!==e)throw Error("noUiSlider: 'connect' option doesn't match handle count.");t.i=0}}function p(t,e){switch(e){case"horizontal":t.k=0;break;case"vertical":t.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function f(t,n){if(2<t.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");if(t.margin=a(t.d,n),!e(n))throw Error("noUiSlider: 'margin' option must be numeric.")}function g(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.i=[0,2,1,3][t.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function m(t,e){if("string"!=typeof e)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=e.indexOf("snap");t.n={s:0<=e.indexOf("tap")||n,extend:0<=e.indexOf("extend"),v:0<=e.indexOf("drag"),fixed:0<=e.indexOf("fixed"),m:n}}function v(e,n,i){e.o=[n.lower,n.upper],e.g=n.format,t.each(e.o,function(e,a){if(!t.isArray(a))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' must be an array.");t.each(a,function(){if(!(this instanceof t.Link))throw Error("noUiSlider: 'serialization."+(e?"upper":"lower")+"' can only contain Link instances.");this.I(e),this.J(i),this.q(n.format)})}),e.dir&&1<e.b&&e.o.reverse()}function y(e,n){var i,a={c:[],d:[],h:[!1],margin:0};return i={step:{e:!1,f:l},start:{e:!0,f:c},connect:{e:!0,f:h},direction:{e:!0,f:g},range:{e:!0,f:u},snap:{e:!1,f:d},orientation:{e:!1,f:p},margin:{e:!1,f:f},behaviour:{e:!0,f:m},serialization:{e:!0,f:v}},e=t.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},e),e.serialization=t.extend({lower:[],upper:[],format:{}},e.serialization),t.each(i,function(t,i){if(void 0===e[t]){if(i.e)throw Error("noUiSlider: '"+t+"' is required.");return!0}i.f(a,e[t],n)}),a.style=a.k?"top":"left",a}function b(e,n){var i=t("<div><div/></div>").addClass(I[2]),a=["-lower","-upper"];return e.dir&&a.reverse(),i.children().addClass(I[3]+" "+I[3]+a[n]),i}function x(e,n){return n.j&&(n=new t.Link({target:t(n.j).clone().appendTo(e),method:n.method,format:n.g},!0)),n}function w(e,n){var i,a=[];for(i=0;i<e.b;i++){var r=a,s=i,o=e.o[i],l=n[i].children(),u=e.g,c=void 0,d=[],c=new t.Link({},!0);for(c.q(u),d.push(c),c=0;c<o.length;c++)d.push(x(l,o[c]));r[s]=d}return a}function k(t,e,n){switch(t){case 1:e.addClass(I[7]),n[0].addClass(I[6]);break;case 3:n[1].addClass(I[6]);case 2:n[0].addClass(I[7]);case 0:e.addClass(I[6])}}function C(t,e){var n,i=[];for(n=0;n<t.b;n++)i.push(b(t,n).appendTo(e));return i}function D(e,n){return n.addClass([I[0],I[8+e.dir],I[4+e.k]].join(" ")),t("<div/>").appendTo(n).addClass(I[1])}function _(e,a,l){function u(){return b[["width","height"][a.k]]()}function c(t){var e,n=[S.val()];for(e=0;e<t.length;e++)S.trigger(t[e],n)}function d(e,n,i){var r=e[0]!==_[0][0]?1:0,l=T[0]+a.margin,u=T[1]-a.margin;return i&&1<_.length&&(n=r?Math.max(n,l):Math.min(n,u)),100>n&&(n=o(a,n)),n=Math.max(Math.min(parseFloat(n.toFixed(7)),100),0),n===T[r]?1===_.length?!1:n===l||n===u?0:!1:(e.css(a.style,n+"%"),e.is(":first-child")&&e.toggleClass(I[17],n>50),T[r]=n,a.dir&&(n=100-n),t(x[r]).each(function(){this.write(s(a,n),e.children(),S)}),!0)}function h(t,e,n){n||i(S,I[14]),d(t,e,!1),c(["slide","set","change"])}function p(t,e,n,i){t=t.replace(/\s/g,".nui ")+".nui",e.on(t,function(t){var e=S.attr("disabled");if(S.hasClass(I[14])||void 0!==e&&null!==e)return!1;t.preventDefault();var r,s,e=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),l=0===t.type.indexOf("pointer"),u=t;0===t.type.indexOf("MSPointer")&&(l=!0),t.originalEvent&&(t=t.originalEvent),e&&(r=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY),(o||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),r=t.clientX+window.pageXOffset,s=t.clientY+window.pageYOffset),u.C=[r,s],u.cursor=o,t=u,t.l=t.C[a.k],n(t,i)})}function f(t,e){var n,i=e.b||_,a=!1,a=100*(t.l-e.start)/u(),r=i[0][0]!==_[0][0]?1:0,s=e.D;n=a+s[0],a+=s[1],1<i.length?(0>n&&(a+=Math.abs(n)),a>100&&(n-=a-100),n=[Math.max(Math.min(n,100),0),Math.max(Math.min(a,100),0)]):n=[n,a],a=d(i[0],n[r],1===i.length),1<i.length&&(a=d(i[1],n[r?0:1],!1)||a),a&&c(["slide"])}function g(e){t("."+I[15]).removeClass(I[15]),e.cursor&&t("body").css("cursor","").off(".nui"),M.off(".nui"),S.removeClass(I[12]),c(["set","change"])}function m(e,n){1===n.b.length&&n.b[0].children().addClass(I[15]),e.stopPropagation(),p(P.move,M,f,{start:e.l,b:n.b,D:[T[0],T[_.length-1]]}),p(P.end,M,g,null),e.cursor&&(t("body").css("cursor",t(e.target).css("cursor")),1<_.length&&S.addClass(I[12]),t("body").on("selectstart.nui",!1))}function v(e){var n=e.l,i=0;e.stopPropagation(),t.each(_,function(){i+=this.offset()[a.style]}),i=i/2>n||1===_.length?0:1,n-=b.offset()[a.style],n=100*n/u(),h(_[i],n,a.n.m),a.n.m&&m(e,{b:[_[i]]})}function y(t){var e=(t=t.l<b.offset()[a.style])?0:100;t=t?0:_.length-1,h(_[t],e,!1)}var b,x,_,S=t(e),T=[-1,-1];if(S.hasClass(I[0]))throw Error("Slider was already initialized.");b=D(a,S),_=C(a,b),x=w(a,_),k(a.i,S,_),function(t){var e;if(!t.fixed)for(e=0;e<_.length;e++)p(P.start,_[e].children(),m,{b:[_[e]]});t.s&&p(P.start,b,v,{b:_}),t.extend&&(S.addClass(I[16]),t.s&&p(P.start,S,y,{b:_})),t.v&&(e=b.find("."+I[7]).addClass(I[10]),t.fixed&&(e=e.add(b.children().not(e).children())),p(P.start,e,m,{b:_}))}(a.n),e.vSet=function(){var e,s,o,l,u,h,p=Array.prototype.slice.call(arguments,0),f=n(p[0]);for("object"==typeof p[1]?(e=p[1].set,s=p[1].link,o=p[1].update,l=p[1].animate):!0===p[1]&&(e=!0),a.dir&&1<a.b&&f.reverse(),l&&i(S,I[14]),p=1<_.length?3:1,1===f.length&&(p=1),u=0;p>u;u++)l=s||x[u%2][0],l=l.A(f[u%2]),!1!==l&&(l=r(a,l),a.dir&&(l=100-l),!0!==d(_[u%2],l,!0)&&t(x[u%2]).each(function(t){return t?void this.write(h,_[u%2].children(),S,o):(h=this.u,!0)}));return!0===e&&c(["set"]),this},e.vGet=function(){var t,e=[];for(t=0;t<a.b;t++)e[t]=x[t][0].F;return 1===e.length?e[0]:a.dir?e.reverse():e},e.destroy=function(){return t.each(x,function(){t.each(this,function(){this.target&&this.target.off(".nui")})}),t(this).off(".nui").removeClass(I.join(" ")).empty(),l},S.val(a.start)}function S(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var e=y(t,this);return this.each(function(){_(this,e,t)})}function T(e){return this.each(function(){var n=t(this).val(),i=this.destroy(),a=t.extend({},i,e);t(this).noUiSlider(a),i.start===a.start&&t(this).val(n)})}function A(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var M=t(document),E=t.fn.val,P=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},I="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");t.fn.val=function(){var e=arguments,n=t(this[0]);return arguments.length?this.each(function(){(t(this).hasClass(I[0])?A:E).apply(t(this),e)}):(n.hasClass(I[0])?A:E).call(n)},t.noUiSlider={Link:t.Link},t.fn.noUiSlider=function(t,e){return(e?T:S).call(this,t)}}(window.jQuery||window.Zepto)},{}],52:[function(t,e){function n(){this.initialize.apply(this,arguments)}var i=t("underscore"),a=t("backbone"),r=t("jquery");window.jQuery=window.$=a.$=r,t("jquery-ui/draggable"),t("bootstrap/dist/js/bootstrap");var s=t("./views/filters-view");i.extend(n.prototype,a.Events,{initialize:function(t){t=i.defaults(t,{draggable:!0}),i.has(t,"sync")&&(a.sync=t.sync),this.view=new s(t),this._cachedAllFilters=null,this.loaded=this.view._loaded.promise(),this.listenTo(this.view,"all",function(){this.trigger.apply(this,arguments)})},setElement:function(){this.view.setElement(arguments)},showFilters:function(){this.view.showFilters()},getAllFilters:function(){var t=this;return this.loaded.then(function(){return this._cachedAllFilters||(this._cachedAllFilters=t.view.serialize({includeUnselected:!0,wholeModel:!0})),this._cachedAllFilters})},serializeToModels:function(){return this.view.serialize({wholeModel:!0})},serialize:function(){return this.view.serialize({})},deserialize:function(t,e){return this.view.deserialize(t,e)},reset:function(t){this.view.resetFilters(),t&&t.silent||this.view.applyFilters()}}),e.exports=n},{"./views/filters-view":60,backbone:"backbone","bootstrap/dist/js/bootstrap":44,jquery:"jquery","jquery-ui/draggable":47,underscore:"underscore"}],53:[function(t,e){var n=t("backbone");e.exports=n.Model.extend({defaults:{name:"Filter Name",method:"GET",totalCount:0,activeCount:0,_loaded:!1},initialize:function(t){this.set("name",t.name),this.set("group",t.group||t.id),this.set("method",t.method),this.set("column",t.column),this.url=t.url||t.endpoint}})},{backbone:"backbone"}],54:[function(t,e){var n=t("underscore"),i=t("../models/base-filter-model"),a=t("../tree/tree-node-model");e.exports=i.extend({initialize:function(t){i.prototype.initialize.apply(this,[t]),this.getTree()},getTree:function(){var t=this,e=this.get("_loaded");return e||t.set("_loaded",this._createTree().then(function(){return void 0!=t.get("tree")&&t.get("tree").on("change:numSelected",function(e,n){t.set("numSelected",n),t.set("numPossible",t.get("tree").get("numPossible"))}),t.get("tree")})),this.get("_loaded")},getNumSelected:function(){var t=this.get("numSelected");return t&&this.get("numSelected")!==this.get("numPossible")?t:0},serialize:function(t){var e=this.get("tree");if(e){var n=e.serialize(t);return n}return{}},deserialize:function(t){var e=this,n=this.get("tree");if(t){if(!n)return console.warn("deserialize no tree found",e),!1;n.deserialize(t)}},reset:function(){var t=this.get("tree");t&&(t.set("selected",!0),t.set("selected",!1))},_createTree:function(){return this.url||(this.url=this.get("endpoint")),this.fetch({type:this.get("method"),data:"{}"}).fail(function(t,e,n){console.error("failed to get filter ",t,e,n)})},parse:function(t){var e=this;if(n.isArray(t)||(t=[t]),n.isArray(t)&&t.length>0){var i=null;1===t.length?(t[0].filterId&&(t[0].name=t[0].filterId),t[0].values&&(t[0].children=t[0].values),t[0].isSelectable=!1,i=t[0]):i={id:-1,code:"-1",name:e.get("name"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!0};var r=new a(i);e.set("tree",r)}}})},{"../models/base-filter-model":53,"../tree/tree-node-model":57,underscore:"underscore"}],55:[function(t,e){var n=t("jquery"),i=t("../models/generic-filter-model"),a=t("../tree/tree-node-model");e.exports=i.extend({initialize:function(t){this.loaded=n.Deferred(),this._createTree(t.data),i.prototype.initialize.apply(this,[t])},getTree:function(){return this.loaded},_createTree:function(t){var e=this,n={};n=1===t.length?t[0]:{id:-1,code:"-1",name:e.get("displayName"),filterId:e.get("filterId"),children:t,selected:void 0,expanded:!1,isSelectable:!1,createUnkowns:!1};var i=new a(n);this.set("tree",i),e.get("tree").on("change:numSelected",function(t,n){e.set("numSelected",n),e.set("numPossible",e.get("tree").get("numPossible"))}),this.loaded.resolve(i)}})},{"../models/generic-filter-model":54,"../tree/tree-node-model":57,jquery:"jquery"}],56:[function(t,e){var n=t("jquery"),i=t("../models/base-filter-model");e.exports=i.extend({defaults:{selectedStart:null,selectedEnd:null,startYear:"01/01/1961",endYear:"31/12/2015"},initialize:function(t){i.prototype.initialize.apply(this,[t]),this.url=t.endpoint,this.set("_loaded",n.Deferred())},parse:function(t){return t.startYear=t.startYear&&-1!==t.startYear?"01/01/"+t.startYear:this.defaults.startYear,t.endYear=t.endYear&&-1!==t.endYear?"31/12/"+t.endYear:this.defaults.endYear,this.get("_loaded").resolve(),t},serialize:function(){if(this.get("selectedStart")){var t="N/A"!=this.get("column")?this.get("column"):"date",e={};return e[t]={start:this._dateConvert(this.get("selectedStart")),end:this._dateConvert(this.get("selectedEnd"))},e}return null},deserialize:function(t){if(t&&(t[this.get("column")]||t.date)){var e="date";t[this.get("column")]&&(e=this.get("column")),this.set("selectedStart",this._dateConvert(t[e].start)),this.set("selectedEnd",this._dateConvert(t[e].end))}},reset:function(){this.set("selectedStart",this.get("startYear")),this.set("selectedEnd",this.get("endYear"))},_dateConvert:function(t){var e=null;return t&&(t.indexOf("/")>-1?(t=t.split("/"),e=t[2]+"-"+t[1]+"-"+t[0]):t.indexOf("-")>-1&&(t=t.split("-"),e=t[2]+"/"+t[1]+"/"+t[0])),e}})},{"../models/base-filter-model":53,jquery:"jquery"}],57:[function(t,e){var n,i=t("underscore"),a=t("backbone"),r=a.Collection.extend({model:n});n=a.Model.extend({defaults:{selected:void 0,expanded:!0,visible:!0,numSelected:0,numPossible:0,children:null,isSelectable:!1},initialize:function(t){var e=this,a=new r;if(this.set("children",a),Array.isArray(t.children)&&i.each(t.children,function(t){var e=new n(t);a.add(e)}),!a.isEmpty()&&this.get("isSelectable")){var s=new n(e.toJSON());s.set("name","unkown: "+this.get("name")),a.add(s)}this._addListenersToChildren(),this.on("change:selected",e._onSelectChange),this._updateCount()},serialize:function(t){var e={},n=this.get("children");return t.includeUnselected?(this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id],this._serializeChildren(e,n,t)):n.length>0?this.get("numSelected")>=this.get("numPossible")&&this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:this._serializeChildren(e,n,t):this.get("selected")&&(this.get("filterId")&&"Donor Group"!==this.get("filterId")&&"Donor Type"!==this.get("filterId")?e[this.get("filterId")]=t.wholeModel?[this]:[this.id]:e.unassigned=t.wholeModel?[this]:[this.id]),this._mergeUnassigned(e),e},_serializeChildren:function(t,e,n){e.each(function(e){var a=e.serialize(n);i.each(a,function(e,n){e&&(t[n]=t[n]?t[n].concat(e):e)})})},_mergeUnassigned:function(t){if(this.get("filterId")){var e=this.get("filterId");t[e]&&t.unassigned?(t[e]=t[e].concat(t.unassigned),delete t.unassigned):t.unassigned&&(t[e]=t.unassigned,delete t.unassigned)}},deserialize:function(t){var e=this,n=this.get("children");
n.length>0&&n.each(function(n){!n.get("filterId")&&e.get("filterId")&&n.set("filterId",e.get("filterId")),n.deserialize(t)}),t[this.get("filterId")]&&(i(t[this.get("filterId")]).indexOf(this.id)>-1?this.set("selected",!0,{propagation:!0}):0===n.length&&this.set("selected",!1,{propagation:!0}))},_onSelectChange:function(t,e,n){var i=this,a=this.get("children");this.get("selected")?this.set("numSelected",this.get("numPossible")):this.set("numSelected",0),a.isEmpty()||i._updateChildNodes(n.propagation),n.propagation&&i.trigger("updateCount")},_addListenersToChildren:function(){var t=this,e=this.get("children");e.each(function(n){n.on("change:visible",function(){t.set(e.findWhere({visible:!0})?{visible:!0}:{visible:!1})}),n.on("updateCount",function(){t._updateCount(),t.trigger("updateCount")})})},_updateCount:function(){var t=this.get("children"),e={selected:0,possible:0};t.isEmpty()?e={selected:this.get("selected")?1:0,possible:1}:t.each(function(t){e.selected+=t.get("numSelected"),e.possible+=t.get("numPossible")}),this.set("numSelected",e.selected),this.set("numPossible",e.possible)},_updateChildNodes:function(t){var e=this,n=this.get("children");n.isEmpty()||n.each(function(n){n.set("selected",e.get("selected"),{propagation:t})})},filterText:function(t){var e=this.get("children");e.isEmpty()?this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1?this.set("visible",!0):this.set("visible",!1):(this.get("name")&&this.get("name").toLowerCase().indexOf(t)>-1&&this.set("visible",!0),e.each(function(e){e.filterText(t)}))}}),e.exports=n},{backbone:"backbone",underscore:"underscore"}],58:[function(t,e){var n=t("underscore"),i=t("backbone"),a=t("jquery"),r='<div class="node small">\n  <div class="selectable"></div>\n  <div class="toggle-nav">\n    <% if(name.length > 63){ %>\n      <span title="<%= name %>"><%= name.substring(0,60) %>...</span>\n    <% } else { %>\n      <%= name %>\n    <% } %>\n\n\n    <span class="count">(<%= numSelected %> / <%= numPossible %>)</span>\n    <span class="expanded">+</span>\n  </div>\n\n  <% /*TODO: fix hardcode of \'unkown\' */\n  if (obj.name && obj.name.indexOf("unkown")>-1) { %>\n    &nbsp;<a href="#"\n      data-toggle="popover"\n      data-container="body"\n      data-placement="right"\n      data-trigger="click"\n      data-content="projects that aren\'t tagged to a specific child.">\n      <span class="glyphicon glyphicon-info-sign"></span>\n    </a>\n  <%}%>\n</div>\n',s=i.View.extend({tagName:"li",className:"parent_li",template:n.template(r),initialize:function(){},render:function(t){return this.model=t,t&&(this.$el.html(this.template(t.toJSON())),this.renderChildren()),this},renderChildren:function(){var t=a("<ul>");this.$el.append(t);var e=this.model.get("children");e.isEmpty()?(this.$(".expanded").remove(),this.$("> .node > .toggle-nav > .count").text("")):e.each(function(e){var n=new s;t.append(n.render(e).$el)}),this._addModelListeners(),this._addUIListeners(),this._updateSelection(),this._updateExpanded(t)},_addModelListeners:function(){var t=this;this.model.on("change:selected",function(){t._updateSelection()}),this.model.on("change:expanded",function(){t._updateExpanded()}),this.model.on("change:numSelected",function(){t._updateCountUI()}),this.model.on("change:visible",function(){t._updateVisibility()})},_addUIListeners:function(){var t=this;this.$("> .node > .selectable").on("click",function(){t.clickBox()}),this.$("> .node > .toggle-nav").on("click",function(){t.clickName()})},_updateSelection:function(){this._updateCheckboxFill()},_updateCountUI:function(){this.model.get("children").isEmpty()||(this.$("> .node > .toggle-nav > .count").text("("+this.model.get("numSelected")+" / "+this.model.get("numPossible")+")"),this._updateCheckboxFill())},_updateVisibility:function(){this.model.get("visible")?this.$el.show():this.$el.hide()},_updateCheckboxFill:function(){this.model.get("children").isEmpty()?this.model.get("selected")?this.$("> .node > .selectable").addClass("selected"):this.$("> .node > .selectable").removeClass("selected"):this.model.get("numSelected")>0?this.model.get("numSelected")<this.model.get("numPossible")?(this.$("> .node > .selectable").addClass("half-fill"),this.$("> .node > .selectable").removeClass("selected")):(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").addClass("selected")):0===this.model.get("numSelected")&&(this.$("> .node > .selectable").removeClass("half-fill"),this.$("> .node > .selectable").removeClass("selected"))},_updateExpanded:function(t){var e=this.$("> .node > .toggle-nav > .expanded");this.model.get("expanded")?(this.expand(),e.text("-"),e.addClass("open").removeClass("closed")):(this.collapse(),t&&t.find("> li").hide(),e.text("+"),e.addClass("closed").removeClass("open"))},clickBox:function(){this.model.set("selected",!this.model.get("selected"),{propagation:!0})},clickName:function(){this.model.get("children").isEmpty()?this.clickBox():this.model.set("expanded",!this.model.get("expanded"))},collapse:function(){var t=this.$el.find(" > ul > li");t.hide("fast")},expand:function(){var t=this.$el.find(" > ul > li");t.show("fast")}});e.exports=s},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],59:[function(t,e){var n=t("underscore"),i=t("jquery"),a=t("backbone"),r='<li><a href="#"><span data-i18n="amp.gis:pane-subfilters-<%= name.replace(/ /g,\'\') %>"><%= name %></span>   <span data-i18n="amp.gis:pane-filters-all" class=\'filter-count small pull-right\'>all</span></a></li>\n',s='\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n';e.exports=a.View.extend({className:"filter-type",titleTemplate:n.template(r),contentTemplate:n.template(s),initialize:function(t){this.app=t.app},renderFilters:function(){},renderTitle:function(){var t=this;return this.titleEl=this.titleTemplate(this.model.toJSON()),this.$titleEl=i(this.titleEl),this.$titleEl.on("click",function(){return i(this).siblings().removeClass("active"),i(this).addClass("active"),t.$el.html(""),t.renderFilters(),!1}),this}})},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],60:[function(t,e){var n=(t("jquery"),t("underscore")),i=t("backbone"),a=t("amp-translate"),r=t("../views/top-level-filter-view"),s=t("../collections/all-filters-collection"),o='\n<div class="panel-heading">\n  <a type="button" class="close cancel"  aria-hidden="true">&times;</a>\n  <h3 data-i18n="amp.gis:title-filters" class="panel-title">Filters</h3>\n</div>\n<div class="panel-body filter-body">\n\n  <ul class="nav nav-tabs filter-titles" role="tablist">\n  </ul>\n\n  <div class="tab-content filter-options">\n    <img src="img_2/loading-icon.gif" />\n  </div>\n</div>\n<div class="panel-footer">\n  &nbsp;\n  <div class="pull-right" style="display: inline-block; margin-bottom: 5px;">\n    <button type="button" class="btn btn-sm btn-danger reset"  data-i18n="amp.gis:button-reset"  title="Turn off all filters.">Reset</button>\n    <button type="button" class="btn btn-sm btn-warning cancel"  data-i18n="amp.gis:button-cancel"  title="Revert filters to state when opened.">Cancel</button>\n    <button type="button" class="btn btn-sm btn-success apply"  data-i18n="amp.gis:button-apply" >Apply</button>\n  </div>\n</div>\n',l='<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n';e.exports=i.View.extend({id:"tool-filters",name:"Filters",apiURL:"/rest/filters",events:{"click .apply":"applyFilters","click .cancel":"cancel","click .reset":"resetFilters"},filterViewsInstances:{},template:n.template(o),titleTemplate:n.template(l),initialize:function(t){var e=this;this.draggable=t.draggable,this.translator=t.translator,this.firstRender=!0,this._createTopLevelFilterViews(),this.allFilters=new s([],t),this._loaded=this.allFilters._loaded,this._getFilterList().then(function(){return e.allFilters.each(function(t){e._createFilterViews(t)}),this})},_createTopLevelFilterViews:function(){this.filterViewsInstances={donors:new r({name:"Funding Organizations"}),sectors:new r({name:"Sector"}),programs:new r({name:"Programs"}),activity:new r({name:"Activity"}),allAgencies:new r({name:"All Agencies"}),financials:new r({name:"Financial"}),locations:new r({name:"Location"}),others:new r({name:"Other"})}},render:function(){var t=this;return this.$el.addClass("panel panel-primary"),this.draggable&&this.$el.draggable({cancel:".panel-body, .panel-footer",cursor:"move"}),this.firstRender&&(this.$el.html(this.template({})),this.$el.show(),this._getFilterList().done(function(){var e=JSON.parse('{\n  "amp.gis:title-Country": "Country",\n  "amp.gis:title-Region": "Region",\n  "amp.gis:title-Zone": "Zone",\n  "amp.gis:title-District": "District",\n  "amp.gis:title-filters": "Filter",\n  "amp.gis:title-filters": "Filter",\n  "amp.gis:pane-filters-search": "Go",\n  "amp.gis:pane-filters-select": "select all",\n  "amp.gis:pane-filters-deselect": "deselect all",\n  "[placeholder]amp.gis:pane-filters-search-placeholder": "Search...",\n  "amp.gis:pane-filters-FundingOrganizations": "Funding Organizations",\n  "amp.gis:pane-filters-Sector": "Sector",\n  "amp.gis:pane-filters-Programs": "Programs",\n  "amp.gis:pane-filters-Activity": "Activity",\n  "amp.gis:pane-filters-AllAgencies": "All Agencies",\n  "amp.gis:pane-filters-Financial": "Financial",\n  "amp.gis:pane-filters-Other": "Other",\n  "amp.gis:pane-subfilters-Donor": "Donor",\n  "amp.gis:pane-subfilters-Primary": "Primary",\n  "amp.gis:pane-subfilters-Secondary": "Secondary",\n  "amp.gis:pane-subfilters-NationalPlanObjective": "National Plan Objective",\n  "amp.gis:pane-subfilters-ActivityStatus": "Activity Status",\n  "amp.gis:pane-subfilters-ApprovalStatus": "Approval Status",\n  "amp.gis:pane-subfilters-ImplementingAgency": "Implementing Agency",\n  "amp.gis:pane-subfilters-ExecutingAgency": "Executing Agency",\n  "amp.gis:pane-subfilters-BeneficiaryAgency": "Beneficiary Agency",\n  "amp.gis:pane-subfilters-ContractingAgency": "Contracting Agency",\n  "amp.gis:pane-subfilters-AidModality": "Aid Modality",\n  "amp.gis:pane-subfilters-TypeOfAssistance": "Type Of Assistance",\n  "amp.gis:pane-subfilters-Dates": "Dates",\n  "amp.gis:pane-filters-all": "all",\n  "amp.gis:button-reset": "Reset",\n  "amp.gis:button-cancel": "Cancel",\n  "amp.gis:button-apply": "Apply"\n}\n');t.renderFilters(),t.popovers=t.$('[data-toggle="popover"]'),t.popovers.popover(),t.translator?(t.translator.addTranslatorOptions({defaultKeys:e}),t.translator.translateDOM(t.el)):(t.translator=new a({defaultKeys:e}),t.translator.translateDOM(t.el))}),this.firstRender=!1),this},renderFilters:function(){this.$(".filter-options").html("");for(var t in this.filterViewsInstances)if(this.filterViewsInstances.hasOwnProperty(t)){var e=this.filterViewsInstances[t];this.$(".filter-titles").append(e.renderTitle().titleEl),this.$(".filter-options").append(e.renderFilters().el)}this.$(".filter-titles a:first").tab("show")},_getFilterList:function(){return this.allFilters.load()},_createFilterViews:function(t){switch(t.get("group")){case"ActivityBudgetList":case"TypeOfAssistanceList":case"ModeOfPaymentList":case"FinancingInstrumentsList":this.filterViewsInstances.financials.filterCollection.add(t);break;case"ActivityStatusList":case"ActivityApprovalStatus":this.filterViewsInstances.activity.filterCollection.add(t);break;case"Programs":this.filterViewsInstances.programs.filterCollection.add(t);break;case"Sectors":this.filterViewsInstances.sectors.filterCollection.add(t);break;case"Donor":this.filterViewsInstances.donors.filterCollection.add(t);break;case"Role":this.filterViewsInstances.allAgencies.filterCollection.add(t);break;case"LocationList":this.filterViewsInstances.locations.filterCollection.add(t);break;default:this.filterViewsInstances.others.filterCollection.add(t)}},serialize:function(t){var e={columnFilters:{},otherFilters:{}};return this.allFilters.each(function(i){(i.get("id")||i.url)&&(-1!=i.get("name").indexOf("Date")||void 0!=i.get("column")&&-1!=i.get("column").indexOf("Date")?n.extend(e.otherFilters,i.serialize(t)):n.extend(e.columnFilters,i.serialize(t)))}),n.each(e,function(t,i){(!t||n.isEmpty(t))&&delete e[i]}),e},deserialize:function(t,e){t?this.allFilters.each(function(e){(e.get("id")||e.url)&&e.deserialize(-1!=e.get("name").indexOf("Date")||void 0!=e.get("column")&&-1!=e.get("column").indexOf("Date")?t.otherFilters:t.columnFilters)}):console.warn("could not deserialize blob:",t),e&&e.silent||this.applyFilters()},showFilters:function(){this.render(),this.filterStash=null,this._loaded.done(n.bind(function(){this.filterStash=this.serialize({})},this))},resetFilters:function(){this.allFilters.each(function(t){t.reset()})},applyFilters:function(){this._loaded.done(n.bind(function(){var t=this.serialize({});this.trigger("apply",t)},this))},cancel:function(){this.filterStash&&this.deserialize(this.filterStash,{silent:!0}),this.trigger("cancel",this.filterStash)}})},{"../collections/all-filters-collection":50,"../views/top-level-filter-view":62,"amp-translate":65,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],61:[function(t,e){var n=t("underscore"),i=t("../tree/tree-node-view"),a=t("../views/base-filter-view"),r='<div class="search-form">\n  <div class="input-group form-group">\n    <input type="text" data-i18n="[placeholder]amp.gis:pane-filters-search-placeholder" class="form-control search-text" placeholder="Search...">\n    <span class="input-group-btn">\n      <button data-i18n="amp.gis:pane-filters-search" class="btn btn-success">Go</button>\n    </span>\n  </div><!-- /input-group -->\n</div>\n<div class="toggle-all">\n  <em>\n    <a href="#" data-i18n="amp.gis:pane-filters-select" class="select-all" >select all</a> /\n    <a href="#"  data-i18n="amp.gis:pane-filters-deselect" class="select-none" >deselect all</a>\n  </em>\n</div>\n\n<div class="tree tree-container" style=""></div><!--display:none;-->\n';e.exports=a.extend({className:a.prototype.className+" filter-generic",template:n.template(r),_loaded:null,events:{},initialize:function(t){var e=this;a.prototype.initialize.apply(this,[t]),this.model=t.model,this.treeView=new i,this.model.getTree().then(function(t){t?(e._updateCountInMenu(),t.on("change:numSelected",function(){e._updateCountInMenu()})):console.warn("no tree for: ",e.model)})},searchKeyUp:function(t){(13===t.keyCode||""===this.$(".search-text").val()||this.$(".search-text").val().length>1)&&this.model.get("tree").filterText(this.$(".search-text").val().toLowerCase())},_updateCountInMenu:function(){this.$titleEl&&this.model.get("tree")&&(this.model.get("tree").get("numSelected")===this.model.get("tree").get("numPossible")||0===this.model.get("tree").get("numSelected")?(this.$titleEl.find(".filter-count").text("all"),this.$el.removeClass("active")):(this.$titleEl.find(".filter-count").text(this.model.get("tree").get("numSelected")+"/"+this.model.get("tree").get("numPossible")),this.$el.addClass("active")))},renderTitle:function(){var t=this;return void 0==t.model.attributes.data&&t.model.attributes.tree.attributes.children.length>0?(a.prototype.renderTitle.apply(t),this._updateCountInMenu()):void 0!=t.model.attributes.data&&t.model.attributes.data.length>0&&(a.prototype.renderTitle.apply(t),this._updateCountInMenu()),t},renderFilters:function(){var t=this;return a.prototype.renderFilters.apply(this),this.model.getTree().then(function(e){t.$el.html(t.template(t.model.toJSON())),t.$(".select-none").on("click",function(){return t._selectNone(),!1}),t.$(".select-all").on("click",function(){return t._selectAll(),!1}),t.$("input.search-text").on("keyup",function(e){t.searchKeyUp(e)}),e?(t.$(".tree-container").append(t.treeView.render(t.model.get("tree")).$el),e.set("expanded",!0),e.filterText("")):t.$(".tree-container").append("")}).fail(function(){console.error("renderFilters failed :(")}),this},_selectAll:function(){this.model.get("tree").set("selected",!1),this.model.get("tree").set("selected",!0)},_selectNone:function(){this.model.get("tree").set("selected",!0),this.model.get("tree").set("selected",!1)}})},{"../tree/tree-node-view":58,"../views/base-filter-view":59,underscore:"underscore"}],62:[function(t,e){var n=t("underscore"),i=t("jquery"),a=t("backbone"),r='<li class=""><a data-i18n="amp.gis:pane-filters-<%= name.replace(/ /g,\'\') %>" href="#filter-pane-<%= name.replace(/ /g,\'\') %>" role="tab" data-toggle="tab"><%= name %></a></li>\n',s='<ul class="sub-filters-titles nav nav-pills nav-stacked">\n</ul>\n<div class="sub-filters-content">\n  <img src="img_2/loading-icon.gif" />\n</div>\n',o=t("../views/generic-filter-view"),l=t("../views/years-filter-view"),u=t("../models/years-filter-model");e.exports=a.View.extend({className:"tab-pane",titleTemplate:n.template(r),contentTemplate:n.template(s),filterCollection:null,viewList:[],name:"tbd",initialize:function(t){var e=this;this.name=t.name,this.filterCollection=new a.Collection,this.filterCollection.on("change:numSelected",function(){e._refreshTitle()})},renderFilters:function(){var t=this,e=null,n=!0;return this.$el.attr("id","filter-pane-"+this.name.replace(/ /g,"")),this.$el.html(this.contentTemplate()),this.filterCollection.each(function(i){i instanceof u?(e=new l({model:i,el:t.$(".sub-filters-content")}),t.viewList.push(e)):(e=new o({model:i,el:t.$(".sub-filters-content")}),t.viewList.push(e)),t.$(".sub-filters-titles").append(e.renderTitle().$titleEl),n&&(n=!1,e.renderFilters(),t.$(".sub-filters-titles li:first").addClass("active"))}),this},_refreshTitle:function(){var t=0,e="";this.filterCollection.each(function(e){e.getNumSelected&&(t+=e.getNumSelected())}),0!==t&&(e=t),i("#"+this.name.replace(/ /g,"")+" .title-count").text(e)},renderTitle:function(){return this.titleEl=this.titleTemplate({name:this.name}),this}})},{"../models/years-filter-model":56,"../views/generic-filter-view":61,"../views/years-filter-view":63,backbone:"backbone",jquery:"jquery",underscore:"underscore"}],63:[function(t,e){var n=t("underscore"),i=t("../views/base-filter-view");t("../lib/jquery.nouislider.min.js"),t("jquery-ui/datepicker");var a='\n  <h3 class="title text-center"><span class="start-year">1990</span> <strong>-</strong> <span class="end-year">2015</span></h3>\n   <div class="year-slider"></div>\n\n   <p>Start Date: <input type="text" id="start-date" class="date-picker"></p>\n   <p>End Date: <input type="text" id="end-date" class="date-picker"></p>\n';e.exports=i.extend({className:i.prototype.className+" filter-years",template:n.template(a),_loaded:null,initialize:function(t){var e=this;i.prototype.initialize.apply(this,[t]),this.model=t.model,this._loaded=this.model.fetch().then(function(){e.model.get("selectedStart")||(e.model.set("selectedStart",e.model.get("startYear")),e.model.set("selectedEnd",e.model.get("endYear")))}),this.listenTo(this.model,"change",this._updateTitle)},renderFilters:function(){var t=this;return i.prototype.renderFilters.apply(this),this.$el.html(this.template(this.model.toJSON())),this._loaded.then(function(){t._renderDatePickers(),t._updateTitle()}),this},_renderDatePickers:function(){var t=this;this.$("#start-date").datepicker({defaultDate:this.model.get("selectedStart"),minDate:this.model.get("startYear"),maxDate:this.model.get("endYear"),dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#end-date").datepicker("option","minDate",e),t.model.set("selectedStart",e)}}),this.$("#end-date").datepicker({defaultDate:this.model.get("selectedEnd"),minDate:this.model.get("startYear"),maxDate:this.model.get("endYear"),dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,numberOfMonths:1,yearRange:"c-60:c+60",onClose:function(e){t.$("#start-date").datepicker("option","maxDate",e),t.model.set("selectedEnd",e)}}),this.$("#start-date").val(this.model.get("selectedStart")),this.$("#end-date").val(this.model.get("selectedEnd"))},renderTitle:function(){return i.prototype.renderTitle.apply(this),this._updateTitle(),this},_updateTitle:function(){this.$titleEl.find(".filter-count").text(this.model.get("selectedStart")+" - "+this.model.get("selectedEnd")),this.$(".start-year").text(this.model.get("selectedStart")),this.$(".end-year").text(this.model.get("selectedEnd"))},_renderSlider:function(){var t=this;this.slider=window.jQuery(this.$(".year-slider")).noUiSlider({start:[t.model.get("selectedStart"),t.model.get("selectedEnd")],step:1,connect:!0,range:{min:t.model.get("startYear"),max:t.model.get("endYear")},serialization:{lower:[window.jQuery.Link({target:window.jQuery(".start-year")})],upper:[window.jQuery.Link({target:window.jQuery(".end-year")})],format:{decimals:0}}}),this.slider.on("change",function(){t.model.set("selectedStart",parseInt(t.$(".start-year").text(),10))}),this.slider.on("change",function(){t.model.set("selectedEnd",parseInt(t.$(".end-year").text(),10))})}})},{"../lib/jquery.nouislider.min.js":51,"../views/base-filter-view":59,"jquery-ui/datepicker":46,underscore:"underscore"}],64:[function(t,e){function n(t,e){return this instanceof n?(this.message=t,this.original=e,this.toString=function(){return this.message},this):new SateLoadError(t,e)}function i(){"use strict";if(!(this instanceof i))throw new Error("State needs to be created with the `new` keyword.");this.initialize.apply(this,arguments)}var a=t("underscore"),r=t("backbone");a.extend(i.prototype,r.Events,{initialize:function(t){this.saved=t.saved,this._stateRegistry={},this._unclaimed={},t.url&&this.listenToURL(a(t).pick("url","prefix","autoinit"))},listenToURL:function(t){this._url=t.url,this._urlPrefixes=t.prefix||["saved/"],this._urlPrefixes.constructor!==Array&&(this._urlPrefixes=[this._urlPrefixes]),this.listenTo(this._url,"change",this.urlMaybeLoad),t.autoinit&&this._url.hash()&&this.urlMaybeLoad(this._url.hash())},urlMaybeLoad:function(t){var e=this,n=!1;t=t||this._url.hash(),a.each(this._urlPrefixes,function(i){if(0===t.indexOf(i)){var a=t.split(i)[1];a&&(n=!0,e[e.saved?"loadById":"load"](a,i))}}),n||""!==t||e.reset()},toHash:function(t){return a(this).has("_url")?this._urlPrefixes[0]+t:void console.error("Cannot generate URL hash without being initialized with URL instance")},loadById:function(t,e){this.loadPromise=this.saved.load(t,e),this.loadPromise.done(a(function(t){this.load(t.get("stateBlob"))}).bind(this)).fail(function(){throw new n("Could not load state by id: "+t)})},load:function(t){var e=this.parse(t),n=!1;a.each(e,function(t,e){var i=this._stateRegistry[e];a.isUndefined(i)?this._unclaimed[e]=t:a.isEqual(i.get(),t)||(i.set(t),n=!0)},this),this.trigger("load"),n&&this.trigger("change")},parse:function(t){var e;try{e=JSON.parse(t)}catch(i){throw i instanceof SyntaxError?new n("Could not parse state",i):i}return e},reset:function(){var t=!1;a.each(this._stateRegistry,function(e){var n=e.get();a.isEqual(n,e.empty)||(e.set(e.empty),t=!0)},this),this.trigger("reset"),t&&this.trigger("change")},freeze:function(t){t=t||{};var e={};a.each(this._stateRegistry,function(t,n){var i=t.get();e[n]=a.clone(i)});var n=JSON.stringify(e);return t.toURL&&(this._url||console.error("State cannot change URL if it does have a ref to it"),this._url.hash(this._urlPrefixes[0]+encodeURIComponent(n))),this.trigger("freeze",n),n},register:function(t,e,n){if(e in this._stateRegistry)throw new Error("Attempted registration of duplicate state id "+e);this._stateRegistry[e]={get:a.bind(n.get,t),set:a.bind(n.set,t),empty:n.empty},e in this._unclaimed?(this._stateRegistry[e].set(this._unclaimed[e]),delete this._unclaimed[e]):this._stateRegistry[e].set(n.empty),this.trigger("register")}}),i.StateLoadError=n,e.exports=i},{backbone:"backbone",underscore:"underscore"}],65:[function(t,e){function n(t){"use strict";if(!(this instanceof n))throw new Error("Translator needs to be created with the `new` keyword.");var e={defaultKeys:{},availableLanguages:null,translations:{locales:{en:null}},ajax:a.ajax};t&&i.defaults(this,t,e),this._promise=null,this._currentLng="tmp",this._firstGet=null,this.initTranslations=function(){var t=this;this._promise=this._getTranslationsFromAPI(t.defaultKeys).fail(function(t,e,n){console.error("failed ",t,e,n)}),this.promise=this._promise.promise()},this.addTranslatorOptions=function(t){i.defaults(this.defaultKeys,t.defaultKeys),this._firstGet=null},this.getAvailableLanguages=function(){var t=a.Deferred();return this.availableLanguages?t.resolve(this.availableLanguages):this._initAvailableLanguages().then(function(){t.resolve(this.availableLanguages)}),t},this._initAvailableLanguages=function(){return this.availableLanguages=new r.Collection([]),this.availableLanguages.url="/rest/translations/languages",this.availableLanguages.fetch()},this.setLanguage=function(t){return this._currentLng=t,this._apiCall("/rest/translations/languages/"+t,null,"GET")},this.translateDOM=function(t){var e=a(t);return this.getTranslations().then(function(t){return a.each(t,function(t,n){t.indexOf("[placeholder]")>-1?a('[data-i18n="'+t+'"]',e).attr("placeholder",n):a('[data-i18n="'+t+'"]',e).text(n)}),e})},this.translateList=function(t){var e=function(t,e){return i.each(t,function(t,n,i){i[n]=e[n]?e[n]:n[t]}),t};return this.getTranslations().then(function(n){var i=e(t,n);return i})},this.translateSync=function(t,e){"resolved"!==this.getTranslations().state()&&console.error("translateSync was called when getTranslations is not successfully resolved");var n=this.translations.locales[this._currentLng][t];return void 0===n&&(console.warn("No translation has been loaded for",t),n=e||t),n},this.getTranslations=function(){return this._firstGet||(this._firstGet=this._getTranslationsFromAPI(this.defaultKeys,this._currentLng)),this._firstGet},this._getTranslationsFromAPI=function(t,e){var n=this,i="/rest/translations/label-translations";return this._apiCall(i,t,"POST").then(function(t){return e?n.translations.locales[e]=t:(e=this._currentLng,n.translations.locales[e]=t),t})},this._apiCall=function(t,e,n){var i={headers:{Accept:"application/json","Content-Type":"application/json"},type:n,url:t,dataType:"json"};return e&&(i.data=JSON.stringify(e)),this.ajax(i)},this.initTranslations()}var i=t("underscore"),a=t("jquery"),r=t("backbone");e.exports=n},{backbone:"backbone",jquery:"jquery",underscore:"underscore"}],66:[function(t,e){function n(){"use strict";if(!(this instanceof n))throw new Error("URL needs to be created with the `new` keyword.");if(window._ampUrler)throw new Error("Another instance of URL is already managing window.location");window._ampUrler=!0,this.initialize.apply(this,arguments)}var i=t("underscore"),a=t("backbone");i.extend(n.prototype,a.Events,{initialize:function(t){t=t||{},this.root=t.root||window.location.host+window.location.pathname,i.bindAll(this,"change"),window.addEventListener("hashchange",this.change)},hash:function(t,e){return arguments.length?(e.silent&&window.removeEventListener("hashchange",this.change),window.location.hash=t,e.silent&&window.addEventListener("hashchange",this.change),void 0):window.location.hash.slice(1)},full:function(){return""+window.location},change:function(){this.trigger("change",this.hash())}}),e.exports=n},{backbone:"backbone",underscore:"underscore"}]},{},[1]);