<?xml version="1.0" encoding="UTF-8"?>
<tns:patch closeOnSuccess="true" retryOnFail="true"
	xmlns:tns="http://docs.ampdev.net/schemas/xmlpatcher" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://docs.ampdev.net/schemas/xmlpatcher ../doc/xmlpatcher.xsd ">
	<jira>AMP-11539</jira>
	<keyword>global settings</keyword>
	<keyword>versioning</keyword>
	<author>Gabriel Inchauspe</author>
	<description>Add an option in Global Settings to setup how many
		activity versions would be saved.</description>

	<trigger type="all">
		<condition type="entryInTableExists" tablename="amp_global_settings"
			columnname="settingsName" columnvalue="Activity Versions Queue Size"
			inverted="true" />
	</trigger>

	<apply>
		<script>
			<lang delimiter=";" type="postgres">
				INSERT INTO amp_global_settings (id, settingsName, settingsValue, possibleValues, description, section)
				VALUES ((Select (max(id) + 1) from amp_global_settings), 'Activity Versions Queue Size', '5', 't_Integer', 'Max. number of versions for each activity, if 0 then versioning is disabled.', 'general');
			</lang>
		</script>
	</apply>

</tns:patch>