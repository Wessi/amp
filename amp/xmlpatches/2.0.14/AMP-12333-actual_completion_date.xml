<?xml version="1.0" encoding="UTF-8"?>
<tns:patch closeOnSuccess="true" retryOnFail="true" xmlns:tns="http://docs.ampdev.net/schemas/xmlpatcher" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://docs.ampdev.net/schemas/xmlpatcher ../doc/xmlpatcher.xsd ">
  <jira>AMP-12333</jira>
  <keyword>Reports columns </keyword>
  <author>Diego Dimunzio</author>
  <description>Add the actual completion date to the report generator</description>
  
  <apply>
    <script>
      <lang delimiter=";" type="postgres">
        CREATE OR REPLACE VIEW v_actual_completion_date AS 
 	    SELECT amp_activity.amp_activity_id, amp_activity.actual_completion_date
        FROM amp_activity
        ORDER BY amp_activity.amp_activity_id;
		INSERT INTO amp_columns (columnId,columnName,aliasName,cellType,extractorView) VALUES 
		((Select (max(columnId) + 1) from amp_columns),'Actual Completion Date','actual completion date','org.dgfoundation.amp.ar.cell.TextCell','v_actual_completion_date');
	 </lang>
    </script>
  </apply>

</tns:patch>
